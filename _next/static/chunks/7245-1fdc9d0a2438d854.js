(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7245],{99855:function(e,t,r){"use strict";r.r(t);var n=function(e,t){var r=e.reduce(function(t,r){if(r<0)throw Error("Probability must be a positive: p["+e.indexOf(r)+"]="+r);return t+r},0);if(0===r)throw Error("Probability sum must be greater than zero.");for(var n=e.map(function(e){return e*t/r}),i={prob:Array(t),alias:Array(t)},o=[],s=[],a=t-1;a>=0;a--)n[a]<1?o.push(a):s.push(a);for(;o.length>0&&s.length>0;){var u=o.pop(),l=s.pop();i.prob[u]=n[u],i.alias[u]=l,n[l]=n[l]+n[u]-1,n[l]<1?o.push(l):s.push(l)}for(;s.length>0;)i.prob[s.pop()]=1;for(;o.length>0;)i.prob[o.pop()]=1;return i},i=function(e,t,r){var n=Math.floor(r()*e.prob.length);return t[r()<e.prob[n]?n:e.alias[n]]},o=function(e,t,r,n){if(void 0===n&&(n=1),1===n)return i(e,t,r);for(var o=[],s=0;s<n;s++)o.push(i(e,t,r));return o},s=function(e,t,r){if(void 0===r&&(r=Math.random),!Array.isArray(e))throw Error("Probabilities must be an array.");if(0===e.length)throw Error("Probabilities array must not be empty.");var i=e.length,s=null!=t?t:Array.from({length:i},function(e,t){return t}),a=n(e,i);return{next:function(e){return void 0===e&&(e=1),o(a,s,r,e)}}};t.default=s},50893:function(e,t,r){"use strict";var n,i,o,s=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});var a=r(47219),u=r(46578);let l={BTC_SIGN_REQUEST:new a.RegistryType("btc-sign-request",8101),BTC_SIGNATURE:new a.RegistryType("btc-signature",8102)},{decodeToDataItem:c,RegistryTypes:f}=a.extend;(n=t.DataType||(t.DataType={}))[n.message=1]="message",function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.derivationPaths=4]="derivationPaths",e[e.addresses=5]="addresses",e[e.origin=6]="origin"}(i||(i={}));class h extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>l.BTC_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataype=()=>this.dataType,this.getDerivationPaths=()=>this.derivationPaths.map(e=>e.getPath()),this.getAddress=()=>this.addresses,this.getOrigin=()=>this.origin,this.toDataItem=()=>{let e={};return e[i.requestId]=new a.DataItem(this.requestId,f.UUID.getTag()),e[i.signData]=this.signData,e[i.dataType]=this.dataType,e[i.derivationPaths]=this.derivationPaths.map(e=>{let t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}),this.addresses&&(e[i.addresses]=this.addresses),this.origin&&(e[i.origin]=this.origin),new a.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.derivationPaths=e.derivationPaths,this.addresses=e.addresses,this.origin=e.origin}static constructBtcRequest(e,r,n,i,o,l,c){let f=o.map((e,t)=>{let n=e.replace(/[m|M]\//,"").split("/").map(e=>{let t=parseInt(e.replace("'","")),r=!1;return e.endsWith("'")&&(r=!0),new a.PathComponent({index:t,hardened:r})});return new a.CryptoKeypath(n,s.from(r[t],"hex"))});return new h({requestId:s.from(u.parse(e)),signData:n,dataType:i||t.DataType.message,derivationPaths:f,addresses:l||void 0,origin:c||void 0})}}h.fromDataItem=e=>{let t=e.getData(),r=t[i.requestId]?t[i.requestId].getData():void 0;return new h({requestId:r,signData:t[i.signData],dataType:t[i.dataType],derivationPaths:t[i.derivationPaths].map(e=>a.CryptoKeypath.fromDataItem(e)),addresses:t[i.addresses]?t[i.addresses]:void 0,origin:t[i.origin]?t[i.origin]:void 0})},h.fromCBOR=e=>{let t=c(e);return h.fromDataItem(t)};let{RegistryTypes:p,decodeToDataItem:d}=a.extend;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.publicKey=3]="publicKey"}(o||(o={}));class y extends a.RegistryItem{constructor(e,t,r){super(),this.getRegistryType=()=>l.BTC_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getPublicKey=()=>this.publicKey,this.toDataItem=()=>{let e={};return e[o.requestId]=new a.DataItem(this.requestId,p.UUID.getTag()),e[o.signature]=this.signature,e[o.publicKey]=this.publicKey,new a.DataItem(e)},this.signature=e,this.requestId=t,this.publicKey=r}}y.fromDataItem=e=>{let t=e.getData();return new y(t[o.signature],t[o.requestId].getData(),t[o.publicKey])},y.fromCBOR=e=>{let t=d(e);return y.fromDataItem(t)},a.patchTags(Object.values(l).filter(e=>!!e.getTag()).map(e=>e.getTag())),Object.keys(a).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}),t.BtcSignRequest=h,t.BtcSignature=y},35487:function(e,t,r){"use strict";e.exports=r(50893)},34310:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bytes=void 0;let n=r(55401),i=r(45941),o=r(6392);class s extends i.RegistryItem{constructor(e){super(),this.bytes=e,this.getRegistryType=()=>o.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new n.DataItem(this.bytes)}}t.Bytes=s,s.fromDataItem=e=>{let t=e.getData();if(!t)throw Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new s(t)},s.fromCBOR=e=>{let t=(0,n.decodeToDataItem)(e);return s.fromDataItem(t)}},33621:function(e,t,r){"use strict";var n,i=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoAccount=void 0;let o=r(47219),s=r(55401),a=r(45941),u=r(6392);!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.outputDescriptors=2]="outputDescriptors"}(n||(n={}));class l extends a.RegistryItem{constructor(e,t){super(),this.masterFingerprint=e,this.outputDescriptors=t,this.getRegistryType=()=>u.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{let e={};return this.masterFingerprint&&(e[n.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(e[n.outputDescriptors]=this.outputDescriptors.map(e=>e.toDataItem())),new s.DataItem(e)}}}t.CryptoAccount=l,l.fromDataItem=e=>{let t=e.getData(),r=i.alloc(4),s=t[n.masterFingerprint];return s&&r.writeUInt32BE(s,0),new l(r,t[n.outputDescriptors].map(e=>o.CryptoOutput.fromDataItem(e)))},l.fromCBOR=e=>{let t=(0,s.decodeToDataItem)(e);return l.fromDataItem(t)}},10712:function(e,t,r){"use strict";var n,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoCoinInfo=t.Network=t.Type=void 0;let s=r(55401),a=r(45941),u=r(6392);!function(e){e.type="1",e.network="2"}(n||(n={})),function(e){e[e.bitcoin=0]="bitcoin"}(i=t.Type||(t.Type={})),function(e){e[e.mainnet=0]="mainnet",e[e.testnet=1]="testnet"}(o=t.Network||(t.Network={}));class l extends a.RegistryItem{constructor(e,t){super(),this.type=e,this.network=t,this.getRegistryType=()=>u.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||i.bitcoin,this.getNetwork=()=>this.network||o.mainnet,this.toDataItem=()=>{let e={};return this.type&&(e[n.type]=this.type),this.network&&(e[n.network]=this.network),new s.DataItem(e)}}}t.CryptoCoinInfo=l,l.fromDataItem=e=>{let t=e.getData();return new l(t[n.type],t[n.network])},l.fromCBOR=e=>{let t=(0,s.decodeToDataItem)(e);return l.fromDataItem(t)}},2333:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoECKey=void 0;let i=r(55401),o=r(45941),s=r(6392);!function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"}(n||(n={}));class a extends o.RegistryItem{constructor(e){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{let e={};return this.curve&&(e[n.curve]=this.curve),void 0!==this.privateKey&&(e[n.private]=this.privateKey),e[n.data]=this.data,new i.DataItem(e)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=e.data,this.curve=e.curve,this.privateKey=e.privateKey||void 0}}t.CryptoECKey=a,a.fromDataItem=e=>{let t=e.getData(),r=t[n.curve],i=t[n.private],o=t[n.data];if(!o)throw Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new a({data:o,curve:r,privateKey:i})},a.fromCBOR=e=>{let t=(0,i.decodeToDataItem)(e);return a.fromDataItem(t)}},79610:function(e,t,r){"use strict";var n,i=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoHDKey=void 0;let o=r(58334),s=r(10712),a=r(15983),u=r(55401),l=r(45941),c=r(6392);!function(e){e[e.is_master=1]="is_master",e[e.is_private=2]="is_private",e[e.key_data=3]="key_data",e[e.chain_code=4]="chain_code",e[e.use_info=5]="use_info",e[e.origin=6]="origin",e[e.children=7]="children",e[e.parent_fingerprint=8]="parent_fingerprint",e[e.name=9]="name",e[e.note=10]="note"}(n||(n={}));class f extends l.RegistryItem{constructor(e){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var e,t,r;let n,s;let a=0,u=i.alloc(4).fill(0);if(this.isMaster())n=i.from("0488ADE4","hex"),s=0,a=0;else{s=(null===(e=this.getOrigin())||void 0===e?void 0:e.getComponents().length)||(null===(t=this.getOrigin())||void 0===t?void 0:t.getDepth());let o=null===(r=this.getOrigin())||void 0===r?void 0:r.getComponents(),l=o[o.length-1];l&&(a=l.isHardened()?l.getIndex()+2147483648:l.getIndex(),this.getParentFingerprint()&&(u=this.getParentFingerprint())),n=this.isPrivateKey()?i.from("0488ADE4","hex"):i.from("0488B21E","hex")}let l=i.alloc(1);l.writeUInt8(s,0);let c=i.alloc(4);c.writeUInt32BE(a,0);let f=this.getChainCode(),h=this.getKey();return(0,o.encode)(i.concat([n,l,u,c,f,h]))},this.getRegistryType=()=>c.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var e,t,r,n,i,o,s;let a="";return this.getOrigin()&&(null===(e=this.getOrigin())||void 0===e?void 0:e.getSourceFingerprint())&&(null===(t=this.getOrigin())||void 0===t?void 0:t.getPath())&&(a+=`${null===(n=null===(r=this.getOrigin())||void 0===r?void 0:r.getSourceFingerprint())||void 0===n?void 0:n.toString("hex")}/${null===(i=this.getOrigin())||void 0===i?void 0:i.getPath()}`),a+=this.getBip32Key(),this.getChildren()&&(null===(o=this.getChildren())||void 0===o?void 0:o.getPath())&&(a+=`/${null===(s=this.getChildren())||void 0===s?void 0:s.getPath()}`),a},this.setupMasterKey=e=>{this.master=!0,this.key=e.key,this.chainCode=e.chainCode},this.setupDeriveKey=e=>{this.master=!1,this.privateKey=e.isPrivateKey,this.key=e.key,this.chainCode=e.chainCode,this.useInfo=e.useInfo,this.origin=e.origin,this.children=e.children,this.parentFingerprint=e.parentFingerprint,this.name=e.name,this.note=e.note},this.toDataItem=()=>{let e={};if(this.master)e[n.is_master]=!0,e[n.key_data]=this.key,e[n.chain_code]=this.chainCode;else{if(void 0!==this.privateKey&&(e[n.is_private]=this.privateKey),e[n.key_data]=this.key,this.chainCode&&(e[n.chain_code]=this.chainCode),this.useInfo){let t=this.useInfo.toDataItem();t.setTag(this.useInfo.getRegistryType().getTag()),e[n.use_info]=t}if(this.origin){let t=this.origin.toDataItem();t.setTag(this.origin.getRegistryType().getTag()),e[n.origin]=t}if(this.children){let t=this.children.toDataItem();t.setTag(this.children.getRegistryType().getTag()),e[n.children]=t}this.parentFingerprint&&(e[n.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),void 0!==this.name&&(e[n.name]=this.name),void 0!==this.note&&(e[n.note]=this.note)}return new u.DataItem(e)},e.isMaster?this.setupMasterKey(e):this.setupDeriveKey(e)}}t.CryptoHDKey=f,f.fromDataItem=e=>{let t;let r=e.getData(),o=!!r[n.is_master],u=r[n.is_private],l=r[n.key_data],c=r[n.chain_code],h=r[n.use_info]?s.CryptoCoinInfo.fromDataItem(r[n.use_info]):void 0,p=r[n.origin]?a.CryptoKeypath.fromDataItem(r[n.origin]):void 0,d=r[n.children]?a.CryptoKeypath.fromDataItem(r[n.children]):void 0,y=r[n.parent_fingerprint];return y&&(t=i.alloc(4)).writeUInt32BE(y,0),new f({isMaster:o,isPrivateKey:u,key:l,chainCode:c,useInfo:h,origin:p,children:d,parentFingerprint:t,name:r[n.name],note:r[n.note]})},f.fromCBOR=e=>{let t=(0,u.decodeToDataItem)(e);return f.fromDataItem(t)}},15983:function(e,t,r){"use strict";var n,i=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoKeypath=void 0;let o=r(55401),s=r(33213),a=r(45941),u=r(6392);!function(e){e[e.components=1]="components",e[e.source_fingerprint=2]="source_fingerprint",e[e.depth=3]="depth"}(n||(n={}));class l extends a.RegistryItem{constructor(e=[],t,r){super(),this.components=e,this.sourceFingerprint=t,this.depth=r,this.getRegistryType=()=>u.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>{if(0!==this.components.length)return this.components.map(e=>`${e.isWildcard()?"*":e.getIndex()}${e.isHardened()?"'":""}`).join("/")},this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{let e={},t=[];return this.components&&this.components.forEach(e=>{e.isWildcard()?t.push([]):t.push(e.getIndex()),t.push(e.isHardened())}),e[n.components]=t,this.sourceFingerprint&&(e[n.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),void 0!==this.depth&&(e[n.depth]=this.depth),new o.DataItem(e)}}}t.CryptoKeypath=l,l.fromDataItem=e=>{let t;let r=e.getData(),o=[],a=r[n.components];if(a)for(let e=0;e<a.length;e+=2){let t=a[e+1],r=a[e];"number"==typeof r?o.push(new s.PathComponent({index:r,hardened:t})):o.push(new s.PathComponent({hardened:t}))}let u=r[n.source_fingerprint];return u&&(t=i.alloc(4)).writeUInt32BE(u,0),new l(o,t,r[n.depth])},l.fromCBOR=e=>{let t=(0,o.decodeToDataItem)(e);return l.fromDataItem(t)}},36868:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoOutput=void 0;let n=r(2333),i=r(79610),o=r(55401),s=r(96112),a=r(45941),u=r(6392),l=r(53021);class c extends a.RegistryItem{constructor(e,t){super(),this.scriptExpressions=e,this.cryptoKey=t,this.getRegistryType=()=>u.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>this.cryptoKey instanceof i.CryptoHDKey?this.cryptoKey:void 0,this.getECKey=()=>this.cryptoKey instanceof n.CryptoECKey?this.cryptoKey:void 0,this.getMultiKey=()=>this.cryptoKey instanceof s.MultiKey?this.cryptoKey:void 0,this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=e=>e>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[e].getExpression()}(${this._toOutputDescriptor(e+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let e=this.cryptoKey.toDataItem();return(this.cryptoKey instanceof n.CryptoECKey||this.cryptoKey instanceof i.CryptoHDKey)&&e.setTag(this.cryptoKey.getRegistryType().getTag()),[...this.scriptExpressions].reverse().forEach(t=>{let r=t.getTag();void 0===e.getTag()?e.setTag(r):e=new o.DataItem(e,r)}),e}}}t.CryptoOutput=c,c.fromDataItem=e=>{let t=[],r=e;for(;;){let e=r.getTag(),n=l.ScriptExpression.fromTag(e);if(n){if(t.push(n),r.getData() instanceof o.DataItem)e=(r=r.getData()).getTag();else break}else break}let a=t.length;return a>0&&(t[a-1].getExpression()===l.ScriptExpressions.MULTISIG.getExpression()||t[a-1].getExpression()===l.ScriptExpressions.SORTED_MULTISIG.getExpression())?new c(t,s.MultiKey.fromDataItem(r)):r.getTag()===u.RegistryTypes.CRYPTO_HDKEY.getTag()?new c(t,i.CryptoHDKey.fromDataItem(r)):new c(t,n.CryptoECKey.fromDataItem(r))},c.fromCBOR=e=>{let t=(0,o.decodeToDataItem)(e);return c.fromDataItem(t)}},62795:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoPSBT=void 0;let n=r(55401),i=r(45941),o=r(6392);class s extends i.RegistryItem{constructor(e){super(),this.psbt=e,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new n.DataItem(this.psbt)}}t.CryptoPSBT=s,s.fromDataItem=e=>{let t=e.getData();if(!t)throw Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new s(t)},s.fromCBOR=e=>{let t=(0,n.decodeToDataItem)(e);return s.fromDataItem(t)}},21141:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URRegistryDecoder=void 0;let n=r(16139),i=r(47219),o=r(6392),s=r(83570);class a extends n.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{let e=this.resultUR();switch(e.type){case o.RegistryTypes.BYTES.getType():return i.Bytes.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_HDKEY.getType():return i.CryptoHDKey.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_KEYPATH.getType():return i.CryptoKeypath.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_COIN_INFO.getType():return i.CryptoCoinInfo.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_ECKEY.getType():return i.CryptoECKey.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_OUTPUT.getType():return i.CryptoOutput.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_PSBT.getType():return i.CryptoPSBT.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_ACCOUNT.getType():return i.CryptoAccount.fromCBOR(e.cbor);default:throw new s.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${e.type} is not supported now`)}}}}t.URRegistryDecoder=a},96112:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MultiKey=void 0;let i=r(2333),o=r(79610),s=r(86685),a=r(45941),u=r(6392);!function(e){e[e.threshold=1]="threshold",e[e.keys=2]="keys"}(n||(n={}));class l extends a.RegistryItem{constructor(e,t){super(),this.threshold=e,this.keys=t,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{let e={};e[n.threshold]=this.threshold;let t=this.keys.map(e=>{let t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t});return e[n.keys]=t,new s.DataItem(e)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map(e=>e.getOutputDescriptorContent()).join(",")].join(",")}}t.MultiKey=l,l.fromDataItem=e=>{let t=e.getData(),r=t[n.threshold],s=t[n.keys],a=[];return s.forEach(e=>{e.getTag()===u.RegistryTypes.CRYPTO_HDKEY.getTag()?a.push(o.CryptoHDKey.fromDataItem(e)):e.getTag()===u.RegistryTypes.CRYPTO_ECKEY.getTag()&&a.push(i.CryptoECKey.fromDataItem(e))}),new l(r,a)}},33213:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathComponent=void 0;class r{constructor(e){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=e.index,this.hardened=e.hardened,void 0!==this.index?this.wildcard=!1:this.wildcard=!0,this.index&&(this.index&r.HARDENED_BIT)!=0)throw Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}}t.PathComponent=r,r.HARDENED_BIT=2147483648},45941:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistryItem=void 0;let n=r(16139),i=r(55401);class o{constructor(){this.toCBOR=()=>{if(void 0===this.toDataItem())throw Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,i.encodeDataItem)(this.toDataItem())},this.toUR=()=>new n.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(e,t,r)=>{let i=this.toUR();return new n.UREncoder(i,e,t,r)}}}t.RegistryItem=o},6392:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistryTypes=t.RegistryType=void 0;class r{constructor(e,t){this.type=e,this.tag=t,this.getTag=()=>this.tag,this.getType=()=>this.type}}t.RegistryType=r,t.RegistryTypes={UUID:new r("uuid",37),BYTES:new r("bytes",void 0),CRYPTO_HDKEY:new r("crypto-hdkey",303),CRYPTO_KEYPATH:new r("crypto-keypath",304),CRYPTO_COIN_INFO:new r("crypto-coin-info",305),CRYPTO_ECKEY:new r("crypto-eckey",306),CRYPTO_OUTPUT:new r("crypto-output",308),CRYPTO_PSBT:new r("crypto-psbt",310),CRYPTO_ACCOUNT:new r("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new r("crypto-multi-accounts",1103),QR_HARDWARE_CALL:new r("qr-hardware-call",1201),KEY_DERIVATION_CALL:new r("key-derivation-call",1301),KEY_DERIVATION_SCHEMA:new r("key-derivation-schema",1302)}},53021:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptExpressions=t.ScriptExpression=void 0;class r{constructor(e,t){this.tag=e,this.expression=t,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}t.ScriptExpression=r,r.fromTag=e=>Object.values(t.ScriptExpressions).find(t=>t.getTag()===e),t.ScriptExpressions={SCRIPT_HASH:new r(400,"sh"),WITNESS_SCRIPT_HASH:new r(401,"wsh"),PUBLIC_KEY:new r(402,"pk"),PUBLIC_KEY_HASH:new r(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new r(404,"wpkh"),COMBO:new r(405,"combo"),MULTISIG:new r(406,"multi"),SORTED_MULTISIG:new r(407,"sortedmulti"),ADDRESS:new r(307,"addr"),RAW_SCRIPT:new r(408,"raw")}},83570:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownURTypeError=void 0;class r extends Error{constructor(e){super(e)}}t.UnknownURTypeError=r},93458:function(e,t,r){"use strict";var n,i=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoMultiAccounts=void 0;let o=r(6392),s=r(79610),a=r(45941),u=r(55401);!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.keys=2]="keys",e[e.device=3]="device",e[e.deviceId=4]="deviceId",e[e.version=5]="version"}(n||(n={}));class l extends a.RegistryItem{constructor(e,t,r,i,s){super(),this.masterFingerprint=e,this.keys=t,this.device=r,this.deviceId=i,this.version=s,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.getDeviceId=()=>this.deviceId,this.getVersion=()=>this.version,this.toDataItem=()=>{let e={};return this.masterFingerprint&&(e[n.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(e[n.keys]=this.keys.map(e=>{let t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t})),this.device&&(e[n.device]=this.device),this.deviceId&&(e[n.deviceId]=this.deviceId),this.version&&(e[n.version]=this.version),new u.DataItem(e)}}}t.CryptoMultiAccounts=l,l.fromDataItem=e=>{let t=e.getData(),r=i.alloc(4),o=t[n.masterFingerprint];o&&r.writeUInt32BE(o,0);let a=t[n.keys].map(e=>s.CryptoHDKey.fromDataItem(e));return new l(r,a,t[n.device],t[n.deviceId],t[n.version])},l.fromCBOR=e=>{let t=(0,u.decodeToDataItem)(e);return l.fromDataItem(t)}},69331:function(e,t,r){"use strict";var n,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyDerivationSchema=t.DerivationAlgorithm=t.Curve=void 0;let s=r(6392),a=r(45941),u=r(55401),l=r(15983);!function(e){e[e.keyPath=1]="keyPath",e[e.curve=2]="curve",e[e.algo=3]="algo"}(n||(n={})),function(e){e[e.secp256k1=0]="secp256k1",e[e.ed25519=1]="ed25519"}(i=t.Curve||(t.Curve={})),function(e){e[e.slip10=0]="slip10",e[e.bip32ed25519=1]="bip32ed25519"}(o=t.DerivationAlgorithm||(t.DerivationAlgorithm={}));class c extends a.RegistryItem{constructor(e,t=i.secp256k1,r=o.slip10){super(),this.keypath=e,this.curve=t,this.algo=r,this.getRegistryType=()=>s.RegistryTypes.KEY_DERIVATION_SCHEMA,this.getKeypath=()=>this.keypath,this.getCurve=()=>this.curve,this.getAlgo=()=>this.algo,this.toDataItem=()=>{let e={},t=this.getKeypath().toDataItem();return t.setTag(this.getKeypath().getRegistryType().getTag()),e[n.keyPath]=t,e[n.curve]=this.curve,e[n.algo]=this.algo,new u.DataItem(e)}}}t.KeyDerivationSchema=c,c.fromDataItem=e=>{let t=e.getData();return new c(l.CryptoKeypath.fromDataItem(t[n.keyPath]),t[n.curve],t[n.algo])},c.fromCBOR=e=>{let t=(0,u.decodeToDataItem)(e);return c.fromDataItem(t)}},15822:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyDerivation=void 0;let i=r(6392),o=r(45941),s=r(55401),a=r(69331);!function(e){e[e.schemas=1]="schemas"}(n||(n={}));class u extends o.RegistryItem{constructor(e){super(),this.schemas=e,this.getRegistryType=()=>i.RegistryTypes.KEY_DERIVATION_CALL,this.getSchemas=()=>this.schemas,this.toDataItem=()=>{let e={};return e[n.schemas]=this.schemas.map(e=>{let t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}),new s.DataItem(e)}}}t.KeyDerivation=u,u.fromDataItem=e=>new u(e.getData()[n.schemas].map(e=>a.KeyDerivationSchema.fromDataItem(e))),u.fromCBOR=e=>{let t=(0,s.decodeToDataItem)(e);return u.fromDataItem(t)}},54376:function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.QRHardwareCall=t.QRHardwareCallType=void 0;let o=r(6392),s=r(45941),a=r(55401),u=r(15822);!function(e){e[e.type=1]="type",e[e.params=2]="params",e[e.origin=3]="origin"}(n||(n={})),function(e){e[e.KeyDerivation=0]="KeyDerivation"}(i=t.QRHardwareCallType||(t.QRHardwareCallType={}));class l extends s.RegistryItem{constructor(e,t,r){super(),this.type=e,this.params=t,this.origin=r,this.getRegistryType=()=>o.RegistryTypes.QR_HARDWARE_CALL,this.getType=()=>this.type,this.getParams=()=>this.params,this.getOrigin=()=>this.origin,this.toDataItem=()=>{let e={};e[n.type]=this.type;let t=this.params.toDataItem();return t.setTag(this.params.getRegistryType().getTag()),e[n.params]=t,this.origin&&(e[n.origin]=this.origin),new a.DataItem(e)}}}t.QRHardwareCall=l,l.fromDataItem=e=>{let t;let r=e.getData(),o=r[n.type]||i.KeyDerivation;return o===i.KeyDerivation&&(t=u.KeyDerivation.fromDataItem(r[n.params])),new l(o,t,r[n.origin])},l.fromCBOR=e=>{let t=(0,a.decodeToDataItem)(e);return l.fromDataItem(t)}},47219:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=t.extend=t.PathComponent=t.ScriptExpressions=t.MultiKey=t.CryptoPSBT=t.CryptoOutput=t.CryptoECKey=t.CryptoCoinInfoNetwork=t.CryptoCoinInfoType=t.CryptoCoinInfo=t.CryptoKeypath=t.CryptoMultiAccounts=t.CryptoHDKey=t.CryptoAccount=t.Bytes=t.URRegistryDecoder=t.DataItem=void 0;let n=r(97582);r(64720);let i=r(48764);Object.defineProperty(t,"Buffer",{enumerable:!0,get:function(){return i.Buffer}});let o=r(79610);Object.defineProperty(t,"CryptoHDKey",{enumerable:!0,get:function(){return o.CryptoHDKey}});let s=r(15983);Object.defineProperty(t,"CryptoKeypath",{enumerable:!0,get:function(){return s.CryptoKeypath}});let a=r(10712);Object.defineProperty(t,"CryptoCoinInfo",{enumerable:!0,get:function(){return a.CryptoCoinInfo}}),Object.defineProperty(t,"CryptoCoinInfoType",{enumerable:!0,get:function(){return a.Type}}),Object.defineProperty(t,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return a.Network}});let u=r(2333);Object.defineProperty(t,"CryptoECKey",{enumerable:!0,get:function(){return u.CryptoECKey}});let l=r(34310);Object.defineProperty(t,"Bytes",{enumerable:!0,get:function(){return l.Bytes}});let c=r(36868);Object.defineProperty(t,"CryptoOutput",{enumerable:!0,get:function(){return c.CryptoOutput}});let f=r(62795);Object.defineProperty(t,"CryptoPSBT",{enumerable:!0,get:function(){return f.CryptoPSBT}});let h=r(33621);Object.defineProperty(t,"CryptoAccount",{enumerable:!0,get:function(){return h.CryptoAccount}});let p=r(21141);Object.defineProperty(t,"URRegistryDecoder",{enumerable:!0,get:function(){return p.URRegistryDecoder}});let d=r(96112);Object.defineProperty(t,"MultiKey",{enumerable:!0,get:function(){return d.MultiKey}});let y=r(53021);Object.defineProperty(t,"ScriptExpressions",{enumerable:!0,get:function(){return y.ScriptExpressions}});let g=r(33213);Object.defineProperty(t,"PathComponent",{enumerable:!0,get:function(){return g.PathComponent}});let m=r(45941),b=r(6392),w=r(55401);var v=r(55401);Object.defineProperty(t,"DataItem",{enumerable:!0,get:function(){return v.DataItem}});let _=r(68089),E=r(93458);Object.defineProperty(t,"CryptoMultiAccounts",{enumerable:!0,get:function(){return E.CryptoMultiAccounts}});let S={URRegistryDecoder:p.URRegistryDecoder,Bytes:l.Bytes,CryptoAccount:h.CryptoAccount,CryptoHDKey:o.CryptoHDKey,CryptoMultiAccounts:E.CryptoMultiAccounts,CryptoKeypath:s.CryptoKeypath,CryptoCoinInfo:a.CryptoCoinInfo,CryptoCoinInfoType:a.Type,CryptoCoinInfoNetwork:a.Network,CryptoECKey:u.CryptoECKey,CryptoOutput:c.CryptoOutput,CryptoPSBT:f.CryptoPSBT,MultiKey:d.MultiKey,ScriptExpressions:y.ScriptExpressions,PathComponent:g.PathComponent},T={addReader:w.addReader,addSemanticDecode:w.addSemanticDecode,addSemanticEncode:w.addSemanticEncode,addWriter:w.addWriter,patchTags:_.patchTags},I={RegistryTypes:b.RegistryTypes,RegistryItem:m.RegistryItem,RegistryType:b.RegistryType,decodeToDataItem:w.decodeToDataItem,encodeDataItem:w.encodeDataItem,cbor:T};t.extend=I,(0,n.__exportStar)(r(83570),t),(0,n.__exportStar)(r(21141),t),(0,n.__exportStar)(r(55401),t),(0,n.__exportStar)(r(33621),t),(0,n.__exportStar)(r(62795),t),(0,n.__exportStar)(r(79610),t),(0,n.__exportStar)(r(93458),t),(0,n.__exportStar)(r(54376),t),(0,n.__exportStar)(r(15822),t),(0,n.__exportStar)(r(69331),t),(0,n.__exportStar)(r(36868),t),(0,n.__exportStar)(r(10712),t),(0,n.__exportStar)(r(2333),t),(0,n.__exportStar)(r(96112),t),(0,n.__exportStar)(r(15983),t),(0,n.__exportStar)(r(64720),t),(0,n.__exportStar)(r(33213),t),(0,n.__exportStar)(r(45941),t),(0,n.__exportStar)(r(6392),t),(0,n.__exportStar)(r(67994),t),(0,n.__exportStar)(r(68089),t),t.default=S},86685:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataItem=void 0;class r{constructor(e,t){this.setTag=e=>{this.tag=e},this.clearTag=()=>{this.tag=void 0},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=e,this.tag=t}}t.DataItem=r},52435:function(e,t,r){"use strict";var n,i,o,s=r(48764).Buffer;!function(r,s){i=[],void 0!==(o="function"==typeof(n=s)?n.apply(t,i):n)&&(e.exports=o)}(0,function(){let{DataItem:e}=r(86685);var t=function(){function t(e){this.$hex=e}t.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",r=0;r<this.$hex.length;r+=2)t+="%"+this.$hex.substring(r,r+2);return decodeURIComponent(t)}if("latin"===e){for(var t=[],r=0;r<this.$hex.length;r+=2)t.push(parseInt(this.$hex.substring(r,r+2),16));return String.fromCharCode.apply(String,t)}throw Error("Unrecognised format: "+e)}},t.fromLatinString=function(e){for(var r="",n=0;n<e.length;n++){var i=e.charCodeAt(n).toString(16);1===i.length&&(i="0"+i),r+=i}return new t(r)},t.fromUtf8String=function(e){for(var r=encodeURIComponent(e),n="",i=0;i<r.length;i++)if("%"===r.charAt(i))n+=r.substring(i+1,i+3),i+=2;else{var o=r.charCodeAt(i).toString(16);o.length<2&&(o="0"+o),n+=o}return new t(n)};var r=[],n={},i=function(e){return function(){throw Error(e+" not implemented")}};function o(){}function a(){}function u(e){var t=e.readByte();return{type:t>>5,value:31&t}}function l(e,t){var r=e.value;return r<24?r:24==r?t.readByte():25==r?t.readUint16():26==r?t.readUint32():27==r?t.readUint64():31==r?null:void i("Additional info: "+r)()}function c(e,t,r){r.writeByte(e<<5|t)}function f(e,t,r){var n=e<<5;t<24?r.writeByte(n|t):t<256?(r.writeByte(24|n),r.writeByte(t)):t<65536?(r.writeByte(25|n),r.writeUint16(t)):t<4294967296?(r.writeByte(26|n),r.writeUint32(t)):(r.writeByte(27|n),r.writeUint64(t))}o.prototype={peekByte:i("peekByte"),readByte:i("readByte"),readChunk:i("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,r=1023&e,n=32768&e;if(31===t)return 0===r?n?-1/0:1/0:NaN;var i=t?Math.pow(2,t-25)*(1024+r):5960464477539063e-23*r;return n?-i:i},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,r=8388607&e,n=2147483648&e;if(255===t)return 0===r?n?-1/0:1/0:NaN;var i=t?Math.pow(2,t-23-127)*(8388608+r):1401298464324817e-60*r;return n?-i:i},readFloat64:function(){var e=this.readUint32(),t=this.readUint32(),r=e>>20&2047,n=(1048575&e)*4294967296+t,i=2147483648&e;if(2047===r)return 0===n?i?-1/0:1/0:NaN;var o=r?Math.pow(2,r-52-1023)*(4503599627370496+n):5e-324*n;return i?-o:o},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},a.prototype={writeByte:i("writeByte"),result:i("result"),writeFloat16:i("writeFloat16"),writeFloat32:i("writeFloat32"),writeFloat64:i("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:i("writeString"),canWriteBinary:function(e){return!1},writeBinary:i("writeChunk")};var h=Error();function p(e){var t=u(e);switch(t.type){case 0:return l(t,e);case 1:return -1-l(t,e);case 2:return e.readChunk(l(t,e));case 3:return e.readChunk(l(t,e)).toString("utf-8");case 4:case 5:var r,i=l(t,e),o=[];if(null!==i){5===t.type&&(i*=2);for(var s=0;s<i;s++)o[s]=p(e)}else for(;(r=p(e))!==h;)o.push(r);if(5!==t.type)return o;for(var a={},s=0;s<o.length;s+=2)a[o[s]]=o[s+1];return a;case 6:var c=n[l(t,e)],o=p(e);return c?c(o):o;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(l(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case null:return h;default:throw Error("Unknown fixed value: "+t.value)}default:throw Error("Unsupported header: "+JSON.stringify(t))}throw Error("not implemented yet")}function d(e,t){for(var n=0;n<r.length;n++){var i=r[n].fn(e);if(void 0!==i)return f(6,r[n].tag,t),d(i,t)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)f(7,20,t);else if(!0===e)f(7,21,t);else if(null===e)f(7,22,t);else if(void 0===e)f(7,23,t);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?f(1,-1-e,t):f(0,e,t):(c(7,27,t),t.writeFloat64(e));else if("string"==typeof e)t.writeString(e,function(e){f(3,e,t)});else if(t.canWriteBinary(e))t.writeBinary(e,function(e){f(2,e,t)});else if("object"==typeof e){if(m.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){f(4,e.length,t);for(var n=0;n<e.length;n++)d(e[n],t)}else{var o=Object.keys(e);f(5,o.length,t);for(var n=0;n<o.length;n++){let r=parseInt(o[n]);isNaN(r)?d(o[n],t):d(r,t),d(e[o[n]],t)}}}else throw Error("CBOR encoding not supported: "+e)}var y=[],g=[],m={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?g.push(function(r){if(e===r)return t(r)}):g.push(e)},addReader:function(e,t){"string"==typeof e?y.push(function(r,n){if(e===n)return t(r,n)}):y.push(e)},encode:function(e,t){for(var r=0;r<g.length;r++){var n=(0,g[r])(t);if(n)return d(e,n),n.result()}throw Error("Unsupported output format: "+t)},encodeDataItem:function(e,t){for(var r=0;r<g.length;r++){var n=(0,g[r])(t);if(n){if(void 0!==e.getTag())return d(e,n),n.result();return d(e.getData(),n),n.result()}}throw Error("Unsupported output format: "+t)},decode:function(e,t){for(var r=0;r<y.length;r++){var n=(0,y[r])(e,t);if(n)return p(n)}throw Error("Unsupported input format: "+t)},decodeToDataItem:function(t,r){for(var n=0;n<y.length;n++){var i=(0,y[n])(t,r);if(i){let t=p(i);if(t instanceof e)return t;return new e(t)}}throw Error("Unsupported input format: "+r)},addSemanticEncode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw Error("Tag must be a positive integer");return r.push({tag:e,fn:t}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw Error("Tag must be a positive integer");return n[e]=t,this}};function b(e){this.buffer=e,this.pos=0}function w(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=s.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function v(e){this.hex=e,this.pos=0}function _(e){this.$hex="",this.finalFormat=e||"hex"}return b.prototype=Object.create(o.prototype),b.prototype.peekByte=function(){return this.buffer[this.pos]},b.prototype.readByte=function(){return this.buffer[this.pos++]},b.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},b.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},b.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},b.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},b.prototype.readChunk=function(e){var t=s.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},w.prototype=Object.create(a.prototype),w.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=s.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},w.prototype.writeFloat32=function(e){var t=s.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},w.prototype.writeFloat64=function(e){var t=s.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},w.prototype.writeString=function(e,t){var r=s.from(e,"utf-8");t(r.length),this.writeBuffer(r)},w.prototype.canWriteBinary=function(e){return e instanceof s},w.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},w.prototype.writeBuffer=function(e){if(!(e instanceof s))throw TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=s.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=s.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},w.prototype.result=function(){for(var e=s.alloc(this.byteLength),t=0,r=0;r<this.completeBuffers.length;r++){var n=this.completeBuffers[r];n.copy(e,t,0,n.length),t+=n.length}return(this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat)?e.toString(this.stringFormat):e},"function"==typeof s&&(m.addReader(function(e,t){return s.isBuffer(e)?new b(e):"hex"===t||"base64"===t?new b(s.from(e,t)):void 0}),m.addWriter(function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new w(e):void 0:new w})),v.prototype=Object.create(o.prototype),v.prototype.peekByte=function(){return parseInt(this.hex.substring(this.pos,2),16)},v.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},v.prototype.readChunk=function(e){var r=this.hex.substring(this.pos,this.pos+2*e);return(this.pos+=2*e,"function"==typeof s)?s.from(r,"hex"):new t(r)},_.prototype=Object.create(a.prototype),_.prototype.writeByte=function(e){if(e<0||e>255)throw Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},_.prototype.canWriteBinary=function(e){return e instanceof t||"function"==typeof s&&e instanceof s},_.prototype.writeBinary=function(e,r){if(e instanceof t)r(e.length()),this.$hex+=e.$hex;else if("function"==typeof s&&e instanceof s)r(e.length),this.$hex+=e.toString("hex");else throw TypeError("HexWriter only accepts BinaryHex or Buffers")},_.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof s?s.from(this.$hex,"hex"):new t(this.$hex).toString(this.finalFormat)},_.prototype.writeString=function(e,r){var n=t.fromUtf8String(e);r(n.length()),this.$hex+=n.$hex},m.addReader(function(e,r){return e instanceof t||e.$hex?new v(e.$hex):"hex"===r?new v(e):void 0}),m.addWriter(function(e){if("hex"===e)return new _}),m}();return t.addSemanticEncode(0,function(e){if(e instanceof Date)return e.toISOString()}).addSemanticDecode(0,function(e){return new Date(e)}).addSemanticDecode(1,function(e){return new Date(e)}),t})},55401:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataItem=t.addWriter=t.addReader=t.addSemanticEncode=t.addSemanticDecode=t.decodeToDataItem=t.encodeDataItem=void 0;var n=r(52435);Object.defineProperty(t,"encodeDataItem",{enumerable:!0,get:function(){return n.encodeDataItem}}),Object.defineProperty(t,"decodeToDataItem",{enumerable:!0,get:function(){return n.decodeToDataItem}}),Object.defineProperty(t,"addSemanticDecode",{enumerable:!0,get:function(){return n.addSemanticDecode}}),Object.defineProperty(t,"addSemanticEncode",{enumerable:!0,get:function(){return n.addSemanticEncode}}),Object.defineProperty(t,"addReader",{enumerable:!0,get:function(){return n.addReader}}),Object.defineProperty(t,"addWriter",{enumerable:!0,get:function(){return n.addWriter}});var i=r(86685);Object.defineProperty(t,"DataItem",{enumerable:!0,get:function(){return i.DataItem}})},64720:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(68089),i=r(6392),o=r(53021),s=Object.values(i.RegistryTypes).filter(e=>!!e.getTag()).map(e=>e.getTag()),a=Object.values(o.ScriptExpressions).map(e=>e.getTag());(0,n.patchTags)(s.concat(a))},67994:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},68089:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patchTags=void 0;let n=r(55401),i=[],o=e=>{e.forEach(e=>{i.find(t=>t===e)||((0,n.addSemanticEncode)(e,t=>{if(t instanceof n.DataItem&&t.getTag()===e)return t.getData()}),(0,n.addSemanticDecode)(e,t=>new n.DataItem(t,e)),i.push(e))})};t.patchTags=o},93758:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bytes=void 0;let n=r(47675),i=r(49804),o=r(297);class s extends i.RegistryItem{constructor(e){super(),this.bytes=e,this.getRegistryType=()=>o.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new n.DataItem(this.bytes)}}t.Bytes=s,s.fromDataItem=e=>{let t=e.getData();if(!t)throw Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new s(t)},s.fromCBOR=e=>{let t=(0,n.decodeToDataItem)(e);return s.fromDataItem(t)}},65164:function(e,t,r){"use strict";var n,i=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoAccount=void 0;let o=r(61081),s=r(47675),a=r(49804),u=r(297);!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.outputDescriptors=2]="outputDescriptors"}(n||(n={}));class l extends a.RegistryItem{constructor(e,t){super(),this.masterFingerprint=e,this.outputDescriptors=t,this.getRegistryType=()=>u.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{let e={};return this.masterFingerprint&&(e[n.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(e[n.outputDescriptors]=this.outputDescriptors.map(e=>e.toDataItem())),new s.DataItem(e)}}}t.CryptoAccount=l,l.fromDataItem=e=>{let t=e.getData(),r=i.alloc(4),s=t[n.masterFingerprint];return s&&r.writeUInt32BE(s,0),new l(r,t[n.outputDescriptors].map(e=>o.CryptoOutput.fromDataItem(e)))},l.fromCBOR=e=>{let t=(0,s.decodeToDataItem)(e);return l.fromDataItem(t)}},76262:function(e,t,r){"use strict";var n,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoCoinInfo=t.Network=t.Type=void 0;let s=r(47675),a=r(49804),u=r(297);!function(e){e.type="1",e.network="2"}(n||(n={})),function(e){e[e.bitcoin=0]="bitcoin"}(i=t.Type||(t.Type={})),function(e){e[e.mainnet=0]="mainnet",e[e.testnet=1]="testnet"}(o=t.Network||(t.Network={}));class l extends a.RegistryItem{constructor(e,t){super(),this.type=e,this.network=t,this.getRegistryType=()=>u.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||i.bitcoin,this.getNetwork=()=>this.network||o.mainnet,this.toDataItem=()=>{let e={};return this.type&&(e[n.type]=this.type),this.network&&(e[n.network]=this.network),new s.DataItem(e)}}}t.CryptoCoinInfo=l,l.fromDataItem=e=>{let t=e.getData();return new l(t[n.type],t[n.network])},l.fromCBOR=e=>{let t=(0,s.decodeToDataItem)(e);return l.fromDataItem(t)}},30858:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoECKey=void 0;let i=r(47675),o=r(49804),s=r(297);!function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"}(n||(n={}));class a extends o.RegistryItem{constructor(e){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{let e={};return this.curve&&(e[n.curve]=this.curve),void 0!==this.privateKey&&(e[n.private]=this.privateKey),e[n.data]=this.data,new i.DataItem(e)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=e.data,this.curve=e.curve,this.privateKey=e.privateKey||void 0}}t.CryptoECKey=a,a.fromDataItem=e=>{let t=e.getData(),r=t[n.curve],i=t[n.private],o=t[n.data];if(!o)throw Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new a({data:o,curve:r,privateKey:i})},a.fromCBOR=e=>{let t=(0,i.decodeToDataItem)(e);return a.fromDataItem(t)}},74636:function(e,t,r){"use strict";var n,i=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoHDKey=void 0;let o=r(58334),s=r(76262),a=r(23071),u=r(47675),l=r(49804),c=r(297);!function(e){e[e.is_master=1]="is_master",e[e.is_private=2]="is_private",e[e.key_data=3]="key_data",e[e.chain_code=4]="chain_code",e[e.use_info=5]="use_info",e[e.origin=6]="origin",e[e.children=7]="children",e[e.parent_fingerprint=8]="parent_fingerprint",e[e.name=9]="name",e[e.note=10]="note"}(n||(n={}));class f extends l.RegistryItem{constructor(e){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var e,t,r;let n,s;let a=0,u=i.alloc(4).fill(0);if(this.isMaster())n=i.from("0488ADE4","hex"),s=0,a=0;else{s=(null===(e=this.getOrigin())||void 0===e?void 0:e.getComponents().length)||(null===(t=this.getOrigin())||void 0===t?void 0:t.getDepth());let o=null===(r=this.getOrigin())||void 0===r?void 0:r.getComponents(),l=o[o.length-1];l&&(a=l.isHardened()?l.getIndex()+2147483648:l.getIndex(),this.getParentFingerprint()&&(u=this.getParentFingerprint())),n=this.isPrivateKey()?i.from("0488ADE4","hex"):i.from("0488B21E","hex")}let l=i.alloc(1);l.writeUInt8(s,0);let c=i.alloc(4);c.writeUInt32BE(a,0);let f=this.getChainCode(),h=this.getKey();return(0,o.encode)(i.concat([n,l,u,c,f,h]))},this.getRegistryType=()=>c.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var e,t,r,n,i,o,s;let a="";return this.getOrigin()&&(null===(e=this.getOrigin())||void 0===e?void 0:e.getSourceFingerprint())&&(null===(t=this.getOrigin())||void 0===t?void 0:t.getPath())&&(a+=`${null===(n=null===(r=this.getOrigin())||void 0===r?void 0:r.getSourceFingerprint())||void 0===n?void 0:n.toString("hex")}/${null===(i=this.getOrigin())||void 0===i?void 0:i.getPath()}`),a+=this.getBip32Key(),this.getChildren()&&(null===(o=this.getChildren())||void 0===o?void 0:o.getPath())&&(a+=`/${null===(s=this.getChildren())||void 0===s?void 0:s.getPath()}`),a},this.setupMasterKey=e=>{this.master=!0,this.key=e.key,this.chainCode=e.chainCode},this.setupDeriveKey=e=>{this.master=!1,this.privateKey=e.isPrivateKey,this.key=e.key,this.chainCode=e.chainCode,this.useInfo=e.useInfo,this.origin=e.origin,this.children=e.children,this.parentFingerprint=e.parentFingerprint,this.name=e.name,this.note=e.note},this.toDataItem=()=>{let e={};if(this.master)e[n.is_master]=!0,e[n.key_data]=this.key,e[n.chain_code]=this.chainCode;else{if(void 0!==this.privateKey&&(e[n.is_private]=this.privateKey),e[n.key_data]=this.key,this.chainCode&&(e[n.chain_code]=this.chainCode),this.useInfo){let t=this.useInfo.toDataItem();t.setTag(this.useInfo.getRegistryType().getTag()),e[n.use_info]=t}if(this.origin){let t=this.origin.toDataItem();t.setTag(this.origin.getRegistryType().getTag()),e[n.origin]=t}if(this.children){let t=this.children.toDataItem();t.setTag(this.children.getRegistryType().getTag()),e[n.children]=t}this.parentFingerprint&&(e[n.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),void 0!==this.name&&(e[n.name]=this.name),void 0!==this.note&&(e[n.note]=this.note)}return new u.DataItem(e)},e.isMaster?this.setupMasterKey(e):this.setupDeriveKey(e)}}t.CryptoHDKey=f,f.fromDataItem=e=>{let t;let r=e.getData(),o=!!r[n.is_master],u=r[n.is_private],l=r[n.key_data],c=r[n.chain_code],h=r[n.use_info]?s.CryptoCoinInfo.fromDataItem(r[n.use_info]):void 0,p=r[n.origin]?a.CryptoKeypath.fromDataItem(r[n.origin]):void 0,d=r[n.children]?a.CryptoKeypath.fromDataItem(r[n.children]):void 0,y=r[n.parent_fingerprint];return y&&(t=i.alloc(4)).writeUInt32BE(y,0),new f({isMaster:o,isPrivateKey:u,key:l,chainCode:c,useInfo:h,origin:p,children:d,parentFingerprint:t,name:r[n.name],note:r[n.note]})},f.fromCBOR=e=>{let t=(0,u.decodeToDataItem)(e);return f.fromDataItem(t)}},23071:function(e,t,r){"use strict";var n,i=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoKeypath=void 0;let o=r(47675),s=r(53751),a=r(49804),u=r(297);!function(e){e[e.components=1]="components",e[e.source_fingerprint=2]="source_fingerprint",e[e.depth=3]="depth"}(n||(n={}));class l extends a.RegistryItem{constructor(e=[],t,r){super(),this.components=e,this.sourceFingerprint=t,this.depth=r,this.getRegistryType=()=>u.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>{if(0!==this.components.length)return this.components.map(e=>`${e.isWildcard()?"*":e.getIndex()}${e.isHardened()?"'":""}`).join("/")},this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{let e={},t=[];return this.components&&this.components.forEach(e=>{e.isWildcard()?t.push([]):t.push(e.getIndex()),t.push(e.isHardened())}),e[n.components]=t,this.sourceFingerprint&&(e[n.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),void 0!==this.depth&&(e[n.depth]=this.depth),new o.DataItem(e)}}}t.CryptoKeypath=l,l.fromDataItem=e=>{let t;let r=e.getData(),o=[],a=r[n.components];if(a)for(let e=0;e<a.length;e+=2){let t=a[e+1],r=a[e];"number"==typeof r?o.push(new s.PathComponent({index:r,hardened:t})):o.push(new s.PathComponent({hardened:t}))}let u=r[n.source_fingerprint];return u&&(t=i.alloc(4)).writeUInt32BE(u,0),new l(o,t,r[n.depth])},l.fromCBOR=e=>{let t=(0,o.decodeToDataItem)(e);return l.fromDataItem(t)}},67545:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoOutput=void 0;let n=r(30858),i=r(74636),o=r(47675),s=r(21002),a=r(49804),u=r(297),l=r(36170);class c extends a.RegistryItem{constructor(e,t){super(),this.scriptExpressions=e,this.cryptoKey=t,this.getRegistryType=()=>u.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>this.cryptoKey instanceof i.CryptoHDKey?this.cryptoKey:void 0,this.getECKey=()=>this.cryptoKey instanceof n.CryptoECKey?this.cryptoKey:void 0,this.getMultiKey=()=>this.cryptoKey instanceof s.MultiKey?this.cryptoKey:void 0,this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=e=>e>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[e].getExpression()}(${this._toOutputDescriptor(e+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let e=this.cryptoKey.toDataItem();return(this.cryptoKey instanceof n.CryptoECKey||this.cryptoKey instanceof i.CryptoHDKey)&&e.setTag(this.cryptoKey.getRegistryType().getTag()),[...this.scriptExpressions].reverse().forEach(t=>{let r=t.getTag();void 0===e.getTag()?e.setTag(r):e=new o.DataItem(e,r)}),e}}}t.CryptoOutput=c,c.fromDataItem=e=>{let t=[],r=e;for(;;){let e=r.getTag(),n=l.ScriptExpression.fromTag(e);if(n){if(t.push(n),r.getData() instanceof o.DataItem)e=(r=r.getData()).getTag();else break}else break}let a=t.length;return a>0&&(t[a-1].getExpression()===l.ScriptExpressions.MULTISIG.getExpression()||t[a-1].getExpression()===l.ScriptExpressions.SORTED_MULTISIG.getExpression())?new c(t,s.MultiKey.fromDataItem(r)):r.getTag()===u.RegistryTypes.CRYPTO_HDKEY.getTag()?new c(t,i.CryptoHDKey.fromDataItem(r)):new c(t,n.CryptoECKey.fromDataItem(r))},c.fromCBOR=e=>{let t=(0,o.decodeToDataItem)(e);return c.fromDataItem(t)}},46340:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoPSBT=void 0;let n=r(47675),i=r(49804),o=r(297);class s extends i.RegistryItem{constructor(e){super(),this.psbt=e,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new n.DataItem(this.psbt)}}t.CryptoPSBT=s,s.fromDataItem=e=>{let t=e.getData();if(!t)throw Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new s(t)},s.fromCBOR=e=>{let t=(0,n.decodeToDataItem)(e);return s.fromDataItem(t)}},62831:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URRegistryDecoder=void 0;let n=r(16139),i=r(61081),o=r(297),s=r(97029);class a extends n.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{let e=this.resultUR();switch(e.type){case o.RegistryTypes.BYTES.getType():return i.Bytes.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_HDKEY.getType():return i.CryptoHDKey.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_KEYPATH.getType():return i.CryptoKeypath.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_COIN_INFO.getType():return i.CryptoCoinInfo.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_ECKEY.getType():return i.CryptoECKey.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_OUTPUT.getType():return i.CryptoOutput.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_PSBT.getType():return i.CryptoPSBT.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_ACCOUNT.getType():return i.CryptoAccount.fromCBOR(e.cbor);default:throw new s.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${e.type} is not supported now`)}}}}t.URRegistryDecoder=a},21002:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MultiKey=void 0;let i=r(30858),o=r(74636),s=r(21012),a=r(49804),u=r(297);!function(e){e[e.threshold=1]="threshold",e[e.keys=2]="keys"}(n||(n={}));class l extends a.RegistryItem{constructor(e,t){super(),this.threshold=e,this.keys=t,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{let e={};e[n.threshold]=this.threshold;let t=this.keys.map(e=>{let t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t});return e[n.keys]=t,new s.DataItem(e)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map(e=>e.getOutputDescriptorContent()).join(",")].join(",")}}t.MultiKey=l,l.fromDataItem=e=>{let t=e.getData(),r=t[n.threshold],s=t[n.keys],a=[];return s.forEach(e=>{e.getTag()===u.RegistryTypes.CRYPTO_HDKEY.getTag()?a.push(o.CryptoHDKey.fromDataItem(e)):e.getTag()===u.RegistryTypes.CRYPTO_ECKEY.getTag()&&a.push(i.CryptoECKey.fromDataItem(e))}),new l(r,a)}},53751:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathComponent=void 0;class r{constructor(e){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=e.index,this.hardened=e.hardened,void 0!==this.index?this.wildcard=!1:this.wildcard=!0,this.index&&(this.index&r.HARDENED_BIT)!=0)throw Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}}t.PathComponent=r,r.HARDENED_BIT=2147483648},49804:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistryItem=void 0;let n=r(16139),i=r(47675);class o{constructor(){this.toCBOR=()=>{if(void 0===this.toDataItem())throw Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,i.encodeDataItem)(this.toDataItem())},this.toUR=()=>new n.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(e,t,r)=>{let i=this.toUR();return new n.UREncoder(i,e,t,r)}}}t.RegistryItem=o},297:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistryTypes=t.RegistryType=void 0;class r{constructor(e,t){this.type=e,this.tag=t,this.getTag=()=>this.tag,this.getType=()=>this.type}}t.RegistryType=r,t.RegistryTypes={UUID:new r("uuid",37),BYTES:new r("bytes",void 0),CRYPTO_HDKEY:new r("crypto-hdkey",303),CRYPTO_KEYPATH:new r("crypto-keypath",304),CRYPTO_COIN_INFO:new r("crypto-coin-info",305),CRYPTO_ECKEY:new r("crypto-eckey",306),CRYPTO_OUTPUT:new r("crypto-output",308),CRYPTO_PSBT:new r("crypto-psbt",310),CRYPTO_ACCOUNT:new r("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new r("crypto-multi-accounts",1103),QR_HARDWARE_CALL:new r("qr-hardware-call",1201),KEY_DERIVATION_CALL:new r("key-derivation-call",1301),KEY_DERIVATION_SCHEMA:new r("key-derivation-schema",1302)}},36170:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptExpressions=t.ScriptExpression=void 0;class r{constructor(e,t){this.tag=e,this.expression=t,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}t.ScriptExpression=r,r.fromTag=e=>Object.values(t.ScriptExpressions).find(t=>t.getTag()===e),t.ScriptExpressions={SCRIPT_HASH:new r(400,"sh"),WITNESS_SCRIPT_HASH:new r(401,"wsh"),PUBLIC_KEY:new r(402,"pk"),PUBLIC_KEY_HASH:new r(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new r(404,"wpkh"),COMBO:new r(405,"combo"),MULTISIG:new r(406,"multi"),SORTED_MULTISIG:new r(407,"sortedmulti"),ADDRESS:new r(307,"addr"),RAW_SCRIPT:new r(408,"raw")}},97029:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownURTypeError=void 0;class r extends Error{constructor(e){super(e)}}t.UnknownURTypeError=r},71162:function(e,t,r){"use strict";var n,i=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoMultiAccounts=void 0;let o=r(297),s=r(74636),a=r(49804),u=r(47675);!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.keys=2]="keys",e[e.device=3]="device",e[e.deviceId=4]="deviceId",e[e.version=5]="version"}(n||(n={}));class l extends a.RegistryItem{constructor(e,t,r,i,s){super(),this.masterFingerprint=e,this.keys=t,this.device=r,this.deviceId=i,this.version=s,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.getDeviceId=()=>this.deviceId,this.getVersion=()=>this.version,this.toDataItem=()=>{let e={};return this.masterFingerprint&&(e[n.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(e[n.keys]=this.keys.map(e=>{let t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t})),this.device&&(e[n.device]=this.device),this.deviceId&&(e[n.deviceId]=this.deviceId),this.version&&(e[n.version]=this.version),new u.DataItem(e)}}}t.CryptoMultiAccounts=l,l.fromDataItem=e=>{let t=e.getData(),r=i.alloc(4),o=t[n.masterFingerprint];o&&r.writeUInt32BE(o,0);let a=t[n.keys].map(e=>s.CryptoHDKey.fromDataItem(e));return new l(r,a,t[n.device],t[n.deviceId],t[n.version])},l.fromCBOR=e=>{let t=(0,u.decodeToDataItem)(e);return l.fromDataItem(t)}},10272:function(e,t,r){"use strict";var n,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyDerivationSchema=t.DerivationAlgorithm=t.Curve=void 0;let s=r(297),a=r(49804),u=r(47675),l=r(23071);!function(e){e[e.keyPath=1]="keyPath",e[e.curve=2]="curve",e[e.algo=3]="algo",e[e.chainType=4]="chainType"}(n||(n={})),function(e){e[e.secp256k1=0]="secp256k1",e[e.ed25519=1]="ed25519"}(i=t.Curve||(t.Curve={})),function(e){e[e.slip10=0]="slip10",e[e.bip32ed25519=1]="bip32ed25519"}(o=t.DerivationAlgorithm||(t.DerivationAlgorithm={}));class c extends a.RegistryItem{constructor(e,t=i.secp256k1,r=o.slip10,a){super(),this.keypath=e,this.curve=t,this.algo=r,this.chainType=a,this.getRegistryType=()=>s.RegistryTypes.KEY_DERIVATION_SCHEMA,this.getKeypath=()=>this.keypath,this.getCurve=()=>this.curve,this.getAlgo=()=>this.algo,this.getChainType=()=>this.chainType,this.toDataItem=()=>{let e={},t=this.getKeypath().toDataItem();return t.setTag(this.getKeypath().getRegistryType().getTag()),e[n.keyPath]=t,e[n.curve]=this.curve,e[n.algo]=this.algo,this.chainType&&(e[n.chainType]=this.chainType),new u.DataItem(e)}}}t.KeyDerivationSchema=c,c.fromDataItem=e=>{let t=e.getData(),r=l.CryptoKeypath.fromDataItem(t[n.keyPath]);return new c(r,t[n.curve],t[n.algo],t[n.chainType])},c.fromCBOR=e=>{let t=(0,u.decodeToDataItem)(e);return c.fromDataItem(t)}},22742:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyDerivation=void 0;let i=r(297),o=r(49804),s=r(47675),a=r(10272);!function(e){e[e.schemas=1]="schemas"}(n||(n={}));class u extends o.RegistryItem{constructor(e){super(),this.schemas=e,this.getRegistryType=()=>i.RegistryTypes.KEY_DERIVATION_CALL,this.getSchemas=()=>this.schemas,this.toDataItem=()=>{let e={};return e[n.schemas]=this.schemas.map(e=>{let t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}),new s.DataItem(e)}}}t.KeyDerivation=u,u.fromDataItem=e=>new u(e.getData()[n.schemas].map(e=>a.KeyDerivationSchema.fromDataItem(e))),u.fromCBOR=e=>{let t=(0,s.decodeToDataItem)(e);return u.fromDataItem(t)}},20279:function(e,t,r){"use strict";var n,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.QRHardwareCall=t.QRHardwareCallVersion=t.QRHardwareCallType=void 0;let s=r(297),a=r(49804),u=r(47675),l=r(22742);!function(e){e[e.type=1]="type",e[e.params=2]="params",e[e.origin=3]="origin",e[e.version=4]="version"}(n||(n={})),function(e){e[e.KeyDerivation=0]="KeyDerivation"}(i=t.QRHardwareCallType||(t.QRHardwareCallType={})),function(e){e[e.V0=0]="V0",e[e.V1=1]="V1"}(o=t.QRHardwareCallVersion||(t.QRHardwareCallVersion={}));class c extends a.RegistryItem{constructor(e,t,r,i){super(),this.type=e,this.params=t,this.origin=r,this.version=i,this.getRegistryType=()=>s.RegistryTypes.QR_HARDWARE_CALL,this.getType=()=>this.type,this.getParams=()=>this.params,this.getOrigin=()=>this.origin,this.getVersion=()=>this.version,this.toDataItem=()=>{let e={};e[n.type]=this.type;let t=this.params.toDataItem();return t.setTag(this.params.getRegistryType().getTag()),e[n.params]=t,this.origin&&(e[n.origin]=this.origin),this.version&&(e[n.version]=this.version),new u.DataItem(e)}}}t.QRHardwareCall=c,c.fromDataItem=e=>{let t;let r=e.getData(),o=r[n.type]||i.KeyDerivation;return o===i.KeyDerivation&&(t=l.KeyDerivation.fromDataItem(r[n.params])),new c(o,t,r[n.origin],r[n.version])},c.fromCBOR=e=>{let t=(0,u.decodeToDataItem)(e);return c.fromDataItem(t)}},61081:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=t.extend=t.PathComponent=t.ScriptExpressions=t.MultiKey=t.CryptoPSBT=t.CryptoOutput=t.CryptoECKey=t.CryptoCoinInfoNetwork=t.CryptoCoinInfoType=t.CryptoCoinInfo=t.CryptoKeypath=t.CryptoMultiAccounts=t.CryptoHDKey=t.CryptoAccount=t.Bytes=t.URRegistryDecoder=t.DataItem=void 0;let n=r(97582);r(24303);let i=r(48764);Object.defineProperty(t,"Buffer",{enumerable:!0,get:function(){return i.Buffer}});let o=r(74636);Object.defineProperty(t,"CryptoHDKey",{enumerable:!0,get:function(){return o.CryptoHDKey}});let s=r(23071);Object.defineProperty(t,"CryptoKeypath",{enumerable:!0,get:function(){return s.CryptoKeypath}});let a=r(76262);Object.defineProperty(t,"CryptoCoinInfo",{enumerable:!0,get:function(){return a.CryptoCoinInfo}}),Object.defineProperty(t,"CryptoCoinInfoType",{enumerable:!0,get:function(){return a.Type}}),Object.defineProperty(t,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return a.Network}});let u=r(30858);Object.defineProperty(t,"CryptoECKey",{enumerable:!0,get:function(){return u.CryptoECKey}});let l=r(93758);Object.defineProperty(t,"Bytes",{enumerable:!0,get:function(){return l.Bytes}});let c=r(67545);Object.defineProperty(t,"CryptoOutput",{enumerable:!0,get:function(){return c.CryptoOutput}});let f=r(46340);Object.defineProperty(t,"CryptoPSBT",{enumerable:!0,get:function(){return f.CryptoPSBT}});let h=r(65164);Object.defineProperty(t,"CryptoAccount",{enumerable:!0,get:function(){return h.CryptoAccount}});let p=r(62831);Object.defineProperty(t,"URRegistryDecoder",{enumerable:!0,get:function(){return p.URRegistryDecoder}});let d=r(21002);Object.defineProperty(t,"MultiKey",{enumerable:!0,get:function(){return d.MultiKey}});let y=r(36170);Object.defineProperty(t,"ScriptExpressions",{enumerable:!0,get:function(){return y.ScriptExpressions}});let g=r(53751);Object.defineProperty(t,"PathComponent",{enumerable:!0,get:function(){return g.PathComponent}});let m=r(49804),b=r(297),w=r(47675);var v=r(47675);Object.defineProperty(t,"DataItem",{enumerable:!0,get:function(){return v.DataItem}});let _=r(22675),E=r(71162);Object.defineProperty(t,"CryptoMultiAccounts",{enumerable:!0,get:function(){return E.CryptoMultiAccounts}});let S={URRegistryDecoder:p.URRegistryDecoder,Bytes:l.Bytes,CryptoAccount:h.CryptoAccount,CryptoHDKey:o.CryptoHDKey,CryptoMultiAccounts:E.CryptoMultiAccounts,CryptoKeypath:s.CryptoKeypath,CryptoCoinInfo:a.CryptoCoinInfo,CryptoCoinInfoType:a.Type,CryptoCoinInfoNetwork:a.Network,CryptoECKey:u.CryptoECKey,CryptoOutput:c.CryptoOutput,CryptoPSBT:f.CryptoPSBT,MultiKey:d.MultiKey,ScriptExpressions:y.ScriptExpressions,PathComponent:g.PathComponent},T={addReader:w.addReader,addSemanticDecode:w.addSemanticDecode,addSemanticEncode:w.addSemanticEncode,addWriter:w.addWriter,patchTags:_.patchTags},I={RegistryTypes:b.RegistryTypes,RegistryItem:m.RegistryItem,RegistryType:b.RegistryType,decodeToDataItem:w.decodeToDataItem,encodeDataItem:w.encodeDataItem,cbor:T};t.extend=I,(0,n.__exportStar)(r(97029),t),(0,n.__exportStar)(r(62831),t),(0,n.__exportStar)(r(47675),t),(0,n.__exportStar)(r(65164),t),(0,n.__exportStar)(r(46340),t),(0,n.__exportStar)(r(74636),t),(0,n.__exportStar)(r(71162),t),(0,n.__exportStar)(r(20279),t),(0,n.__exportStar)(r(22742),t),(0,n.__exportStar)(r(10272),t),(0,n.__exportStar)(r(67545),t),(0,n.__exportStar)(r(76262),t),(0,n.__exportStar)(r(30858),t),(0,n.__exportStar)(r(21002),t),(0,n.__exportStar)(r(23071),t),(0,n.__exportStar)(r(24303),t),(0,n.__exportStar)(r(53751),t),(0,n.__exportStar)(r(49804),t),(0,n.__exportStar)(r(297),t),(0,n.__exportStar)(r(30830),t),(0,n.__exportStar)(r(22675),t),t.default=S},21012:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataItem=void 0;class r{constructor(e,t){this.setTag=e=>{this.tag=e},this.clearTag=()=>{this.tag=void 0},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=e,this.tag=t}}t.DataItem=r},28333:function(e,t,r){"use strict";var n,i,o,s=r(48764).Buffer;!function(r,s){i=[],void 0!==(o="function"==typeof(n=s)?n.apply(t,i):n)&&(e.exports=o)}(0,function(){let{DataItem:e}=r(21012);var t=function(){function t(e){this.$hex=e}t.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",r=0;r<this.$hex.length;r+=2)t+="%"+this.$hex.substring(r,r+2);return decodeURIComponent(t)}if("latin"===e){for(var t=[],r=0;r<this.$hex.length;r+=2)t.push(parseInt(this.$hex.substring(r,r+2),16));return String.fromCharCode.apply(String,t)}throw Error("Unrecognised format: "+e)}},t.fromLatinString=function(e){for(var r="",n=0;n<e.length;n++){var i=e.charCodeAt(n).toString(16);1===i.length&&(i="0"+i),r+=i}return new t(r)},t.fromUtf8String=function(e){for(var r=encodeURIComponent(e),n="",i=0;i<r.length;i++)if("%"===r.charAt(i))n+=r.substring(i+1,i+3),i+=2;else{var o=r.charCodeAt(i).toString(16);o.length<2&&(o="0"+o),n+=o}return new t(n)};var r=[],n={},i=function(e){return function(){throw Error(e+" not implemented")}};function o(){}function a(){}function u(e){var t=e.readByte();return{type:t>>5,value:31&t}}function l(e,t){var r=e.value;return r<24?r:24==r?t.readByte():25==r?t.readUint16():26==r?t.readUint32():27==r?t.readUint64():31==r?null:void i("Additional info: "+r)()}function c(e,t,r){r.writeByte(e<<5|t)}function f(e,t,r){var n=e<<5;t<24?r.writeByte(n|t):t<256?(r.writeByte(24|n),r.writeByte(t)):t<65536?(r.writeByte(25|n),r.writeUint16(t)):t<4294967296?(r.writeByte(26|n),r.writeUint32(t)):(r.writeByte(27|n),r.writeUint64(t))}o.prototype={peekByte:i("peekByte"),readByte:i("readByte"),readChunk:i("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,r=1023&e,n=32768&e;if(31===t)return 0===r?n?-1/0:1/0:NaN;var i=t?Math.pow(2,t-25)*(1024+r):5960464477539063e-23*r;return n?-i:i},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,r=8388607&e,n=2147483648&e;if(255===t)return 0===r?n?-1/0:1/0:NaN;var i=t?Math.pow(2,t-23-127)*(8388608+r):1401298464324817e-60*r;return n?-i:i},readFloat64:function(){var e=this.readUint32(),t=this.readUint32(),r=e>>20&2047,n=(1048575&e)*4294967296+t,i=2147483648&e;if(2047===r)return 0===n?i?-1/0:1/0:NaN;var o=r?Math.pow(2,r-52-1023)*(4503599627370496+n):5e-324*n;return i?-o:o},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},a.prototype={writeByte:i("writeByte"),result:i("result"),writeFloat16:i("writeFloat16"),writeFloat32:i("writeFloat32"),writeFloat64:i("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:i("writeString"),canWriteBinary:function(e){return!1},writeBinary:i("writeChunk")};var h=Error();function p(e){var t=u(e);switch(t.type){case 0:return l(t,e);case 1:return -1-l(t,e);case 2:return e.readChunk(l(t,e));case 3:return e.readChunk(l(t,e)).toString("utf-8");case 4:case 5:var r,i=l(t,e),o=[];if(null!==i){5===t.type&&(i*=2);for(var s=0;s<i;s++)o[s]=p(e)}else for(;(r=p(e))!==h;)o.push(r);if(5!==t.type)return o;for(var a={},s=0;s<o.length;s+=2)a[o[s]]=o[s+1];return a;case 6:var c=n[l(t,e)],o=p(e);return c?c(o):o;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(l(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case null:return h;default:throw Error("Unknown fixed value: "+t.value)}default:throw Error("Unsupported header: "+JSON.stringify(t))}throw Error("not implemented yet")}function d(e,t){for(var n=0;n<r.length;n++){var i=r[n].fn(e);if(void 0!==i)return f(6,r[n].tag,t),d(i,t)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)f(7,20,t);else if(!0===e)f(7,21,t);else if(null===e)f(7,22,t);else if(void 0===e)f(7,23,t);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?f(1,-1-e,t):f(0,e,t):(c(7,27,t),t.writeFloat64(e));else if("string"==typeof e)t.writeString(e,function(e){f(3,e,t)});else if(t.canWriteBinary(e))t.writeBinary(e,function(e){f(2,e,t)});else if("object"==typeof e){if(m.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){f(4,e.length,t);for(var n=0;n<e.length;n++)d(e[n],t)}else{var o=Object.keys(e);f(5,o.length,t);for(var n=0;n<o.length;n++){let r=parseInt(o[n]);isNaN(r)?d(o[n],t):d(r,t),d(e[o[n]],t)}}}else throw Error("CBOR encoding not supported: "+e)}var y=[],g=[],m={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?g.push(function(r){if(e===r)return t(r)}):g.push(e)},addReader:function(e,t){"string"==typeof e?y.push(function(r,n){if(e===n)return t(r,n)}):y.push(e)},encode:function(e,t){for(var r=0;r<g.length;r++){var n=(0,g[r])(t);if(n)return d(e,n),n.result()}throw Error("Unsupported output format: "+t)},encodeDataItem:function(e,t){for(var r=0;r<g.length;r++){var n=(0,g[r])(t);if(n){if(void 0!==e.getTag())return d(e,n),n.result();return d(e.getData(),n),n.result()}}throw Error("Unsupported output format: "+t)},decode:function(e,t){for(var r=0;r<y.length;r++){var n=(0,y[r])(e,t);if(n)return p(n)}throw Error("Unsupported input format: "+t)},decodeToDataItem:function(t,r){for(var n=0;n<y.length;n++){var i=(0,y[n])(t,r);if(i){let t=p(i);if(t instanceof e)return t;return new e(t)}}throw Error("Unsupported input format: "+r)},addSemanticEncode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw Error("Tag must be a positive integer");return r.push({tag:e,fn:t}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw Error("Tag must be a positive integer");return n[e]=t,this}};function b(e){this.buffer=e,this.pos=0}function w(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=s.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function v(e){this.hex=e,this.pos=0}function _(e){this.$hex="",this.finalFormat=e||"hex"}return b.prototype=Object.create(o.prototype),b.prototype.peekByte=function(){return this.buffer[this.pos]},b.prototype.readByte=function(){return this.buffer[this.pos++]},b.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},b.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},b.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},b.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},b.prototype.readChunk=function(e){var t=s.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},w.prototype=Object.create(a.prototype),w.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=s.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},w.prototype.writeFloat32=function(e){var t=s.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},w.prototype.writeFloat64=function(e){var t=s.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},w.prototype.writeString=function(e,t){var r=s.from(e,"utf-8");t(r.length),this.writeBuffer(r)},w.prototype.canWriteBinary=function(e){return e instanceof s},w.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},w.prototype.writeBuffer=function(e){if(!(e instanceof s))throw TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=s.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=s.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},w.prototype.result=function(){for(var e=s.alloc(this.byteLength),t=0,r=0;r<this.completeBuffers.length;r++){var n=this.completeBuffers[r];n.copy(e,t,0,n.length),t+=n.length}return(this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat)?e.toString(this.stringFormat):e},"function"==typeof s&&(m.addReader(function(e,t){return s.isBuffer(e)?new b(e):"hex"===t||"base64"===t?new b(s.from(e,t)):void 0}),m.addWriter(function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new w(e):void 0:new w})),v.prototype=Object.create(o.prototype),v.prototype.peekByte=function(){return parseInt(this.hex.substring(this.pos,2),16)},v.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},v.prototype.readChunk=function(e){var r=this.hex.substring(this.pos,this.pos+2*e);return(this.pos+=2*e,"function"==typeof s)?s.from(r,"hex"):new t(r)},_.prototype=Object.create(a.prototype),_.prototype.writeByte=function(e){if(e<0||e>255)throw Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},_.prototype.canWriteBinary=function(e){return e instanceof t||"function"==typeof s&&e instanceof s},_.prototype.writeBinary=function(e,r){if(e instanceof t)r(e.length()),this.$hex+=e.$hex;else if("function"==typeof s&&e instanceof s)r(e.length),this.$hex+=e.toString("hex");else throw TypeError("HexWriter only accepts BinaryHex or Buffers")},_.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof s?s.from(this.$hex,"hex"):new t(this.$hex).toString(this.finalFormat)},_.prototype.writeString=function(e,r){var n=t.fromUtf8String(e);r(n.length()),this.$hex+=n.$hex},m.addReader(function(e,r){return e instanceof t||e.$hex?new v(e.$hex):"hex"===r?new v(e):void 0}),m.addWriter(function(e){if("hex"===e)return new _}),m}();return t.addSemanticEncode(0,function(e){if(e instanceof Date)return e.toISOString()}).addSemanticDecode(0,function(e){return new Date(e)}).addSemanticDecode(1,function(e){return new Date(e)}),t})},47675:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataItem=t.addWriter=t.addReader=t.addSemanticEncode=t.addSemanticDecode=t.decodeToDataItem=t.encodeDataItem=void 0;var n=r(28333);Object.defineProperty(t,"encodeDataItem",{enumerable:!0,get:function(){return n.encodeDataItem}}),Object.defineProperty(t,"decodeToDataItem",{enumerable:!0,get:function(){return n.decodeToDataItem}}),Object.defineProperty(t,"addSemanticDecode",{enumerable:!0,get:function(){return n.addSemanticDecode}}),Object.defineProperty(t,"addSemanticEncode",{enumerable:!0,get:function(){return n.addSemanticEncode}}),Object.defineProperty(t,"addReader",{enumerable:!0,get:function(){return n.addReader}}),Object.defineProperty(t,"addWriter",{enumerable:!0,get:function(){return n.addWriter}});var i=r(21012);Object.defineProperty(t,"DataItem",{enumerable:!0,get:function(){return i.DataItem}})},24303:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(22675),i=r(297),o=r(36170),s=Object.values(i.RegistryTypes).filter(e=>!!e.getTag()).map(e=>e.getTag()),a=Object.values(o.ScriptExpressions).map(e=>e.getTag());(0,n.patchTags)(s.concat(a))},30830:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},22675:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patchTags=void 0;let n=r(47675),i=[],o=e=>{e.forEach(e=>{i.find(t=>t===e)||((0,n.addSemanticEncode)(e,t=>{if(t instanceof n.DataItem&&t.getTag()===e)return t.getData()}),(0,n.addSemanticDecode)(e,t=>new n.DataItem(t,e)),i.push(e))})};t.patchTags=o},85390:function(e,t,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},s=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.URDecoder=t.UREncoder=t.UR=t.CryptoAccount=t.DerivationAlgorithm=t.Curve=t.CryptoMultiAccounts=t.buildCryptoHDKey=t.buildCryptoAccount=t.parseResponoseUR=t.pathToKeypath=void 0;let a=r(61081);Object.defineProperty(t,"Curve",{enumerable:!0,get:function(){return a.Curve}}),Object.defineProperty(t,"DerivationAlgorithm",{enumerable:!0,get:function(){return a.DerivationAlgorithm}}),Object.defineProperty(t,"CryptoMultiAccounts",{enumerable:!0,get:function(){return a.CryptoMultiAccounts}}),Object.defineProperty(t,"CryptoAccount",{enumerable:!0,get:function(){return a.CryptoAccount}});let u=r(16139);Object.defineProperty(t,"UR",{enumerable:!0,get:function(){return u.UR}}),Object.defineProperty(t,"UREncoder",{enumerable:!0,get:function(){return u.UREncoder}}),Object.defineProperty(t,"URDecoder",{enumerable:!0,get:function(){return u.URDecoder}});let l=r(7070),c=r(97897);class f{constructor(e,t){this.transport=e,t&&(this.mfp=t)}precheck(){if(this.transport||(0,c.throwTransportError)(c.Status.ERR_TRANSPORT_HAS_NOT_BEEN_SET),!this.mfp)throw Error("missing mfp for this wallet")}sendToDevice(e,t){return s(this,void 0,void 0,function*(){return this.transport.send(e,t)})}checkDeviceLockStatus(){return s(this,void 0,void 0,function*(){return(yield this.sendToDevice(l.Actions.CMD_CHECK_LOCK_STATUS,"")).payload})}getURAccount(e,r,n){return s(this,void 0,void 0,function*(){let i=new a.KeyDerivationSchema((0,t.pathToKeypath)(e),r,n,"ETH"),o=new a.KeyDerivation([i]),s=new a.QRHardwareCall(a.QRHardwareCallType.KeyDerivation,o,"Keystone USB SDK",a.QRHardwareCallVersion.V1).toUR(),c=new u.UREncoder(s,1/0).nextPart().toUpperCase(),f=yield this.sendToDevice(l.Actions.CMD_RESOLVE_UR,c),h=(0,t.parseResponoseUR)(f.payload);return a.CryptoMultiAccounts.fromCBOR(h.cbor)})}sendURRequest(e){return s(this,void 0,void 0,function*(){let r=yield this.sendToDevice(l.Actions.CMD_RESOLVE_UR,e);return(0,t.parseResponoseUR)(r.payload)})}getPubkey(e,t,r){return s(this,void 0,void 0,function*(){let n=yield this.getURAccount(e,t,r),i=n.getKeys()[0];return this.mfp=n.getMasterFingerprint().toString("hex"),{publicKey:i.getKey().toString("hex"),mfp:this.mfp,chainCode:i.getChainCode()}})}getAppConfig(){return s(this,void 0,void 0,function*(){let e=yield this.sendToDevice(l.Actions.CMD_GET_DEVICE_VERSION,"");return{version:e.firmwareVersion,mfp:e.walletMFP}})}}t.default=f;let h=(e,t)=>{let r=e.replace(/[m|M]\//,"").split("/").map(e=>{let r=e.endsWith("'"),n=e.replace("'","");return new a.PathComponent("x"===n||"X"===n?void 0!=t?{index:t,hardened:r}:{hardened:r}:{index:parseInt(n,10),hardened:r})});return new a.CryptoKeypath(r)};t.pathToKeypath=h;let p=e=>{let t=new u.URDecoder;return t.receivePart(e),t.isComplete()||(0,c.throwTransportError)(c.Status.ERR_UR_INCOMPLETE),t.resultUR()};t.parseResponoseUR=p;let d=e=>{let{keys:r,origin:i,note:o,startIndex:s=0}=e;return new a.CryptoAccount(n.from(r[0].mfp,"hex"),r.map((e,r)=>new a.CryptoOutput([],(0,t.buildCryptoHDKey)({publicKey:e.publicKey,chainCode:e.chainCode,mfp:e.mfp,origin:i,originIndex:s+r,note:o}))))};t.buildCryptoAccount=d;let y=e=>{let{publicKey:r,chainCode:i,mfp:o,origin:s,children:u,originIndex:l,childIndex:c,note:f}=e;return new a.CryptoHDKey({isMaster:!1,isPrivateKey:!1,key:n.from(r,"hex"),chainCode:n.from(i,"hex"),origin:(0,t.pathToKeypath)(s,l),children:u?(0,t.pathToKeypath)(u,c):void 0,parentFingerprint:n.from(o,"hex"),name:"Keystone",note:f})};t.buildCryptoHDKey=y,o(r(55906),t)},55906:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.generateURString=t.convertMulitAccountToCryptoAccount=void 0;let i=r(61081),o=r(16139),s=e=>{let t=e.map(e=>e.getMasterFingerprint().toString("hex"));if(0===t.length)throw Error("input list is empty");if(1!==new Set(t).size)throw Error("All accounts must have the same Master Fingerprint");return new i.CryptoAccount(n.from(t[0],"hex"),e.flatMap(e=>e.getKeys()).map(e=>new i.CryptoOutput([i.ScriptExpressions.RAW_SCRIPT],e)))};t.convertMulitAccountToCryptoAccount=s;let a=(e,t)=>{let r=new o.UR(n.from(e,"hex"),t);return new o.UREncoder(r,1/0).nextPart().toUpperCase()};t.generateURString=a},98574:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=void 0,function(e){e[e.CMD_ECHO_TEST=1]="CMD_ECHO_TEST",e[e.CMD_RESOLVE_UR=2]="CMD_RESOLVE_UR",e[e.CMD_CHECK_LOCK_STATUS=3]="CMD_CHECK_LOCK_STATUS",e[e.CMD_EXPORT_ADDRESS=4]="CMD_EXPORT_ADDRESS",e[e.CMD_GET_DEVICE_VERSION=5]="CMD_GET_DEVICE_VERSION"}(r||(t.Actions=r={}))},45642:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Chain=void 0,function(e){e[e.ETH=0]="ETH"}(r||(t.Chain=r={}))},60945:function(e,t,r){"use strict";var n=r(34155);Object.defineProperty(t,"__esModule",{value:!0}),t.OFFSET_CDATA=t.OFFSET_LC=t.OFFSET_P2=t.OFFSET_P1=t.OFFSET_INS=t.OFFSET_CLA=t.USBTimeout=t.MAXUSBPackets=t.USBPackageSize=t.USBInterfaceNumber=t.USBConfigurationValue=void 0,t.USBConfigurationValue=1,t.USBInterfaceNumber="development"===n.env.KEYSTONE_USB_ENV?1:0,t.USBPackageSize=64,t.MAXUSBPackets=200,t.USBTimeout=15e3,t.OFFSET_CLA=0,t.OFFSET_INS=1,t.OFFSET_P1=3,t.OFFSET_P2=5,t.OFFSET_LC=7,t.OFFSET_CDATA=9},76216:function(e,t,r){"use strict";var n=r(34155),i=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.logMethod=void 0;let o="development"===n.env.KEYSTONE_USB_ENV;function s(e,t,r){let n=r.value;return r.value=function(...e){return i(this,void 0,void 0,function*(){let r=e.map(e=>JSON.stringify(e)).join(),i=yield n.apply(this,e);return o&&console.log(`[${new Date().toISOString()}] Call: ${t}(${r}) => ${JSON.stringify(i)}`),i})},r}t.logMethod=s},64138:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;let n=r(59874),i=r(60945),o=r(97897),s=55,a=9,u=e=>0===e.length?null:new TextDecoder("utf-8").decode(e),l=(e,t,r)=>{if((0,n.isString)(r)&&(!r||0===r.length)){let r=new Uint8Array(9);return r[i.OFFSET_CLA]=0,(0,n.setUint16)(r,i.OFFSET_INS,e),(0,n.setUint16)(r,i.OFFSET_P1,1),(0,n.setUint16)(r,i.OFFSET_P2,0),(0,n.setUint16)(r,i.OFFSET_LC,t),[r]}let o=(0,n.isString)(r)?new TextEncoder().encode(r):r,u=[],l=Math.ceil(o.length/s);for(let r=0;r<l;r++){let c=o.slice(r*s,(r+1)*s),f=new Uint8Array(a+c.length);f[i.OFFSET_CLA]=0,(0,n.setUint16)(f,i.OFFSET_INS,e),(0,n.setUint16)(f,i.OFFSET_P1,l),(0,n.setUint16)(f,i.OFFSET_P2,r),(0,n.setUint16)(f,i.OFFSET_LC,t),f.set(c,a),u.push(f)}return u};t.encode=l;let c=e=>{e.length<a&&(0,o.throwTransportError)(o.Status.ERR_INVALID_PACKET_SIZE);let t=new DataView(e.buffer),r=t.getUint8(0),n=t.getUint16(i.OFFSET_INS),s=t.getUint16(i.OFFSET_P1),l=t.getUint16(i.OFFSET_P2),c=t.getUint16(i.OFFSET_LC),f=e.buffer.byteLength-2,h=t.getUint16(f),p=f-i.OFFSET_CDATA;return{cla:r,ins:n,totalPackets:s,packetIndex:l,requestID:c,data:u(new Uint8Array(e.buffer,i.OFFSET_CDATA,p)),status:h}},f=e=>e.map(e=>c(e)).sort(({packetIndex:e},{packetIndex:t})=>e-t).reduce((e,{data:t,status:r})=>({data:e.data+t,status:r}),{data:""});t.decode=f},59874:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isString=t.isUint8Array=t.generateRequestID=t.isEmpty=t.setUint16=t.safeJSONparse=t.safeJSONStringify=void 0;let r=e=>{try{return JSON.stringify(e)}catch(e){return""}};t.safeJSONStringify=r;let n=e=>{try{return JSON.parse(e)}catch(t){return e}};t.safeJSONparse=n;let i=(e,t,r)=>{e[t]=r>>8&255,e[t+1]=255&r};t.setUint16=i;let o=e=>Array.isArray(e)?0===e.length:"object"==typeof e?0===Object.keys(e).length:!e;t.isEmpty=o;let s=()=>Math.floor(65535*Math.random());t.generateRequestID=s;let a=e=>e instanceof Uint8Array;t.isUint8Array=a;let u=e=>"string"==typeof e;t.isString=u},7070:function(e,t,r){"use strict";var n,i,o,s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},u=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)},l=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})},c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.TransportWebUSB=t.Chain=t.StatusCode=t.Actions=void 0;let f=r(48764),h=r(97897),p=r(64138),d=r(60945),y=r(42230),g=r(59874),m=r(76216);var b=r(98574);Object.defineProperty(t,"Actions",{enumerable:!0,get:function(){return b.Actions}}),u(r(42230),t);var w=r(97897);Object.defineProperty(t,"StatusCode",{enumerable:!0,get:function(){return w.Status}});var v=r(45642);Object.defineProperty(t,"Chain",{enumerable:!0,get:function(){return v.Chain}}),u(r(76216),t),u(r(59874),t);class _{constructor(e,t){var r,i,o;n.add(this),this.endpoint=3,this.requestTimeout=d.USBTimeout,this.maxPacketSize=d.MAXUSBPackets,this.receive=(e,t)=>l(this,void 0,void 0,function*(){var r,n,i,o,s,a,u;if(!(null===(r=this.device)||void 0===r?void 0:r.opened))return null;let l=[],c=0,y=0,m=!0;do{let r=yield this.device.transferIn(this.endpoint,d.USBPackageSize);"babble"===r.status&&(0,h.throwTransportError)(h.Status.ERR_RECEIVED_BABBLE);let s=!!(null===(n=null==r?void 0:r.data)||void 0===n?void 0:n.buffer),a=(null===(o=null===(i=null==r?void 0:r.data)||void 0===i?void 0:i.buffer)||void 0===o?void 0:o.byteLength)===0;if(!(s&&!a&&new DataView(r.data.buffer).getUint16(d.OFFSET_INS)===e&&new DataView(r.data.buffer).getUint16(d.OFFSET_LC)===t)){yield this.open();continue}m=!1,l.push(f.Buffer.from(r.data.buffer)),y=new DataView(r.data.buffer).getUint16(d.OFFSET_P1),c+=1}while(c<y||m);let b=(0,p.decode)(l);if(b.status!==h.Status.RSP_SUCCESS_CODE)throw new h.TransportError(`${null!==(a=null===(s=(0,g.safeJSONparse)(b.data))||void 0===s?void 0:s.payload)&&void 0!==a?a:"unknown error"}`,null!==(u=b.status)&&void 0!==u?u:h.Status.RSP_FAILURE_CODE);return(0,g.safeJSONparse)(b.data)}),this.open=()=>l(this,void 0,void 0,function*(){this.device||(this.device=yield(0,y.requestKeystoneDevice)()),yield(0,y.open)(this.device)}),this.close=()=>l(this,void 0,void 0,function*(){var e;return(null===(e=this.device)||void 0===e?void 0:e.opened)&&(0,y.close)(this.device)}),this.endpoint=null!==(r=null==t?void 0:t.endpoint)&&void 0!==r?r:this.endpoint,this.requestTimeout=null!==(i=null==t?void 0:t.timeout)&&void 0!==i?i:this.requestTimeout,this.maxPacketSize=null!==(o=null==t?void 0:t.maxPacketSize)&&void 0!==o?o:this.maxPacketSize,this.device=e}send(e,t){return l(this,void 0,void 0,function*(){return yield c(this,n,"m",o).call(this,e,t).finally(()=>l(this,void 0,void 0,function*(){yield(0,y.close)(this.device)}))})}}t.TransportWebUSB=_,i=_,n=new WeakSet,o=function(e,t){var r;return l(this,void 0,void 0,function*(){let n;yield(0,y.open)(this.device),(null===(r=this.device)||void 0===r?void 0:r.opened)||(0,h.throwTransportError)(h.Status.ERR_DEVICE_NOT_OPENED),(0,g.isUint8Array)(t)||(0,g.isString)(t)||(t=(0,g.safeJSONStringify)(t));let i=(0,g.generateRequestID)(),o=(0,p.encode)(e,i,t);this.maxPacketSize<o.length&&(0,h.throwTransportError)(h.Status.ERR_DATA_TOO_LARGE);let s=new Promise((e,t)=>{n=setTimeout(()=>t(new h.TransportError(h.ErrorInfo[h.Status.ERR_TIMEOUT],h.Status.ERR_TIMEOUT)),this.requestTimeout)});return Promise.race([l(this,void 0,void 0,function*(){try{do{let e=yield this.device.transferOut(this.endpoint,o[0]);"ok"!==e.status&&(0,h.throwTransportError)(h.Status.ERR_RESPONSE_STATUS_NOT_OK),o.shift()}while(o.length>0);return yield this.receive(e,i)}finally{clearTimeout(n)}}),s])})},_.requestPermission=()=>l(void 0,void 0,void 0,function*(){return yield(0,y.close)((yield(0,y.request)()))}),_.connect=e=>l(void 0,void 0,void 0,function*(){yield(0,y.isSupported)();let t=yield(0,y.getKeystoneDevices)(),r=null;return r=t.length>1?yield(0,y.requestKeystoneDevice)():t[0],(0,y.initializeDisconnectListener)(r,null==e?void 0:e.disconnectListener),new i(r,e)}),a([m.logMethod],_.prototype,"send",null)},42230:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.close=t.request=t.gracefullyResetDevice=t.isSupported=t.getFirstKeystoneDevice=t.getKeystoneDevices=t.open=t.requestKeystoneDevice=t.initializeDisconnectListener=t.keystoneUSBVendorId=void 0;let i=r(60945),o=r(59874),s=r(97897);t.keystoneUSBVendorId=4617;let a=[{vendorId:t.keystoneUSBVendorId}],u=(e,r)=>{let n=i=>{e===i.device&&(r&&r(e),(0,t.close)(e),navigator.usb.removeEventListener("disconnect",n))};navigator.usb.addEventListener("disconnect",n)};function l(e){return n(this,void 0,void 0,function*(){null===e.configuration&&(yield e.selectConfiguration(i.USBConfigurationValue))})}function c(){return n(this,void 0,void 0,function*(){return yield navigator.usb.requestDevice({filters:a})})}t.initializeDisconnectListener=u,t.requestKeystoneDevice=c;let f=e=>n(void 0,void 0,void 0,function*(){yield e.open(),yield l(e),yield y(e);try{yield e.claimInterface(i.USBInterfaceNumber)}catch(r){throw yield(0,t.close)(e),r}return e});function h(){return n(this,void 0,void 0,function*(){return(yield navigator.usb.getDevices()).filter(e=>e.vendorId===t.keystoneUSBVendorId)})}function p(){return n(this,void 0,void 0,function*(){let e=yield h();return e.length>0?e[0]:c()})}t.open=f,t.getKeystoneDevices=h,t.getFirstKeystoneDevice=p;let d=()=>n(void 0,void 0,void 0,function*(){return(null==navigator?void 0:navigator.usb)&&"function"==typeof navigator.usb.getDevices||(0,s.throwTransportError)(s.Status.ERR_NOT_SUPPORTED),(0,o.isEmpty)((yield h()))&&(0,s.throwTransportError)(s.Status.ERR_DEVICE_NOT_FOUND),!0});function y(e){return n(this,void 0,void 0,function*(){try{yield e.reset()}catch(e){console.warn(e)}})}t.isSupported=d,t.gracefullyResetDevice=y;let g=()=>n(void 0,void 0,void 0,function*(){let e=yield c();return yield(0,t.open)(e)});t.request=g;let m=e=>n(void 0,void 0,void 0,function*(){try{yield e.releaseInterface(i.USBInterfaceNumber),yield y(e),yield e.close()}catch(e){console.warn(e)}});t.close=m},95165:function(e,t,r){"use strict";var n,i,o=r(48764).Buffer,s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return a(t,e),t},l=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let c=u(r(46578)),f=u(r(85390)),h=r(69265),p=r(61081),d=r(35487),y=r(81869),g=u(r(50103)),m=r(15781),b=r(16139),w=r(97897),v=r(2605),_=e=>e.replace(/[m|M]\//,"").split("/").map(e=>{let t=e.split("'");return{pathIndex:parseInt(t[0]),hardened:!!t[1]}});!function(e){e[e.mainnet=0]="mainnet",e[e.testnet=1]="testnet"}(n||(n={})),function(e){e[e.p2pkh=44]="p2pkh",e[e.p2sh=49]="p2sh",e[e.p2wpkh=84]="p2wpkh",e[e.p2tr=86]="p2tr"}(i||(i={}));let E={[n.mainnet]:{[i.p2pkh]:{private:76066276,public:76067358},[i.p2sh]:{private:77428856,public:77429938},[i.p2wpkh]:{private:78791436,public:78792518},[i.p2tr]:{private:76066276,public:76067358}},[n.testnet]:{[i.p2pkh]:{private:70615956,public:70617039},[i.p2sh]:{private:71978536,public:71979618},[i.p2wpkh]:{private:73341116,public:73342198},[i.p2tr]:{private:70615956,public:70617039}}},S=(e,t)=>{let r=0===t?n.mainnet:n.testnet,o={[i.p2pkh]:i.p2pkh,[i.p2sh]:i.p2sh,[i.p2wpkh]:i.p2wpkh,[i.p2tr]:i.p2tr}[e]||null;if(null===o)throw Error("Invalid purpose");return E[r][o]};class T extends f.default{constructor(e,t){super(e,t)}static createWithUSBTransport(e){return l(this,void 0,void 0,function*(){yield h.TransportWebUSB.requestPermission();let t=yield h.TransportWebUSB.connect(e);return yield t.close(),new T(t)})}getExtendedPublicKey(e,t=!0){return l(this,void 0,void 0,function*(){let t=_(e);if(t.length<=0)throw Error("Invalid path");let r=t[0].pathIndex,n=t[1].pathIndex;if(44!=r&&49!=r&&84!==r&&86!==r&&1!==r)throw Error("Invalid coin index");if(0!=n&&1!=n)throw Error("Invalid coin type");let i=S(r,n),o=yield this.getURAccount(e,p.Curve.secp256k1,p.DerivationAlgorithm.slip10),s=o.getKeys()[0],a=s.getKey(),u=s.getChainCode(),l=new y.HDKey({publicKey:a,chainCode:u,versions:i});return this.mfp=o.getMasterFingerprint().toString("hex"),l.publicExtendedKey})}signPsbt(e){return l(this,void 0,void 0,function*(){let t=yield this.signPsbtRaw(e);return g.Psbt.fromBase64(t).data.inputs.map((e,t)=>{let r=t;if(e.partialSig&&e.partialSig.length>0){let t=e.partialSig[0],n=t.pubkey,i=t.signature;if(e.tapBip32Derivation&&e.tapBip32Derivation.length>0){let t=e.tapBip32Derivation[0].leafHashes;if(t.length>0)return[Number(r),new m.PartialSignature(o.from(n),o.from(i),o.from(t[0]))]}return[Number(r),new m.PartialSignature(o.from(n),o.from(i))]}if(e.tapKeySig){let t=e.tapInternalKey,n=e.tapKeySig;return[r,new m.PartialSignature(o.from(t),o.from(n))]}throw Error("No signature found for input "+r)}).filter(e=>e)})}signPsbtRaw(e){return l(this,void 0,void 0,function*(){"string"==typeof e&&(e=o.from(e,"base64"));let t=g.Psbt.fromBuffer(e),r=new p.CryptoPSBT(o.from(t.toBuffer())).toUR(),n=new b.UREncoder(r,1/0).nextPart().toUpperCase(),i=yield this.sendToDevice(v.Actions.CMD_RESOLVE_UR,n),s=(0,f.parseResponoseUR)(i.payload);return p.CryptoPSBT.fromCBOR(s.cbor).getPSBT().toString("base64")})}getMasterFingerprint(){return l(this,void 0,void 0,function*(){return(yield this.getAppConfig()).mfp})}setMasterFingerprint(e){this.mfp=e}signMessage(e,t){return l(this,void 0,void 0,function*(){this.precheck();let r=I(o.from(e,"utf8"),t,this.mfp,d.DataType.message);return A((yield this.sendToDevice(v.Actions.CMD_RESOLVE_UR,r)).payload)})}}function I(e,t,r,n){let i=c.v4(),o=[r],s=[t],a=d.BtcSignRequest.constructBtcRequest(i,o,e,n,s).toUR();return new b.UREncoder(a,1/0).nextPart().toUpperCase()}let A=e=>{let t=new b.URDecoder;t.receivePart(e),t.isComplete()||(0,w.throwTransportError)(w.Status.ERR_UR_INCOMPLETE);let r=t.resultUR();return d.BtcSignature.fromCBOR(r.cbor).getSignature().toString("base64")};t.default=T},15781:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartialSignature=void 0;class r{constructor(e,t,r){this.pubkey=e,this.signature=t,this.tapleafHash=r}}t.PartialSignature=r},20916:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwTransportError=t.ErrorInfo=t.TransportError=void 0;let n=r(88936);class i extends Error{constructor(e,t,r){super(`${e} (error_code: ${t})`),this.name="TransportError",this.transportErrorCode=t,this.details=null!=r?r:"",Object.setPrototypeOf(this,new.target.prototype)}}t.TransportError=i,t.ErrorInfo={[n.Status.ERR_DEVICE_NOT_OPENED]:"The USB device cannot be connected.",[n.Status.ERR_DEVICE_NOT_FOUND]:"The USB device cannot be found.",[n.Status.ERR_RESPONSE_STATUS_NOT_OK]:"The response status is not ok.",[n.Status.ERR_TIMEOUT]:"The request timed out.",[n.Status.ERR_DATA_TOO_LARGE]:"The data is too large.",[n.Status.ERR_NOT_SUPPORTED]:"The USB device is not supported.",[n.Status.ERR_BUFFER_MISMATCH]:"The buffer mismatched.",[n.Status.ERR_RECEIVED_BABBLE]:"The USB device received babble.",[n.Status.ERR_INVALID_PACKET_SIZE]:"The packet size is invalid.",[n.Status.ERR_TRANSPORT_HAS_NOT_BEEN_SET]:"The transport has not been set.",[n.Status.ERR_UR_INCOMPLETE]:"The UR is incomplete.",[n.Status.ERR_UR_INVALID_TYPE]:"The UR type is invalid."};let o=e=>{var r;throw new i(null!==(r=t.ErrorInfo[e])&&void 0!==r?r:"Unknown error",e)};t.throwTransportError=o},97897:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(88936),t),i(r(20916),t)},88936:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Status=void 0,function(e){e[e.RSP_SUCCESS_CODE=0]="RSP_SUCCESS_CODE",e[e.RSP_FAILURE_CODE=1]="RSP_FAILURE_CODE",e[e.PRS_INVALID_TOTAL_PACKETS=2]="PRS_INVALID_TOTAL_PACKETS",e[e.PRS_INVALID_INDEX=3]="PRS_INVALID_INDEX",e[e.PRS_PARSING_REJECTED=4]="PRS_PARSING_REJECTED",e[e.PRS_PARSING_ERROR=5]="PRS_PARSING_ERROR",e[e.PRS_PARSING_DISALLOWED=6]="PRS_PARSING_DISALLOWED",e[e.PRS_PARSING_UNMATCHED=7]="PRS_PARSING_UNMATCHED",e[e.PRS_PARSING_MISMATCHED_WALLET=8]="PRS_PARSING_MISMATCHED_WALLET",e[e.PRS_PARSING_VERIFY_PASSWORD_ERROR=9]="PRS_PARSING_VERIFY_PASSWORD_ERROR",e[e.PRS_EXPORT_ADDRESS_UNSUPPORTED_CHAIN=10]="PRS_EXPORT_ADDRESS_UNSUPPORTED_CHAIN",e[e.PRS_EXPORT_ADDRESS_INVALID_PARAMS=11]="PRS_EXPORT_ADDRESS_INVALID_PARAMS",e[e.PRS_EXPORT_ADDRESS_ERROR=12]="PRS_EXPORT_ADDRESS_ERROR",e[e.PRS_EXPORT_ADDRESS_DISALLOWED=13]="PRS_EXPORT_ADDRESS_DISALLOWED",e[e.PRS_EXPORT_ADDRESS_REJECTED=14]="PRS_EXPORT_ADDRESS_REJECTED",e[e.PRS_EXPORT_ADDRESS_BUSY=15]="PRS_EXPORT_ADDRESS_BUSY",e[e.ERR_DEVICE_NOT_OPENED=2684354561]="ERR_DEVICE_NOT_OPENED",e[e.ERR_DEVICE_NOT_FOUND=2684354562]="ERR_DEVICE_NOT_FOUND",e[e.ERR_RESPONSE_STATUS_NOT_OK=2684354563]="ERR_RESPONSE_STATUS_NOT_OK",e[e.ERR_TIMEOUT=2684354564]="ERR_TIMEOUT",e[e.ERR_DATA_TOO_LARGE=2684354565]="ERR_DATA_TOO_LARGE",e[e.ERR_NOT_SUPPORTED=2684354566]="ERR_NOT_SUPPORTED",e[e.ERR_BUFFER_MISMATCH=2684354567]="ERR_BUFFER_MISMATCH",e[e.ERR_RECEIVED_BABBLE=2684354568]="ERR_RECEIVED_BABBLE",e[e.ERR_INVALID_PACKET_SIZE=2684354569]="ERR_INVALID_PACKET_SIZE",e[e.ERR_TRANSPORT_HAS_NOT_BEEN_SET=2684354570]="ERR_TRANSPORT_HAS_NOT_BEEN_SET",e[e.ERR_UR_INCOMPLETE=2684354571]="ERR_UR_INCOMPLETE",e[e.ERR_UR_INVALID_TYPE=2684354572]="ERR_UR_INVALID_TYPE",e[e.RSP_MAX_VALUE=4294967295]="RSP_MAX_VALUE"}(r||(t.Status=r={}))},97763:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=void 0,function(e){e[e.CMD_ECHO_TEST=1]="CMD_ECHO_TEST",e[e.CMD_RESOLVE_UR=2]="CMD_RESOLVE_UR",e[e.CMD_CHECK_LOCK_STATUS=3]="CMD_CHECK_LOCK_STATUS",e[e.CMD_EXPORT_ADDRESS=4]="CMD_EXPORT_ADDRESS",e[e.CMD_GET_DEVICE_VERSION=5]="CMD_GET_DEVICE_VERSION"}(r||(t.Actions=r={}))},6963:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Chain=void 0,function(e){e[e.ETH=0]="ETH"}(r||(t.Chain=r={}))},36651:function(e,t,r){"use strict";var n=r(34155);Object.defineProperty(t,"__esModule",{value:!0}),t.keystoneUSBProductId=t.keystoneUSBVendorId=t.OFFSET_CDATA=t.OFFSET_LC=t.OFFSET_P2=t.OFFSET_P1=t.OFFSET_INS=t.OFFSET_CLA=t.USBTimeout=t.MAXUSBPackets=t.USBPackageSize=t.USBInterfaceNumber=t.USBConfigurationValue=void 0,t.USBConfigurationValue=1,t.USBInterfaceNumber="undefined"!=typeof window?0:"development"===n.env.KEYSTONE_USB_ENV?1:0,t.USBPackageSize=64,t.MAXUSBPackets=200,t.USBTimeout=15e3,t.OFFSET_CLA=0,t.OFFSET_INS=1,t.OFFSET_P1=3,t.OFFSET_P2=5,t.OFFSET_LC=7,t.OFFSET_CDATA=9,t.keystoneUSBVendorId=4617,t.keystoneUSBProductId=12289},75157:function(e,t,r){"use strict";var n=r(34155),i=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.logMethod=s;let o="development"===n.env.KEYSTONE_USB_ENV;function s(e,t,r){let n=r.value;return r.value=function(...e){return i(this,void 0,void 0,function*(){let r=e.map(e=>JSON.stringify(e)).join(),i=yield n.apply(this,e);return o&&console.log(`[${new Date().toISOString()}] Call: ${t}(${r}) => ${JSON.stringify(i)}`),i})},r}},99964:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;let n=r(75756),i=r(36651),o=r(97897),s=55,a=9,u=e=>0===e.length?null:new TextDecoder("utf-8").decode(e),l=(e,t,r)=>{if((0,n.isString)(r)&&(!r||0===r.length)){let r=new Uint8Array(9);return r[i.OFFSET_CLA]=0,(0,n.setUint16)(r,i.OFFSET_INS,e),(0,n.setUint16)(r,i.OFFSET_P1,1),(0,n.setUint16)(r,i.OFFSET_P2,0),(0,n.setUint16)(r,i.OFFSET_LC,t),[r]}let o=(0,n.isString)(r)?new TextEncoder().encode(r):r,u=[],l=Math.ceil(o.length/s);for(let r=0;r<l;r++){let c=o.slice(r*s,(r+1)*s),f=new Uint8Array(a+c.length);f[i.OFFSET_CLA]=0,(0,n.setUint16)(f,i.OFFSET_INS,e),(0,n.setUint16)(f,i.OFFSET_P1,l),(0,n.setUint16)(f,i.OFFSET_P2,r),(0,n.setUint16)(f,i.OFFSET_LC,t),f.set(c,a),u.push(f)}return u};t.encode=l;let c=e=>{e.length<a&&(0,o.throwTransportError)(o.Status.ERR_INVALID_PACKET_SIZE);let t=new DataView(e.buffer),r=t.getUint8(0),n=t.getUint16(i.OFFSET_INS),s=t.getUint16(i.OFFSET_P1),l=t.getUint16(i.OFFSET_P2),c=t.getUint16(i.OFFSET_LC),f=e.buffer.byteLength-2,h=t.getUint16(f),p=f-i.OFFSET_CDATA;return{cla:r,ins:n,totalPackets:s,packetIndex:l,requestID:c,data:u(new Uint8Array(e.buffer,i.OFFSET_CDATA,p)),status:h}},f=e=>e.map(e=>c(e)).sort(({packetIndex:e},{packetIndex:t})=>e-t).reduce((e,{data:t,status:r})=>({data:e.data+t,status:r}),{data:""});t.decode=f},75756:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isString=t.isUint8Array=t.generateRequestID=t.isEmpty=t.setUint16=t.safeJSONparse=t.safeJSONStringify=void 0;let r=e=>{try{return JSON.stringify(e)}catch(e){return""}};t.safeJSONStringify=r;let n=e=>{try{return JSON.parse(e)}catch(t){return e}};t.safeJSONparse=n;let i=(e,t,r)=>{e[t]=r>>8&255,e[t+1]=255&r};t.setUint16=i;let o=e=>Array.isArray(e)?0===e.length:"object"==typeof e?0===Object.keys(e).length:!e;t.isEmpty=o;let s=()=>Math.floor(65535*Math.random());t.generateRequestID=s;let a=e=>e instanceof Uint8Array;t.isUint8Array=a;let u=e=>"string"==typeof e;t.isString=u},2605:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};this&&this.__awaiter,Object.defineProperty(t,"__esModule",{value:!0}),t.Chain=t.StatusCode=t.Actions=void 0,r(36651);var o=r(97763);Object.defineProperty(t,"Actions",{enumerable:!0,get:function(){return o.Actions}});var s=r(97897);Object.defineProperty(t,"StatusCode",{enumerable:!0,get:function(){return s.Status}});var a=r(6963);Object.defineProperty(t,"Chain",{enumerable:!0,get:function(){return a.Chain}}),i(r(75157),t),i(r(75756),t),i(r(99964),t),i(r(36651),t),i(r(26358),t)},26358:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},69265:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(95074),t)},95074:function(e,t,r){"use strict";var n,i,o,s=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},a=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})},u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.createKeystoneTransport=t.TransportWebUSB=void 0;let l=r(2605),c=r(2605),f=r(2605),h=r(97897),p=r(48764),d=[{vendorId:c.keystoneUSBVendorId}];class y{static getKeystoneDevices(){return a(this,void 0,void 0,function*(){return(yield navigator.usb.getDevices()).filter(e=>e.vendorId===c.keystoneUSBVendorId)})}static getFirstKeystoneDevice(){return a(this,void 0,void 0,function*(){let e=yield this.getKeystoneDevices();return e.length>0?e[0]:w()})}static isSupported(){return a(this,void 0,void 0,function*(){return(null==navigator?void 0:navigator.usb)&&"function"==typeof navigator.usb.getDevices||(0,h.throwTransportError)(h.Status.ERR_NOT_SUPPORTED),(0,f.isEmpty)((yield this.getKeystoneDevices()))&&(0,h.throwTransportError)(h.Status.ERR_DEVICE_NOT_FOUND),!0})}constructor(e,t){var r,i,o;n.add(this),this.endpoint=3,this.requestTimeout=c.USBTimeout,this.maxPacketSize=c.MAXUSBPackets,this.receive=(e,t)=>a(this,void 0,void 0,function*(){var r,n,i,o,s,a,u;if(!(null===(r=this.device)||void 0===r?void 0:r.opened))return null;let d=[],y=0,g=0,m=!0;do{let r=yield this.device.transferIn(this.endpoint,c.USBPackageSize);"babble"===r.status&&(0,h.throwTransportError)(h.Status.ERR_RECEIVED_BABBLE);let s=!!(null===(n=null==r?void 0:r.data)||void 0===n?void 0:n.buffer),a=(null===(o=null===(i=null==r?void 0:r.data)||void 0===i?void 0:i.buffer)||void 0===o?void 0:o.byteLength)===0;if(!(s&&!a&&new DataView(r.data.buffer).getUint16(c.OFFSET_INS)===e&&new DataView(r.data.buffer).getUint16(c.OFFSET_LC)===t)){yield this.open();continue}m=!1,d.push(p.Buffer.from(r.data.buffer)),g=new DataView(r.data.buffer).getUint16(c.OFFSET_P1),y+=1}while(y<g||m);let b=(0,l.decode)(d);if(b.status!==h.Status.RSP_SUCCESS_CODE)throw new h.TransportError(`${null!==(a=null===(s=(0,f.safeJSONparse)(b.data))||void 0===s?void 0:s.payload)&&void 0!==a?a:"unknown error"}`,null!==(u=b.status)&&void 0!==u?u:h.Status.RSP_FAILURE_CODE);return(0,f.safeJSONparse)(b.data)}),this.open=()=>a(this,void 0,void 0,function*(){this.device||(this.device=yield w()),yield v(this.device)}),this.close=()=>a(this,void 0,void 0,function*(){var e;(null===(e=this.device)||void 0===e?void 0:e.opened)&&(yield S(this.device))}),this.endpoint=null!==(r=null==t?void 0:t.endpoint)&&void 0!==r?r:this.endpoint,this.requestTimeout=null!==(i=null==t?void 0:t.timeout)&&void 0!==i?i:this.requestTimeout,this.maxPacketSize=null!==(o=null==t?void 0:t.maxPacketSize)&&void 0!==o?o:this.maxPacketSize,this.device=e}send(e,t){return a(this,void 0,void 0,function*(){return yield u(this,n,"m",o).call(this,e,t).finally(()=>a(this,void 0,void 0,function*(){yield S(this.device)}))})}}t.TransportWebUSB=y,i=y,n=new WeakSet,o=function(e,t){var r;return a(this,void 0,void 0,function*(){let n;yield v(this.device),(null===(r=this.device)||void 0===r?void 0:r.opened)||(0,h.throwTransportError)(h.Status.ERR_DEVICE_NOT_OPENED),(0,f.isUint8Array)(t)||(0,f.isString)(t)||(t=(0,f.safeJSONStringify)(t));let i=(0,f.generateRequestID)(),o=(0,l.encode)(e,i,t);this.maxPacketSize<o.length&&(0,h.throwTransportError)(h.Status.ERR_DATA_TOO_LARGE);let s=new Promise((e,t)=>{n=setTimeout(()=>t(new h.TransportError(h.ErrorInfo[h.Status.ERR_TIMEOUT],h.Status.ERR_TIMEOUT)),this.requestTimeout)});return Promise.race([a(this,void 0,void 0,function*(){try{do{let e=yield this.device.transferOut(this.endpoint,o[0]);"ok"!==e.status&&(0,h.throwTransportError)(h.Status.ERR_RESPONSE_STATUS_NOT_OK),o.shift()}while(o.length>0);return yield this.receive(e,i)}finally{clearTimeout(n)}}),s])})},y.requestPermission=()=>a(void 0,void 0,void 0,function*(){return yield S((yield E()))}),y.connect=e=>a(void 0,void 0,void 0,function*(){yield i.isSupported();let t=yield i.getKeystoneDevices(),r=null;return g(r=t.length>1?yield w():t[0],null==e?void 0:e.disconnectListener),new i(r,e)}),s([l.logMethod],y.prototype,"send",null);let g=(e,t)=>{let r=n=>{e===n.device&&(t&&t(e),S(e),navigator.usb.removeEventListener("disconnect",r))};navigator.usb.addEventListener("disconnect",r)};function m(e=1e5){return a(this,void 0,void 0,function*(){if((yield y.getKeystoneDevices()).length<=0)try{yield y.requestPermission()}catch(e){throw Error("USB_PERMISSION_NOT_AVAILABLE")}let t=yield y.connect({timeout:e});return yield t.close(),t})}function b(e){return a(this,void 0,void 0,function*(){null===e.configuration&&(yield e.selectConfiguration(c.USBConfigurationValue))})}function w(){return a(this,void 0,void 0,function*(){return yield navigator.usb.requestDevice({filters:d})})}t.createKeystoneTransport=m;let v=e=>a(void 0,void 0,void 0,function*(){yield e.open(),yield b(e),yield _(e);try{yield e.claimInterface(c.USBInterfaceNumber)}catch(t){throw yield S(e),t}return e});function _(e){return a(this,void 0,void 0,function*(){try{yield e.reset()}catch(e){console.warn(e)}})}let E=()=>a(void 0,void 0,void 0,function*(){let e=yield w();return yield v(e)}),S=e=>a(void 0,void 0,void 0,function*(){try{yield e.releaseInterface(c.USBInterfaceNumber),yield _(e),yield e.close()}catch(e){console.warn(e)}})},59760:function(e,t,r){"use strict";var n,i=r(48764).Buffer,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let s=o(r(69282)),a=r(53154),u="ableacidalsoapexaquaarchatomauntawayaxisbackbaldbarnbeltbetabiasbluebodybragbrewbulbbuzzcalmcashcatschefcityclawcodecolacookcostcruxcurlcuspcyandarkdatadaysdelidicedietdoordowndrawdropdrumdulldutyeacheasyechoedgeepicevenexamexiteyesfactfairfernfigsfilmfishfizzflapflewfluxfoxyfreefrogfuelfundgalagamegeargemsgiftgirlglowgoodgraygrimgurugushgyrohalfhanghardhawkheathelphighhillholyhopehornhutsicedideaidleinchinkyintoirisironitemjadejazzjoinjoltjowljudojugsjumpjunkjurykeepkenokeptkeyskickkilnkingkitekiwiknoblamblavalazyleaflegsliarlimplionlistlogoloudloveluaulucklungmainmanymathmazememomenumeowmildmintmissmonknailnavyneednewsnextnoonnotenumbobeyoboeomitonyxopenovalowlspaidpartpeckplaypluspoempoolposepuffpumapurrquadquizraceramprealredorichroadrockroofrubyruinrunsrustsafesagascarsetssilkskewslotsoapsolosongstubsurfswantacotasktaxitenttiedtimetinytoiltombtoystriptunatwinuglyundouniturgeuservastveryvetovialvibeviewvisavoidvowswallwandwarmwaspwavewaxywebswhatwhenwhizwolfworkyankyawnyellyogayurtzapszerozestzinczonezoom",l=[],c=256,f=4,h=2;!function(e){e.STANDARD="standard",e.URI="uri",e.MINIMAL="minimal"}(n||(n={}));let p=e=>u.slice(e*f,e*f+f),d=e=>{let t=p(e);return`${t[0]}${t[f-1]}`},y=e=>{let t=a.getCRCHex(i.from(e,"hex"));return`${e}${t}`},g=(e,t)=>{let r=y(e);return i.from(r,"hex").reduce((e,t)=>[...e,p(t)],[]).join(t)},m=e=>{let t=y(e);return i.from(t,"hex").reduce((e,t)=>e+d(t),"")},b=(e,t)=>{s.default(e.length===t,"Invalid Bytewords: word.length does not match wordLength provided");let r=26;if(0===l.length){l=[...Array(r*r)].map(()=>-1);for(let e=0;e<c;e++){let t=p(e),n=t[0].charCodeAt(0)-97;l[(t[3].charCodeAt(0)-97)*r+n]=e}}let n=e[0].toLowerCase().charCodeAt(0)-97,o=e[4==t?3:1].toLowerCase().charCodeAt(0)-97;s.default(0<=n&&n<r&&0<=o&&o<r,"Invalid Bytewords: invalid word");let a=l[o*r+n];if(s.default(-1!==a,"Invalid Bytewords: value not in lookup table"),t==f){let t=p(a),r=e[1].toLowerCase(),n=e[2].toLowerCase();s.default(r===t[1]&&n===t[2],"Invalid Bytewords: invalid middle letters of word")}return i.from([a]).toString("hex")},w=(e,t,r)=>{let n=(r==f?e.split(t):a.partition(e,2)).map(e=>b(e,r)).join("");s.default(n.length>=5,"Invalid Bytewords: invalid decoded string length");let[o,u]=a.split(i.from(n,"hex"),4),l=a.getCRCHex(o);return s.default(l===u.toString("hex"),"Invalid Checksum"),o.toString("hex")},v=(e,t=n.MINIMAL)=>{switch(t){case n.STANDARD:return w(e," ",f);case n.URI:return w(e,"-",f);case n.MINIMAL:return w(e,"",h);default:throw Error(`Invalid style ${t}`)}},_=(e,t=n.MINIMAL)=>{switch(t){case n.STANDARD:return g(e," ");case n.URI:return g(e,"-");case n.MINIMAL:return m(e);default:throw Error(`Invalid style ${t}`)}};t.default={decode:v,encode:_,STYLES:n}},33823:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.cborDecode=t.cborEncode=void 0;let i=r(2474),o=e=>i.encode(e);t.cborEncode=o;let s=e=>i.decode(n.isBuffer(e)?e:n.from(e,"hex"));t.cborDecode=s},74686:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidChecksumError=t.InvalidSequenceComponentError=t.InvalidTypeError=t.InvalidPathLengthError=t.InvalidSchemeError=void 0;class r extends Error{constructor(){super("Invalid Scheme"),this.name="InvalidSchemeError"}}t.InvalidSchemeError=r;class n extends Error{constructor(){super("Invalid Path"),this.name="InvalidPathLengthError"}}t.InvalidPathLengthError=n;class i extends Error{constructor(){super("Invalid Type"),this.name="InvalidTypeError"}}t.InvalidTypeError=i;class o extends Error{constructor(){super("Invalid Sequence Component"),this.name="InvalidSequenceComponentError"}}t.InvalidSequenceComponentError=o;class s extends Error{constructor(){super("Invalid Checksum"),this.name="InvalidChecksumError"}}t.InvalidChecksumError=s},54684:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.FountainDecoderPart=void 0;let i=r(53154),o=r(51276),s=r(74686);class a{constructor(e,t){this._indexes=e,this._fragment=t}get indexes(){return this._indexes}get fragment(){return this._fragment}static fromEncoderPart(e){return new a(o.chooseFragments(e.seqNum,e.seqLength,e.checksum),e.fragment)}isSimple(){return 1===this.indexes.length}}t.FountainDecoderPart=a;class u{constructor(){this.result=void 0,this.expectedMessageLength=0,this.expectedChecksum=0,this.expectedFragmentLength=0,this.processedPartsCount=0,this.expectedPartIndexes=[],this.lastPartIndexes=[],this.queuedParts=[],this.receivedPartIndexes=[],this.mixedParts=[],this.simpleParts=[]}validatePart(e){if(0===this.expectedPartIndexes.length)[...Array(e.seqLength)].forEach((e,t)=>this.expectedPartIndexes.push(t)),this.expectedMessageLength=e.messageLength,this.expectedChecksum=e.checksum,this.expectedFragmentLength=e.fragment.length;else if(this.expectedPartIndexes.length!==e.seqLength||this.expectedMessageLength!==e.messageLength||this.expectedChecksum!==e.checksum||this.expectedFragmentLength!==e.fragment.length)return!1;return!0}reducePartByPart(e,t){return i.arrayContains(e.indexes,t.indexes)?new a(i.setDifference(e.indexes,t.indexes),i.bufferXOR(e.fragment,t.fragment)):e}reduceMixedBy(e){let t=[];this.mixedParts.map(({value:t})=>this.reducePartByPart(t,e)).forEach(e=>{e.isSimple()?this.queuedParts.push(e):t.push({key:e.indexes,value:e})}),this.mixedParts=t}processSimplePart(e){let t=e.indexes[0];if(!this.receivedPartIndexes.includes(t)){if(this.simpleParts.push({key:e.indexes,value:e}),this.receivedPartIndexes.push(t),i.arraysEqual(this.receivedPartIndexes,this.expectedPartIndexes)){let e=this.simpleParts.map(({value:e})=>e).sort((e,t)=>e.indexes[0]-t.indexes[0]),t=u.joinFragments(e.map(e=>e.fragment),this.expectedMessageLength);i.getCRC(t)===this.expectedChecksum?this.result=t:this.error=new s.InvalidChecksumError}else this.reduceMixedBy(e)}}processMixedPart(e){if(this.mixedParts.some(({key:t})=>i.arraysEqual(t,e.indexes)))return;let t=this.simpleParts.reduce((e,{value:t})=>this.reducePartByPart(e,t),e);(t=this.mixedParts.reduce((e,{value:t})=>this.reducePartByPart(e,t),t)).isSimple()?this.queuedParts.push(t):(this.reduceMixedBy(t),this.mixedParts.push({key:t.indexes,value:t}))}processQueuedItem(){if(0===this.queuedParts.length)return;let e=this.queuedParts.shift();e.isSimple()?this.processSimplePart(e):this.processMixedPart(e)}receivePart(e){if(this.isComplete()||!this.validatePart(e))return!1;let t=a.fromEncoderPart(e);for(this.lastPartIndexes=t.indexes,this.queuedParts.push(t);!this.isComplete()&&this.queuedParts.length>0;)this.processQueuedItem();return this.processedPartsCount+=1,!0}isComplete(){return!!(void 0!==this.result&&this.result.length>0)}isSuccess(){return!!(void 0===this.error&&this.isComplete())}resultMessage(){return this.isSuccess()?this.result:n.from([])}isFailure(){return void 0!==this.error}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.expectedPartIndexes.length}getExpectedPartIndexes(){return[...this.expectedPartIndexes]}getReceivedPartIndexes(){return[...this.receivedPartIndexes]}getLastPartIndexes(){return[...this.lastPartIndexes]}estimatedPercentComplete(){if(this.isComplete())return 1;let e=this.expectedPartCount();return 0===e?0:Math.min(.99,this.processedPartsCount/(1.75*e))}getProgress(){if(this.isComplete())return 1;let e=this.expectedPartCount();return 0===e?0:this.receivedPartIndexes.length/e}}t.default=u,u.joinFragments=(e,t)=>n.concat(e).slice(0,t)},88299:function(e,t,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FountainEncoderPart=void 0;let o=i(r(69282)),s=r(53154),a=r(51276),u=r(33823);class l{constructor(e,t,r,n,i){this._seqNum=e,this._seqLength=t,this._messageLength=r,this._checksum=n,this._fragment=i}get messageLength(){return this._messageLength}get fragment(){return this._fragment}get seqNum(){return this._seqNum}get seqLength(){return this._seqLength}get checksum(){return this._checksum}cbor(){let e=u.cborEncode([this._seqNum,this._seqLength,this._messageLength,this._checksum,this._fragment]);return n.from(e)}description(){return`seqNum:${this._seqNum}, seqLen:${this._seqLength}, messageLen:${this._messageLength}, checksum:${this._checksum}, data:${this._fragment.toString("hex")}`}static fromCBOR(e){let[t,r,i,s,a]=u.cborDecode(e);return o.default("number"==typeof t),o.default("number"==typeof r),o.default("number"==typeof i),o.default("number"==typeof s),o.default(n.isBuffer(a)&&a.length>0),new l(t,r,i,s,n.from(a))}}t.FountainEncoderPart=l;class c{constructor(e,t=100,r=0,n=10){let i=c.findNominalFragmentLength(e.length,n,t);this._messageLength=e.length,this._fragments=c.partitionMessage(e,i),this.fragmentLength=i,this.seqNum=s.toUint32(r),this.checksum=s.getCRC(e)}get fragmentsLength(){return this._fragments.length}get fragments(){return this._fragments}get messageLength(){return this._messageLength}isComplete(){return this.seqNum>=this._fragments.length}isSinglePart(){return 1===this._fragments.length}seqLength(){return this._fragments.length}mix(e){return e.reduce((e,t)=>s.bufferXOR(this._fragments[t],e),n.alloc(this.fragmentLength,0))}nextPart(){this.seqNum=s.toUint32(this.seqNum+1);let e=a.chooseFragments(this.seqNum,this._fragments.length,this.checksum),t=this.mix(e);return new l(this.seqNum,this._fragments.length,this._messageLength,this.checksum,t)}static findNominalFragmentLength(e,t,r){o.default(e>0),o.default(t>0),o.default(r>=t);let n=Math.ceil(e/t),i=0;for(let t=1;t<=n&&!((i=Math.ceil(e/t))<=r);t++);return i}static partitionMessage(e,t){let r,i=n.from(e),o=[];for(;i.length>0;)[r,i]=s.split(i,-t),o.push(r=n.alloc(t,0).fill(r,0,r.length));return o}}t.default=c},51276:function(e,t,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.chooseFragments=t.shuffle=t.chooseDegree=void 0;let o=r(53154),s=i(r(88728)),a=i(r(99855)),u=(e,t)=>{let r=[...Array(e)].map((e,t)=>1/(t+1));return a.default(r,void 0,t.nextDouble).next()+1};t.chooseDegree=u;let l=(e,t)=>{let r=[...e],n=[];for(;r.length>0;){let e=t.nextInt(0,r.length-1),i=r[e];r.splice(e,1),n.push(i)}return n};t.shuffle=l;let c=(e,r,i)=>{if(e<=r)return[e-1];{let a=n.concat([o.intToBytes(e),o.intToBytes(i)]),u=new s.default(a),l=t.chooseDegree(r,u),c=[...Array(r)].map((e,t)=>t);return t.shuffle(c,u).slice(0,l)}};t.chooseFragments=c},16139:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.URDecoder=t.UREncoder=t.UR=void 0;let i=n(r(99814));t.UR=i.default;let o=n(r(73406));t.UREncoder=o.default;let s=n(r(99978));t.URDecoder=s.default},99814:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(74686),o=r(53154),s=r(33823);class a{constructor(e,t="bytes"){if(this._cborPayload=e,this._type=t,!o.isURType(this._type))throw new i.InvalidTypeError}static fromBuffer(e){return new a(s.cborEncode(e))}static from(e,t){return a.fromBuffer(n.from(e,t))}decodeCBOR(){return s.cborDecode(this._cborPayload)}get type(){return this._type}get cbor(){return this._cborPayload}equals(e){return this.type===e.type&&this.cbor.equals(e.cbor)}}t.default=a},99978:function(e,t,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let o=i(r(54684)),s=i(r(59760)),a=i(r(69282)),u=r(53154),l=r(74686),c=i(r(99814)),f=r(88299);class h{constructor(e=new o.default,t="bytes"){this.fountainDecoder=e,this.type=t,a.default(u.isURType(t),"Invalid UR type"),this.expected_type=""}static decodeBody(e,t){let r=s.default.decode(t,s.default.STYLES.MINIMAL);return new c.default(n.from(r,"hex"),e)}validatePart(e){return this.expected_type?this.expected_type===e:!!u.isURType(e)&&(this.expected_type=e,!0)}static decode(e){let[t,r]=this.parse(e);if(0===r.length)throw new l.InvalidPathLengthError;let n=r[0];return h.decodeBody(t,n)}static parse(e){let t=e.toLowerCase();if("ur:"!==t.slice(0,3))throw new l.InvalidSchemeError;let r=t.slice(3).split("/"),n=r[0];if(r.length<2)throw new l.InvalidPathLengthError;if(!u.isURType(n))throw new l.InvalidTypeError;return[n,r.slice(1)]}static parseSequenceComponent(e){let t=e.split("-");if(2!==t.length)throw new l.InvalidSequenceComponentError;let r=u.toUint32(Number(t[0])),n=Number(t[1]);if(r<1||n<1)throw new l.InvalidSequenceComponentError;return[r,n]}receivePart(e){if(void 0!==this.result)return!1;let[t,r]=h.parse(e);if(!this.validatePart(t))return!1;if(1===r.length)return this.result=h.decodeBody(t,r[0]),!0;if(2!==r.length)throw new l.InvalidPathLengthError;let[n,i]=r,[o,a]=h.parseSequenceComponent(n),u=s.default.decode(i,s.default.STYLES.MINIMAL),p=f.FountainEncoderPart.fromCBOR(u);return!!(o===p.seqNum&&a===p.seqLength&&this.fountainDecoder.receivePart(p))&&(this.fountainDecoder.isSuccess()?this.result=new c.default(this.fountainDecoder.resultMessage(),t):this.fountainDecoder.isFailure()&&(this.error=new l.InvalidSchemeError),!0)}resultUR(){return this.result?this.result:new c.default(n.from([]))}isComplete(){return this.result&&this.result.cbor.length>0}isSuccess(){return!this.error&&this.isComplete()}isError(){return void 0!==this.error}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.fountainDecoder.expectedPartCount()}expectedPartIndexes(){return this.fountainDecoder.getExpectedPartIndexes()}receivedPartIndexes(){return this.fountainDecoder.getReceivedPartIndexes()}lastPartIndexes(){return this.fountainDecoder.getLastPartIndexes()}estimatedPercentComplete(){return this.fountainDecoder.estimatedPercentComplete()}getProgress(){return this.fountainDecoder.getProgress()}}t.default=h},73406:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(88299)),o=n(r(59760));class s{constructor(e,t,r,n){this.ur=e,this.fountainEncoder=new i.default(e.cbor,t,r,n)}get fragmentsLength(){return this.fountainEncoder.fragmentsLength}get fragments(){return this.fountainEncoder.fragments}get messageLength(){return this.fountainEncoder.messageLength}get cbor(){return this.ur.cbor}encodeWhole(){return[...Array(this.fragmentsLength)].map(()=>this.nextPart())}nextPart(){let e=this.fountainEncoder.nextPart();return this.fountainEncoder.isSinglePart()?s.encodeSinglePart(this.ur):s.encodePart(this.ur.type,e)}static encodeUri(e,t){return[e,t.join("/")].join(":")}static encodeUR(e){return s.encodeUri("ur",e)}static encodePart(e,t){let r=`${t.seqNum}-${t.seqLength}`,n=o.default.encode(t.cbor().toString("hex"),o.default.STYLES.MINIMAL);return s.encodeUR([e,r,n])}static encodeSinglePart(e){let t=o.default.encode(e.cbor.toString("hex"),o.default.STYLES.MINIMAL);return s.encodeUR([e.type,t])}}t.default=s},53154:function(e,t,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferXOR=t.setDifference=t.arrayContains=t.arraysEqual=t.hasPrefix=t.isURType=t.intToBytes=t.toUint32=t.getCRCHex=t.getCRC=t.split=t.partition=t.sha256Hash=void 0;let o=i(r(89072)),s=r(1860),a=e=>o.default("sha256").update(e).digest();t.sha256Hash=a;let u=(e,t)=>e.match(RegExp(".{1,"+t+"}","g"))||[e];t.partition=u;let l=(e,t)=>[e.slice(0,-t),e.slice(-t)];t.split=l;let c=e=>s.crc32(e);t.getCRC=c;let f=e=>s.crc32(e).toString(16).padStart(8,"0");t.getCRCHex=f;let h=e=>e>>>0;t.toUint32=h;let p=e=>{let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!1),n.from(t)};t.intToBytes=p;let d=e=>e.split("").every((t,r)=>{let n=e.charCodeAt(r);return 97<=n&&n<=122||48<=n&&n<=57||45===n});t.isURType=d;let y=(e,t)=>0===e.indexOf(t);t.hasPrefix=y;let g=(e,t)=>e.length===t.length&&e.every(e=>t.includes(e));t.arraysEqual=g;let m=(e,t)=>t.every(t=>e.includes(t));t.arrayContains=m;let b=(e,t)=>e.filter(e=>0>t.indexOf(e));t.setDifference=b;let w=(e,t)=>{let r=Math.max(e.length,t.length),i=n.allocUnsafe(r);for(let n=0;n<r;++n)i[n]=e[n]^t[n];return i};t.bufferXOR=w},88728:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(53154),o=n(r(44431)),s=n(r(39499)),a=18446744073709552e3,u=(e,t)=>s.default.bitwiseXor(s.default.asUintN(64,s.default.leftShift(e,s.default.BigInt(t))),s.default.BigInt(s.default.asUintN(64,s.default.signedRightShift(e,s.default.subtract(s.default.BigInt(64),s.default.BigInt(t))))));class l{constructor(e){this.next=()=>new o.default(this.roll().toString()),this.nextDouble=()=>new o.default(this.roll().toString()).div(a+1),this.nextInt=(e,t)=>Math.floor(this.nextDouble().toNumber()*(t-e+1)+e),this.nextByte=()=>this.nextInt(0,255),this.nextData=e=>[...Array(e)].map(()=>this.nextByte());let t=i.sha256Hash(e);this.s=[s.default.BigInt(0),s.default.BigInt(0),s.default.BigInt(0),s.default.BigInt(0)],this.setS(t)}setS(e){for(let t=0;t<4;t++){let r=8*t,n=s.default.BigInt(0);for(let t=0;t<8;t++)n=s.default.asUintN(64,s.default.leftShift(n,s.default.BigInt(8))),n=s.default.asUintN(64,s.default.bitwiseOr(n,s.default.BigInt(e[r+t])));this.s[t]=s.default.asUintN(64,n)}}roll(){let e=s.default.asUintN(64,s.default.multiply(u(s.default.asUintN(64,s.default.multiply(this.s[1],s.default.BigInt(5))),7),s.default.BigInt(9))),t=s.default.asUintN(64,s.default.leftShift(this.s[1],s.default.BigInt(17)));return this.s[2]=s.default.asUintN(64,s.default.bitwiseXor(this.s[2],s.default.BigInt(this.s[0]))),this.s[3]=s.default.asUintN(64,s.default.bitwiseXor(this.s[3],s.default.BigInt(this.s[1]))),this.s[1]=s.default.asUintN(64,s.default.bitwiseXor(this.s[1],s.default.BigInt(this.s[2]))),this.s[0]=s.default.asUintN(64,s.default.bitwiseXor(this.s[0],s.default.BigInt(this.s[3]))),this.s[2]=s.default.asUintN(64,s.default.bitwiseXor(this.s[2],s.default.BigInt(t))),this.s[3]=s.default.asUintN(64,u(this.s[3],45)),e}}t.default=l},79082:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHash=s,t.createCurve=a;let n=r(41128),i=r(31717),o=r(96551);function s(e){return{hash:e,hmac:(t,...r)=>(0,n.hmac)(e,t,(0,i.concatBytes)(...r)),randomBytes:i.randomBytes}}function a(e,t){let r=t=>(0,o.weierstrass)({...e,...s(t)});return{...r(t),create:r}}},81525:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wNAF=y,t.pippenger=g,t.precomputeMSMUnsafe=m,t.validateBasic=b;let n=r(94632),i=r(40219),o=BigInt(0),s=BigInt(1);function a(e,t){let r=t.negate();return e?r:t}function u(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function l(e,t){return u(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function c(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}function f(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}let h=new WeakMap,p=new WeakMap;function d(e){return p.get(e)||1}function y(e,t){return{constTimeNegate:a,hasPrecomputes:e=>1!==d(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>o;)r&s&&(n=n.add(i)),i=i.double(),r>>=s;return n},precomputeWindow(e,r){let{windows:n,windowSize:i}=l(r,t),o=[],s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(r,n,i){let{windows:o,windowSize:u}=l(r,t),c=e.ZERO,f=e.BASE,h=BigInt(2**r-1),p=2**r,d=BigInt(r);for(let e=0;e<o;e++){let t=e*u,r=Number(i&h);i>>=d,r>u&&(r-=p,i+=s);let o=t,l=t+Math.abs(r)-1,y=e%2!=0,g=r<0;0===r?f=f.add(a(y,n[o])):c=c.add(a(g,n[l]))}return{p:c,f}},wNAFUnsafe(r,n,i,a=e.ZERO){let{windows:u,windowSize:c}=l(r,t),f=BigInt(2**r-1),h=2**r,p=BigInt(r);for(let e=0;e<u;e++){let t=e*c;if(i===o)break;let r=Number(i&f);if(i>>=p,r>c&&(r-=h,i+=s),0===r)continue;let u=n[t+Math.abs(r)-1];r<0&&(u=u.negate()),a=a.add(u)}return a},getPrecomputes(e,t,r){let n=h.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&h.set(t,r(n))),n},wNAFCached(e,t,r){let n=d(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let i=d(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){u(r,t),p.set(e,r),h.delete(e)}}}function g(e,t,r,n){if(c(r,e),f(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let o=e.ZERO,s=(0,i.bitLen)(BigInt(r.length)),a=s>12?s-3:s>4?s-2:s?2:1,u=(1<<a)-1,l=Array(u+1).fill(o),h=Math.floor((t.BITS-1)/a)*a,p=o;for(let e=h;e>=0;e-=a){l.fill(o);for(let t=0;t<n.length;t++){let i=Number(n[t]>>BigInt(e)&BigInt(u));l[i]=l[i].add(r[t])}let t=o;for(let e=l.length-1,r=o;e>0;e--)r=r.add(l[e]),t=t.add(r);if(p=p.add(t),0!==e)for(let e=0;e<a;e++)p=p.double()}return p}function m(e,t,r,n){u(n,t.BITS),c(r,e);let i=e.ZERO,o=2**n-1,s=Math.ceil(t.BITS/n),a=BigInt((1<<n)-1),l=r.map(e=>{let t=[];for(let r=0,n=e;r<o;r++)t.push(n),n=n.add(e);return t});return e=>{if(f(e,t),e.length>r.length)throw Error("array of scalars must be smaller than array of points");let o=i;for(let t=0;t<s;t++){if(o!==i)for(let e=0;e<n;e++)o=o.double();let r=BigInt(s*n-(t+1)*n);for(let t=0;t<e.length;t++){let n=Number(e[t]>>r&a);n&&(o=o.add(l[t][n-1]))}}return o}}function b(e){return(0,n.validateField)(e.Fp),(0,i.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}},15134:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expand_message_xmd=l,t.expand_message_xof=c,t.hash_to_field=f,t.isogenyMap=h,t.createHasher=p;let n=r(94632),i=r(40219),o=i.bytesToNumberBE;function s(e,t){if(u(e),u(t),e<0||e>=1<<8*t)throw Error("invalid I2OSP input: "+e);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function a(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function u(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function l(e,t,r,n){(0,i.abytes)(e),(0,i.abytes)(t),u(r),t.length>255&&(t=n((0,i.concatBytes)((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:o,blockLen:l}=n,c=Math.ceil(r/o);if(r>65535||c>255)throw Error("expand_message_xmd: invalid lenInBytes");let f=(0,i.concatBytes)(t,s(t.length,1)),h=s(0,l),p=s(r,2),d=Array(c),y=n((0,i.concatBytes)(h,e,p,s(0,1),f));d[0]=n((0,i.concatBytes)(y,s(1,1),f));for(let e=1;e<=c;e++){let t=[a(y,d[e-1]),s(e+1,1),f];d[e]=n((0,i.concatBytes)(...t))}return(0,i.concatBytes)(...d).slice(0,r)}function c(e,t,r,n,o){if((0,i.abytes)(e),(0,i.abytes)(t),u(r),t.length>255){let e=Math.ceil(2*n/8);t=o.create({dkLen:e}).update((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return o.create({dkLen:r}).update(e).update(s(r,2)).update(t).update(s(t.length,1)).digest()}function f(e,t,r){let s;(0,i.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:a,k:f,m:h,hash:p,expand:d,DST:y}=r;(0,i.abytes)(e),u(t);let g="string"==typeof y?(0,i.utf8ToBytes)(y):y,m=Math.ceil((a.toString(2).length+f)/8),b=t*h*m;if("xmd"===d)s=l(e,g,b,p);else if("xof"===d)s=c(e,g,b,f,p);else if("_internal_pass"===d)s=e;else throw Error('expand must be "xmd" or "xof"');let w=Array(t);for(let e=0;e<t;e++){let t=Array(h);for(let r=0;r<h;r++){let i=m*(r+e*h),u=s.subarray(i,i+m);t[r]=(0,n.mod)(o(u),a)}w[e]=t}return w}function h(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,n)=>{let[i,o,s,a]=r.map(r=>r.reduce((r,n)=>e.add(e.mul(r,t),n)));return t=e.div(i,o),n=e.mul(n,e.div(s,a)),{x:t,y:n}}}function p(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");return{hashToCurve(n,i){let o=f(n,2,{...r,DST:r.DST,...i}),s=e.fromAffine(t(o[0])),a=e.fromAffine(t(o[1])),u=s.add(a).clearCofactor();return u.assertValidity(),u},encodeToCurve(n,i){let o=f(n,1,{...r,DST:r.encodeDST,...i}),s=e.fromAffine(t(o[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(r){if(!Array.isArray(r))throw Error("mapToCurve: expected array of bigints");for(let e of r)if("bigint"!=typeof e)throw Error("mapToCurve: expected array of bigints");let n=e.fromAffine(t(r)).clearCofactor();return n.assertValidity(),n}}}},94632:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNegativeLE=void 0,t.mod=f,t.pow=h,t.pow2=p,t.invert=d,t.tonelliShanks=y,t.FpSqrt=g,t.validateField=w,t.FpPow=v,t.FpInvertBatch=_,t.FpDiv=E,t.FpLegendre=S,t.FpIsSquare=T,t.nLength=I,t.Field=A,t.FpSqrtOdd=O,t.FpSqrtEven=P,t.hashToPrivateScalar=k,t.getFieldBytesLength=x,t.getMinHashLength=C,t.mapHashToField=R;let n=r(40219),i=BigInt(0),o=BigInt(1),s=BigInt(2),a=BigInt(3),u=BigInt(4),l=BigInt(5),c=BigInt(8);function f(e,t){let r=e%t;return r>=i?r:t+r}function h(e,t,r){if(t<i)throw Error("invalid exponent, negatives unsupported");if(r<=i)throw Error("invalid modulus");if(r===o)return i;let n=o;for(;t>i;)t&o&&(n=n*e%r),e=e*e%r,t>>=o;return n}function p(e,t,r){let n=e;for(;t-- >i;)n*=n,n%=r;return n}function d(e,t){if(e===i)throw Error("invert: expected non-zero number");if(t<=i)throw Error("invert: expected positive modulus, got "+t);let r=f(e,t),n=t,s=i,a=o,u=o,l=i;for(;r!==i;){let e=n/r,t=n%r,i=s-u*e,o=a-l*e;n=r,r=t,s=u,a=l,u=i,l=o}if(n!==o)throw Error("invert: does not exist");return f(s,t)}function y(e){let t,r,n;let a=(e-o)/s;for(t=e-o,r=0;t%s===i;t/=s,r++);for(n=s;n<e&&h(n,a,e)!==e-o;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+o)/u;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let l=(t+o)/s;return function(e,i){if(e.pow(i,a)===e.neg(e.ONE))throw Error("Cannot find square root");let s=r,u=e.pow(e.mul(e.ONE,n),t),c=e.pow(i,l),f=e.pow(i,t);for(;!e.eql(f,e.ONE);){if(e.eql(f,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(f);t<s&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(u,o<<BigInt(s-t-1));u=e.sqr(r),c=e.mul(c,r),f=e.mul(f,u),s=t}return c}}function g(e){if(e%u===a){let t=(e+o)/u;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%c===l){let t=(e-l)/c;return function(e,r){let n=e.mul(r,s),i=e.pow(n,t),o=e.mul(r,i),a=e.mul(e.mul(o,s),i),u=e.mul(o,e.sub(a,e.ONE));if(!e.eql(e.sqr(u),r))throw Error("Cannot find square root");return u}}return y(e)}let m=(e,t)=>(f(e,t)&o)===o;t.isNegativeLE=m;let b=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function w(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=b.reduce((e,t)=>(e[t]="function",e),t);return(0,n.validateObject)(e,r)}function v(e,t,r){if(r<i)throw Error("invalid exponent, negatives unsupported");if(r===i)return e.ONE;if(r===o)return t;let n=e.ONE,s=t;for(;r>i;)r&o&&(n=e.mul(n,s)),s=e.sqr(s),r>>=o;return n}function _(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r}function E(e,t,r){return e.mul(t,"bigint"==typeof r?d(r,e.ORDER):e.inv(r))}function S(e){let t=(e-o)/s;return(e,r)=>e.pow(r,t)}function T(e){let t=S(e.ORDER);return r=>{let n=t(e,r);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}}function I(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function A(e,t,r=!1,s={}){let a;if(e<=i)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:u,nByteLength:l}=I(e,t);if(l>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let c=Object.freeze({ORDER:e,isLE:r,BITS:u,BYTES:l,MASK:(0,n.bitMask)(u),ZERO:i,ONE:o,create:t=>f(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return i<=t&&t<e},is0:e=>e===i,isOdd:e=>(e&o)===o,neg:t=>f(-t,e),eql:(e,t)=>e===t,sqr:t=>f(t*t,e),add:(t,r)=>f(t+r,e),sub:(t,r)=>f(t-r,e),mul:(t,r)=>f(t*r,e),pow:(e,t)=>v(c,e,t),div:(t,r)=>f(t*d(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>d(t,e),sqrt:s.sqrt||(t=>(a||(a=g(e)),a(c,t))),invertBatch:e=>_(c,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,n.numberToBytesLE)(e,l):(0,n.numberToBytesBE)(e,l),fromBytes:e=>{if(e.length!==l)throw Error("Field.fromBytes: expected "+l+" bytes, got "+e.length);return r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(c)}function O(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)}function P(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}function k(e,t,r=!1){let i=(e=(0,n.ensureBytes)("privateHash",e)).length,s=I(t).nByteLength+8;if(s<24||i<s||i>1024)throw Error("hashToPrivateScalar: expected "+s+"-1024 bytes of input, got "+i);return f(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-o)+o}function x(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function C(e){let t=x(e);return t+Math.ceil(t/2)}function R(e,t,r=!1){let i=e.length,s=x(t),a=C(t);if(i<16||i<a||i>1024)throw Error("expected "+a+"-1024 bytes of input, got "+i);let u=f(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-o)+o;return r?(0,n.numberToBytesLE)(u,s):(0,n.numberToBytesBE)(u,s)}},40219:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notImplemented=t.bitMask=void 0,t.isBytes=o,t.abytes=s,t.abool=a,t.bytesToHex=l,t.numberToHexUnpadded=c,t.hexToNumber=f,t.hexToBytes=d,t.bytesToNumberBE=y,t.bytesToNumberLE=g,t.numberToBytesBE=m,t.numberToBytesLE=b,t.numberToVarBytesBE=w,t.ensureBytes=v,t.concatBytes=_,t.equalBytes=E,t.utf8ToBytes=S,t.inRange=I,t.aInRange=A,t.bitLen=O,t.bitGet=P,t.bitSet=k,t.createHmacDrbg=B,t.validateObject=N,t.memoized=L;let r=BigInt(0),n=BigInt(1),i=BigInt(2);function o(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if(!o(e))throw Error("Uint8Array expected")}function a(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let u=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function l(e){s(e);let t="";for(let r=0;r<e.length;r++)t+=u[e[r]];return t}function c(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function f(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?r:BigInt("0x"+e)}let h={_0:48,_9:57,A:65,F:70,a:97,f:102};function p(e){return e>=h._0&&e<=h._9?e-h._0:e>=h.A&&e<=h.F?e-(h.A-10):e>=h.a&&e<=h.f?e-(h.a-10):void 0}function d(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=p(e.charCodeAt(i)),o=p(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}function y(e){return f(l(e))}function g(e){return s(e),f(l(Uint8Array.from(e).reverse()))}function m(e,t){return d(e.toString(16).padStart(2*t,"0"))}function b(e,t){return m(e,t).reverse()}function w(e){return d(c(e))}function v(e,t,r){let n;if("string"==typeof t)try{n=d(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(o(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n}function _(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];s(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}function E(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}function S(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}let T=e=>"bigint"==typeof e&&r<=e;function I(e,t,r){return T(e)&&T(t)&&T(r)&&t<=e&&e<r}function A(e,t,r,n){if(!I(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function O(e){let t;for(t=0;e>r;e>>=n,t+=1);return t}function P(e,t){return e>>BigInt(t)&n}function k(e,t,i){return e|(i?n:r)<<BigInt(t)}let x=e=>(i<<BigInt(e-1))-n;t.bitMask=x;let C=e=>new Uint8Array(e),R=e=>Uint8Array.from(e);function B(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=C(e),i=C(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),u=(e=C())=>{i=a(R([0]),e),n=a(),0!==e.length&&(i=a(R([1]),e),n=a())},l=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=a()).slice();r.push(t),e+=n.length}return _(...r)};return(e,t)=>{let r;for(s(),u(e);!(r=t(l()));)u();return s(),r}}let U={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||o(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function N(e,t,r={}){let n=(t,r,n)=>{let i=U[r];if("function"!=typeof i)throw Error("invalid validator function");let o=e[t];if((!n||void 0!==o)&&!i(o,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+o)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}let D=()=>{throw Error("not implemented")};function L(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let o=e(r,...n);return t.set(r,o),o}}t.notImplemented=D},96551:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DER=t.DERErr=void 0,t.weierstrassPoints=m,t.weierstrass=w,t.SWUFpSqrtRatio=v,t.mapToCurveSimpleSWU=_;let n=r(81525),i=r(94632),o=r(40219),s=r(40219);function a(e){void 0!==e.lowS&&(0,s.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,s.abool)("prehash",e.prehash)}function u(e){let t=(0,n.validateBasic)(e);o.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:s}=t;if(r){if(!i.eql(s,i.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}let{bytesToNumberBE:l,hexToBytes:c}=o;class f extends Error{constructor(e=""){super(e)}}t.DERErr=f,t.DER={Err:f,_tlv:{encode:(e,r)=>{let{Err:n}=t.DER;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&r.length)throw new n("tlv.encode: unpadded data");let i=r.length/2,s=o.numberToHexUnpadded(i);if(s.length/2&128)throw new n("tlv.encode: long form length too big");let a=i>127?o.numberToHexUnpadded(s.length/2|128):"";return o.numberToHexUnpadded(e)+a+s+r},decode(e,r){let{Err:n}=t.DER,i=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(r.length<2||r[i++]!==e)throw new n("tlv.decode: wrong tlv");let o=r[i++],s=0;if(128&o){let e=127&o;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");let t=r.subarray(i,i+e);if(t.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===t[0])throw new n("tlv.decode(long): zero leftmost byte");for(let e of t)s=s<<8|e;if(i+=e,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=o;let a=r.subarray(i,i+s);if(a.length!==s)throw new n("tlv.decode: wrong value length");return{v:a,l:r.subarray(i+s)}}},_int:{encode(e){let{Err:r}=t.DER;if(e<h)throw new r("integer: negative integers are not allowed");let n=o.numberToHexUnpadded(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new r("unexpected DER parsing assertion: unpadded hex");return n},decode(e){let{Err:r}=t.DER;if(128&e[0])throw new r("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new r("invalid signature integer: unnecessary leading zero");return l(e)}},toSig(e){let{Err:r,_int:n,_tlv:i}=t.DER,s="string"==typeof e?c(e):e;o.abytes(s);let{v:a,l:u}=i.decode(48,s);if(u.length)throw new r("invalid signature: left bytes after parsing");let{v:l,l:f}=i.decode(2,a),{v:h,l:p}=i.decode(2,f);if(p.length)throw new r("invalid signature: left bytes after parsing");return{r:n.decode(l),s:n.decode(h)}},hexFromSig(e){let{_tlv:r,_int:n}=t.DER,i=r.encode(2,n.encode(e.r))+r.encode(2,n.encode(e.s));return r.encode(48,i)}};let h=BigInt(0),p=BigInt(1),d=BigInt(2),y=BigInt(3),g=BigInt(4);function m(e){let t=u(e),{Fp:r}=t,a=(0,i.Field)(t.n,t.nBitLength),l=t.toBytes||((e,t,n)=>{let i=t.toAffine();return o.concatBytes(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),c=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function f(e){let{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),f(t.Gx)))throw Error("bad generator point: equation left != right");function d(e){return o.inRange(e,p,t.n)}function g(e){let r;let{allowedPrivateKeyLengths:n,nByteLength:a,wrapPrivateKey:u,n:l}=t;if(n&&"bigint"!=typeof e){if(o.isBytes(e)&&(e=o.bytesToHex(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*a,"0")}try{r="bigint"==typeof e?e:o.bytesToNumberBE((0,s.ensureBytes)("private key",e,a))}catch(t){throw Error("invalid private key, expected hex or "+a+" bytes, got "+typeof e)}return u&&(r=(0,i.mod)(r,l)),o.aInRange("private key",r,p,l),r}function m(e){if(!(e instanceof v))throw Error("ProjectivePoint expected")}let b=(0,s.memoized)((e,t)=>{let{px:n,py:i,pz:o}=e;if(r.eql(o,r.ONE))return{x:n,y:i};let s=e.is0();null==t&&(t=s?r.ONE:r.inv(o));let a=r.mul(n,t),u=r.mul(i,t),l=r.mul(o,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:a,y:u}}),w=(0,s.memoized)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw Error("bad point: x or y not FE");let o=r.sqr(i),s=f(n);if(!r.eql(o,s))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class v{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof v)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?v.ZERO:new v(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(v.fromAffine)}static fromHex(e){let t=v.fromAffine(c((0,s.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return v.BASE.multiply(g(e))}static msm(e,t){return(0,n.pippenger)(v,a,e,t)}_setWindowSize(e){E.setWindowSize(this,e)}assertValidity(){w(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){m(e);let{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,u=r.eql(r.mul(t,a),r.mul(o,i)),l=r.eql(r.mul(n,a),r.mul(s,i));return u&&l}negate(){return new v(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,y),{px:o,py:s,pz:a}=this,u=r.ZERO,l=r.ZERO,c=r.ZERO,f=r.mul(o,o),h=r.mul(s,s),p=r.mul(a,a),d=r.mul(o,s);return d=r.add(d,d),c=r.mul(o,a),c=r.add(c,c),u=r.mul(e,c),l=r.mul(i,p),l=r.add(u,l),u=r.sub(h,l),l=r.add(h,l),l=r.mul(u,l),u=r.mul(d,u),c=r.mul(i,c),p=r.mul(e,p),d=r.sub(f,p),d=r.mul(e,d),d=r.add(d,c),c=r.add(f,f),f=r.add(c,f),f=r.add(f,p),f=r.mul(f,d),l=r.add(l,f),p=r.mul(s,a),p=r.add(p,p),f=r.mul(p,d),u=r.sub(u,f),c=r.mul(p,h),c=r.add(c,c),new v(u,l,c=r.add(c,c))}add(e){m(e);let{px:n,py:i,pz:o}=this,{px:s,py:a,pz:u}=e,l=r.ZERO,c=r.ZERO,f=r.ZERO,h=t.a,p=r.mul(t.b,y),d=r.mul(n,s),g=r.mul(i,a),b=r.mul(o,u),w=r.add(n,i),_=r.add(s,a);w=r.mul(w,_),_=r.add(d,g),w=r.sub(w,_),_=r.add(n,o);let E=r.add(s,u);return _=r.mul(_,E),E=r.add(d,b),_=r.sub(_,E),E=r.add(i,o),l=r.add(a,u),E=r.mul(E,l),l=r.add(g,b),E=r.sub(E,l),f=r.mul(h,_),l=r.mul(p,b),f=r.add(l,f),l=r.sub(g,f),f=r.add(g,f),c=r.mul(l,f),g=r.add(d,d),g=r.add(g,d),b=r.mul(h,b),_=r.mul(p,_),g=r.add(g,b),b=r.sub(d,b),b=r.mul(h,b),_=r.add(_,b),d=r.mul(g,_),c=r.add(c,d),d=r.mul(E,_),l=r.mul(w,l),l=r.sub(l,d),d=r.mul(w,g),f=r.mul(E,f),new v(l,c,f=r.add(f,d))}subtract(e){return this.add(e.negate())}is0(){return this.equals(v.ZERO)}wNAF(e){return E.wNAFCached(this,e,v.normalizeZ)}multiplyUnsafe(e){let{endo:n,n:i}=t;o.aInRange("scalar",e,h,i);let s=v.ZERO;if(e===h)return s;if(this.is0()||e===p)return this;if(!n||E.hasPrecomputes(this))return E.wNAFCachedUnsafe(this,e,v.normalizeZ);let{k1neg:a,k1:u,k2neg:l,k2:c}=n.splitScalar(e),f=s,d=s,y=this;for(;u>h||c>h;)u&p&&(f=f.add(y)),c&p&&(d=d.add(y)),y=y.double(),u>>=p,c>>=p;return a&&(f=f.negate()),l&&(d=d.negate()),d=new v(r.mul(d.px,n.beta),d.py,d.pz),f.add(d)}multiply(e){let n,i;let{endo:s,n:a}=t;if(o.aInRange("scalar",e,p,a),s){let{k1neg:t,k1:o,k2neg:a,k2:u}=s.splitScalar(e),{p:l,f:c}=this.wNAF(o),{p:f,f:h}=this.wNAF(u);l=E.constTimeNegate(t,l),f=E.constTimeNegate(a,f),f=new v(r.mul(f.px,s.beta),f.py,f.pz),n=l.add(f),i=c.add(h)}else{let{p:t,f:r}=this.wNAF(e);n=t,i=r}return v.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=v.BASE,i=(e,t)=>t!==h&&t!==p&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){return b(this,e)}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===p)return!0;if(r)return r(v,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===p?this:r?r(v,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return(0,s.abool)("isCompressed",e),this.assertValidity(),l(v,this,e)}toHex(e=!0){return(0,s.abool)("isCompressed",e),o.bytesToHex(this.toRawBytes(e))}}v.BASE=new v(t.Gx,t.Gy,r.ONE),v.ZERO=new v(r.ZERO,r.ONE,r.ZERO);let _=t.nBitLength,E=(0,n.wNAF)(v,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:v,normPrivateKeyToScalar:g,weierstrassEquation:f,isWithinCurveOrder:d}}function b(e){let t=(0,n.validateBasic)(e);return o.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function w(e){let r=b(e),{Fp:n,n:u}=r,l=n.BYTES+1,c=2*n.BYTES+1;function f(e){return(0,i.mod)(e,u)}function d(e){return(0,i.invert)(e,u)}let{ProjectivePoint:y,normPrivateKeyToScalar:g,weierstrassEquation:w,isWithinCurveOrder:v}=m({...r,toBytes(e,t,r){let i=t.toAffine(),a=n.toBytes(i.x),u=o.concatBytes;return((0,s.abool)("isCompressed",r),r)?u(Uint8Array.from([t.hasEvenY()?2:3]),a):u(Uint8Array.from([4]),a,n.toBytes(i.y))},fromBytes(e){let t=e.length,r=e[0],i=e.subarray(1);if(t===l&&(2===r||3===r)){let e;let t=o.bytesToNumberBE(i);if(!o.inRange(t,p,n.ORDER))throw Error("Point is not on curve");let s=w(t);try{e=n.sqrt(s)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&r)==1!=((e&p)===p)&&(e=n.neg(e)),{x:t,y:e}}if(t===c&&4===r)return{x:n.fromBytes(i.subarray(0,n.BYTES)),y:n.fromBytes(i.subarray(n.BYTES,2*n.BYTES))};throw Error("invalid Point, expected length of "+l+", or uncompressed "+c+", got "+t)}}),_=e=>o.bytesToHex(o.numberToBytesBE(e,r.nByteLength));function E(e){return e>u>>p}function S(e){return E(e)?f(-e):e}let T=(e,t,r)=>o.bytesToNumberBE(e.slice(t,r));class I{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let t=r.nByteLength;return new I(T(e=(0,s.ensureBytes)("compactSignature",e,2*t),0,t),T(e,t,2*t))}static fromDER(e){let{r,s:n}=t.DER.toSig((0,s.ensureBytes)("DER",e));return new I(r,n)}assertValidity(){o.aInRange("r",this.r,p,u),o.aInRange("s",this.s,p,u)}addRecoveryBit(e){return new I(this.r,this.s,e)}recoverPublicKey(e){let{r:t,s:i,recovery:o}=this,a=C((0,s.ensureBytes)("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw Error("recovery id invalid");let u=2===o||3===o?t+r.n:t;if(u>=n.ORDER)throw Error("recovery id 2 or 3 invalid");let l=(1&o)==0?"02":"03",c=y.fromHex(l+_(u)),h=d(u),p=f(-a*h),g=f(i*h),m=y.BASE.multiplyAndAddUnsafe(c,p,g);if(!m)throw Error("point at infinify");return m.assertValidity(),m}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return o.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return o.hexToBytes(this.toCompactHex())}toCompactHex(){return _(this.r)+_(this.s)}}let A={isValidPrivateKey(e){try{return g(e),!0}catch(e){return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{let e=(0,i.getMinHashLength)(r.n);return(0,i.mapHashToField)(r.randomBytes(e),r.n)},precompute:(e=8,t=y.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function O(e,t=!0){return y.fromPrivateKey(e).toRawBytes(t)}function P(e){let t=o.isBytes(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===l||n===c:r?n===2*l||n===2*c:e instanceof y}function k(e,t,r=!0){if(P(e))throw Error("first arg must be private key");if(!P(t))throw Error("second arg must be public key");return y.fromHex(t).multiply(g(e)).toRawBytes(r)}let x=r.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=o.bytesToNumberBE(e),n=8*e.length-r.nBitLength;return n>0?t>>BigInt(n):t},C=r.bits2int_modN||function(e){return f(x(e))},R=o.bitMask(r.nBitLength);function B(e){return o.aInRange("num < 2^"+r.nBitLength,e,h,R),o.numberToBytesBE(e,r.nByteLength)}function U(e,t,i=N){if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{hash:u,randomBytes:l}=r,{lowS:c,prehash:m,extraEntropy:b}=i;null==c&&(c=!0),e=(0,s.ensureBytes)("msgHash",e),a(i),m&&(e=(0,s.ensureBytes)("prehashed msgHash",u(e)));let w=C(e),_=g(t),T=[B(_),B(w)];if(null!=b&&!1!==b){let e=!0===b?l(n.BYTES):b;T.push((0,s.ensureBytes)("extraEntropy",e))}let A=o.concatBytes(...T),O=w;return{seed:A,k2sig:function(e){let t=x(e);if(!v(t))return;let r=d(t),n=y.BASE.multiply(t).toAffine(),i=f(n.x);if(i===h)return;let o=f(r*f(O+i*_));if(o===h)return;let s=(n.x===i?0:2)|Number(n.y&p),a=o;return c&&E(o)&&(a=S(o),s^=1),new I(i,a,s)}}}let N={lowS:r.lowS,prehash:!1},D={lowS:r.lowS,prehash:!1};function L(e,t,n=N){let{seed:i,k2sig:s}=U(e,t,n),a=r;return o.createHmacDrbg(a.hash.outputLen,a.nByteLength,a.hmac)(i,s)}function H(e,n,i,u=D){let l,c;let h=e;n=(0,s.ensureBytes)("msgHash",n),i=(0,s.ensureBytes)("publicKey",i);let{lowS:p,prehash:g,format:m}=u;if(a(u),"strict"in u)throw Error("options.strict was renamed to lowS");if(void 0!==m&&"compact"!==m&&"der"!==m)throw Error("format must be compact or der");let b="string"==typeof h||o.isBytes(h),w=!b&&!m&&"object"==typeof h&&null!==h&&"bigint"==typeof h.r&&"bigint"==typeof h.s;if(!b&&!w)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(w&&(c=new I(h.r,h.s)),b){try{"compact"!==m&&(c=I.fromDER(h))}catch(e){if(!(e instanceof t.DER.Err))throw e}c||"der"===m||(c=I.fromCompact(h))}l=y.fromHex(i)}catch(e){return!1}if(!c||p&&c.hasHighS())return!1;g&&(n=r.hash(n));let{r:v,s:_}=c,E=C(n),S=d(_),T=f(E*S),A=f(v*S),O=y.BASE.multiplyAndAddUnsafe(l,T,A)?.toAffine();return!!O&&f(O.x)===v}return y.BASE._setWindowSize(8),{CURVE:r,getPublicKey:O,getSharedSecret:k,sign:L,verify:H,ProjectivePoint:y,Signature:I,utils:A}}function v(e,t){let r=e.ORDER,n=h;for(let e=r-p;e%d===h;e/=d)n+=p;let i=n,o=d<<i-p-p,s=o*d,a=(r-p)/s,u=(a-p)/d,l=s-p,c=o,f=e.pow(t,a),m=e.pow(t,(a+p)/d),b=(t,r)=>{let n=f,o=e.pow(r,l),s=e.sqr(o);s=e.mul(s,r);let a=e.mul(t,s);a=e.pow(a,u),a=e.mul(a,o),o=e.mul(a,r),s=e.mul(a,t);let h=e.mul(s,o);a=e.pow(h,c);let y=e.eql(a,e.ONE);o=e.mul(s,m),a=e.mul(h,n),s=e.cmov(o,s,y),h=e.cmov(a,h,y);for(let t=i;t>p;t--){let r=t-d;r=d<<r-p;let i=e.pow(h,r),a=e.eql(i,e.ONE);o=e.mul(s,n),n=e.mul(n,n),i=e.mul(h,n),s=e.cmov(o,s,a),h=e.cmov(i,h,a)}return{isValid:y,value:s}};if(e.ORDER%g===y){let r=(e.ORDER-y)/g,n=e.sqrt(e.neg(t));b=(t,i)=>{let o=e.sqr(i),s=e.mul(t,i);o=e.mul(o,s);let a=e.pow(o,r);a=e.mul(a,s);let u=e.mul(a,n),l=e.mul(e.sqr(a),i),c=e.eql(l,t),f=e.cmov(u,a,c);return{isValid:c,value:f}}}return b}function _(e,t){if((0,i.validateField)(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=v(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let i,o,s,a,u,l,c,f;i=e.sqr(n),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),s=e.add(o,e.ONE),s=e.mul(s,t.B),a=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),a=e.mul(a,t.A),o=e.sqr(s),l=e.sqr(a),u=e.mul(l,t.A),o=e.add(o,u),o=e.mul(o,s),l=e.mul(l,a),u=e.mul(l,t.B),o=e.add(o,u),c=e.mul(i,s);let{isValid:h,value:p}=r(o,l);f=e.mul(i,n),f=e.mul(f,p),c=e.cmov(c,s,h),f=e.cmov(f,p,h);let d=e.isOdd(n)===e.isOdd(f);return f=e.cmov(e.neg(f),f,d),{x:c=e.div(c,a),y:f}}}},43150:function(e,t){"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i(e,...t){if(!n(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function a(e,t){i(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(t,"__esModule",{value:!0}),t.anumber=r,t.abytes=i,t.ahash=o,t.aexists=s,t.aoutput=a},26243:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HashMD=void 0,t.setBigUint64=o,t.Chi=s,t.Maj=a;let n=r(43150),i=r(31717);function o(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,l=n?0:4;e.setUint32(t+u,s,n),e.setUint32(t+l,a,n)}function s(e,t,r){return e&t^~e&r}function a(e,t,r){return e&t^e&r^t&r}class u extends i.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.createView)(this.buffer)}update(e){(0,n.aexists)(this);let{view:t,buffer:r,blockLen:o}=this,s=(e=(0,i.toBytes)(e)).length;for(let n=0;n<s;){let a=Math.min(o-this.pos,s-n);if(a===o){let t=(0,i.createView)(e);for(;o<=s-n;n+=o)this.process(t,n);continue}r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.aexists)(this),(0,n.aoutput)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:a}=this,{pos:u}=this;t[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>s-u&&(this.process(r,0),u=0);for(let e=u;e<s;e++)t[e]=0;o(r,s-8,BigInt(8*this.length),a),this.process(r,0);let l=(0,i.createView)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,h=this.get();if(f>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<f;e++)l.setUint32(4*e,h[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}t.HashMD=u},17564:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},41128:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;let n=r(43150),i=r(31717);class o extends i.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.ahash)(e);let r=(0,i.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,n.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,n.aexists)(this),(0,n.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=o;let s=(e,t,r)=>new o(e,t).update(r).digest();t.hmac=s,t.hmac.create=(e,t)=>new o(e,t)},97968:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=t.SHA256=void 0;let n=r(26243),i=r(31717),o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class u extends n.HashMD{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)a[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=a[e-15],r=a[e-2],n=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3,o=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;a[e]=o+a[e-7]+n+a[e-16]|0}let{A:r,B:s,C:u,D:l,E:c,F:f,G:h,H:p}=this;for(let e=0;e<64;e++){let t=p+((0,i.rotr)(c,6)^(0,i.rotr)(c,11)^(0,i.rotr)(c,25))+(0,n.Chi)(c,f,h)+o[e]+a[e]|0,d=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+(0,n.Maj)(r,s,u)|0;p=h,h=f,f=c,c=l+t|0,l=u,u=s,s=r,r=t+d|0}r=r+this.A|0,s=s+this.B|0,u=u+this.C|0,l=l+this.D|0,c=c+this.E|0,f=f+this.F|0,h=h+this.G|0,p=p+this.H|0,this.set(r,s,u,l,c,f,h,p)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}t.SHA256=u;class l extends u{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,i.wrapConstructor)(()=>new u),t.sha224=(0,i.wrapConstructor)(()=>new l)},31717:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=o,t.u8=s,t.u32=a,t.createView=u,t.rotr=l,t.rotl=c,t.byteSwap=f,t.byteSwap32=h,t.bytesToHex=d,t.hexToBytes=m,t.asyncLoop=w,t.utf8ToBytes=v,t.toBytes=_,t.concatBytes=E,t.checkOpts=T,t.wrapConstructor=I,t.wrapConstructorWithOpts=A,t.wrapXOFConstructorWithOpts=O,t.randomBytes=P;let n=r(17564),i=r(43150);function o(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function a(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function u(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function l(e,t){return e<<32-t|e>>>t}function c(e,t){return e<<t|e>>>32-t>>>0}function f(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function h(e){for(let t=0;t<e.length;t++)e[t]=f(e[t])}t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],t.byteSwapIfBE=t.isLE?e=>e:e=>f(e);let p=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function d(e){(0,i.abytes)(e);let t="";for(let r=0;r<e.length;r++)t+=p[e[r]];return t}let y={_0:48,_9:57,A:65,F:70,a:97,f:102};function g(e){return e>=y._0&&e<=y._9?e-y._0:e>=y.A&&e<=y.F?e-(y.A-10):e>=y.a&&e<=y.f?e-(y.a-10):void 0}function m(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=g(e.charCodeAt(i)),o=g(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}let b=async()=>{};async function w(e,r,n){let i=Date.now();for(let o=0;o<e;o++){n(o);let e=Date.now()-i;e>=0&&e<r||(await (0,t.nextTick)(),i+=e)}}function v(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function _(e){return"string"==typeof e&&(e=v(e)),(0,i.abytes)(e),e}function E(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];(0,i.abytes)(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}t.nextTick=b;class S{clone(){return this._cloneInto()}}function T(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)}function I(e){let t=t=>e().update(_(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function A(e){let t=(t,r)=>e(r).update(_(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function O(e){let t=(t,r)=>e(r).update(_(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function P(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return n.crypto.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}t.Hash=S},33497:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;let n=r(97968),i=r(31717),o=r(79082),s=r(15134),a=r(94632),u=r(40219),l=r(96551),c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),f=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),p=BigInt(2),d=(e,t)=>(e+t/p)/t;function y(e){let t=c,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),u=BigInt(44),l=BigInt(88),f=e*e*e%t,h=f*f*e%t,d=(0,a.pow2)(h,r,t)*h%t,y=(0,a.pow2)(d,r,t)*h%t,m=(0,a.pow2)(y,p,t)*f%t,b=(0,a.pow2)(m,i,t)*m%t,w=(0,a.pow2)(b,o,t)*b%t,v=(0,a.pow2)(w,u,t)*w%t,_=(0,a.pow2)(v,l,t)*v%t,E=(0,a.pow2)(_,u,t)*w%t,S=(0,a.pow2)(E,r,t)*h%t,T=(0,a.pow2)(S,s,t)*b%t,I=(0,a.pow2)(T,n,t)*f%t,A=(0,a.pow2)(I,p,t);if(!g.eql(g.sqr(A),e))throw Error("Cannot find square root");return A}let g=(0,a.Field)(c,void 0,void 0,{sqrt:y});t.secp256k1=(0,o.createCurve)({a:BigInt(0),b:BigInt(7),Fp:g,n:f,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=f,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),u=d(o*e,t),l=d(-n*e,t),c=(0,a.mod)(e-u*r-l*i,t),p=(0,a.mod)(-u*n-l*o,t),y=c>s,g=p>s;if(y&&(c=t-c),g&&(p=t-p),c>s||p>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:y,k1:c,k2neg:g,k2:p}}}},n.sha256);let m=BigInt(0),b={};function w(e,...t){let r=b[e];if(void 0===r){let t=(0,n.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));r=(0,u.concatBytes)(t,t),b[e]=r}return(0,n.sha256)((0,u.concatBytes)(r,...t))}let v=e=>e.toRawBytes(!0).slice(1),_=e=>(0,u.numberToBytesBE)(e,32),E=e=>(0,a.mod)(e,c),S=e=>(0,a.mod)(e,f),T=t.secp256k1.ProjectivePoint,I=(e,t,r)=>T.BASE.multiplyAndAddUnsafe(e,t,r);function A(e){let r=t.secp256k1.utils.normPrivateKeyToScalar(e),n=T.fromPrivateKey(r);return{scalar:n.hasEvenY()?r:S(-r),bytes:v(n)}}function O(e){(0,u.aInRange)("x",e,h,c);let t=E(e*e),r=y(E(t*e+BigInt(7)));r%p!==m&&(r=E(-r));let n=new T(e,r,h);return n.assertValidity(),n}let P=u.bytesToNumberBE;function k(...e){return S(P(w("BIP0340/challenge",...e)))}function x(e){return A(e).bytes}function C(e,t,r=(0,i.randomBytes)(32)){let n=(0,u.ensureBytes)("message",e),{bytes:o,scalar:s}=A(t),a=_(s^P(w("BIP0340/aux",(0,u.ensureBytes)("auxRand",r,32)))),l=S(P(w("BIP0340/nonce",a,o,n)));if(l===m)throw Error("sign failed: k is zero");let{bytes:c,scalar:f}=A(l),h=k(c,o,n),p=new Uint8Array(64);if(p.set(c,0),p.set(_(S(f+h*s)),32),!R(p,n,o))throw Error("sign: Invalid signature produced");return p}function R(e,t,r){let n=(0,u.ensureBytes)("signature",e,64),i=(0,u.ensureBytes)("message",t),o=(0,u.ensureBytes)("publicKey",r,32);try{let e=O(P(o)),t=P(n.subarray(0,32));if(!(0,u.inRange)(t,h,c))return!1;let r=P(n.subarray(32,64));if(!(0,u.inRange)(r,h,f))return!1;let s=k(_(t),v(e),i),a=I(e,r,S(-s));if(!a||!a.hasEvenY()||a.toAffine().x!==t)return!1;return!0}catch(e){return!1}}t.schnorr={getPublicKey:x,sign:C,verify:R,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:O,pointToBytes:v,numberToBytesBE:u.numberToBytesBE,bytesToNumberBE:u.bytesToNumberBE,taggedHash:w,mod:a.mod}};let B=(0,s.isogenyMap)(g,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),U=(0,l.mapToCurveSimpleSWU)(g,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:g.create(BigInt("-11"))}),N=(0,s.createHasher)(t.secp256k1.ProjectivePoint,e=>{let{x:t,y:r}=U(g.create(e[0]));return B(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:g.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256});t.hashToCurve=N.hashToCurve,t.encodeToCurve=N.encodeToCurve},70830:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=t.RIPEMD160=void 0;let n=r(75457),i=r(98089),o=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),s=new Uint8Array(Array(16).fill(0).map((e,t)=>t)),a=s.map(e=>(9*e+5)%16),u=[s],l=[a];for(let e=0;e<4;e++)for(let t of[u,l])t.push(t[e].map(e=>o[e]));let c=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),f=u.map((e,t)=>e.map(e=>c[t][e])),h=l.map((e,t)=>e.map(e=>c[t][e])),p=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),d=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function y(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}let g=new Uint32Array(16);class m extends n.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)g[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,o=0|this.h1,s=o,a=0|this.h2,c=a,m=0|this.h3,b=m,w=0|this.h4,v=w;for(let e=0;e<5;e++){let t=4-e,_=p[e],E=d[e],S=u[e],T=l[e],I=f[e],A=h[e];for(let t=0;t<16;t++){let n=(0,i.rotl)(r+y(e,o,a,m)+g[S[t]]+_,I[t])+w|0;r=w,w=m,m=0|(0,i.rotl)(a,10),a=o,o=n}for(let e=0;e<16;e++){let r=(0,i.rotl)(n+y(t,s,c,b)+g[T[e]]+E,A[e])+v|0;n=v,v=b,b=0|(0,i.rotl)(c,10),c=s,s=r}}this.set(this.h1+a+b|0,this.h2+m+v|0,this.h3+w+n|0,this.h4+r+s|0,this.h0+o+c|0)}roundClean(){g.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}t.RIPEMD160=m,t.ripemd160=(0,i.wrapConstructor)(()=>new m)},73963:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha1=void 0;let n=r(75457),i=r(98089),o=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),s=new Uint32Array(80);class a extends n.HashMD{constructor(){super(64,20,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4]}get(){let{A:e,B:t,C:r,D:n,E:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)s[r]=e.getUint32(t,!1);for(let e=16;e<80;e++)s[e]=(0,i.rotl)(s[e-3]^s[e-8]^s[e-14]^s[e-16],1);let{A:r,B:o,C:a,D:u,E:l}=this;for(let e=0;e<80;e++){let t,c;e<20?(t=(0,n.Chi)(o,a,u),c=1518500249):e<40?(t=o^a^u,c=1859775393):e<60?(t=(0,n.Maj)(o,a,u),c=2400959708):(t=o^a^u,c=3395469782);let f=(0,i.rotl)(r,5)+t+l+c+s[e]|0;l=u,u=a,a=(0,i.rotl)(o,30),o=r,r=f}r=r+this.A|0,o=o+this.B|0,a=a+this.C|0,u=u+this.D|0,l=l+this.E|0,this.set(r,o,a,u,l)}roundClean(){s.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}t.sha1=(0,i.wrapConstructor)(()=>new a)},81869:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HDKey=t.HARDENED_OFFSET=void 0;let n=r(72832),i=r(43866),o=r(17695),s=r(92361),a=r(10397),u=r(16786),l=r(33497),c=r(94632),f=r(98811),h=l.secp256k1.ProjectivePoint,p=(0,f.createBase58check)(o.sha256);function d(e){return(0,a.abytes)(e),BigInt("0x"+(0===e.length?"0":(0,u.bytesToHex)(e)))}function y(e){if("bigint"!=typeof e)throw Error("bigint expected");return(0,u.hexToBytes)(e.toString(16).padStart(64,"0"))}let g=(0,u.utf8ToBytes)("Bitcoin seed"),m={private:76066276,public:76067358};t.HARDENED_OFFSET=2147483648;let b=e=>(0,i.ripemd160)((0,o.sha256)(e)),w=e=>(0,u.createView)(e).getUint32(0,!1),v=e=>{if(!Number.isSafeInteger(e)||e<0||e>4294967296-1)throw Error("invalid number, should be from 0 to 2**32-1, got "+e);let t=new Uint8Array(4);return(0,u.createView)(t).setUint32(0,e,!1),t};class _{get fingerprint(){if(!this.pubHash)throw Error("No publicKey set!");return w(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){let e=this.privateKey;if(!e)throw Error("No private key");return p.encode(this.serialize(this.versions.private,(0,u.concatBytes)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw Error("No public key");return p.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=m){if((0,a.abytes)(e),8*e.length<128||8*e.length>512)throw Error("HDKey: seed length must be between 128 and 512 bits; 256 bits is advised, got "+e.length);let r=(0,n.hmac)(s.sha512,g,e);return new _({versions:t,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(e,t=m){let r=p.decode(e),n=(0,u.createView)(r),i=n.getUint32(0,!1),o={versions:t,depth:r[4],parentFingerprint:n.getUint32(5,!1),index:n.getUint32(9,!1),chainCode:r.slice(13,45)},s=r.slice(45),a=0===s[0];if(i!==t[a?"private":"public"])throw Error("Version mismatch");return new _(a?{...o,privateKey:s.slice(1)}:{...o,publicKey:s})}static fromJSON(e){return _.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||m,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!l.secp256k1.utils.isValidPrivateKey(e.privateKey))throw Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:d(e.privateKey),this.privKeyBytes=y(this.privKey),this.pubKey=l.secp256k1.getPublicKey(e.privateKey,!0)}else if(e.publicKey)this.pubKey=h.fromHex(e.publicKey).toRawBytes(!0);else throw Error("HDKey: no public or private key provided");this.pubHash=b(this.pubKey)}derive(e){if(!/^[mM]'?/.test(e))throw Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;let r=e.replace(/^[mM]'?\//,"").split("/"),n=this;for(let e of r){let r=/^(\d+)('?)$/.exec(e),i=r&&r[1];if(!r||3!==r.length||"string"!=typeof i)throw Error("invalid child index: "+e);let o=+i;if(!Number.isSafeInteger(o)||o>=t.HARDENED_OFFSET)throw Error("Invalid index");"'"===r[2]&&(o+=t.HARDENED_OFFSET),n=n.deriveChild(o)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw Error("No publicKey or chainCode set");let r=v(e);if(e>=t.HARDENED_OFFSET){let e=this.privateKey;if(!e)throw Error("Could not derive hardened child key");r=(0,u.concatBytes)(new Uint8Array([0]),e,r)}else r=(0,u.concatBytes)(this.pubKey,r);let i=(0,n.hmac)(s.sha512,this.chainCode,r),o=d(i.slice(0,32)),a=i.slice(32);if(!l.secp256k1.utils.isValidPrivateKey(o))throw Error("Tweak bigger than curve order");let f={versions:this.versions,chainCode:a,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){let e=(0,c.mod)(this.privKey+o,l.secp256k1.CURVE.n);if(!l.secp256k1.utils.isValidPrivateKey(e))throw Error("The tweak was out of range or the resulted private key is invalid");f.privateKey=e}else{let e=h.fromHex(this.pubKey).add(h.fromPrivateKey(o));if(e.equals(h.ZERO))throw Error("The tweak was equal to negative P, which made the result key invalid");f.publicKey=e.toRawBytes(!0)}return new _(f)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw Error("No privateKey set!");return(0,a.abytes)(e,32),l.secp256k1.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){let r;if((0,a.abytes)(e,32),(0,a.abytes)(t,64),!this.publicKey)throw Error("No publicKey set!");try{r=l.secp256k1.Signature.fromCompact(t)}catch(e){return!1}return l.secp256k1.verify(r,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw Error("No chainCode set");return(0,a.abytes)(t,33),(0,u.concatBytes)(v(e),new Uint8Array([this.depth]),v(this.parentFingerprint),v(this.index),this.chainCode,t)}}t.HDKey=_},10397:function(e,t){"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i(e,...t){if(!n(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function a(e,t){i(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(t,"__esModule",{value:!0}),t.anumber=r,t.abytes=i,t.ahash=o,t.aexists=s,t.aoutput=a},93373:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HashMD=void 0,t.setBigUint64=o,t.Chi=s,t.Maj=a;let n=r(10397),i=r(16786);function o(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,l=n?0:4;e.setUint32(t+u,s,n),e.setUint32(t+l,a,n)}function s(e,t,r){return e&t^~e&r}function a(e,t,r){return e&t^e&r^t&r}class u extends i.Hash{constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=(0,i.createView)(this.buffer)}update(e){(0,n.aexists)(this);let{view:t,buffer:r,blockLen:o}=this,s=(e=(0,i.toBytes)(e)).length;for(let n=0;n<s;){let a=Math.min(o-this.pos,s-n);if(a===o){let t=(0,i.createView)(e);for(;o<=s-n;n+=o)this.process(t,n);continue}r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.aexists)(this),(0,n.aoutput)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:a}=this,{pos:u}=this;t[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>s-u&&(this.process(r,0),u=0);for(let e=u;e<s;e++)t[e]=0;o(r,s-8,BigInt(8*this.length),a),this.process(r,0);let l=(0,i.createView)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,h=this.get();if(f>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<f;e++)l.setUint32(4*e,h[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}t.HashMD=u},20401:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=void 0,t.fromBig=i,t.split=o,t.add=w;let r=BigInt(4294967296-1),n=BigInt(32);function i(e,t=!1){return t?{h:Number(e&r),l:Number(e>>n&r)}:{h:0|Number(e>>n&r),l:0|Number(e&r)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){let{h:s,l:a}=i(e[o],t);[r[o],n[o]]=[s,a]}return[r,n]}let s=(e,t)=>BigInt(e>>>0)<<n|BigInt(t>>>0);t.toBig=s;let a=(e,t,r)=>e>>>r;t.shrSH=a;let u=(e,t,r)=>e<<32-r|t>>>r;t.shrSL=u;let l=(e,t,r)=>e>>>r|t<<32-r;t.rotrSH=l;let c=(e,t,r)=>e<<32-r|t>>>r;t.rotrSL=c;let f=(e,t,r)=>e<<64-r|t>>>r-32;t.rotrBH=f;let h=(e,t,r)=>e>>>r-32|t<<64-r;t.rotrBL=h;let p=(e,t)=>t;t.rotr32H=p;let d=(e,t)=>e;t.rotr32L=d;let y=(e,t,r)=>e<<r|t>>>32-r;t.rotlSH=y;let g=(e,t,r)=>t<<r|e>>>32-r;t.rotlSL=g;let m=(e,t,r)=>t<<r-32|e>>>64-r;t.rotlBH=m;let b=(e,t,r)=>e<<r-32|t>>>64-r;function w(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/4294967296|0)|0,l:0|i}}t.rotlBL=b;let v=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);t.add3L=v;let _=(e,t,r,n)=>t+r+n+(e/4294967296|0)|0;t.add3H=_;let E=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);t.add4L=E;let S=(e,t,r,n,i)=>t+r+n+i+(e/4294967296|0)|0;t.add4H=S;let T=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);t.add5L=T;let I=(e,t,r,n,i,o)=>t+r+n+i+o+(e/4294967296|0)|0;t.add5H=I;let A={fromBig:i,split:o,toBig:s,shrSH:a,shrSL:u,rotrSH:l,rotrSL:c,rotrBH:f,rotrBL:h,rotr32H:p,rotr32L:d,rotlSH:y,rotlSL:g,rotlBH:m,rotlBL:b,add:w,add3L:v,add3H:_,add4L:E,add4H:S,add5H:I,add5L:T};t.default=A},2199:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},72832:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;let n=r(10397),i=r(16786);class o extends i.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.ahash)(e);let r=(0,i.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,n.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,n.aexists)(this),(0,n.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=o;let s=(e,t,r)=>new o(e,t).update(r).digest();t.hmac=s,t.hmac.create=(e,t)=>new o(e,t)},43866:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=t.RIPEMD160=void 0;let n=r(93373),i=r(16786),o=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),s=new Uint8Array(Array(16).fill(0).map((e,t)=>t)),a=s.map(e=>(9*e+5)%16),u=[s],l=[a];for(let e=0;e<4;e++)for(let t of[u,l])t.push(t[e].map(e=>o[e]));let c=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),f=u.map((e,t)=>e.map(e=>c[t][e])),h=l.map((e,t)=>e.map(e=>c[t][e])),p=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),d=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function y(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}let g=new Uint32Array(16);class m extends n.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)g[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,o=0|this.h1,s=o,a=0|this.h2,c=a,m=0|this.h3,b=m,w=0|this.h4,v=w;for(let e=0;e<5;e++){let t=4-e,_=p[e],E=d[e],S=u[e],T=l[e],I=f[e],A=h[e];for(let t=0;t<16;t++){let n=(0,i.rotl)(r+y(e,o,a,m)+g[S[t]]+_,I[t])+w|0;r=w,w=m,m=0|(0,i.rotl)(a,10),a=o,o=n}for(let e=0;e<16;e++){let r=(0,i.rotl)(n+y(t,s,c,b)+g[T[e]]+E,A[e])+v|0;n=v,v=b,b=0|(0,i.rotl)(c,10),c=s,s=r}}this.set(this.h1+a+b|0,this.h2+m+v|0,this.h3+w+n|0,this.h4+r+s|0,this.h0+o+c|0)}roundClean(){g.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}t.RIPEMD160=m,t.ripemd160=(0,i.wrapConstructor)(()=>new m)},17695:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=t.SHA256=void 0;let n=r(93373),i=r(16786),o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class u extends n.HashMD{constructor(e=32){super(64,e,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)a[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=a[e-15],r=a[e-2],n=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3,o=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;a[e]=o+a[e-7]+n+a[e-16]|0}let{A:r,B:s,C:u,D:l,E:c,F:f,G:h,H:p}=this;for(let e=0;e<64;e++){let t=p+((0,i.rotr)(c,6)^(0,i.rotr)(c,11)^(0,i.rotr)(c,25))+(0,n.Chi)(c,f,h)+o[e]+a[e]|0,d=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+(0,n.Maj)(r,s,u)|0;p=h,h=f,f=c,c=l+t|0,l=u,u=s,s=r,r=t+d|0}r=r+this.A|0,s=s+this.B|0,u=u+this.C|0,l=l+this.D|0,c=c+this.E|0,f=f+this.F|0,h=h+this.G|0,p=p+this.H|0,this.set(r,s,u,l,c,f,h,p)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}t.SHA256=u;class l extends u{constructor(){super(28),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868}}t.sha256=(0,i.wrapConstructor)(()=>new u),t.sha224=(0,i.wrapConstructor)(()=>new l)},92361:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha384=t.sha512_256=t.sha512_224=t.sha512=t.SHA384=t.SHA512_256=t.SHA512_224=t.SHA512=void 0;let n=r(93373),i=r(20401),o=r(16786),[s,a]=i.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),u=new Uint32Array(80),l=new Uint32Array(80);class c extends n.HashMD{constructor(e=64){super(128,e,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:u,El:l,Fh:c,Fl:f,Gh:h,Gl:p,Hh:d,Hl:y}=this;return[e,t,r,n,i,o,s,a,u,l,c,f,h,p,d,y]}set(e,t,r,n,i,o,s,a,u,l,c,f,h,p,d,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|l,this.Fh=0|c,this.Fl=0|f,this.Gh=0|h,this.Gl=0|p,this.Hh=0|d,this.Hl=0|y}process(e,t){for(let r=0;r<16;r++,t+=4)u[r]=e.getUint32(t),l[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|u[e-15],r=0|l[e-15],n=i.default.rotrSH(t,r,1)^i.default.rotrSH(t,r,8)^i.default.shrSH(t,r,7),o=i.default.rotrSL(t,r,1)^i.default.rotrSL(t,r,8)^i.default.shrSL(t,r,7),s=0|u[e-2],a=0|l[e-2],c=i.default.rotrSH(s,a,19)^i.default.rotrBH(s,a,61)^i.default.shrSH(s,a,6),f=i.default.rotrSL(s,a,19)^i.default.rotrBL(s,a,61)^i.default.shrSL(s,a,6),h=i.default.add4L(o,f,l[e-7],l[e-16]),p=i.default.add4H(h,n,c,u[e-7],u[e-16]);u[e]=0|p,l[e]=0|h}let{Ah:r,Al:n,Bh:o,Bl:c,Ch:f,Cl:h,Dh:p,Dl:d,Eh:y,El:g,Fh:m,Fl:b,Gh:w,Gl:v,Hh:_,Hl:E}=this;for(let e=0;e<80;e++){let t=i.default.rotrSH(y,g,14)^i.default.rotrSH(y,g,18)^i.default.rotrBH(y,g,41),S=i.default.rotrSL(y,g,14)^i.default.rotrSL(y,g,18)^i.default.rotrBL(y,g,41),T=y&m^~y&w,I=g&b^~g&v,A=i.default.add5L(E,S,I,a[e],l[e]),O=i.default.add5H(A,_,t,T,s[e],u[e]),P=0|A,k=i.default.rotrSH(r,n,28)^i.default.rotrBH(r,n,34)^i.default.rotrBH(r,n,39),x=i.default.rotrSL(r,n,28)^i.default.rotrBL(r,n,34)^i.default.rotrBL(r,n,39),C=r&o^r&f^o&f,R=n&c^n&h^c&h;_=0|w,E=0|v,w=0|m,v=0|b,m=0|y,b=0|g,({h:y,l:g}=i.default.add(0|p,0|d,0|O,0|P)),p=0|f,d=0|h,f=0|o,h=0|c,o=0|r,c=0|n;let B=i.default.add3L(P,x,R);r=i.default.add3H(B,O,k,C),n=0|B}({h:r,l:n}=i.default.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:o,l:c}=i.default.add(0|this.Bh,0|this.Bl,0|o,0|c)),({h:f,l:h}=i.default.add(0|this.Ch,0|this.Cl,0|f,0|h)),({h:p,l:d}=i.default.add(0|this.Dh,0|this.Dl,0|p,0|d)),({h:y,l:g}=i.default.add(0|this.Eh,0|this.El,0|y,0|g)),({h:m,l:b}=i.default.add(0|this.Fh,0|this.Fl,0|m,0|b)),({h:w,l:v}=i.default.add(0|this.Gh,0|this.Gl,0|w,0|v)),({h:_,l:E}=i.default.add(0|this.Hh,0|this.Hl,0|_,0|E)),this.set(r,n,o,c,f,h,p,d,y,g,m,b,w,v,_,E)}roundClean(){u.fill(0),l.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}t.SHA512=c;class f extends c{constructor(){super(28),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735}}t.SHA512_224=f;class h extends c{constructor(){super(32),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414}}t.SHA512_256=h;class p extends c{constructor(){super(48),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868}}t.SHA384=p,t.sha512=(0,o.wrapConstructor)(()=>new c),t.sha512_224=(0,o.wrapConstructor)(()=>new f),t.sha512_256=(0,o.wrapConstructor)(()=>new h),t.sha384=(0,o.wrapConstructor)(()=>new p)},16786:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=o,t.u8=s,t.u32=a,t.createView=u,t.rotr=l,t.rotl=c,t.byteSwap=f,t.byteSwap32=h,t.bytesToHex=y,t.hexToBytes=b,t.asyncLoop=v,t.utf8ToBytes=_,t.toBytes=E,t.concatBytes=S,t.checkOpts=I,t.wrapConstructor=A,t.wrapConstructorWithOpts=O,t.wrapXOFConstructorWithOpts=P,t.randomBytes=k;let n=r(2199),i=r(10397);function o(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function a(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function u(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function l(e,t){return e<<32-t|e>>>t}function c(e,t){return e<<t|e>>>32-t>>>0}function f(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function h(e){for(let t=0;t<e.length;t++)e[t]=f(e[t])}t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],t.byteSwapIfBE=t.isLE?e=>e:e=>f(e);let p="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,d=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function y(e){if((0,i.abytes)(e),p)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=d[e[r]];return t}let g={_0:48,_9:57,A:65,F:70,a:97,f:102};function m(e){return e>=g._0&&e<=g._9?e-g._0:e>=g.A&&e<=g.F?e-(g.A-10):e>=g.a&&e<=g.f?e-(g.a-10):void 0}function b(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(p)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=m(e.charCodeAt(i)),o=m(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}let w=async()=>{};async function v(e,r,n){let i=Date.now();for(let o=0;o<e;o++){n(o);let e=Date.now()-i;e>=0&&e<r||(await (0,t.nextTick)(),i+=e)}}function _(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function E(e){return"string"==typeof e&&(e=_(e)),(0,i.abytes)(e),e}function S(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];(0,i.abytes)(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}t.nextTick=w;class T{clone(){return this._cloneInto()}}function I(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)}function A(e){let t=t=>e().update(E(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function O(e){let t=(t,r)=>e(r).update(E(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function P(e){let t=(t,r)=>e(r).update(E(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function k(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return Uint8Array.from(n.crypto.randomBytes(e));throw Error("crypto.getRandomValues must be defined")}t.Hash=T},98811:function(e,t){"use strict";function r(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function n(e,...t){if(!r(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function i(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function o(e){if("function"!=typeof e)throw Error("function expected");return!0}function s(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function a(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function u(e){if(!Array.isArray(e))throw Error("array expected")}function l(e,t){if(!i(!0,t))throw Error(`${e}: array of strings expected`)}function c(e,t){if(!i(!1,t))throw Error(`${e}: array of numbers expected`)}function f(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function h(e){let t="string"==typeof e?e.split(""):e,r=t.length;l("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(u(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(u(t),t.map(t=>{s("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function p(e=""){return s("join",e),{encode:t=>(l("join.decode",t),t.join(e)),decode:t=>(s("join.decode",t),t.split(e))}}function d(e,t="="){return a(e),s("padding",t),{encode(r){for(l("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){l("padding.decode",r);let n=r.length;if(n*e%8)throw Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function y(e){return o(e),{encode:e=>e,decode:t=>e(t)}}function g(e,t,r){if(t<2)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(u(e),!e.length)return[];let n=0,i=[],o=Array.from(e,e=>{if(a(e),e<0||e>=t)throw Error(`invalid integer: ${e}`);return e}),s=o.length;for(;;){let e=0,a=!0;for(let i=n;i<s;i++){let s=o[i],u=t*e,l=u+s;if(!Number.isSafeInteger(l)||u/t!==e||l-s!==u)throw Error("convertRadix: carry overflow");let c=l/r;e=l%r;let f=Math.floor(c);if(o[i]=f,!Number.isSafeInteger(f)||f*r+e!==l)throw Error("convertRadix: carry overflow");a&&(f?a=!1:n=i)}if(i.push(e),a)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hexnopad=t.base32hex=t.base32nopad=t.base32=t.base16=t.utils=void 0;let m=(e,t)=>0===t?e:m(t,e%t),b=(e,t)=>e+(t-m(e,t)),w=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function v(e,t,r,n){if(u(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(b(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${b(t,r)}`);let i=0,o=0,s=w[t],l=w[r]-1,c=[];for(let n of e){if(a(n),n>=s)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,o+t>32)throw Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)c.push((i>>o-r&l)>>>0);let e=w[o];if(void 0===e)throw Error("invalid carry");i&=e-1}if(i=i<<r-o&l,!n&&o>=t)throw Error("Excess padding");if(!n&&i>0)throw Error(`Non-zero padding: ${i}`);return n&&o>0&&c.push(i>>>0),c}function _(e){a(e);let t=256;return{encode:n=>{if(!r(n))throw Error("radix.encode input should be Uint8Array");return g(Array.from(n),t,e)},decode:r=>(c("radix.decode",r),Uint8Array.from(g(r,e,t)))}}function E(e,t=!1){if(a(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(b(8,e)>32||b(e,8)>32)throw Error("radix2: carry overflow");return{encode:n=>{if(!r(n))throw Error("radix2.encode input should be Uint8Array");return v(Array.from(n),8,e,!t)},decode:r=>(c("radix2.decode",r),Uint8Array.from(v(r,e,8,t)))}}function S(e){return o(e),function(...t){try{return e.apply(null,t)}catch(e){}}}function T(e,t){return a(e),o(t),{encode(n){if(!r(n))throw Error("checksum.encode: input should be Uint8Array");let i=t(n).slice(0,e),o=new Uint8Array(n.length+e);return o.set(n),o.set(i,n.length),o},decode(n){if(!r(n))throw Error("checksum.decode: input should be Uint8Array");let i=n.slice(0,-e),o=n.slice(-e),s=t(i).slice(0,e);for(let t=0;t<e;t++)if(s[t]!==o[t])throw Error("Invalid checksum");return i}}}t.utils={alphabet:h,chain:f,checksum:T,convertRadix:g,convertRadix2:v,radix:_,radix2:E,join:p,padding:d},t.base16=f(E(4),h("0123456789ABCDEF"),p("")),t.base32=f(E(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),d(5),p("")),t.base32nopad=f(E(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p("")),t.base32hex=f(E(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),d(5),p("")),t.base32hexnopad=f(E(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),p("")),t.base32crockford=f(E(5),h("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),p(""),y(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));let I="function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64,A=(e,t)=>{s("base64",e);let r=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,n=t?"base64url":"base64";if(e.length>0&&!r.test(e))throw Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:n,lastChunkHandling:"strict"})};t.base64=I?{encode:e=>(n(e),e.toBase64()),decode:e=>A(e,!1)}:f(E(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),d(6),p("")),t.base64nopad=f(E(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p("")),t.base64url=I?{encode:e=>(n(e),e.toBase64({alphabet:"base64url"})),decode:e=>A(e,!0)}:f(E(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),d(6),p("")),t.base64urlnopad=f(E(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(""));let O=e=>f(_(58),h(e),p(""));t.base58=O("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=O("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=O("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let P=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let r="";for(let n=0;n<e.length;n+=8){let i=e.subarray(n,n+8);r+=t.base58.encode(i).padStart(P[i.length],"1")}return r},decode(e){let r=[];for(let n=0;n<e.length;n+=11){let i=e.slice(n,n+11),o=P.indexOf(i.length),s=t.base58.decode(i);for(let e=0;e<s.length-o;e++)if(0!==s[e])throw Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(r)}};let k=e=>f(T(4,t=>e(e(t))),t.base58);t.createBase58check=k,t.base58check=t.createBase58check;let x=f(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),p("")),C=[996825010,642813549,513874426,1027748829,705979059];function R(e){let t=e>>25,r=(33554431&e)<<5;for(let e=0;e<C.length;e++)(t>>e&1)==1&&(r^=C[e]);return r}function B(e,t,r=1){let n=e.length,i=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);i=R(i)^r>>5}i=R(i);for(let t=0;t<n;t++)i=R(i)^31&e.charCodeAt(t);for(let e of t)i=R(i)^e;for(let e=0;e<6;e++)i=R(i);return i^=r,x.encode(v([i%w[30]],30,5,!1))}function U(e){let t="bech32"===e?1:734539939,n=E(5),i=n.decode,o=n.encode,a=S(i);function u(e,n,i=90){s("bech32.encode prefix",e),r(n)&&(n=Array.from(n)),c("bech32.encode",n);let o=e.length;if(0===o)throw TypeError(`Invalid prefix length ${o}`);let a=o+7+n.length;if(!1!==i&&a>i)throw TypeError(`Length ${a} exceeds limit ${i}`);let u=e.toLowerCase(),l=B(u,n,t);return`${u}1${x.encode(n)}${l}`}function l(e,r=90){s("bech32.decode input",e);let n=e.length;if(n<8||!1!==r&&n>r)throw TypeError(`invalid string length: ${n} (${e}). Expected (8..${r})`);let i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let o=i.lastIndexOf("1");if(0===o||-1===o)throw Error('Letter "1" must be present between prefix and data only');let a=i.slice(0,o),u=i.slice(o+1);if(u.length<6)throw Error("Data must be at least 6 characters long");let l=x.decode(u).slice(0,-6),c=B(a,l,t);if(!u.endsWith(c))throw Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:a,words:l}}let f=S(l);function h(e){let{prefix:t,words:r}=l(e,!1);return{prefix:t,words:r,bytes:i(r)}}function p(e,t){return u(e,o(t))}return{encode:u,decode:l,encodeFromBytes:p,decodeToBytes:h,decodeUnsafe:f,fromWords:i,fromWordsUnsafe:a,toWords:o}}t.bech32=U("bech32"),t.bech32m=U("bech32m"),t.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)};let N="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,D={encode:e=>(n(e),e.toHex()),decode:e=>(s("hex",e),Uint8Array.fromHex(e))};t.hex=N?D:f(E(4),h("0123456789abcdef"),p(""),y(e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));let L={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},H="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",M=(e,t)=>{if("string"!=typeof e||!L.hasOwnProperty(e))throw TypeError(H);if(!r(t))throw TypeError("bytesToString() expects Uint8Array");return L[e].encode(t)};t.bytesToString=M,t.str=t.bytesToString;let F=(e,t)=>{if(!L.hasOwnProperty(e))throw TypeError(H);if("string"!=typeof t)throw TypeError("stringToBytes() expects string");return L[e].decode(t)};t.stringToBytes=F,t.bytes=t.stringToBytes},52721:function(e,t,r){"use strict";var n,i,o;r.d(t,{JZ:function(){return a},Kn:function(){return i},g9:function(){return o},oK:function(){return n},sM:function(){return u},yo:function(){return s}}),function(e){e[e.Testnet=2147483648]="Testnet",e[e.Mainnet=1]="Mainnet"}(n||(n={})),function(e){e[e.Mainnet=0]="Mainnet",e[e.Testnet=128]="Testnet"}(i||(i={})),function(e){e[e.Mainnet=385875968]="Mainnet",e[e.Testnet=4278190080]="Testnet"}(o||(o={}));let s=33,a=32,u="https://hub.blockstack.org"},6602:function(e,t,r){"use strict";r.r(t),r.d(t,{BLOCKSTACK_DEFAULT_GAIA_HUB_URL:function(){return eh.sM},BLOCKSTACK_HANDLER:function(){return k},BadPathError:function(){return _},BlockstackError:function(){return o},ChainID:function(){return eh.oK},ConflictError:function(){return w},DoesNotExist:function(){return b},ERROR_CODES:function(){return i},FailedDecryptionError:function(){return d},GaiaHubError:function(){return m},InvalidAmountError:function(){return f},InvalidDIDError:function(){return l},InvalidParameterError:function(){return s},InvalidStateError:function(){return y},Logger:function(){return P},LoginFailedError:function(){return h},MissingParameterError:function(){return a},NoSessionDataError:function(){return g},NotEnoughFundsError:function(){return c},NotEnoughProofError:function(){return v},PRIVATE_KEY_COMPRESSED_LENGTH:function(){return eh.yo},PRIVATE_KEY_UNCOMPRESSED_LENGTH:function(){return eh.JZ},PayloadTooLargeError:function(){return S},PeerNetworkID:function(){return eh.g9},PreconditionFailedError:function(){return T},RemoteServiceError:function(){return u},SignatureVerificationError:function(){return p},TransactionVersion:function(){return eh.Kn},ValidationError:function(){return E},alloc:function(){return ew},asciiToBytes:function(){return eo},bigIntToBytes:function(){return X},bytesToAscii:function(){return es},bytesToHex:function(){return et},bytesToUtf8:function(){return ei},concatArray:function(){return ec},concatBytes:function(){return el},config:function(){return n},equals:function(){return eb},fromTwos:function(){return Z},getAesCbcOutputLength:function(){return U},getBase64OutputLength:function(){return N},getGlobalObject:function(){return V},getGlobalObjects:function(){return K},getGlobalScope:function(){return F},hexToBigInt:function(){return $},hexToBytes:function(){return er},hexToInt:function(){return Y},intToBigInt:function(){return q},intToBytes:function(){return W},intToHex:function(){return z},isInstance:function(){return ef},isLaterVersion:function(){return L},isSameOriginAbsoluteUrl:function(){return M},makeUUID4:function(){return H},megabytesToBytes:function(){return B},nextHour:function(){return R},nextMonth:function(){return C},nextYear:function(){return x},octetsToBytes:function(){return eu},parseRecoverableSignatureVrs:function(){return ed},privateKeyToBytes:function(){return em},readUInt16BE:function(){return ev},readUInt16LE:function(){return eT},readUInt32BE:function(){return eA},readUInt32LE:function(){return eP},readUInt8:function(){return eE},signatureRsvToVrs:function(){return eg},signatureVrsToRsv:function(){return ey},toTwos:function(){return J},updateQueryStringParameter:function(){return D},utf8ToBytes:function(){return en},with0x:function(){return G},writeUInt16BE:function(){return e_},writeUInt16LE:function(){return eI},writeUInt32BE:function(){return eO},writeUInt32LE:function(){return ek},writeUInt8:function(){return eS}});let n={network:{layer1:"placeholder"},logLevel:"debug"},i={MISSING_PARAMETER:"missing_parameter",REMOTE_SERVICE_ERROR:"remote_service_error",INVALID_STATE:"invalid_state",NO_SESSION_DATA:"no_session_data",DOES_NOT_EXIST:"does_not_exist",FAILED_DECRYPTION_ERROR:"failed_decryption_error",INVALID_DID_ERROR:"invalid_did_error",NOT_ENOUGH_FUNDS_ERROR:"not_enough_error",INVALID_AMOUNT_ERROR:"invalid_amount_error",LOGIN_FAILED_ERROR:"login_failed",SIGNATURE_VERIFICATION_ERROR:"signature_verification_failure",CONFLICT_ERROR:"conflict_error",NOT_ENOUGH_PROOF_ERROR:"not_enough_proof_error",BAD_PATH_ERROR:"bad_path_error",VALIDATION_ERROR:"validation_error",PAYLOAD_TOO_LARGE_ERROR:"payload_too_large_error",PRECONDITION_FAILED_ERROR:"precondition_failed_error",UNKNOWN:"unknown"};Object.freeze(i);class o extends Error{constructor(e){super();let t=e.message,r=`Error Code: ${e.code}`,n=this.stack;if(n)r+=`Stack Trace:
${n}`;else try{throw Error()}catch(e){n=e.stack}t+=`
If you believe this exception is caused by a bug in stacks.js,
      please file a bug report: https://github.com/blockstack/stacks.js/issues

${r}`,this.message=t,this.code=e.code,this.parameter=e.parameter?e.parameter:void 0}toString(){return`${super.toString()}
    code: ${this.code} param: ${this.parameter?this.parameter:"n/a"}`}}class s extends o{constructor(e,t=""){super({code:i.MISSING_PARAMETER,message:t,parameter:e}),this.name="MissingParametersError"}}class a extends o{constructor(e,t=""){super({code:i.MISSING_PARAMETER,message:t,parameter:e}),this.name="MissingParametersError"}}class u extends o{constructor(e,t=""){super({code:i.REMOTE_SERVICE_ERROR,message:t}),this.response=e}}class l extends o{constructor(e=""){super({code:i.INVALID_DID_ERROR,message:e}),this.name="InvalidDIDError"}}class c extends o{constructor(e){let t=`Not enough UTXOs to fund. Left to fund: ${e}`;super({code:i.NOT_ENOUGH_FUNDS_ERROR,message:t}),this.leftToFund=e,this.name="NotEnoughFundsError",this.message=t}}class f extends o{constructor(e,t){let r=`Not enough coin to fund fees transaction fees. Fees would be ${e}, specified spend is  ${t}`;super({code:i.INVALID_AMOUNT_ERROR,message:r}),this.specifiedAmount=t,this.fees=e,this.name="InvalidAmountError",this.message=r}}class h extends o{constructor(e){let t=`Failed to login: ${e}`;super({code:i.LOGIN_FAILED_ERROR,message:t}),this.message=t,this.name="LoginFailedError"}}class p extends o{constructor(e){let t=`Failed to verify signature: ${e}`;super({code:i.SIGNATURE_VERIFICATION_ERROR,message:t}),this.message=t,this.name="SignatureVerificationError"}}class d extends o{constructor(e="Unable to decrypt cipher object."){super({code:i.FAILED_DECRYPTION_ERROR,message:e}),this.message=e,this.name="FailedDecryptionError"}}class y extends o{constructor(e){super({code:i.INVALID_STATE,message:e}),this.message=e,this.name="InvalidStateError"}}class g extends o{constructor(e){super({code:i.INVALID_STATE,message:e}),this.message=e,this.name="NoSessionDataError"}}class m extends o{constructor(e,t){super(e),t&&(this.hubError={statusCode:t.status,statusText:t.statusText},"string"==typeof t.body?this.hubError.message=t.body:"object"==typeof t.body&&Object.assign(this.hubError,t.body))}}class b extends m{constructor(e,t){super({message:e,code:i.DOES_NOT_EXIST},t),this.name="DoesNotExist"}}class w extends m{constructor(e,t){super({message:e,code:i.CONFLICT_ERROR},t),this.name="ConflictError"}}class v extends m{constructor(e,t){super({message:e,code:i.NOT_ENOUGH_PROOF_ERROR},t),this.name="NotEnoughProofError"}}class _ extends m{constructor(e,t){super({message:e,code:i.BAD_PATH_ERROR},t),this.name="BadPathError"}}class E extends m{constructor(e,t){super({message:e,code:i.VALIDATION_ERROR},t),this.name="ValidationError"}}class S extends m{constructor(e,t,r){super({message:e,code:i.PAYLOAD_TOO_LARGE_ERROR},t),this.name="PayloadTooLargeError",this.maxUploadByteSize=r}}class T extends m{constructor(e,t){super({message:e,code:i.PRECONDITION_FAILED_ERROR},t),this.name="PreconditionFailedError"}}let I=["debug","info","warn","error","none"],A={},O={};for(let e=0;e<I.length;e++){let t=I[e];A[t]=e,O[e]=t}class P{static error(e){this.shouldLog("error")&&console.error(this.logMessage("error",e))}static warn(e){this.shouldLog("warn")&&console.warn(this.logMessage("warn",e))}static info(e){this.shouldLog("info")&&console.log(this.logMessage("info",e))}static debug(e){this.shouldLog("debug")&&console.log(this.logMessage("debug",e))}static logMessage(e,t){return`[${e.toUpperCase()}] ${t}`}static shouldLog(e){return A[n.logLevel]<=A[e]}}let k="blockstack";function x(){return new Date(new Date().setFullYear(new Date().getFullYear()+1))}function C(){return new Date(new Date().setMonth(new Date().getMonth()+1))}function R(){return new Date(new Date().setHours(new Date().getHours()+1))}function B(e){return Number.isFinite(e)?Math.floor(1048576*e):0}function U(e){return(Math.floor(e/16)+1)*16}function N(e){return 4*Math.ceil(e/3)}function D(e,t,r){let n=RegExp(`([?&])${t}=.*?(&|$)`,"i"),i=-1!==e.indexOf("?")?"&":"?";return e.match(n)?e.replace(n,`$1${t}=${r}$2`):`${e}${i}${t}=${r}`}function L(e,t){(void 0===e||""===e)&&(e="0.0.0"),(void 0===t||""===e)&&(t="0.0.0");let r=e.split(".").map(e=>parseInt(e,10)),n=t.split(".").map(e=>parseInt(e,10));for(let i=0;i<t.length;i++)if(i>=e.length&&n.push(0),r[i]<n[i])return!1;return!0}function H(){let e=new Date().getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)})}function M(e,t){try{let r=new URL(e),n=new URL(t),i=0|parseInt(r.port||"0",10)||("https:"===r.protocol?443:80),o=0|parseInt(n.port||"0",10)||("https:"===n.protocol?443:80),s={scheme:r.protocol===n.protocol,hostname:r.hostname===n.hostname,port:i===o,absolute:(e.includes("http://")||e.includes("https://"))&&(t.includes("http://")||t.includes("https://"))};return s.scheme&&s.hostname&&s.port&&s.absolute}catch(e){return console.log(e),console.log("Parsing error in same URL origin check"),!1}}function F(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw Error("Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available")}function j(e,t,r){return r?`Use of '${r}' requires \`${t}\` which is unavailable on the '${e}' object within the currently executing environment.`:`\`${t}\` is unavailable on the '${e}' object within the currently executing environment.`}function V(e,{throwIfUnavailable:t,usageDesc:r,returnEmptyObject:n}={}){let i;try{if(i=F()){let t=i[e];if(t)return t}}catch(t){P.error(`Error getting object '${e}' from global scope '${i}': ${t}`)}if(t){let t=j(i,e.toString(),r);throw P.error(t),Error(t)}if(n)return{}}function K(e,{throwIfUnavailable:t,usageDesc:r,returnEmptyObject:n}={}){let i;try{i=F()}catch(o){if(P.error(`Error getting global scope: ${o}`),t){let t=j(i,e[0].toString(),r);throw P.error(t),t}n&&(i={})}let o={};for(let s=0;s<e.length;s++){let a=e[s];try{if(i){let e=i[a];if(e)o[a]=e;else if(t){let e=j(i,a.toString(),r);throw P.error(e),Error(e)}else n&&(o[a]={})}}catch(e){if(t){let e=j(i,a.toString(),r);throw P.error(e),Error(e)}}}return o}function W(e,t,r){return X(q(e,t),r)}function q(e,t){let r=e;if("number"==typeof r){if(!Number.isInteger(r))throw RangeError("Invalid value. Values of type 'number' must be an integer.");if(r>Number.MAX_SAFE_INTEGER)throw RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);return BigInt(r)}if("string"==typeof r){if(r.toLowerCase().startsWith("0x")){let e=r.slice(2);r=er(e=e.padStart(e.length+e.length%2,"0"))}else try{return BigInt(r)}catch(e){if(e instanceof SyntaxError)throw RangeError(`Invalid value. String integer '${r}' is not finite.`)}}if("bigint"==typeof r)return r;if(r instanceof Uint8Array)return t?BigInt(Z(BigInt(`0x${et(r)}`),BigInt(8*r.byteLength)).toString()):BigInt(`0x${et(r)}`);if(null!=r&&"object"==typeof r&&"BN"===r.constructor.name)return BigInt(r.toString());throw TypeError("Invalid value type. Must be a number, bigint, integer-string, hex-string, or Uint8Array.")}function G(e){return e.startsWith("0x")?e:`0x${e}`}function $(e){if("string"!=typeof e)throw TypeError(`hexToBigInt: expected string, got ${typeof e}`);return BigInt(`0x${e}`)}function z(e,t=8){return("bigint"==typeof e?e:q(e,!1)).toString(16).padStart(2*t,"0")}function Y(e){return parseInt(e,16)}function X(e,t=16){return er(z(e,t))}function J(e,t){if(e<-(BigInt(1)<<t-BigInt(1))||(BigInt(1)<<t-BigInt(1))-BigInt(1)<e)throw`Unable to represent integer in width: ${t}`;return e>=BigInt(0)?BigInt(e):e+(BigInt(1)<<t)}function Q(e,t){return e&BigInt(1)<<t}function Z(e,t){return Q(e,t-BigInt(1))?e-(BigInt(1)<<t):e}let ee=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function et(e){if(!(e instanceof Uint8Array))throw Error("Uint8Array expected");let t="";for(let r of e)t+=ee[r];return t}function er(e){if("string"!=typeof e)throw TypeError(`hexToBytes: expected string, got ${typeof e}`);let t=(e=e.startsWith("0x")||e.startsWith("0X")?e.slice(2):e).length%2?`0${e}`:e,r=new Uint8Array(t.length/2);for(let e=0;e<r.length;e++){let n=2*e,i=Number.parseInt(t.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[e]=i}return r}function en(e){return new TextEncoder().encode(e)}function ei(e){return new TextDecoder().decode(e)}function eo(e){let t=[];for(let r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return new Uint8Array(t)}function es(e){return String.fromCharCode.apply(null,e)}function ea(e){return!Number.isInteger(e)||e<0||e>255}function eu(e){if(e.some(ea))throw Error("Some values are invalid bytes.");return new Uint8Array(e)}function el(...e){if(!e.every(e=>e instanceof Uint8Array))throw Error("Uint8Array list expected");if(1===e.length)return e[0];let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0));for(let r=0,n=0;r<e.length;r++){let i=e[r];t.set(i,n),n+=i.length}return t}function ec(e){return el(...e.map(e=>"number"==typeof e?eu([e]):e instanceof Array?eu(e):e))}function ef(e,t){return e instanceof t||e?.constructor?.name?.toLowerCase()===t.name}var eh=r(52721);let ep=32;function ed(e){if(e.length<4*ep+1)throw Error("Invalid signature");let t=e.slice(0,2),r=e.slice(2,2+2*ep),n=e.slice(2+2*ep);return{recoveryId:Y(t),r,s:n}}function ey(e){return e.slice(2)+e.slice(0,2)}function eg(e){return e.slice(-2)+e.slice(0,-2)}function em(e){let t="string"==typeof e?er(e):e;if(32!=t.length&&33!=t.length)throw Error(`Improperly formatted private-key. Private-key byte length should be 32 or 33. Length provided: ${t.length}`);if(33==t.length&&1!==t[32])throw Error("Improperly formatted private-key. 33 bytes indicate compressed key, but the last byte must be == 01");return t}function eb(e,t){if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function ew(e,t){let r=new Uint8Array(e);for(let n=0;n<e;n++)r[n]=t;return r}function ev(e,t){return(e[t+0]<<8|e[t+1])>>>0}function e_(e,t,r=0){return e[r+0]=t>>>8,e[r+1]=t>>>0,e}function eE(e,t){return e[t]}function eS(e,t,r=0){return e[r]=t,e}function eT(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function eI(e,t,r=0){return e[r+0]=255&t,t>>>=8,e[r+1]=255&t,e}function eA(e,t){return 16777216*e[t]+65536*e[t+1]+256*e[t+2]+e[t+3]}function eO(e,t,r=0){return e[r+3]=t,t>>>=8,e[r+2]=t,t>>>=8,e[r+1]=t,t>>>=8,e[r]=t,e}function eP(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function ek(e,t,r=0){return e[r+0]=255&t,t>>>=8,e[r+1]=255&t,t>>>=8,e[r+2]=255&t,t>>>=8,e[r+3]=255&t,e}},15378:function(e,t,r){"use strict";r.r(t),r.d(t,{ACCOUNT_PATH:function(){return T.mQ},Address:function(){return n},AddressHashMode:function(){return E.dO},AddressVersion:function(){return E.TK},AnchorMode:function(){return E.u0},AnchorModeNames:function(){return E.LT},AssetType:function(){return E.h3},AuthFieldType:function(){return E.V3},AuthType:function(){return E.Gr},BLOCKSTACK_DEFAULT_GAIA_HUB_URL:function(){return E.sM},BROADCAST_PATH:function(){return T.oZ},BytesReader:function(){return s.n},CLARITY_INT_BYTE_SIZE:function(){return E.Pe},CLARITY_INT_SIZE:function(){return E.Nv},COINBASE_BYTES_LENGTH:function(){return E.GY},COMPRESSED_PUBKEY_LENGTH_BYTES:function(){return E.yl},CONTRACT_ABI_PATH:function(){return T.T9},Cl:function(){return i},ClarityAbiTypeId:function(){return S.Q},ClarityType:function(){return c.yp},ClarityVersion:function(){return E.y},ClarityWireType:function(){return c.QM},FungibleConditionCode:function(){return E.DY},MAP_ENTRY_PATH:function(){return T.cW},MAX_STRING_LENGTH_BYTES:function(){return E.Cy},MEMO_MAX_LENGTH_BYTES:function(){return E.dV},NonFungibleConditionCode:function(){return E.Am},PayloadType:function(){return E.MX},Pc:function(){return o},PostConditionMode:function(){return E.hW},PostConditionPrincipalId:function(){return E.m4},PostConditionType:function(){return E.sX},PubKeyEncoding:function(){return E.gW},READONLY_FUNCTION_CALL_PATH:function(){return T.Ti},RECOVERABLE_ECDSA_SIG_LENGTH_BYTES:function(){return E.UE},STRING_MAX_LENGTH:function(){return E.nz},STRUCTURED_DATA_PREFIX:function(){return x},StacksTransactionWire:function(){return F.Ak},StacksWireType:function(){return G.l},TRANSACTION_FEE_ESTIMATE_PATH:function(){return T.fv},TRANSFER_FEE_ESTIMATE_PATH:function(){return T.VB},TenureChangeCause:function(){return E._d},TransactionSigner:function(){return O.p},TxRejectedReason:function(){return E.Jn},UNCOMPRESSED_PUBKEY_LENGTH_BYTES:function(){return E.wS},VRF_PROOF_BYTES_LENGTH:function(){return E.ZA},abiFunctionToString:function(){return S.oD},addressFromPublicKeys:function(){return W.j3},addressFromVersionHash:function(){return W.fi},addressHashModeToVersion:function(){return V.c},addressToString:function(){return W.VM},anchorModeFrom:function(){return E.Z},boolCV:function(){return f.H3},broadcastTransaction:function(){return T.bl},bufferCV:function(){return h.B},bufferCVFromString:function(){return h.f},clarityByteToType:function(){return c.UM},clarityTypeToByte:function(){return c.YC},cloneDeep:function(){return j.Xh},codeBodyString:function(){return K.r0},compressPrivateKey:function(){return I._e},compressPublicKey:function(){return I.Lg},conditionByteToType:function(){return A.dC},conditionTypeToByte:function(){return A.KV},contractPrincipalCV:function(){return g.tM},contractPrincipalCVFromAddress:function(){return g.I0},contractPrincipalCVFromStandard:function(){return g.U2},createAddress:function(){return K.p6},createAsset:function(){return K.kI},createCoinbasePayload:function(){return K.Ao},createContractCallPayload:function(){return K.ql},createContractPrincipal:function(){return K.sO},createEmptyAddress:function(){return K.Qm},createLPList:function(){return K.lZ},createLPString:function(){return K.v9},createMemoString:function(){return K.LN},createMessageSignature:function(){return K.V1},createMultiSigSpendingCondition:function(){return a.C},createNakamotoCoinbasePayload:function(){return K.kc},createPoisonPayload:function(){return K.bZ},createSingleSigSpendingCondition:function(){return a.Tm},createSmartContractPayload:function(){return K.UN},createSpendingCondition:function(){return a.Rh},createSponsoredAuth:function(){return a.p1},createStacksPublicKey:function(){return I.NG},createStandardAuth:function(){return a.Pd},createStandardPrincipal:function(){return K.pr},createTenureChangePayload:function(){return K.oc},createTokenTransferPayload:function(){return K.qu},createTransactionAuthField:function(){return K.JT},cvToHex:function(){return j.rD},cvToJSON:function(){return l.YN},cvToString:function(){return l.Is},cvToValue:function(){return l.md},decodeStructuredDataSignature:function(){return L},decodeStructuredDataSignatureBytes:function(){return H},deriveNetworkFromTx:function(){return F.Ne},deserializeAddress:function(){return q.BR},deserializeAsset:function(){return q.v1},deserializeAuthorization:function(){return a.XH},deserializeCV:function(){return v.i},deserializeLPList:function(){return q.nt},deserializeLPString:function(){return q.ET},deserializeMemoString:function(){return q.vF},deserializeMessageSignature:function(){return q.FM},deserializeMultiSigSpendingCondition:function(){return a.fe},deserializePayload:function(){return q.LV},deserializePostConditionWire:function(){return q._I},deserializePrincipal:function(){return q.kV},deserializePublicKey:function(){return q.aQ},deserializeSingleSigSpendingCondition:function(){return a.Dt},deserializeSpendingCondition:function(){return a.lW},deserializeStacksWire:function(){return q.oG},deserializeTransaction:function(){return F.y},deserializeTransactionAuthField:function(){return q.Dc},emptyMessageSignature:function(){return a.TR},encodeAbiClarityValue:function(){return S.T_},encodeClarityValue:function(){return S.rc},encodeStructuredData:function(){return N},encodeStructuredDataBytes:function(){return D},estimateTransactionByteLength:function(){return F.Io},exceedsMaxLengthBytes:function(){return j.pw},falseCV:function(){return f.ef},fetchAbi:function(){return T.GY},fetchCallReadOnlyFunction:function(){return T.QD},fetchContractMapEntry:function(){return T.wc},fetchFeeEstimate:function(){return T.Yu},fetchFeeEstimateTransaction:function(){return T.tq},fetchFeeEstimateTransfer:function(){return T.Nd},fetchNonce:function(){return T.ky},getAddressFromPrivateKey:function(){return I.cw},getAddressFromPublicKey:function(){return I.EJ},getCVTypeString:function(){return l.eH},getFee:function(){return a.JK},getTypeString:function(){return S.ad},getTypeUnion:function(){return S.Af},hash160:function(){return j.M9},hashP2PKH:function(){return j.D2},hashP2SH:function(){return j.UI},hashP2WPKH:function(){return j.rv},hashP2WSH:function(){return j.tM},hashStructuredData:function(){return C},hashStructuredDataBytes:function(){return R},hexToCV:function(){return j.EE},intCV:function(){return p.q},intoInitialSighashAuth:function(){return a.m5},isClarityAbiBuffer:function(){return S.W3},isClarityAbiList:function(){return S.bf},isClarityAbiOptional:function(){return S.a_},isClarityAbiPrimitive:function(){return S.vH},isClarityAbiResponse:function(){return S.gf},isClarityAbiStringAscii:function(){return S.V4},isClarityAbiStringUtf8:function(){return S.uT},isClarityAbiTuple:function(){return S.xR},isClarityName:function(){return j.YI},isClarityType:function(){return l.Tf},isCoinbasePayload:function(){return W.V9},isContractCallPayload:function(){return W.nj},isNonSequentialMultiSig:function(){return a.vY},isPoisonPayload:function(){return W.VC},isPrivateKeyCompressed:function(){return I.vT},isPublicKeyCompressed:function(){return I.j1},isSequentialMultiSig:function(){return a.Cn},isSingleSig:function(){return a.GP},isSmartContractPayload:function(){return W.ox},isTokenTransferPayload:function(){return W._h},leftPadHex:function(){return j.c1},leftPadHexToLength:function(){return j.QG},listCV:function(){return d.B},makeContractCall:function(){return u.b7},makeContractDeploy:function(){return u.RI},makeRandomPrivKey:function(){return I.lw},makeSTXTokenTransfer:function(){return u.lB},makeUnsignedContractCall:function(){return u.Qe},makeUnsignedContractDeploy:function(){return u.W5},makeUnsignedSTXTokenTransfer:function(){return u.R8},nextSignature:function(){return a.a6},nextVerification:function(){return a.Fd},noneCV:function(){return y.hr},omit:function(){return j.CE},optionalCVOf:function(){return y.mw},parseAssetString:function(){return W.GY},parseContractId:function(){return j.ZC},parsePrincipalString:function(){return W.B$},parseReadOnlyResponse:function(){return j.dk},parseToCV:function(){return S.Fj},postConditionModeFrom:function(){return A.Mf},postConditionToHex:function(){return A.lE},postConditionToWire:function(){return A.aA},principalCV:function(){return g.L0},privateKeyIsCompressed:function(){return I.m2},privateKeyToAddress:function(){return I._5},privateKeyToHex:function(){return I.tN},privateKeyToPublic:function(){return I.li},publicKeyFromSignatureRsv:function(){return I.Kc},publicKeyFromSignatureVrs:function(){return I.D5},publicKeyIsCompressed:function(){return I.EG},publicKeyToAddress:function(){return I.y7},publicKeyToAddressSingleSig:function(){return I.VD},publicKeyToHex:function(){return I.TO},randomBytes:function(){return j.O6},randomPrivateKey:function(){return I.UB},responseErrorCV:function(){return m.I},responseOkCV:function(){return m.R},rightPadHexToLength:function(){return j.Sq},serializeAddress:function(){return q.FH},serializeAddressBytes:function(){return q.lU},serializeAsset:function(){return q.G0},serializeAssetBytes:function(){return q.nl},serializeAuthorization:function(){return a.h$},serializeAuthorizationBytes:function(){return a.D9},serializeCV:function(){return _.a},serializeCVBytes:function(){return _.E},serializeLPList:function(){return q.r3},serializeLPListBytes:function(){return q.d6},serializeLPString:function(){return q.LT},serializeLPStringBytes:function(){return q.ot},serializeMemoString:function(){return q.OC},serializeMemoStringBytes:function(){return q.qd},serializeMessageSignature:function(){return q.yw},serializeMessageSignatureBytes:function(){return q.jL},serializeMultiSigSpendingCondition:function(){return a.H3},serializeMultiSigSpendingConditionBytes:function(){return a._w},serializePayload:function(){return q.al},serializePayloadBytes:function(){return q.ZU},serializePostConditionWire:function(){return q.YM},serializePostConditionWireBytes:function(){return q.Ys},serializePrincipal:function(){return q.Wx},serializePrincipalBytes:function(){return q.QM},serializePublicKey:function(){return q.dK},serializePublicKeyBytes:function(){return q.W3},serializeSingleSigSpendingCondition:function(){return a.QP},serializeSingleSigSpendingConditionBytes:function(){return a.YD},serializeSpendingCondition:function(){return a.Bq},serializeSpendingConditionBytes:function(){return a.Zi},serializeStacksWire:function(){return q.jh},serializeStacksWireBytes:function(){return q.gd},serializeTransaction:function(){return F.DO},serializeTransactionAuthField:function(){return q.Fz},serializeTransactionAuthFieldBytes:function(){return q.vq},serializeTransactionBytes:function(){return F.pp},setFee:function(){return a.P_},setNonce:function(){return a.nT},setSponsor:function(){return a.fc},setSponsorNonce:function(){return a.K2},sigHashPreSign:function(){return a.VX},signMessageHashRsv:function(){return I.Ud},signStructuredData:function(){return M},signWithKey:function(){return I.fJ},someCV:function(){return y.PK},sponsorTransaction:function(){return u.Xz},standardPrincipalCV:function(){return g.Op},standardPrincipalCVFromAddress:function(){return g.D9},stringAsciiCV:function(){return b.jx},stringCV:function(){return b.u9},stringUtf8CV:function(){return b.M0},transactionToHex:function(){return F.KZ},trueCV:function(){return f.nC},tupleCV:function(){return w.M},txidFromBytes:function(){return j.yk},txidFromData:function(){return j.G8},uintCV:function(){return p.R},uncompressPublicKey:function(){return I.nq},validateContractCall:function(){return S.IS},validateStacksAddress:function(){return j.RA},verifyOrigin:function(){return a.dd},verifySignature:function(){return j.uM},whenWireType:function(){return G.I},wireToPostCondition:function(){return A.wI}});var n={};r.r(n),r.d(n,{fromPrivateKey:function(){return J},fromPublicKey:function(){return Q},parse:function(){return Y},stringify:function(){return X}});var i={};r.r(i),r.d(i,{address:function(){return eL},bool:function(){return eB},buffer:function(){return eK},bufferFromAscii:function(){return eq},bufferFromHex:function(){return eW},bufferFromUtf8:function(){return eG},contractPrincipal:function(){return eH},deserialize:function(){return eZ},error:function(){return eX},int:function(){return eU},list:function(){return eF},none:function(){return e$},ok:function(){return eY},parse:function(){return eR},prettyPrint:function(){return eo},principal:function(){return eD},serialize:function(){return eQ},some:function(){return ez},standardPrincipal:function(){return eM},stringAscii:function(){return ej},stringUtf8:function(){return eV},stringify:function(){return ei},tuple:function(){return eJ},uint:function(){return eN}});var o={};r.r(o),r.d(o,{fromHex:function(){return e8},origin:function(){return e1},principal:function(){return e0}});var s=r(67522),a=r(31357),u=r(57648),l=r(18422),c=r(18209),f=r(2248),h=r(55128),p=r(85519),d=r(92271),y=r(5469),g=r(11616),m=r(55460),b=r(11468),w=r(81366),v=r(63989),_=r(95298),E=r(96533),S=r(98461),T=r(38395),I=r(27406),A=r(37903),O=r(44303),P=r(57170),k=r(82398);let x=new Uint8Array([83,73,80,48,49,56]);function C(e){return(0,k.ci)((0,P.J)((0,_.E)(e)))}function R(e){return(0,P.J)((0,_.E)(e))}let B=32;function U(e){return!!(e.type===c.yp.Tuple&&["name","version","chain-id"].every(t=>t in e.value)&&["name","version"].every(t=>e.value[t].type===c.yp.StringASCII))&&e.value["chain-id"].type===c.yp.UInt}function N(e){let t=D(e);return(0,k.ci)(t)}function D({message:e,domain:t}){let r=R(e);if(!U(t))throw Error("domain parameter must be a valid domain of type TupleCV with keys 'name', 'version', 'chain-id' with respective types StringASCII, StringASCII, UInt");let n=R(t);return(0,k.eV)(x,n,r)}function L(e){let t=H(e);return{domainHash:(0,k.ci)(t.domainHash),messageHash:(0,k.ci)(t.messageHash)}}function H(e){let t="string"==typeof e?(0,k.nr)(e):e;return{domainHash:t.slice(x.length,x.length+B),messageHash:t.slice(x.length+B)}}function M({message:e,domain:t,privateKey:r}){let n=(0,k.ci)((0,P.J)(D({message:e,domain:t})));return(0,I.Ud)({messageHash:n,privateKey:r})}var F=r(90921),j=r(12206),V=r(46551),K=r(7076),W=r(32151),q=r(4865),G=r(47238),$=r(27701);let z="0123456789ABCDEFGHJKMNPQRSTVWXYZ";function Y(e){let[t,r]=e.split("."),n=(0,$.yI)(t);return{version:n[0],versionChar:z[n[0]],hash160:n[1],contractName:r}}function X(e){let t="version"in e?e.version:z.indexOf(e.versionChar.toUpperCase()),r=(0,$.H4)(t,e.hash160);return e.contractName?`${r}.${e.contractName}`:r}let J=I._5,Q=I.VD;function Z(e,t,r=!1){return e?`
${" ".repeat(e*(t-(r?1:0)))}`:" "}function ee(e,t,r=1){if(0===e.value.length)return"(list)";let n=Z(t,r,!1),i=t?Z(t,r,!0):"",o=e.value.map(e=>en(e,t,r)).join(n);return`(list${n}${o}${i})`}function et(e,t,r=1){if(0===Object.keys(e.value).length)return"{}";let n=[];for(let[i,o]of Object.entries(e.value))n.push(`${i}: ${en(o,t,r)}`);let i=Z(t,r,!1),o=Z(t,r,!0);return`{${i}${n.sort().join(`,${i}`)}${o}}`}function er(e){throw Error(`invalid clarity value type: ${e}`)}function en(e,t=0,r){return e.type===c.yp.BoolFalse?"false":e.type===c.yp.BoolTrue?"true":e.type===c.yp.Int?e.value.toString():e.type===c.yp.UInt?`u${e.value.toString()}`:e.type===c.yp.StringASCII?`"${e.value}"`:e.type===c.yp.StringUTF8?`u"${e.value}"`:e.type===c.yp.PrincipalContract||e.type===c.yp.PrincipalStandard?`'${e.value}`:e.type===c.yp.Buffer?`0x${e.value}`:e.type===c.yp.OptionalNone?"none":e.type===c.yp.OptionalSome?`(some ${en(e.value,t,r)})`:e.type===c.yp.ResponseOk?`(ok ${en(e.value,t,r)})`:e.type===c.yp.ResponseErr?`(err ${en(e.value,t,r)})`:e.type===c.yp.List?ee(e,t,r+1):e.type===c.yp.Tuple?et(e,t,r+1):void er(e)}function ei(e,t=0){return en(e,t,0)}let eo=ei;function es(e,t){return r=>{let n=r.match(e);return n&&0===n.index?{success:!0,value:n[0],rest:r.substring(n[0].length),capture:t?t(n[0]):void 0}:{success:!1}}}function ea(){return es(/\s+/)}function eu(e){return t=>e()(t)}function el(e){return t=>{for(let r of e){let e=r(t);if(e.success)return e}return{success:!1}}}function ec(e){return t=>{let r=e(t);return!r.success||r.rest?{success:!1}:r}}function ef(e){return t=>{let r=e(t);return r.success?r:{success:!0,value:"",rest:t}}}function eh(e,t=e=>e[0]){return r=>{let n=r,i="",o=[];for(let t of e){let e=t(n);if(!e.success)return{success:!1};n=e.rest,i+=e.value,e.capture&&o.push(e.capture)}return{success:!0,value:i,rest:n,capture:t(o)}}}function ep(e,t=e=>e[0]){return eh(e.flatMap((e,t)=>0===t?[e]:[ef(ea()),e]),t)}function ed(e){return ep([es(/\(/),e,es(/\)/)])}function ey(e,t,r=e=>e[e.length-1],n){return i=>{let o,s=i,a="",u=[];for(o=0;;o++){let e=t(s);if(!e.success)break;if(s=e.rest,a+=e.value,e.capture&&u.push(e.capture),n){let e=n(s);if(!e.success){o++;break}s=e.rest,a+=e.value}}return o<e?{success:!1}:{success:!0,value:a,rest:s,capture:r(u)}}}function eg(e,t){return r=>{let n=e(r);return n.success?{success:!0,value:n.value,rest:n.rest,capture:t?t(n.value):n.value}:{success:!1}}}function em(){return eg(es(/\-?[0-9]+/),e=>eU(parseInt(e)))}function eb(){return eh([es(/u/),eg(es(/[0-9]+/),e=>eN(parseInt(e)))])}function ew(){return eg(es(/true|false/),e=>eB("true"===e))}function ev(){return eh([es(/\'/),eg(eh([es(/[A-Z0-9]+/),ef(eh([es(/\./),es(/[a-zA-Z0-9\-]+/)]))]),eL)])}function e_(){return eh([es(/0x/),eg(es(/[0-9a-fA-F]+/),eW)])}function eE(e){return e.replace(/\\\\/g,"\\").replace(/\\(.)/g,"$1")}function eS(){return eh([es(/"/),eg(es(/(\\.|[^"])*/),e=>ej(eE(e))),es(/"/)])}function eT(){return eh([es(/u"/),eg(es(/(\\.|[^"])*/),e=>eV(eE(e))),es(/"/)])}function eI(){return ed(eh([es(/list/),ey(0,eh([ea(),eC()]),e=>eF(e))]))}function eA(){return el([ep([es(/\{/),ey(1,eh([eg(es(/[a-zA-Z][a-zA-Z0-9_]*/)),es(/\s*\:/),ea(),eC()],([e,t])=>eJ({[e]:t})),e=>eJ(Object.assign({},...e.map(e=>e.value))),es(/\s*\,\s*/)),es(/\}/)]),ed(eh([ef(ea()),es(/tuple/),ea(),ey(1,ed(eh([ef(ea()),eg(es(/[a-zA-Z][a-zA-Z0-9_]*/)),ea(),eC(),ef(ea())],([e,t])=>eJ({[e]:t}))),e=>eJ(Object.assign({},...e.map(e=>e.value))),ea())]))])}function eO(){return eg(es(/none/),e$)}function eP(){return ed(eh([es(/some/),ea(),eC()],e=>ez(e[0])))}function ek(){return ed(eh([es(/ok/),ea(),eC()],e=>eY(e[0])))}function ex(){return ed(eh([es(/err/),ea(),eC()],e=>eX(e[0])))}function eC(e=e=>e){return el([e_,eS,eT,em,eb,ew,ev,eI,eA,eO,eP,ek,ex].map(eu).map(e))}function eR(e){let t=eC(ec)(e);if(!t.success||!t.capture)throw"Parse error";return t.capture}let eB=f.H3,eU=p.q,eN=p.R;function eD(e){let[t,r]=e.split(".");return r?(0,g.tM)(t,r):(0,g.Op)(t)}let eL=eD,eH=g.tM,eM=g.Op,eF=d.B,ej=b.jx,eV=b.M0,eK=h.B,eW=e=>(0,h.B)((0,k.nr)(e)),eq=e=>(0,h.B)((0,k.QD)(e)),eG=e=>(0,h.B)((0,k.iY)(e)),e$=y.hr,ez=y.PK,eY=m.R,eX=m.I,eJ=w.M,eQ=_.a,eZ=v.i;function e0(e){let[t,r]=e.split(".");if(!t||!(0,j.RA)(t)||"string"==typeof r&&!r)throw Error(`Invalid contract id: ${e}`);return new e2(e)}function e1(){return new e2("origin")}class e2{constructor(e){this.address=e}willSendEq(e){return new e3(this.address,e,"eq")}willSendLte(e){return new e3(this.address,e,"lte")}willSendLt(e){return new e3(this.address,e,"lt")}willSendGte(e){return new e3(this.address,e,"gte")}willSendGt(e){return new e3(this.address,e,"gt")}willSendAsset(){return new e4(this.address,"sent")}willNotSendAsset(){return new e4(this.address,"not-sent")}}class e3{constructor(e,t,r){this.address=e,this.amount=t,this.code=r}ustx(){return{type:"stx-postcondition",address:this.address,condition:this.code,amount:(0,k.HN)(this.amount).toString()}}ft(e,t){let[r,n]=e.split(".");if(!r||!(0,j.RA)(r)||"string"==typeof n&&!n)throw Error(`Invalid contract id: ${e}`);return{type:"ft-postcondition",address:this.address,condition:this.code,amount:(0,k.HN)(this.amount).toString(),asset:`${e}::${t}`}}}class e4{constructor(e,t){this.address=e,this.code=t}nft(...e){let{contractAddress:t,contractName:r,tokenName:n,assetId:i}=e6(...e);if(!(0,j.RA)(t))throw Error(`Invalid contract id: ${t}`);return{type:"nft-postcondition",address:this.address,condition:this.code,asset:`${t}.${r}::${n}`,assetId:i}}}function e5(e){let[t,r]=e.split("::");if(!t||!r)throw Error(`Invalid fully-qualified nft asset name: ${e}`);let[n,i]=(0,j.ZC)(t);return{contractAddress:n,contractName:i,tokenName:r}}function e8(e){let t=(0,q._I)(e);return(0,A.wI)(t)}function e6(...e){if(2===e.length){let[t,r]=e;return{...e5(t),assetId:r}}let[t,r,n]=e,[i,o]=(0,j.ZC)(t);return{contractAddress:i,contractName:o,tokenName:r,assetId:n}}},2646:function(e,t){"use strict";var r,n,i=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return u([e,t])}}function u(a){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};function s(e){return e in t.ERROR_DESCRIPTION?t.ERROR_DESCRIPTION[e]:"Unknown Status Code: ".concat(e)}function a(e){return"object"==typeof e&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)}function u(e){if(e&&a(e)){if(Object.prototype.hasOwnProperty.call(e,"statusCode"))return{returnCode:e.statusCode,errorMessage:s(e.statusCode)};if(Object.prototype.hasOwnProperty.call(e,"returnCode")&&Object.prototype.hasOwnProperty.call(e,"errorMessage"))return e}return{returnCode:65535,errorMessage:e.toString()}}function l(e){return i(this,void 0,void 0,function(){return o(this,function(r){return[2,e.send(t.CLA,t.INS.GET_VERSION,0,0).then(function(e){var t=e.slice(-2),r=256*t[0]+t[1],n=0;return e.length>=9&&(n=(e[5]<<24)+(e[6]<<16)+(e[7]<<8)+(e[8]<<0)),{returnCode:r,errorMessage:s(r),testMode:0!==e[0],major:e[1],minor:e[2],patch:e[3],deviceLocked:1===e[4],targetId:n.toString(16)}},u)]})})}t.__esModule=!0,t.getVersion=t.processErrorResponse=t.errorCodeToString=t.ERROR_DESCRIPTION=t.LedgerError=t.PKLEN=t.P1_VALUES=t.PAYLOAD_TYPE=t.INS=t.APP_KEY=t.CHUNK_SIZE=t.CLA=void 0,t.CLA=9,t.CHUNK_SIZE=250,t.APP_KEY="STX",t.INS={GET_VERSION:0,GET_ADDR_SECP256K1:1,SIGN_SECP256K1:2,GET_AUTH_PUBKEY:3,SIGN_JWT_SECP256K1:4,SIGN_STRUCTURED_MSG:5},t.PAYLOAD_TYPE={INIT:0,ADD:1,LAST:2},t.P1_VALUES={ONLY_RETRIEVE:0,SHOW_ADDRESS_IN_DEVICE:1},t.PKLEN=33,function(e){e[e.U2FUnknown=1]="U2FUnknown",e[e.U2FBadRequest=2]="U2FBadRequest",e[e.U2FConfigurationUnsupported=3]="U2FConfigurationUnsupported",e[e.U2FDeviceIneligible=4]="U2FDeviceIneligible",e[e.U2FTimeout=5]="U2FTimeout",e[e.Timeout=14]="Timeout",e[e.NoErrors=36864]="NoErrors",e[e.DeviceIsBusy=36865]="DeviceIsBusy",e[e.ErrorDerivingKeys=26626]="ErrorDerivingKeys",e[e.ExecutionError=25600]="ExecutionError",e[e.WrongLength=26368]="WrongLength",e[e.EmptyBuffer=27010]="EmptyBuffer",e[e.OutputBufferTooSmall=27011]="OutputBufferTooSmall",e[e.DataIsInvalid=27012]="DataIsInvalid",e[e.ConditionsNotSatisfied=27013]="ConditionsNotSatisfied",e[e.TransactionRejected=27014]="TransactionRejected",e[e.BadKeyHandle=27264]="BadKeyHandle",e[e.InvalidP1P2=27392]="InvalidP1P2",e[e.InstructionNotSupported=27904]="InstructionNotSupported",e[e.AppDoesNotSeemToBeOpen=28161]="AppDoesNotSeemToBeOpen",e[e.UnknownError=28416]="UnknownError",e[e.SignVerifyError=28417]="SignVerifyError"}(n=t.LedgerError||(t.LedgerError={})),t.ERROR_DESCRIPTION=((r={})[n.U2FUnknown]="U2F: Unknown",r[n.U2FBadRequest]="U2F: Bad request",r[n.U2FConfigurationUnsupported]="U2F: Configuration unsupported",r[n.U2FDeviceIneligible]="U2F: Device Ineligible",r[n.U2FTimeout]="U2F: Timeout",r[n.Timeout]="Timeout",r[n.NoErrors]="No errors",r[n.DeviceIsBusy]="Device is busy",r[n.ErrorDerivingKeys]="Error deriving keys",r[n.ExecutionError]="Execution Error",r[n.WrongLength]="Wrong Length",r[n.EmptyBuffer]="Empty Buffer",r[n.OutputBufferTooSmall]="Output buffer too small",r[n.DataIsInvalid]="Data is invalid",r[n.ConditionsNotSatisfied]="Conditions not satisfied",r[n.TransactionRejected]="Transaction rejected",r[n.BadKeyHandle]="Bad key handle",r[n.InvalidP1P2]="Invalid P1/P2",r[n.InstructionNotSupported]="Instruction not supported",r[n.AppDoesNotSeemToBeOpen]="App does not seem to be open",r[n.UnknownError]="Unknown error",r[n.SignVerifyError]="Sign/verify error",r),t.errorCodeToString=s,t.processErrorResponse=u,t.getVersion=l},45651:function(e,t,r){"use strict";var n=r(48764).Buffer;t.__esModule=!0,t.serializePath=void 0;var i=2147483648,o=6,s=4;function a(e){if(!e.startsWith("m"))throw Error('Path should start with "m" (e.g "m/44\'/5757\'/5\'/0/3")');var t=e.split("/"),r=0;if(t.length===o||t.length===s)r=(t.length-1)*4;else throw Error("Invalid path. (e.g \"m/44'/5757'/5'/0/3\" or \"m/888'/0'/<account>\")");for(var a=n.alloc(r),u=1;u<t.length;u+=1){var l=0,c=t[u];c.endsWith("'")&&(l+=i,c=c.slice(0,-1));var f=Number(c);if(Number.isNaN(f))throw Error("Invalid path : ".concat(c," is not a number. (e.g \"m/44'/461'/5'/0/3\")"));if(f>=i)throw Error("Incorrect child value (bigger or equal to 0x80000000)");l+=f,a.writeUInt32LE(l,4*(u-1))}return a}t.serializePath=a},74725:function(e,t,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},s=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return u([e,t])}}function u(a){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};t.__esModule=!0,t.LedgerError=void 0;var u=r(45651),l=r(2646);t.LedgerError=l.LedgerError;var c=r(57795);function f(e){var t=e,r=t.slice(-2),i=256*r[0]+r[1],o=n.from(t.slice(0,l.PKLEN));return t=t.slice(l.PKLEN),{publicKey:o,address:n.from(t.slice(0,-2)).toString(),returnCode:i,errorMessage:(0,l.errorCodeToString)(i)}}o(r(24206),t);var h=function(){function e(e){if(this.transport=e,!e)throw Error("Transport has not been defined")}return e.prepareChunks=function(e,t){var r=[];r.push(e);for(var i=n.from(t),o=n.concat([i]),s=0;s<o.length;s+=l.CHUNK_SIZE){var a=s+l.CHUNK_SIZE;s>o.length&&(a=o.length),r.push(o.slice(s,a))}return r},e.prototype.signGetChunks=function(t,r){return s(this,void 0,void 0,function(){return a(this,function(n){return[2,e.prepareChunks((0,u.serializePath)(t),r)]})})},e.prototype.getVersion=function(){return s(this,void 0,void 0,function(){return a(this,function(e){return[2,(0,l.getVersion)(this.transport).catch(function(e){return(0,l.processErrorResponse)(e)})]})})},e.prototype.getAppInfo=function(){return s(this,void 0,void 0,function(){return a(this,function(e){return[2,this.transport.send(176,1,0,0).then(function(e){var t=e.slice(-2),r=256*t[0]+t[1],n={},i="err",o="err",s=0,a=0;if(1!==e[0])n.errorMessage="response format ID not recognized",n.returnCode=l.LedgerError.DeviceIsBusy;else{var u=e[1];i=e.slice(2,2+u).toString("ascii");var c=2+u,f=e[c];c+=1,o=e.slice(c,c+f).toString("ascii");var h=e[c+=f];c+=1,s=h,a=e[c]}return{returnCode:r,errorMessage:(0,l.errorCodeToString)(r),appName:i,appVersion:o,flagLen:s,flagsValue:a,flagRecovery:(1&a)!=0,flagSignedMcuCode:(2&a)!=0,flagOnboarded:(4&a)!=0,flagPINValidated:(128&a)!=0}},l.processErrorResponse)]})})},e.prototype.getAddressAndPubKey=function(e,t){return s(this,void 0,void 0,function(){var r;return a(this,function(n){return r=(0,u.serializePath)(e),[2,this.transport.send(l.CLA,l.INS.GET_ADDR_SECP256K1,l.P1_VALUES.ONLY_RETRIEVE,t,r,[36864]).then(f,l.processErrorResponse)]})})},e.prototype.getIdentityPubKey=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(r){return t=(0,u.serializePath)(e),[2,this.transport.send(l.CLA,l.INS.GET_AUTH_PUBKEY,l.P1_VALUES.ONLY_RETRIEVE,0,t,[36864]).then(f,l.processErrorResponse)]})})},e.prototype.showAddressAndPubKey=function(e,t){return s(this,void 0,void 0,function(){var r;return a(this,function(n){return r=(0,u.serializePath)(e),[2,this.transport.send(l.CLA,l.INS.GET_ADDR_SECP256K1,l.P1_VALUES.SHOW_ADDRESS_IN_DEVICE,t,r,[l.LedgerError.NoErrors]).then(f,l.processErrorResponse)]})})},e.prototype.signSendChunk=function(e,t,r,i){return s(this,void 0,void 0,function(){var o;return a(this,function(s){return o=l.PAYLOAD_TYPE.ADD,1===e&&(o=l.PAYLOAD_TYPE.INIT),e===t&&(o=l.PAYLOAD_TYPE.LAST),[2,this.transport.send(l.CLA,i,o,0,r,[l.LedgerError.NoErrors,l.LedgerError.DataIsInvalid,l.LedgerError.BadKeyHandle,l.LedgerError.SignVerifyError]).then(function(e){var t=e.slice(-2),r=256*t[0]+t[1],i=(0,l.errorCodeToString)(r),o=n.alloc(0),s=n.alloc(0),a=n.alloc(0),u=n.alloc(0);return((r===l.LedgerError.BadKeyHandle||r===l.LedgerError.DataIsInvalid||r===l.LedgerError.SignVerifyError)&&(i="".concat(i," : ").concat(e.slice(0,e.length-2).toString("ascii"))),r===l.LedgerError.NoErrors&&e.length>2)?(o=e.slice(0,32),s=e.slice(32,97),(a=n.alloc(65))[0]=s[s.length-1],n.from(s).copy(a,1,0,64),{postSignHash:o,signatureCompact:s,signatureVRS:a,signatureDER:u=e.slice(97,e.length-2),returnCode:r,errorMessage:i}):{returnCode:r,errorMessage:i}},l.processErrorResponse)]})})},e.prototype.sign=function(e,t){return s(this,void 0,void 0,function(){var r=this;return a(this,function(n){return[2,this.signGetChunks(e,t).then(function(e){return r.signSendChunk(1,e.length,e[0],l.INS.SIGN_SECP256K1).then(function(t){return s(r,void 0,void 0,function(){var r,n;return a(this,function(i){switch(i.label){case 0:r={returnCode:t.returnCode,errorMessage:t.errorMessage,postSignHash:null,signatureCompact:null,signatureDER:null},n=1,i.label=1;case 1:if(!(n<e.length))return[3,4];return[4,this.signSendChunk(1+n,e.length,e[n],l.INS.SIGN_SECP256K1)];case 2:if((r=i.sent()).returnCode!==l.LedgerError.NoErrors)return[3,4];i.label=3;case 3:return n+=1,[3,1];case 4:return[2,r]}})})},l.processErrorResponse)},l.processErrorResponse)]})})},e.prototype.sign_msg=function(e,t){return s(this,void 0,void 0,function(){var r,i,o,u,f=this;return a(this,function(h){return r=(0,c.encode)(t.length),i="\x17Stacks Signed Message:\n",o=n.concat([n.from(i),r,n.from(t)]),u=l.INS.SIGN_SECP256K1,[2,this.signGetChunks(e,o).then(function(e){return f.signSendChunk(1,e.length,e[0],u).then(function(t){return s(f,void 0,void 0,function(){var r,n;return a(this,function(i){switch(i.label){case 0:r={returnCode:t.returnCode,errorMessage:t.errorMessage,postSignHash:null,signatureCompact:null,signatureDER:null},n=1,i.label=1;case 1:if(!(n<e.length))return[3,4];return[4,this.signSendChunk(1+n,e.length,e[n],u)];case 2:if((r=i.sent()).returnCode!==l.LedgerError.NoErrors)return[3,4];i.label=3;case 3:return n+=1,[3,1];case 4:return[2,r]}})})},l.processErrorResponse)},l.processErrorResponse)]})})},e.prototype.sign_jwt=function(e,t){return s(this,void 0,void 0,function(){var r,i,o,u=this;return a(this,function(c){return r=t.length,i=n.from(t),o=l.INS.SIGN_JWT_SECP256K1,[2,this.signGetChunks(e,i).then(function(e){return u.signSendChunk(1,e.length,e[0],o).then(function(t){return s(u,void 0,void 0,function(){var r,n;return a(this,function(i){switch(i.label){case 0:r={returnCode:t.returnCode,errorMessage:t.errorMessage,postSignHash:null,signatureCompact:null,signatureDER:null},n=1,i.label=1;case 1:if(!(n<e.length))return[3,4];return[4,this.signSendChunk(1+n,e.length,e[n],o)];case 2:if((r=i.sent()).returnCode!==l.LedgerError.NoErrors)return[3,4];i.label=3;case 3:return n+=1,[3,1];case 4:return[2,r]}})})},l.processErrorResponse)},l.processErrorResponse)]})})},e.prototype.sign_structured_msg=function(e,t,r){return s(this,void 0,void 0,function(){var i,o,u,f,h=this;return a(this,function(p){return i=(0,c.encode)(r.length),o="SIP018",u=n.concat([n.from(o),n.from(t,"hex"),n.from(r,"hex")]),f=l.INS.SIGN_SECP256K1,[2,this.signGetChunks(e,u).then(function(e){return h.signSendChunk(1,e.length,e[0],f).then(function(t){return s(h,void 0,void 0,function(){var r,n;return a(this,function(i){switch(i.label){case 0:r={returnCode:t.returnCode,errorMessage:t.errorMessage,postSignHash:null,signatureCompact:null,signatureDER:null},n=1,i.label=1;case 1:if(!(n<e.length))return[3,4];return[4,this.signSendChunk(1+n,e.length,e[n],f)];case 2:if((r=i.sent()).returnCode!==l.LedgerError.NoErrors)return[3,4];i.label=3;case 3:return n+=1,[3,1];case 4:return[2,r]}})})},l.processErrorResponse)},l.processErrorResponse)]})})},e}();t.default=h},24206:function(e,t){"use strict";t.__esModule=!0},69282:function(e,t,r){"use strict";var n,i,o=r(34155);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function u(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=c(e,"string");return"symbol"===s(t)?t:String(t)}function c(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}var h=r(62136).codes,p=h.ERR_AMBIGUOUS_ARGUMENT,d=h.ERR_INVALID_ARG_TYPE,y=h.ERR_INVALID_ARG_VALUE,g=h.ERR_INVALID_RETURN_VALUE,m=h.ERR_MISSING_ARGS,b=r(25961),w=r(89539).inspect,v=r(89539).types,_=v.isPromise,E=v.isRegExp,S=r(38399)(),T=r(75624)(),I=r(21924)("RegExp.prototype.test");function A(){var e=r(19158);n=e.isDeepEqual,i=e.isDeepStrictEqual}var O=!1,P=e.exports=B,k={};function x(e){if(e.message instanceof Error)throw e.message;throw new b(e)}function C(e,t,r,n,i){var s,a=arguments.length;if(0===a?s="Failed":1===a?(r=e,e=void 0):(!1===O&&(O=!0,(o.emitWarning?o.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===a&&(n="!=")),r instanceof Error)throw r;var u={actual:e,expected:t,operator:void 0===n?"fail":n,stackStartFn:i||C};void 0!==r&&(u.message=r);var l=new b(u);throw s&&(l.message=s,l.generatedMessage=!0),l}function R(e,t,r,n){if(!r){var i=!1;if(0===t)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new b({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function B(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];R.apply(void 0,[B,t.length].concat(t))}function U(e,t,r){if(arguments.length<2)throw new m("actual","expected");void 0===n&&A(),i(e,t)&&x({actual:e,expected:t,message:r,operator:"notDeepStrictEqual",stackStartFn:U})}P.fail=C,P.AssertionError=b,P.ok=B,P.equal=function e(t,r,n){if(arguments.length<2)throw new m("actual","expected");t!=r&&x({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})},P.notEqual=function e(t,r,n){if(arguments.length<2)throw new m("actual","expected");t==r&&x({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})},P.deepEqual=function e(t,r,i){if(arguments.length<2)throw new m("actual","expected");void 0===n&&A(),n(t,r)||x({actual:t,expected:r,message:i,operator:"deepEqual",stackStartFn:e})},P.notDeepEqual=function e(t,r,i){if(arguments.length<2)throw new m("actual","expected");void 0===n&&A(),n(t,r)&&x({actual:t,expected:r,message:i,operator:"notDeepEqual",stackStartFn:e})},P.deepStrictEqual=function e(t,r,o){if(arguments.length<2)throw new m("actual","expected");void 0===n&&A(),i(t,r)||x({actual:t,expected:r,message:o,operator:"deepStrictEqual",stackStartFn:e})},P.notDeepStrictEqual=U,P.strictEqual=function e(t,r,n){if(arguments.length<2)throw new m("actual","expected");T(t,r)||x({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})},P.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new m("actual","expected");T(t,r)&&x({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var N=u(function e(t,r,n){var i=this;f(this,e),r.forEach(function(e){e in t&&(void 0!==n&&"string"==typeof n[e]&&E(t[e])&&I(t[e],n[e])?i[e]=n[e]:i[e]=t[e])})});function D(e,t,r,n,o,s){if(!(r in e)||!i(e[r],t[r])){if(!n){var a=new b({actual:new N(e,o),expected:new N(t,o,e),operator:"deepStrictEqual",stackStartFn:s});throw a.actual=e,a.expected=t,a.operator=s.name,a}x({actual:e,expected:t,message:n,operator:s.name,stackStartFn:s})}}function L(e,t,r,i){if("function"!=typeof t){if(E(t))return I(t,e);if(2==arguments.length)throw new d("expected",["Function","RegExp"],t);if("object"!==s(e)||null===e){var o=new b({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:i});throw o.operator=i.name,o}var a=Object.keys(t);if(t instanceof Error)a.push("name","message");else if(0===a.length)throw new y("error",t,"may not be an empty object");return void 0===n&&A(),a.forEach(function(n){"string"==typeof e[n]&&E(t[n])&&I(t[n],e[n])||D(e,t,n,r,a,i)}),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function H(e){if("function"!=typeof e)throw new d("fn","Function",e);try{e()}catch(e){return e}return k}function M(e){return _(e)||null!==e&&"object"===s(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function F(e){return Promise.resolve().then(function(){var t;if("function"==typeof e){if(!M(t=e()))throw new g("instance of Promise","promiseFn",t)}else if(M(e))t=e;else throw new d("promiseFn",["Function","Promise"],e);return Promise.resolve().then(function(){return t}).then(function(){return k}).catch(function(e){return e})})}function j(e,t,r,n){if("string"==typeof r){if(4==arguments.length)throw new d("error",["Object","Error","Function","RegExp"],r);if("object"===s(t)&&null!==t){if(t.message===r)throw new p("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new p("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(null!=r&&"object"!==s(r)&&"function"!=typeof r)throw new d("error",["Object","Error","Function","RegExp"],r);if(t===k){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o="rejects"===e.name?"rejection":"exception";x({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:e})}if(r&&!L(t,r,n,e))throw t}function V(e,t,r,n){if(t!==k){if("string"==typeof r&&(n=r,r=void 0),!r||L(t,r)){var i=n?": ".concat(n):".",o="doesNotReject"===e.name?"rejection":"exception";x({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(o).concat(i,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function K(e,t,r,n,i){if(!E(t))throw new d("regexp","RegExp",t);var o="match"===i;if("string"!=typeof e||I(t,e)!==o){if(r instanceof Error)throw r;var a=!r;r=r||("string"!=typeof e?'The "string" argument must be of type string. Received type '+"".concat(s(e)," (").concat(w(e),")"):(o?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(w(t),". Input:\n\n").concat(w(e),"\n"));var u=new b({actual:e,expected:t,message:r,operator:i,stackStartFn:n});throw u.generatedMessage=a,u}}function W(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];R.apply(void 0,[W,t.length].concat(t))}P.throws=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];j.apply(void 0,[e,H(t)].concat(n))},P.rejects=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return F(t).then(function(t){return j.apply(void 0,[e,t].concat(n))})},P.doesNotThrow=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];V.apply(void 0,[e,H(t)].concat(n))},P.doesNotReject=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return F(t).then(function(t){return V.apply(void 0,[e,t].concat(n))})},P.ifError=function e(t){if(null!=t){var r="ifError got unwanted exception: ";"object"===s(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=w(t);var n=new b({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),i=t.stack;if("string"==typeof i){var o=i.split("\n");o.shift();for(var a=n.stack.split("\n"),u=0;u<o.length;u++){var l=a.indexOf(o[u]);if(-1!==l){a=a.slice(0,l);break}}n.stack="".concat(a.join("\n"),"\n").concat(o.join("\n"))}throw n}},P.match=function e(t,r,n){K(t,r,n,e,"match")},P.doesNotMatch=function e(t,r,n){K(t,r,n,e,"doesNotMatch")},P.strict=S(W,P,{equal:P.strictEqual,deepEqual:P.deepStrictEqual,notEqual:P.notStrictEqual,notDeepEqual:P.notDeepStrictEqual}),P.strict.strict=P.strict},25961:function(e,t,r){"use strict";var n=r(34155);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function l(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=f(e,"string");return"symbol"===E(t)?t:String(t)}function f(e,t){if("object"!==E(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==E(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function p(e){var t=b();return function(){var r,n=_(e);return r=t?Reflect.construct(n,arguments,_(this).constructor):n.apply(this,arguments),d(this,r)}}function d(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){var t="function"==typeof Map?new Map:void 0;return(g=function(e){if(null===e||!w(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return m(e,arguments,_(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,e)})(e)}function m(e,t,r){return(m=b()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&v(i,r.prototype),i}).apply(null,arguments)}function b(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e){return -1!==Function.toString.call(e).indexOf("[native code]")}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=r(89539).inspect,T=r(62136).codes.ERR_INVALID_ARG_TYPE;function I(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function A(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,r-e.length)}var O="",P="",k="",x="",C={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},R=10;function B(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach(function(t){r[t]=e[t]}),Object.defineProperty(r,"message",{value:e.message}),r}function U(e){return S(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function N(e,t,r){var i="",o="",s=0,a="",u=!1,l=U(e),c=l.split("\n"),f=U(t).split("\n"),h=0,p="";if("strictEqual"===r&&"object"===E(e)&&"object"===E(t)&&null!==e&&null!==t&&(r="strictEqualObject"),1===c.length&&1===f.length&&c[0]!==f[0]){var d=c[0].length+f[0].length;if(d<=R){if(("object"!==E(e)||null===e)&&("object"!==E(t)||null===t)&&(0!==e||0!==t))return"".concat(C[r],"\n\n")+"".concat(c[0]," !== ").concat(f[0],"\n")}else if("strictEqualObject"!==r&&d<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;c[0][h]===f[0][h];)h++;h>2&&(p="\n  ".concat(A(" ",h),"^"),h=0)}}for(var y=c[c.length-1],g=f[f.length-1];y===g&&(h++<2?a="\n  ".concat(y).concat(a):i=y,c.pop(),f.pop(),0!==c.length&&0!==f.length);)y=c[c.length-1],g=f[f.length-1];var m=Math.max(c.length,f.length);if(0===m){var b=l.split("\n");if(b.length>30)for(b[26]="".concat(O,"...").concat(x);b.length>27;)b.pop();return"".concat(C.notIdentical,"\n\n").concat(b.join("\n"),"\n")}h>3&&(a="\n".concat(O,"...").concat(x).concat(a),u=!0),""!==i&&(a="\n  ".concat(i).concat(a),i="");var w=0,v=C[r]+"\n".concat(P,"+ actual").concat(x," ").concat(k,"- expected").concat(x),_=" ".concat(O,"...").concat(x," Lines skipped");for(h=0;h<m;h++){var S=h-s;if(c.length<h+1)S>1&&h>2&&(S>4?(o+="\n".concat(O,"...").concat(x),u=!0):S>3&&(o+="\n  ".concat(f[h-2]),w++),o+="\n  ".concat(f[h-1]),w++),s=h,i+="\n".concat(k,"-").concat(x," ").concat(f[h]),w++;else if(f.length<h+1)S>1&&h>2&&(S>4?(o+="\n".concat(O,"...").concat(x),u=!0):S>3&&(o+="\n  ".concat(c[h-2]),w++),o+="\n  ".concat(c[h-1]),w++),s=h,o+="\n".concat(P,"+").concat(x," ").concat(c[h]),w++;else{var T=f[h],B=c[h],N=B!==T&&(!I(B,",")||B.slice(0,-1)!==T);N&&I(T,",")&&T.slice(0,-1)===B&&(N=!1,B+=","),N?(S>1&&h>2&&(S>4?(o+="\n".concat(O,"...").concat(x),u=!0):S>3&&(o+="\n  ".concat(c[h-2]),w++),o+="\n  ".concat(c[h-1]),w++),s=h,o+="\n".concat(P,"+").concat(x," ").concat(B),i+="\n".concat(k,"-").concat(x," ").concat(T),w+=2):(o+=i,i="",(1===S||0===h)&&(o+="\n  ".concat(B),w++))}if(w>20&&h<m-2)return"".concat(v).concat(_,"\n").concat(o,"\n").concat(O,"...").concat(x).concat(i,"\n")+"".concat(O,"...").concat(x)}return"".concat(v).concat(u?_:"","\n").concat(o).concat(i).concat(a).concat(p)}var D=function(e,t){h(i,e);var r=p(i);function i(e){if(a(this,i),"object"!==E(e)||null===e)throw new T("options","Object",e);var t,o=e.message,s=e.operator,u=e.stackStartFn,l=e.actual,c=e.expected,f=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=o)t=r.call(this,String(o));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&1!==n.stderr.getColorDepth()?(O="\x1b[34m",P="\x1b[32m",x="\x1b[39m",k="\x1b[31m"):(O="",P="",x="",k="")),"object"===E(l)&&null!==l&&"object"===E(c)&&null!==c&&"stack"in l&&l instanceof Error&&"stack"in c&&c instanceof Error&&(l=B(l),c=B(c)),"deepStrictEqual"===s||"strictEqual"===s)t=r.call(this,N(l,c,s));else if("notDeepStrictEqual"===s||"notStrictEqual"===s){var h=C[s],p=U(l).split("\n");if("notStrictEqual"===s&&"object"===E(l)&&null!==l&&(h=C.notStrictEqualObject),p.length>30)for(p[26]="".concat(O,"...").concat(x);p.length>27;)p.pop();t=1===p.length?r.call(this,"".concat(h," ").concat(p[0])):r.call(this,"".concat(h,"\n\n").concat(p.join("\n"),"\n"))}else{var g=U(l),m="",b=C[s];"notDeepEqual"===s||"notEqual"===s?(g="".concat(C[s],"\n\n").concat(g)).length>1024&&(g="".concat(g.slice(0,1021),"...")):(m="".concat(U(c)),g.length>512&&(g="".concat(g.slice(0,509),"...")),m.length>512&&(m="".concat(m.slice(0,509),"...")),"deepEqual"===s||"equal"===s?g="".concat(b,"\n\n").concat(g,"\n\nshould equal\n\n"):m=" ".concat(s," ").concat(m)),t=r.call(this,"".concat(g).concat(m))}return Error.stackTraceLimit=f,t.generatedMessage=!o,Object.defineProperty(y(t),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),t.code="ERR_ASSERTION",t.actual=l,t.expected=c,t.operator=s,Error.captureStackTrace&&Error.captureStackTrace(y(t),u),t.stack,t.name="AssertionError",d(t)}return l(i,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:t,value:function(e,t){return S(this,o(o({},t),{},{customInspect:!1,depth:0}))}}]),i}(g(Error),S.custom);e.exports=D},62136:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=a(e,"string");return"symbol"===n(t)?t:String(t)}function a(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function u(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=d();return function(){var r,n=y(e);return r=t?Reflect.construct(n,arguments,y(this).constructor):n.apply(this,arguments),h(this,r)}}function h(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g,m,b={};function w(e,t,r){function n(e,r,n){return"string"==typeof t?t:t(e,r,n)}r||(r=Error);var i=function(t){l(i,t);var r=f(i);function i(t,o,s){var a;return u(this,i),(a=r.call(this,n(t,o,s))).code=e,a}return o(i)}(r);b[e]=i}function v(e,t){if(!Array.isArray(e))return"of ".concat(t," ").concat(String(e));var r=e.length;return(e=e.map(function(e){return String(e)}),r>2)?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}function _(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function E(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function S(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}w("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),w("ERR_INVALID_ARG_TYPE",function(e,t,i){if(void 0===g&&(g=r(69282)),g("string"==typeof e,"'name' must be a string"),"string"==typeof t&&_(t,"not ")?(o="must not be",t=t.replace(/^not /,"")):o="must be",E(e," argument"))s="The ".concat(e," ").concat(o," ").concat(v(t,"type"));else{var o,s,a=S(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(a," ").concat(o," ").concat(v(t,"type"))}return s+". Received type ".concat(n(i))},TypeError),w("ERR_INVALID_ARG_VALUE",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===m&&(m=r(89539));var i=m.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(n,". Received ").concat(i)},TypeError,RangeError),w("ERR_INVALID_RETURN_VALUE",function(e,t,r){var i;return i=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(n(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")},TypeError),w("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];void 0===g&&(g=r(69282)),g(t.length>0,"At least one arg needs to be specified");var i="The ",o=t.length;switch(t=t.map(function(e){return'"'.concat(e,'"')}),o){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,o-1).join(", ")+", and ".concat(t[o-1]," arguments")}return"".concat(i," must be specified")},TypeError),e.exports.codes=b},19158:function(e,t,r){"use strict";function n(e,t){return u(e)||a(e,t)||o(e,t)||i()}function i(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function u(e){if(Array.isArray(e))return e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=void 0!==/a/g.flags,f=function(e){var t=[];return e.forEach(function(e){return t.push(e)}),t},h=function(e){var t=[];return e.forEach(function(e,r){return t.push([r,e])}),t},p=Object.is?Object.is:r(20609),d=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},y=Number.isNaN?Number.isNaN:r(20360);function g(e){return e.call.bind(e)}var m=g(Object.prototype.hasOwnProperty),b=g(Object.prototype.propertyIsEnumerable),w=g(Object.prototype.toString),v=r(89539).types,_=v.isAnyArrayBuffer,E=v.isArrayBufferView,S=v.isDate,T=v.isMap,I=v.isRegExp,A=v.isSet,O=v.isNativeError,P=v.isBoxedPrimitive,k=v.isNumberObject,x=v.isStringObject,C=v.isBooleanObject,R=v.isBigIntObject,B=v.isSymbolObject,U=v.isFloat32Array,N=v.isFloat64Array;function D(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return 10===e.length&&e>=4294967296}function L(e){return Object.keys(e).filter(D).concat(d(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function H(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}var M=void 0,F=!0,j=!1,V=0,K=1,W=2,q=3;function G(e,t){return c?e.source===t.source&&e.flags===t.flags:RegExp.prototype.toString.call(e)===RegExp.prototype.toString.call(t)}function $(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function z(e,t){return e.byteLength===t.byteLength&&0===H(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Y(e,t){return e.byteLength===t.byteLength&&0===H(new Uint8Array(e),new Uint8Array(t))}function X(e,t){return k(e)?k(t)&&p(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):x(e)?x(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):C(e)?C(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):R(e)?R(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):B(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}function J(e,t,r,n){if(e===t)return 0!==e||!r||p(e,t);if(r){if("object"!==l(e))return"number"==typeof e&&y(e)&&y(t);if("object"!==l(t)||null===e||null===t||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==l(e))return(null===t||"object"!==l(t))&&e==t;if(null===t||"object"!==l(t))return!1}var i=w(e);if(i!==w(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var o=L(e,M),s=L(t,M);return o.length===s.length&&Z(e,t,r,n,K,o)}if("[object Object]"===i&&(!T(e)&&T(t)||!A(e)&&A(t)))return!1;if(S(e)){if(!S(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(I(e)){if(!I(t)||!G(e,t))return!1}else if(O(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else if(E(e)){if(!r&&(U(e)||N(e))){if(!$(e,t))return!1}else if(!z(e,t))return!1;var a=L(e,M),u=L(t,M);return a.length===u.length&&Z(e,t,r,n,V,a)}else if(A(e))return!!A(t)&&e.size===t.size&&Z(e,t,r,n,W);else if(T(e))return!!T(t)&&e.size===t.size&&Z(e,t,r,n,q);else if(_(e)){if(!Y(e,t))return!1}else if(P(e)&&!X(e,t))return!1;return Z(e,t,r,n,V)}function Q(e,t){return t.filter(function(t){return b(e,t)})}function Z(e,t,r,n,i,o){if(5==arguments.length){o=Object.keys(e);var s=Object.keys(t);if(o.length!==s.length)return!1}for(var a=0;a<o.length;a++)if(!m(t,o[a]))return!1;if(r&&5==arguments.length){var u=d(e);if(0!==u.length){var l=0;for(a=0;a<u.length;a++){var c=u[a];if(b(e,c)){if(!b(t,c))return!1;o.push(c),l++}else if(b(t,c))return!1}var f=d(t);if(u.length!==f.length&&Q(t,f).length!==l)return!1}else{var h=d(t);if(0!==h.length&&0!==Q(t,h).length)return!1}}if(0===o.length&&(i===V||i===K&&0===e.length||0===e.size))return!0;if(void 0===n)n={val1:new Map,val2:new Map,position:0};else{var p=n.val1.get(e);if(void 0!==p){var y=n.val2.get(t);if(void 0!==y)return p===y}n.position++}n.val1.set(e,n.position),n.val2.set(t,n.position);var g=ea(e,t,r,o,n,i);return n.val1.delete(e),n.val2.delete(t),g}function ee(e,t,r,n){for(var i=f(e),o=0;o<i.length;o++){var s=i[o];if(J(t,s,r,n))return e.delete(s),!0}return!1}function et(e){switch(l(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(y(e))return!1}return!0}function er(e,t,r){var n=et(r);return null!=n?n:t.has(n)&&!e.has(n)}function en(e,t,r,n,i){var o=et(r);if(null!=o)return o;var s=t.get(o);return!!((void 0!==s||t.has(o))&&J(n,s,!1,i))&&!e.has(o)&&J(n,s,!1,i)}function ei(e,t,r,n){for(var i=null,o=f(e),s=0;s<o.length;s++){var a=o[s];if("object"===l(a)&&null!==a)null===i&&(i=new Set),i.add(a);else if(!t.has(a)){if(r||!er(e,t,a))return!1;null===i&&(i=new Set),i.add(a)}}if(null!==i){for(var u=f(t),c=0;c<u.length;c++){var h=u[c];if("object"===l(h)&&null!==h){if(!ee(i,h,r,n))return!1}else if(!r&&!e.has(h)&&!ee(i,h,r,n))return!1}return 0===i.size}return!0}function eo(e,t,r,n,i,o){for(var s=f(e),a=0;a<s.length;a++){var u=s[a];if(J(r,u,i,o)&&J(n,t.get(u),i,o))return e.delete(u),!0}return!1}function es(e,t,r,i){for(var o=null,s=h(e),a=0;a<s.length;a++){var u=n(s[a],2),c=u[0],f=u[1];if("object"===l(c)&&null!==c)null===o&&(o=new Set),o.add(c);else{var p=t.get(c);if(void 0===p&&!t.has(c)||!J(f,p,r,i)){if(r||!en(e,t,c,f,i))return!1;null===o&&(o=new Set),o.add(c)}}}if(null!==o){for(var d=h(t),y=0;y<d.length;y++){var g=n(d[y],2),m=g[0],b=g[1];if("object"===l(m)&&null!==m){if(!eo(o,e,m,b,r,i))return!1}else if(!r&&(!e.has(m)||!J(e.get(m),b,!1,i))&&!eo(o,e,m,b,!1,i))return!1}return 0===o.size}return!0}function ea(e,t,r,n,i,o){var s=0;if(o===W){if(!ei(e,t,r,i))return!1}else if(o===q){if(!es(e,t,r,i))return!1}else if(o===K)for(;s<e.length;s++)if(m(e,s)){if(!m(t,s)||!J(e[s],t[s],r,i))return!1}else{if(m(t,s))return!1;for(var a=Object.keys(e);s<a.length;s++){var u=a[s];if(!m(t,u)||!J(e[u],t[u],r,i))return!1}if(a.length!==Object.keys(t).length)return!1;return!0}for(s=0;s<n.length;s++){var l=n[s];if(!J(e[l],t[l],r,i))return!1}return!0}function eu(e,t){return J(e,t,j)}function el(e,t){return J(e,t,F)}e.exports={isDeepEqual:eu,isDeepStrictEqual:el}},82240:function(e,t,r){"use strict";var n,i=r(48764).Buffer;n={value:!0};var o=r(31518);function s(e,t){return(void 0===t&&(t="utf8"),i.isBuffer(e))?l(e.toString("base64")):l(i.from(e,t).toString("base64"))}function a(e,t){return void 0===t&&(t="utf8"),i.from(u(e),"base64").toString(t)}function u(e){return e=e.toString(),o.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function l(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c(e){return i.from(u(e),"base64")}var f=s;f.encode=s,f.decode=a,f.toBase64=u,f.fromBase64=l,f.toBuffer=c,t.default=f},31518:function(e,t,r){"use strict";var n=r(48764).Buffer;function i(e){var t=4,r=e.length,i=r%t;if(!i)return e;var o=r,s=t-i,a=r+s,u=n.alloc(a);for(u.write(e);s--;)u.write("=",o++);return u.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},45772:function(e,t,r){e.exports=r(82240).default,e.exports.default=e.exports},27715:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bech32m=t.bech32=void 0;let r="qpzry9x8gf2tvdw0s3jn54khce6mua7l",n={};for(let e=0;e<r.length;e++)n[r.charAt(e)]=e;function i(e){let t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function o(e){let t=1;for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=i(t)^n>>5}t=i(t);for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);t=i(t)^31&n}return t}function s(e,t,r,n){let i=0,o=0,s=(1<<r)-1,a=[];for(let n=0;n<e.length;++n)for(i=i<<t|e[n],o+=t;o>=r;)a.push(i>>(o-=r)&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function a(e){return s(e,8,5,!0)}function u(e){let t=s(e,5,8,!1);if(Array.isArray(t))return t}function l(e){let t=s(e,5,8,!1);if(Array.isArray(t))return t;throw Error(t)}function c(e){let t;function s(e,r){if(r=r||90,e.length<8)return e+" too short";if(e.length>r)return"Exceeds length limit";let s=e.toLowerCase(),a=e.toUpperCase();if(e!==s&&e!==a)return"Mixed-case string "+e;let u=(e=s).lastIndexOf("1");if(-1===u)return"No separator character for "+e;if(0===u)return"Missing prefix for "+e;let l=e.slice(0,u),c=e.slice(u+1);if(c.length<6)return"Data too short";let f=o(l);if("string"==typeof f)return f;let h=[];for(let e=0;e<c.length;++e){let t=c.charAt(e),r=n[t];if(void 0===r)return"Unknown character "+t;f=i(f)^r,e+6>=c.length||h.push(r)}return f!==t?"Invalid checksum for "+e:{prefix:l,words:h}}return t="bech32"===e?1:734539939,{decodeUnsafe:function(e,t){let r=s(e,t);if("object"==typeof r)return r},decode:function(e,t){let r=s(e,t);if("object"==typeof r)return r;throw Error(r)},encode:function(e,n,s){if(s=s||90,e.length+7+n.length>s)throw TypeError("Exceeds length limit");let a=o(e=e.toLowerCase());if("string"==typeof a)throw Error(a);let u=e+"1";for(let e=0;e<n.length;++e){let t=n[e];if(t>>5!=0)throw Error("Non 5-bit word");a=i(a)^t,u+=r.charAt(t)}for(let e=0;e<6;++e)a=i(a);a^=t;for(let e=0;e<6;++e){let t=a>>(5-e)*5&31;u+=r.charAt(t)}return u},toWords:a,fromWordsUnsafe:u,fromWords:l}}t.bech32=c("bech32"),t.bech32m=c("bech32m")},44431:function(e,t,r){var n;!function(i){"use strict";var o,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,u=Math.floor,l="[BigNumber Error] ",c=l+"Number primitive has more than 15 significant digits: ",f=1e14,h=14,p=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],y=1e7,g=1e9;function m(e){var t,r,n,i=L.prototype={constructor:L,toString:null,valueOf:null},o=new L(1),I=20,A=4,O=-7,P=21,k=-1e7,x=1e7,C=!1,R=1,B=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},N="0123456789abcdefghijklmnopqrstuvwxyz",D=!0;function L(e,t){var i,o,a,l,f,d,y,g,m=this;if(!(m instanceof L))return new L(e,t);if(null==t){if(e&&!0===e._isBigNumber){m.s=e.s,!e.c||e.e>x?m.c=m.e=null:e.e<k?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice());return}if((d="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,f=e;f>=10;f/=10,l++);l>x?m.c=m.e=null:(m.e=l,m.c=[e]);return}g=String(e)}else{if(!s.test(g=String(e)))return n(m,g,d);m.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(l=g.indexOf("."))>-1&&(g=g.replace(".","")),(f=g.search(/e/i))>0?(l<0&&(l=f),l+=+g.slice(f+1),g=g.substring(0,f)):l<0&&(l=g.length)}else{if(_(t,2,N.length,"Base"),10==t&&D)return j(m=new L(e),I+m.e+1,A);if(g=String(e),d="number"==typeof e){if(0*e!=0)return n(m,g,d,t);if(m.s=1/e<0?(g=g.slice(1),-1):1,L.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(c+e)}else m.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(i=N.slice(0,t),l=f=0,y=g.length;f<y;f++)if(0>i.indexOf(o=g.charAt(f))){if("."==o){if(f>l){l=y;continue}}else if(!a&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){a=!0,f=-1,l=0;continue}return n(m,String(e),d,t)}d=!1,(l=(g=r(g,t,10,m.s)).indexOf("."))>-1?g=g.replace(".",""):l=g.length}for(f=0;48===g.charCodeAt(f);f++);for(y=g.length;48===g.charCodeAt(--y););if(g=g.slice(f,++y)){if(y-=f,d&&L.DEBUG&&y>15&&(e>p||e!==u(e)))throw Error(c+m.s*e);if((l=l-f-1)>x)m.c=m.e=null;else if(l<k)m.c=[m.e=0];else{if(m.e=l,m.c=[],f=(l+1)%h,l<0&&(f+=h),f<y){for(f&&m.c.push(+g.slice(0,f)),y-=h;f<y;)m.c.push(+g.slice(f,f+=h));f=h-(g=g.slice(f)).length}else f-=y;for(;f--;g+="0");m.c.push(+g)}}else m.c=[m.e=0]}function H(e,t,r,n){var i,o,s,a,u;if(null==r?r=A:_(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)u=w(e.c),u=1==n||2==n&&(s<=O||s>=P)?S(u,s):T(u,s,"0");else if(o=(e=j(new L(e),t,r)).e,a=(u=w(e.c)).length,1==n||2==n&&(t<=o||o<=O)){for(;a<t;u+="0",a++);u=S(u,o)}else if(t-=s,u=T(u,o,"0"),o+1>a){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=o-a)>0)for(o+1==a&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function M(e,t){for(var r,n,i=1,o=new L(e[0]);i<e.length;i++)(n=new L(e[i])).s&&(r=v(o,n))!==t&&(0!==r||o.s!==t)||(o=n);return o}function F(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*h-1)>x?e.c=e.e=null:r<k?e.c=[e.e=0]:(e.e=r,e.c=t),e}function j(e,t,r,n){var i,o,s,l,c,p,y,g=e.c,m=d;if(g){e:{for(i=1,l=g[0];l>=10;l/=10,i++);if((o=t-i)<0)o+=h,s=t,y=u((c=g[p=0])/m[i-s-1]%10);else if((p=a((o+1)/h))>=g.length){if(n){for(;g.length<=p;g.push(0));c=y=0,i=1,o%=h,s=o-h+1}else break e}else{for(i=1,c=l=g[p];l>=10;l/=10,i++);o%=h,y=(s=o-h+i)<0?0:u(c/m[i-s-1]%10)}if(n=n||t<0||null!=g[p+1]||(s<0?c:c%m[i-s-1]),n=r<4?(y||n)&&(0==r||r==(e.s<0?3:2)):y>5||5==y&&(4==r||n||6==r&&(o>0?s>0?c/m[i-s]:0:g[p-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=m[(h-t%h)%h],e.e=-t||0):g[0]=e.e=0,e;if(0==o?(g.length=p,l=1,p--):(g.length=p+1,l=m[h-o],g[p]=s>0?u(c/m[i-s]%m[s])*l:0),n)for(;;){if(0==p){for(o=1,s=g[0];s>=10;s/=10,o++);for(s=g[0]+=l,l=1;s>=10;s/=10,l++);o!=l&&(e.e++,g[0]==f&&(g[0]=1));break}if(g[p]+=l,g[p]!=f)break;g[p--]=0,l=1}for(o=g.length;0===g[--o];g.pop());}e.e>x?e.c=e.e=null:e.e<k&&(e.c=[e.e=0])}return e}function V(e){var t,r=e.e;return null===r?e.toString():(t=w(e.c),t=r<=O||r>=P?S(t,r):T(t,r,"0"),e.s<0?"-"+t:t)}return L.clone=m,L.ROUND_UP=0,L.ROUND_DOWN=1,L.ROUND_CEIL=2,L.ROUND_FLOOR=3,L.ROUND_HALF_UP=4,L.ROUND_HALF_DOWN=5,L.ROUND_HALF_EVEN=6,L.ROUND_HALF_CEIL=7,L.ROUND_HALF_FLOOR=8,L.EUCLID=9,L.config=L.set=function(e){var t,r;if(null!=e){if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(_(r=e[t],0,g,t),I=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(_(r=e[t],0,8,t),A=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(_(r[0],-g,0,t),_(r[1],0,g,t),O=r[0],P=r[1]):(_(r,-g,g,t),O=-(P=r<0?-r:r))),e.hasOwnProperty(t="RANGE")){if((r=e[t])&&r.pop)_(r[0],-g,-1,t),_(r[1],1,g,t),k=r[0],x=r[1];else if(_(r,-g,g,t),r)k=-(x=r<0?-r:r);else throw Error(l+t+" cannot be zero: "+r)}if(e.hasOwnProperty(t="CRYPTO")){if(!!(r=e[t])===r){if(r){if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))C=r;else throw C=!r,Error(l+"crypto unavailable")}else C=r}else throw Error(l+t+" not true or false: "+r)}if(e.hasOwnProperty(t="MODULO_MODE")&&(_(r=e[t],0,9,t),R=r),e.hasOwnProperty(t="POW_PRECISION")&&(_(r=e[t],0,g,t),B=r),e.hasOwnProperty(t="FORMAT")){if("object"==typeof(r=e[t]))U=r;else throw Error(l+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(l+t+" invalid: "+r);D="0123456789"==r.slice(0,10),N=r}}else throw Error(l+"Object expected: "+e)}return{DECIMAL_PLACES:I,ROUNDING_MODE:A,EXPONENTIAL_AT:[O,P],RANGE:[k,x],CRYPTO:C,MODULO_MODE:R,POW_PRECISION:B,FORMAT:U,ALPHABET:N}},L.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!L.DEBUG)return!0;var t,r,n=e.c,i=e.e,o=e.s;e:if("[object Array]"==({}).toString.call(n)){if((1===o||-1===o)&&i>=-g&&i<=g&&i===u(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%h)<1&&(t+=h),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=f||r!==u(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(l+"Invalid BigNumber: "+e)},L.maximum=L.max=function(){return M(arguments,-1)},L.minimum=L.min=function(){return M(arguments,1)},L.random=function(){var e=9007199254740992,t=9007199254740992*Math.random()&2097151?function(){return u(Math.random()*e)}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)};return function(e){var r,n,i,s,c,f=0,p=[],y=new L(o);if(null==e?e=I:_(e,0,g),s=a(e/h),C){if(crypto.getRandomValues){for(r=crypto.getRandomValues(new Uint32Array(s*=2));f<s;)(c=131072*r[f]+(r[f+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),r[f]=n[0],r[f+1]=n[1]):(p.push(c%1e14),f+=2);f=s/2}else if(crypto.randomBytes){for(r=crypto.randomBytes(s*=7);f<s;)(c=(31&r[f])*281474976710656+1099511627776*r[f+1]+4294967296*r[f+2]+16777216*r[f+3]+(r[f+4]<<16)+(r[f+5]<<8)+r[f+6])>=9e15?crypto.randomBytes(7).copy(r,f):(p.push(c%1e14),f+=7);f=s/7}else throw C=!1,Error(l+"crypto unavailable")}if(!C)for(;f<s;)(c=t())<9e15&&(p[f++]=c%1e14);for(s=p[--f],e%=h,s&&e&&(c=d[h-e],p[f]=u(s/c)*c);0===p[f];p.pop(),f--);if(f<0)p=[i=0];else{for(i=-1;0===p[0];p.splice(0,1),i-=h);for(f=1,c=p[0];c>=10;c/=10,f++);f<h&&(i-=h-f)}return y.e=i,y.c=p,y}}(),L.sum=function(){for(var e=1,t=arguments,r=new L(t[0]);e<t.length;)r=r.plus(t[e++]);return r},r=function(){var e="0123456789";function r(e,t,r,n){for(var i,o,s=[0],a=0,u=e.length;a<u;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(n,i,o,s,a){var u,l,c,f,h,p,d,y,g=n.indexOf("."),m=I,b=A;for(g>=0&&(f=B,B=0,n=n.replace(".",""),p=(y=new L(i)).pow(n.length-g),B=f,y.c=r(T(w(p.c),p.e,"0"),10,o,e),y.e=y.c.length),c=f=(d=r(n,i,o,a?(u=N,e):(u=e,N))).length;0==d[--f];d.pop());if(!d[0])return u.charAt(0);if(g<0?--c:(p.c=d,p.e=c,p.s=s,d=(p=t(p,y,m,b,o)).c,h=p.r,c=p.e),g=d[l=c+m+1],f=o/2,h=h||l<0||null!=d[l+1],h=b<4?(null!=g||h)&&(0==b||b==(p.s<0?3:2)):g>f||g==f&&(4==b||h||6==b&&1&d[l-1]||b==(p.s<0?8:7)),l<1||!d[0])n=h?T(u.charAt(1),-m,u.charAt(0)):u.charAt(0);else{if(d.length=l,h)for(--o;++d[--l]>o;)d[l]=0,l||(++c,d=[1].concat(d));for(f=d.length;!d[--f];);for(g=0,n="";g<=f;n+=u.charAt(d[g++]));n=T(n,c,u.charAt(0))}return n}}(),t=function(){function e(e,t,r){var n,i,o,s,a=0,u=e.length,l=t%y,c=t/y|0;for(e=e.slice();u--;)n=c*(o=e[u]%y)+(s=e[u]/y|0)*l,a=((i=l*o+n%y*y+a)/r|0)+(n/y|0)+c*s,e[u]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,s,a){var l,c,p,d,y,g,m,w,v,_,E,S,T,I,A,O,P,k=n.s==i.s?1:-1,x=n.c,C=i.c;if(!x||!x[0]||!C||!C[0])return new L(n.s&&i.s&&(x?!C||x[0]!=C[0]:C)?x&&0==x[0]||!C?0*k:k/0:NaN);for(v=(w=new L(k)).c=[],k=o+(c=n.e-i.e)+1,a||(a=f,c=b(n.e/h)-b(i.e/h),k=k/h|0),p=0;C[p]==(x[p]||0);p++);if(C[p]>(x[p]||0)&&c--,k<0)v.push(1),d=!0;else{for(I=x.length,O=C.length,p=0,k+=2,(y=u(a/(C[0]+1)))>1&&(C=e(C,y,a),x=e(x,y,a),O=C.length,I=x.length),T=O,E=(_=x.slice(0,O)).length;E<O;_[E++]=0);P=[0].concat(P=C.slice()),A=C[0],C[1]>=a/2&&A++;do{if(y=0,(l=t(C,_,O,E))<0){if(S=_[0],O!=E&&(S=S*a+(_[1]||0)),(y=u(S/A))>1)for(y>=a&&(y=a-1),m=(g=e(C,y,a)).length,E=_.length;1==t(g,_,m,E);)y--,r(g,O<m?P:C,m,a),m=g.length,l=1;else 0==y&&(l=y=1),m=(g=C.slice()).length;if(m<E&&(g=[0].concat(g)),r(_,g,E,a),E=_.length,-1==l)for(;1>t(C,_,O,E);)y++,r(_,O<E?P:C,E,a),E=_.length}else 0===l&&(y++,_=[0]);v[p++]=y,_[0]?_[E++]=x[T]||0:(_=[x[T]],E=1)}while((T++<I||null!=_[0])&&k--);d=null!=_[0],v[0]||v.splice(0,1)}if(a==f){for(p=1,k=v[0];k>=10;k/=10,p++);j(w,o+(w.e=p+c*h-1)+1,s,d)}else w.e=c,w.r=+d;return w}}(),n=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,s,a,u){var c,f=a?s:s.replace(i,"");if(n.test(f))o.s=isNaN(f)?null:f<0?-1:1;else{if(!a&&(f=f.replace(e,function(e,t,r){return c="x"==(r=r.toLowerCase())?16:"b"==r?2:8,u&&u!=c?e:t}),u&&(c=u,f=f.replace(t,"$1").replace(r,"0.$1")),s!=f))return new L(f,c);if(L.DEBUG)throw Error(l+"Not a"+(u?" base "+u:"")+" number: "+s);o.s=null}o.c=o.e=null}}(),i.absoluteValue=i.abs=function(){var e=new L(this);return e.s<0&&(e.s=1),e},i.comparedTo=function(e,t){return v(this,new L(e,t))},i.decimalPlaces=i.dp=function(e,t){var r,n,i,o=this;if(null!=e)return _(e,0,g),null==t?t=A:_(t,0,8),j(new L(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((i=r.length-1)-b(this.e/h))*h,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},i.dividedBy=i.div=function(e,r){return t(this,new L(e,r),I,A)},i.dividedToIntegerBy=i.idiv=function(e,r){return t(this,new L(e,r),0,1)},i.exponentiatedBy=i.pow=function(e,t){var r,n,i,s,c,f,p,d,y,g=this;if((e=new L(e)).c&&!e.isInteger())throw Error(l+"Exponent not an integer: "+V(e));if(null!=t&&(t=new L(t)),f=e.e>14,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!e.c||!e.c[0])return y=new L(Math.pow(+V(g),f?e.s*(2-E(e)):+V(e))),t?y.mod(t):y;if(p=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new L(NaN);(n=!p&&g.isInteger()&&t.isInteger())&&(g=g.mod(t))}else{if(e.e>9&&(g.e>0||g.e<-1||(0==g.e?g.c[0]>1||f&&g.c[1]>=24e7:g.c[0]<8e13||f&&g.c[0]<=9999975e7)))return s=g.s<0&&E(e)?-0:0,g.e>-1&&(s=1/s),new L(p?1/s:s);B&&(s=a(B/h+2))}for(f?(r=new L(.5),p&&(e.s=1),d=E(e)):d=(i=Math.abs(+V(e)))%2,y=new L(o);;){if(d){if(!(y=y.times(g)).c)break;s?y.c.length>s&&(y.c.length=s):n&&(y=y.mod(t))}if(i){if(0===(i=u(i/2)))break;d=i%2}else if(j(e=e.times(r),e.e+1,1),e.e>14)d=E(e);else{if(0==(i=+V(e)))break;d=i%2}g=g.times(g),s?g.c&&g.c.length>s&&(g.c.length=s):n&&(g=g.mod(t))}return n?y:(p&&(y=o.div(y)),t?y.mod(t):s?j(y,B,A,c):y)},i.integerValue=function(e){var t=new L(this);return null==e?e=A:_(e,0,8),j(t,t.e+1,e)},i.isEqualTo=i.eq=function(e,t){return 0===v(this,new L(e,t))},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(e,t){return v(this,new L(e,t))>0},i.isGreaterThanOrEqualTo=i.gte=function(e,t){return 1===(t=v(this,new L(e,t)))||0===t},i.isInteger=function(){return!!this.c&&b(this.e/h)>this.c.length-2},i.isLessThan=i.lt=function(e,t){return 0>v(this,new L(e,t))},i.isLessThanOrEqualTo=i.lte=function(e,t){return -1===(t=v(this,new L(e,t)))||0===t},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&0==this.c[0]},i.minus=function(e,t){var r,n,i,o,s=this,a=s.s;if(t=(e=new L(e,t)).s,!a||!t)return new L(NaN);if(a!=t)return e.s=-t,s.plus(e);var u=s.e/h,l=e.e/h,c=s.c,p=e.c;if(!u||!l){if(!c||!p)return c?(e.s=-t,e):new L(p?s:NaN);if(!c[0]||!p[0])return p[0]?(e.s=-t,e):new L(c[0]?s:3==A?-0:0)}if(u=b(u),l=b(l),c=c.slice(),a=u-l){for((o=a<0)?(a=-a,i=c):(l=u,i=p),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(o=(a=c.length)<(t=p.length))?a:t,a=t=0;t<n;t++)if(c[t]!=p[t]){o=c[t]<p[t];break}if(o&&(i=c,c=p,p=i,e.s=-e.s),(t=(n=p.length)-(r=c.length))>0)for(;t--;c[r++]=0);for(t=f-1;n>a;){if(c[--n]<p[n]){for(r=n;r&&!c[--r];c[r]=t);--c[r],c[n]+=f}c[n]-=p[n]}for(;0==c[0];c.splice(0,1),--l);return c[0]?F(e,c,l):(e.s=3==A?-1:1,e.c=[e.e=0],e)},i.modulo=i.mod=function(e,r){var n,i,o=this;return(e=new L(e,r),o.c&&e.s&&(!e.c||e.c[0]))?e.c&&(!o.c||o.c[0])?(9==R?(i=e.s,e.s=1,n=t(o,e,0,3),e.s=i,n.s*=i):n=t(o,e,0,R),(e=o.minus(n.times(e))).c[0]||1!=R||(e.s=o.s),e):new L(o):new L(NaN)},i.multipliedBy=i.times=function(e,t){var r,n,i,o,s,a,u,l,c,p,d,g,m,w,v,_=this,E=_.c,S=(e=new L(e,t)).c;if(!E||!S||!E[0]||!S[0])return _.s&&e.s&&(!E||E[0]||S)&&(!S||S[0]||E)?(e.s*=_.s,E&&S?(e.c=[0],e.e=0):e.c=e.e=null):e.c=e.e=e.s=null,e;for(n=b(_.e/h)+b(e.e/h),e.s*=_.s,(u=E.length)<(p=S.length)&&(m=E,E=S,S=m,i=u,u=p,p=i),i=u+p,m=[];i--;m.push(0));for(w=f,v=y,i=p;--i>=0;){for(r=0,d=S[i]%v,g=S[i]/v|0,o=i+(s=u);o>i;)a=g*(l=E[--s]%v)+(c=E[s]/v|0)*d,r=((l=d*l+a%v*v+m[o]+r)/w|0)+(a/v|0)+g*c,m[o--]=l%w;m[o]=r}return r?++n:m.splice(0,1),F(e,m,n)},i.negated=function(){var e=new L(this);return e.s=-e.s||null,e},i.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new L(e,t)).s,!i||!t)return new L(NaN);if(i!=t)return e.s=-t,n.minus(e);var o=n.e/h,s=e.e/h,a=n.c,u=e.c;if(!o||!s){if(!a||!u)return new L(i/0);if(!a[0]||!u[0])return u[0]?e:new L(a[0]?n:0*i)}if(o=b(o),s=b(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=u):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=u.length)<0&&(r=u,u=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+u[t]+i)/f|0,a[t]=f===a[t]?0:a[t]%f;return i&&(a=[i].concat(a),++s),F(e,a,s)},i.precision=i.sd=function(e,t){var r,n,i,o=this;if(null!=e&&!!e!==e)return _(e,1,g),null==t?t=A:_(t,0,8),j(new L(o),e,t);if(!(r=o.c))return null;if(n=(i=r.length-1)*h+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},i.shiftedBy=function(e){return _(e,-p,p),this.times("1e"+e)},i.squareRoot=i.sqrt=function(){var e,r,n,i,o,s=this,a=s.c,u=s.s,l=s.e,c=I+4,f=new L("0.5");if(1!==u||!a||!a[0])return new L(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(u=Math.sqrt(+V(s)))||u==1/0?(((r=w(a)).length+l)%2==0&&(r+="0"),u=Math.sqrt(+r),l=b((l+1)/2)-(l<0||l%2),n=new L(r=u==1/0?"5e"+l:(r=u.toExponential()).slice(0,r.indexOf("e")+1)+l)):n=new L(u+""),n.c[0]){for((u=(l=n.e)+c)<3&&(u=0);;)if(o=n,n=f.times(o.plus(t(s,o,c,1))),w(o.c).slice(0,u)===(r=w(n.c)).slice(0,u)){if(n.e<l&&--u,"9999"!=(r=r.slice(u-3,u+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(j(n,n.e+I+2,1),e=!n.times(n).eq(s));break}if(!i&&(j(o,o.e+I+2,0),o.times(o).eq(s))){n=o;break}c+=4,u+=4,i=1}}return j(n,n.e+I+1,A,e)},i.toExponential=function(e,t){return null!=e&&(_(e,0,g),e++),H(this,e,t,1)},i.toFixed=function(e,t){return null!=e&&(_(e,0,g),e=e+this.e+1),H(this,e,t)},i.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=U;else if("object"!=typeof r)throw Error(l+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,s=n.split("."),a=+r.groupSize,u=+r.secondaryGroupSize,c=r.groupSeparator||"",f=s[0],h=s[1],p=i.s<0,d=p?f.slice(1):f,y=d.length;if(u&&(o=a,a=u,u=o,y-=o),a>0&&y>0){for(o=y%a||a,f=d.substr(0,o);o<y;o+=a)f+=c+d.substr(o,a);u>0&&(f+=c+d.slice(o)),p&&(f="-"+f)}n=h?f+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?h.replace(RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):f}return(r.prefix||"")+n+(r.suffix||"")},i.toFraction=function(e){var r,n,i,s,a,u,c,f,p,y,g,m,b=this,v=b.c;if(null!=e&&(!(c=new L(e)).isInteger()&&(c.c||1!==c.s)||c.lt(o)))throw Error(l+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+V(c));if(!v)return new L(b);for(r=new L(o),p=n=new L(o),i=f=new L(o),m=w(v),a=r.e=m.length-b.e-1,r.c[0]=d[(u=a%h)<0?h+u:u],e=!e||c.comparedTo(r)>0?a>0?r:p:c,u=x,x=1/0,c=new L(m),f.c[0]=0;y=t(c,r,0,1),1!=(s=n.plus(y.times(i))).comparedTo(e);)n=i,i=s,p=f.plus(y.times(s=p)),f=s,r=c.minus(y.times(s=r)),c=s;return s=t(e.minus(n),i,0,1),f=f.plus(s.times(p)),n=n.plus(s.times(i)),f.s=p.s=b.s,a*=2,g=1>t(p,i,a,A).minus(b).abs().comparedTo(t(f,n,a,A).minus(b).abs())?[p,i]:[f,n],x=u,g},i.toNumber=function(){return+V(this)},i.toPrecision=function(e,t){return null!=e&&_(e,1,g),H(this,e,t,2)},i.toString=function(e){var t,n=this,i=n.s,o=n.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=O||o>=P?S(w(n.c),o):T(w(n.c),o,"0"):10===e&&D?t=T(w((n=j(new L(n),I+o+1,A)).c),n.e,"0"):(_(e,2,N.length,"Base"),t=r(T(w(n.c),o,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},i.valueOf=i.toJSON=function(){return V(this)},i._isBigNumber=!0,null!=e&&L.set(e),L}function b(e){var t=0|e;return e>0||e===t?t:t-1}function w(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(r=h-(t=e[n++]+"").length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function v(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,u=e.e,l=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=u==l,!i||!o)return n?0:!i^r?1:-1;if(!n)return u>l^r?1:-1;for(s=0,a=(u=i.length)<(l=o.length)?u:l;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return u==l?0:u>l^r?1:-1}function _(e,t,r,n){if(e<t||e>r||e!==u(e))throw Error(l+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function E(e){var t=e.c.length-1;return b(e.e/h)==t&&e.c[t]%2!=0}function S(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function T(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(n=e.length,++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(o=m()).default=o.BigNumber=o,void 0!==(n=(function(){return o}).call(t,r,t,e))&&(e.exports=n)}(0)},82190:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(36574);function i(e){let t=e[0],r=n.psbtToKeyVals(t),i=e.slice(1);if(0===i.length)throw Error("Combine: Nothing to combine");let u=s(t);if(void 0===u)throw Error("Combine: Self missing transaction");let l=a(r.globalKeyVals),c=r.inputKeyVals.map(a),f=r.outputKeyVals.map(a);for(let e of i){let t=s(e);if(void 0===t||!t.toBuffer().equals(u.toBuffer()))throw Error("Combine: One of the Psbts does not have the same transaction.");let i=n.psbtToKeyVals(e);a(i.globalKeyVals).forEach(o(l,r.globalKeyVals,i.globalKeyVals)),i.inputKeyVals.map(a).forEach((e,t)=>e.forEach(o(c[t],r.inputKeyVals[t],i.inputKeyVals[t]))),i.outputKeyVals.map(a).forEach((e,t)=>e.forEach(o(f[t],r.outputKeyVals[t],i.outputKeyVals[t])))}return n.psbtFromKeyVals(u,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}function o(e,t,r){return n=>{if(e.has(n))return;let i=r.filter(e=>e.key.toString("hex")===n)[0];t.push(i),e.add(n)}}function s(e){return e.globalMap.unsignedTx}function a(e){let t=new Set;return e.forEach(e=>{let r=e.key.toString("hex");if(t.has(r))throw Error("Combine: KeyValue Map keys should be unique");t.add(r)}),t}t.combine=i},44041:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847),o=e=>[...Array(e).keys()];function s(e){if(e.key[0]!==i.GlobalTypes.GLOBAL_XPUB)throw Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(79!==e.key.length||![2,3].includes(e.key[46]))throw Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!=0)throw Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");let t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(let t of o(e.value.length/4-1)){let n=e.value.readUInt32LE(4*t+4),i=!!(2147483648&n),o=2147483647&n;r.path+="/"+o.toString(10)+(i?"'":"")}return r}function a(e){let t=n.from([i.GlobalTypes.GLOBAL_XPUB]),r=n.concat([t,e.extendedPubkey]),o=e.path.split("/"),s=n.allocUnsafe(4*o.length);e.masterFingerprint.copy(s,0);let a=4;return o.slice(1).forEach(e=>{let t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),s.writeUInt32LE(r,a),a+=4}),{key:r,value:s}}function u(e){let t=e.extendedPubkey,r=e.masterFingerprint,i=e.path;return n.isBuffer(t)&&78===t.length&&[2,3].indexOf(t[45])>-1&&n.isBuffer(r)&&4===r.length&&"string"==typeof i&&!!i.match(/^m(\/\d+'?)*$/)}function l(e,t,r){let n=t.extendedPubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(e=>e.extendedPubkey.equals(t.extendedPubkey)).length)}t.decode=s,t.encode=a,t.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",t.check=u,t.canAddToArray=l},74480:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847);function o(e){return{key:n.from([i.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}t.encode=o},71528:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(1847),i=r(44041),o=r(74480),s=r(20859),a=r(8248),u=r(70537),l=r(61511),c=r(65896),f=r(91243),h=r(3530),p=r(49265),d=r(23934),y=r(50602),g=r(82954),m=r(6036),b=r(44799),w=r(99595),v=r(9705),_=r(17196),E=r(29375),S=r(66327),T={unsignedTx:o,globalXpub:i,checkPubkey:w.makeChecker([])};t.globals=T;let I={nonWitnessUtxo:u,partialSig:l,sighashType:f,finalScriptSig:s,finalScriptWitness:a,porCommitment:c,witnessUtxo:g,bip32Derivation:b.makeConverter(n.InputTypes.BIP32_DERIVATION),redeemScript:v.makeConverter(n.InputTypes.REDEEM_SCRIPT),witnessScript:S.makeConverter(n.InputTypes.WITNESS_SCRIPT),checkPubkey:w.makeChecker([n.InputTypes.PARTIAL_SIG,n.InputTypes.BIP32_DERIVATION]),tapKeySig:h,tapScriptSig:y,tapLeafScript:p,tapBip32Derivation:_.makeConverter(n.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:E.makeConverter(n.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:d};t.inputs=I;let A={bip32Derivation:b.makeConverter(n.OutputTypes.BIP32_DERIVATION),redeemScript:v.makeConverter(n.OutputTypes.REDEEM_SCRIPT),witnessScript:S.makeConverter(n.OutputTypes.WITNESS_SCRIPT),checkPubkey:w.makeChecker([n.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:_.makeConverter(n.OutputTypes.TAP_BIP32_DERIVATION),tapTree:m,tapInternalKey:E.makeConverter(n.OutputTypes.TAP_INTERNAL_KEY)};t.outputs=A},20859:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847);function o(e){if(e.key[0]!==i.InputTypes.FINAL_SCRIPTSIG)throw Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value}function s(e){return{key:n.from([i.InputTypes.FINAL_SCRIPTSIG]),value:e}}function a(e){return n.isBuffer(e)}function u(e,t){return!!e&&!!t&&void 0===e.finalScriptSig}t.decode=o,t.encode=s,t.expected="Buffer",t.check=a,t.canAdd=u},8248:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847);function o(e){if(e.key[0]!==i.InputTypes.FINAL_SCRIPTWITNESS)throw Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value}function s(e){return{key:n.from([i.InputTypes.FINAL_SCRIPTWITNESS]),value:e}}function a(e){return n.isBuffer(e)}function u(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness}t.decode=o,t.encode=s,t.expected="Buffer",t.check=a,t.canAdd=u},70537:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847);function o(e){if(e.key[0]!==i.InputTypes.NON_WITNESS_UTXO)throw Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value}function s(e){return{key:n.from([i.InputTypes.NON_WITNESS_UTXO]),value:e}}function a(e){return n.isBuffer(e)}function u(e,t){return!!e&&!!t&&void 0===e.nonWitnessUtxo}t.decode=o,t.encode=s,t.expected="Buffer",t.check=a,t.canAdd=u},61511:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847);function o(e){if(e.key[0]!==i.InputTypes.PARTIAL_SIG)throw Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(!(34===e.key.length||66===e.key.length)||![2,3,4].includes(e.key[1]))throw Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}}function s(e){let t=n.from([i.InputTypes.PARTIAL_SIG]);return{key:n.concat([t,e.pubkey]),value:e.signature}}function a(e){return n.isBuffer(e.pubkey)&&n.isBuffer(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&u(e.signature)}function u(e){if(!n.isBuffer(e)||e.length<9||48!==e[0]||e.length!==e[1]+3||2!==e[2])return!1;let t=e[3];if(t>33||t<1||2!==e[3+t+1])return!1;let r=e[3+t+2];return!(r>33)&&!(r<1)&&e.length===3+t+2+r+2}function l(e,t,r){let n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(e=>e.pubkey.equals(t.pubkey)).length)}t.decode=o,t.encode=s,t.expected="{ pubkey: Buffer; signature: Buffer; }",t.check=a,t.canAddToArray=l},65896:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847);function o(e){if(e.key[0]!==i.InputTypes.POR_COMMITMENT)throw Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")}function s(e){return{key:n.from([i.InputTypes.POR_COMMITMENT]),value:n.from(e,"utf8")}}function a(e){return"string"==typeof e}function u(e,t){return!!e&&!!t&&void 0===e.porCommitment}t.decode=o,t.encode=s,t.expected="string",t.check=a,t.canAdd=u},91243:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847);function o(e){if(e.key[0]!==i.InputTypes.SIGHASH_TYPE)throw Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)}function s(e){let t=n.from([i.InputTypes.SIGHASH_TYPE]),r=n.allocUnsafe(4);return r.writeUInt32LE(e,0),{key:t,value:r}}function a(e){return"number"==typeof e}function u(e,t){return!!e&&!!t&&void 0===e.sighashType}t.decode=o,t.encode=s,t.expected="number",t.check=a,t.canAdd=u},3530:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847);function o(e){if(e.key[0]!==i.InputTypes.TAP_KEY_SIG||1!==e.key.length)throw Error("Decode Error: could not decode tapKeySig with key 0x"+e.key.toString("hex"));if(!a(e.value))throw Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value}function s(e){return{key:n.from([i.InputTypes.TAP_KEY_SIG]),value:e}}function a(e){return n.isBuffer(e)&&(64===e.length||65===e.length)}function u(e,t){return!!e&&!!t&&void 0===e.tapKeySig}t.decode=o,t.encode=s,t.expected="Buffer",t.check=a,t.canAdd=u},49265:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847);function o(e){if(e.key[0]!==i.InputTypes.TAP_LEAF_SCRIPT)throw Error("Decode Error: could not decode tapLeafScript with key 0x"+e.key.toString("hex"));if((e.key.length-2)%32!=0)throw Error("Decode Error: tapLeafScript has invalid control block in key 0x"+e.key.toString("hex"));let t=e.value[e.value.length-1];if((254&e.key[1])!==t)throw Error("Decode Error: tapLeafScript bad leaf version in key 0x"+e.key.toString("hex"));let r=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:r,leafVersion:t}}function s(e){let t=n.from([i.InputTypes.TAP_LEAF_SCRIPT]),r=n.from([e.leafVersion]);return{key:n.concat([t,e.controlBlock]),value:n.concat([e.script,r])}}function a(e){return n.isBuffer(e.controlBlock)&&(e.controlBlock.length-1)%32==0&&(254&e.controlBlock[0])===e.leafVersion&&n.isBuffer(e.script)}function u(e,t,r){let n=t.controlBlock.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(e=>e.controlBlock.equals(t.controlBlock)).length)}t.decode=o,t.encode=s,t.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }",t.check=a,t.canAddToArray=u},23934:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847);function o(e){if(e.key[0]!==i.InputTypes.TAP_MERKLE_ROOT||1!==e.key.length)throw Error("Decode Error: could not decode tapMerkleRoot with key 0x"+e.key.toString("hex"));if(!a(e.value))throw Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value}function s(e){return{key:n.from([i.InputTypes.TAP_MERKLE_ROOT]),value:e}}function a(e){return n.isBuffer(e)&&32===e.length}function u(e,t){return!!e&&!!t&&void 0===e.tapMerkleRoot}t.decode=o,t.encode=s,t.expected="Buffer",t.check=a,t.canAdd=u},50602:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847);function o(e){if(e.key[0]!==i.InputTypes.TAP_SCRIPT_SIG)throw Error("Decode Error: could not decode tapScriptSig with key 0x"+e.key.toString("hex"));if(65!==e.key.length)throw Error("Decode Error: tapScriptSig has invalid key 0x"+e.key.toString("hex"));if(64!==e.value.length&&65!==e.value.length)throw Error("Decode Error: tapScriptSig has invalid signature in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1,33),leafHash:e.key.slice(33),signature:e.value}}function s(e){let t=n.from([i.InputTypes.TAP_SCRIPT_SIG]);return{key:n.concat([t,e.pubkey,e.leafHash]),value:e.signature}}function a(e){return n.isBuffer(e.pubkey)&&n.isBuffer(e.leafHash)&&n.isBuffer(e.signature)&&32===e.pubkey.length&&32===e.leafHash.length&&(64===e.signature.length||65===e.signature.length)}function u(e,t,r){let n=t.pubkey.toString("hex")+t.leafHash.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(e=>e.pubkey.equals(t.pubkey)&&e.leafHash.equals(t.leafHash)).length)}t.decode=o,t.encode=s,t.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }",t.check=a,t.canAddToArray=u},82954:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847),o=r(19254),s=r(3493);function a(e){if(e.key[0]!==i.InputTypes.WITNESS_UTXO)throw Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));let t=o.readUInt64LE(e.value,0),r=8,n=s.decode(e.value,r);r+=s.encodingLength(n);let a=e.value.slice(r);if(a.length!==n)throw Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:a,value:t}}function u(e){let{script:t,value:r}=e,a=s.encodingLength(t.length),u=n.allocUnsafe(8+a+t.length);return o.writeUInt64LE(u,r,0),s.encode(t.length,u,8),t.copy(u,8+a),{key:n.from([i.InputTypes.WITNESS_UTXO]),value:u}}function l(e){return n.isBuffer(e.script)&&"number"==typeof e.value}function c(e,t){return!!e&&!!t&&void 0===e.witnessUtxo}t.decode=a,t.encode=u,t.expected="{ script: Buffer; value: number; }",t.check=l,t.canAdd=c},6036:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(1847),o=r(3493);function s(e){if(e.key[0]!==i.OutputTypes.TAP_TREE||1!==e.key.length)throw Error("Decode Error: could not decode tapTree with key 0x"+e.key.toString("hex"));let t=0,r=[];for(;t<e.value.length;){let n=e.value[t++],i=e.value[t++],s=o.decode(e.value,t);t+=o.encodingLength(s),r.push({depth:n,leafVersion:i,script:e.value.slice(t,t+s)}),t+=s}return{leaves:r}}function a(e){let t=n.from([i.OutputTypes.TAP_TREE]),r=[].concat(...e.leaves.map(e=>[n.of(e.depth,e.leafVersion),o.encode(e.script.length),e.script]));return{key:t,value:n.concat(r)}}function u(e){return Array.isArray(e.leaves)&&e.leaves.every(e=>e.depth>=0&&e.depth<=128&&(254&e.leafVersion)===e.leafVersion&&n.isBuffer(e.script))}function l(e,t){return!!e&&!!t&&void 0===e.tapTree}t.decode=s,t.encode=a,t.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }",t.check=u,t.canAdd=l},44799:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=e=>[...Array(e).keys()],o=e=>33===e.length&&[2,3].includes(e[0])||65===e.length&&4===e[0];function s(e,t=o){return{decode:function(r){if(r.key[0]!==e)throw Error("Decode Error: could not decode bip32Derivation with key 0x"+r.key.toString("hex"));let n=r.key.slice(1);if(!t(n))throw Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+r.key.toString("hex"));if(r.value.length/4%1!=0)throw Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");let o={masterFingerprint:r.value.slice(0,4),pubkey:n,path:"m"};for(let e of i(r.value.length/4-1)){let t=r.value.readUInt32LE(4*e+4),n=!!(2147483648&t),i=2147483647&t;o.path+="/"+i.toString(10)+(n?"'":"")}return o},encode:function(t){let r=n.from([e]),i=n.concat([r,t.pubkey]),o=t.path.split("/"),s=n.allocUnsafe(4*o.length);t.masterFingerprint.copy(s,0);let a=4;return o.slice(1).forEach(e=>{let t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),s.writeUInt32LE(r,a),a+=4}),{key:i,value:s}},check:function(e){return n.isBuffer(e.pubkey)&&n.isBuffer(e.masterFingerprint)&&"string"==typeof e.path&&t(e.pubkey)&&4===e.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function(e,t,r){let n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(e=>e.pubkey.equals(t.pubkey)).length)}}}t.makeConverter=s},99595:function(e,t){"use strict";function r(e){return t;function t(t){let r;if(e.includes(t.key[0])&&(!(33===(r=t.key.slice(1)).length||65===r.length)||![2,3,4].includes(r[0])))throw Error("Format Error: invalid pubkey in key 0x"+t.key.toString("hex"));return r}}Object.defineProperty(t,"__esModule",{value:!0}),t.makeChecker=r},9705:function(e,t,r){"use strict";var n=r(48764).Buffer;function i(e){return{decode:function(t){if(t.key[0]!==e)throw Error("Decode Error: could not decode redeemScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:n.from([e]),value:t}},check:function(e){return n.isBuffer(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}}Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=i},17196:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(3493),o=r(44799),s=e=>32===e.length;function a(e){let t=o.makeConverter(e,s);return{decode:function(e){let r=i.decode(e.value),n=i.encodingLength(r),o=t.decode({key:e.key,value:e.value.slice(n+32*r)}),s=Array(r);for(let t=0,i=n;t<r;t++,i+=32)s[t]=e.value.slice(i,i+32);return Object.assign({},o,{leafHashes:s})},encode:function(e){let r=t.encode(e),o=i.encodingLength(e.leafHashes.length),s=n.allocUnsafe(o);i.encode(e.leafHashes.length,s);let a=n.concat([s,...e.leafHashes,r.value]);return Object.assign({},r,{value:a})},check:function(e){return Array.isArray(e.leafHashes)&&e.leafHashes.every(e=>n.isBuffer(e)&&32===e.length)&&t.check(e)},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }",canAddToArray:t.canAddToArray}}t.makeConverter=a},29375:function(e,t,r){"use strict";var n=r(48764).Buffer;function i(e){return{decode:function(t){if(t.key[0]!==e||1!==t.key.length)throw Error("Decode Error: could not decode tapInternalKey with key 0x"+t.key.toString("hex"));if(32!==t.value.length)throw Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return t.value},encode:function(t){return{key:n.from([e]),value:t}},check:function(e){return n.isBuffer(e)&&32===e.length},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.tapInternalKey}}}Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=i},66327:function(e,t,r){"use strict";var n=r(48764).Buffer;function i(e){return{decode:function(t){if(t.key[0]!==e)throw Error("Decode Error: could not decode witnessScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:n.from([e]),value:t}},check:function(e){return n.isBuffer(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}}Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=i},19254:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(3493);function o(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}function s(e){let t=e.map(a);return t.push(n.from([0])),n.concat(t)}function a(e){let t=e.key.length,r=e.value.length,o=i.encodingLength(t),s=i.encodingLength(r),a=n.allocUnsafe(o+t+s+r);return i.encode(t,a,0),e.key.copy(a,o),i.encode(r,a,o+t),e.value.copy(a,o+t+s),a}function u(e,t){if("number"!=typeof e)throw Error("cannot write a non-number as a number");if(e<0)throw Error("specified a negative value for writing an unsigned value");if(e>t)throw Error("RangeError: value out of range");if(Math.floor(e)!==e)throw Error("value has a fractional component")}function l(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return u((n*=4294967296)+r,9007199254740991),n+r}function c(e,t,r){return u(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}t.range=e=>[...Array(e).keys()],t.reverseBuffer=o,t.keyValsToBuffer=s,t.keyValToBuffer=a,t.readUInt64LE=l,t.writeUInt64LE=c},3493:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=9007199254740991;function o(e){if(e<0||e>i||e%1!=0)throw RangeError("value out of range")}function s(e,t,r){if(o(e),t||(t=n.allocUnsafe(u(e))),!n.isBuffer(t))throw TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),Object.assign(s,{bytes:1})):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),Object.assign(s,{bytes:3})):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),Object.assign(s,{bytes:5})):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),Object.assign(s,{bytes:9})),t}function a(e,t){if(!n.isBuffer(e))throw TypeError("buffer must be a Buffer instance");t||(t=0);let r=e.readUInt8(t);if(r<253)return Object.assign(a,{bytes:1}),r;if(253===r)return Object.assign(a,{bytes:3}),e.readUInt16LE(t+1);if(254===r)return Object.assign(a,{bytes:5}),e.readUInt32LE(t+1);{Object.assign(a,{bytes:9});let r=e.readUInt32LE(t+1),n=4294967296*e.readUInt32LE(t+5)+r;return o(n),n}}function u(e){return o(e),e<253?1:e<=65535?3:e<=4294967295?5:9}t.encode=s,t.decode=a,t.encodingLength=u},12974:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(71528),o=r(19254),s=r(3493),a=r(1847);function u(e,t){let r=0;function n(){let t=s.decode(e,r);r+=s.encodingLength(t);let n=e.slice(r,r+t);return r+=t,n}function i(){let t=e.readUInt8(r);return r+=1,t}function u(){return{key:n(),value:n()}}function l(){if(r>=e.length)throw Error("Format Error: Unexpected End of PSBT");let t=0===e.readUInt8(r);return t&&r++,t}if(1886610036!==function(){let t=e.readUInt32BE(r);return r+=4,t}())throw Error("Format Error: Invalid Magic Number");if(255!==i())throw Error("Format Error: Magic Number must be followed by 0xff separator");let f=[],h={};for(;!l();){let e=u(),t=e.key.toString("hex");if(h[t])throw Error("Format Error: Keys must be unique for global keymap: key "+t);h[t]=1,f.push(e)}let p=f.filter(e=>e.key[0]===a.GlobalTypes.UNSIGNED_TX);if(1!==p.length)throw Error("Format Error: Only one UNSIGNED_TX allowed");let d=t(p[0].value),{inputCount:y,outputCount:g}=d.getInputOutputCounts(),m=[],b=[];for(let e of o.range(y)){let t={},r=[];for(;!l();){let n=u(),i=n.key.toString("hex");if(t[i])throw Error("Format Error: Keys must be unique for each input: input index "+e+" key "+i);t[i]=1,r.push(n)}m.push(r)}for(let e of o.range(g)){let t={},r=[];for(;!l();){let n=u(),i=n.key.toString("hex");if(t[i])throw Error("Format Error: Keys must be unique for each output: output index "+e+" key "+i);t[i]=1,r.push(n)}b.push(r)}return c(d,{globalMapKeyVals:f,inputKeyVals:m,outputKeyVals:b})}function l(e,t,r){if(!t.equals(n.from([r])))throw Error(`Format Error: Invalid ${e} key: ${t.toString("hex")}`)}function c(e,{globalMapKeyVals:t,inputKeyVals:r,outputKeyVals:n}){let s={unsignedTx:e},u=0;for(let e of t)switch(e.key[0]){case a.GlobalTypes.UNSIGNED_TX:if(l("global",e.key,a.GlobalTypes.UNSIGNED_TX),u>0)throw Error("Format Error: GlobalMap has multiple UNSIGNED_TX");u++;break;case a.GlobalTypes.GLOBAL_XPUB:void 0===s.globalXpub&&(s.globalXpub=[]),s.globalXpub.push(i.globals.globalXpub.decode(e));break;default:s.unknownKeyVals||(s.unknownKeyVals=[]),s.unknownKeyVals.push(e)}let c=r.length,f=n.length,h=[],p=[];for(let e of o.range(c)){let t={};for(let n of r[e])switch(i.inputs.checkPubkey(n),n.key[0]){case a.InputTypes.NON_WITNESS_UTXO:if(l("input",n.key,a.InputTypes.NON_WITNESS_UTXO),void 0!==t.nonWitnessUtxo)throw Error("Format Error: Input has multiple NON_WITNESS_UTXO");t.nonWitnessUtxo=i.inputs.nonWitnessUtxo.decode(n);break;case a.InputTypes.WITNESS_UTXO:if(l("input",n.key,a.InputTypes.WITNESS_UTXO),void 0!==t.witnessUtxo)throw Error("Format Error: Input has multiple WITNESS_UTXO");t.witnessUtxo=i.inputs.witnessUtxo.decode(n);break;case a.InputTypes.PARTIAL_SIG:void 0===t.partialSig&&(t.partialSig=[]),t.partialSig.push(i.inputs.partialSig.decode(n));break;case a.InputTypes.SIGHASH_TYPE:if(l("input",n.key,a.InputTypes.SIGHASH_TYPE),void 0!==t.sighashType)throw Error("Format Error: Input has multiple SIGHASH_TYPE");t.sighashType=i.inputs.sighashType.decode(n);break;case a.InputTypes.REDEEM_SCRIPT:if(l("input",n.key,a.InputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw Error("Format Error: Input has multiple REDEEM_SCRIPT");t.redeemScript=i.inputs.redeemScript.decode(n);break;case a.InputTypes.WITNESS_SCRIPT:if(l("input",n.key,a.InputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw Error("Format Error: Input has multiple WITNESS_SCRIPT");t.witnessScript=i.inputs.witnessScript.decode(n);break;case a.InputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(i.inputs.bip32Derivation.decode(n));break;case a.InputTypes.FINAL_SCRIPTSIG:l("input",n.key,a.InputTypes.FINAL_SCRIPTSIG),t.finalScriptSig=i.inputs.finalScriptSig.decode(n);break;case a.InputTypes.FINAL_SCRIPTWITNESS:l("input",n.key,a.InputTypes.FINAL_SCRIPTWITNESS),t.finalScriptWitness=i.inputs.finalScriptWitness.decode(n);break;case a.InputTypes.POR_COMMITMENT:l("input",n.key,a.InputTypes.POR_COMMITMENT),t.porCommitment=i.inputs.porCommitment.decode(n);break;case a.InputTypes.TAP_KEY_SIG:l("input",n.key,a.InputTypes.TAP_KEY_SIG),t.tapKeySig=i.inputs.tapKeySig.decode(n);break;case a.InputTypes.TAP_SCRIPT_SIG:void 0===t.tapScriptSig&&(t.tapScriptSig=[]),t.tapScriptSig.push(i.inputs.tapScriptSig.decode(n));break;case a.InputTypes.TAP_LEAF_SCRIPT:void 0===t.tapLeafScript&&(t.tapLeafScript=[]),t.tapLeafScript.push(i.inputs.tapLeafScript.decode(n));break;case a.InputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(i.inputs.tapBip32Derivation.decode(n));break;case a.InputTypes.TAP_INTERNAL_KEY:l("input",n.key,a.InputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=i.inputs.tapInternalKey.decode(n);break;case a.InputTypes.TAP_MERKLE_ROOT:l("input",n.key,a.InputTypes.TAP_MERKLE_ROOT),t.tapMerkleRoot=i.inputs.tapMerkleRoot.decode(n);break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(n)}h.push(t)}for(let e of o.range(f)){let t={};for(let r of n[e])switch(i.outputs.checkPubkey(r),r.key[0]){case a.OutputTypes.REDEEM_SCRIPT:if(l("output",r.key,a.OutputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw Error("Format Error: Output has multiple REDEEM_SCRIPT");t.redeemScript=i.outputs.redeemScript.decode(r);break;case a.OutputTypes.WITNESS_SCRIPT:if(l("output",r.key,a.OutputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw Error("Format Error: Output has multiple WITNESS_SCRIPT");t.witnessScript=i.outputs.witnessScript.decode(r);break;case a.OutputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(i.outputs.bip32Derivation.decode(r));break;case a.OutputTypes.TAP_INTERNAL_KEY:l("output",r.key,a.OutputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=i.outputs.tapInternalKey.decode(r);break;case a.OutputTypes.TAP_TREE:l("output",r.key,a.OutputTypes.TAP_TREE),t.tapTree=i.outputs.tapTree.decode(r);break;case a.OutputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(i.outputs.tapBip32Derivation.decode(r));break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(r)}p.push(t)}return{globalMap:s,inputs:h,outputs:p}}t.psbtFromBuffer=u,t.checkKeyBuffer=l,t.psbtFromKeyVals=c},36574:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(12974)),n(r(15312))},15312:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(71528),o=r(19254);function s({globalMap:e,inputs:t,outputs:r}){let{globalKeyVals:i,inputKeyVals:s,outputKeyVals:a}=l({globalMap:e,inputs:t,outputs:r}),u=o.keyValsToBuffer(i),c=e=>0===e.length?[n.from([0])]:e.map(o.keyValsToBuffer),f=c(s),h=c(a),p=n.allocUnsafe(5);return p.writeUIntBE(482972169471,0,5),n.concat([p,u].concat(f,h))}t.psbtToBuffer=s;let a=(e,t)=>e.key.compare(t.key);function u(e,t){let r=new Set,n=Object.entries(e).reduce((e,[n,i])=>{if("unknownKeyVals"===n)return e;let o=t[n];if(void 0===o)return e;let s=(Array.isArray(i)?i:[i]).map(o.encode);return s.map(e=>e.key.toString("hex")).forEach(e=>{if(r.has(e))throw Error("Serialize Error: Duplicate key: "+e);r.add(e)}),e.concat(s)},[]),i=e.unknownKeyVals?e.unknownKeyVals.filter(e=>!r.has(e.key.toString("hex"))):[];return n.concat(i).sort(a)}function l({globalMap:e,inputs:t,outputs:r}){return{globalKeyVals:u(e,i.globals),inputKeyVals:t.map(e=>u(e,i.inputs)),outputKeyVals:r.map(e=>u(e,i.outputs))}}t.psbtToKeyVals=l},95011:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(82190),o=r(36574),s=r(1847),a=r(96403);class u{constructor(e){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}static fromBase64(e,t){let r=n.from(e,"base64");return this.fromBuffer(r,t)}static fromHex(e,t){let r=n.from(e,"hex");return this.fromBuffer(r,t)}static fromBuffer(e,t){let r=o.psbtFromBuffer(e,t),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return o.psbtToBuffer(this)}updateGlobal(e){return a.updateGlobal(e,this.globalMap),this}updateInput(e,t){let r=a.checkForInput(this.inputs,e);return a.updateInput(t,r),this}updateOutput(e,t){let r=a.checkForOutput(this.outputs,e);return a.updateOutput(t,r),this}addUnknownKeyValToGlobal(e){return a.checkHasKey(e,this.globalMap.unknownKeyVals,a.getEnumLength(s.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}addUnknownKeyValToInput(e,t){let r=a.checkForInput(this.inputs,e);return a.checkHasKey(t,r.unknownKeyVals,a.getEnumLength(s.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addUnknownKeyValToOutput(e,t){let r=a.checkForOutput(this.outputs,e);return a.checkHasKey(t,r.unknownKeyVals,a.getEnumLength(s.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addInput(e){this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});let t=e.unknownKeyVals||[],r=this.inputs.length-1;if(!Array.isArray(t))throw Error("unknownKeyVals must be an Array");return t.forEach(e=>this.addUnknownKeyValToInput(r,e)),a.addInputAttributes(this.inputs,e),this}addOutput(e){this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});let t=e.unknownKeyVals||[],r=this.outputs.length-1;if(!Array.isArray(t))throw Error("unknownKeyVals must be an Array");return t.forEach(e=>this.addUnknownKeyValToOutput(r,e)),a.addOutputAttributes(this.outputs,e),this}clearFinalizedInput(e){let t=a.checkForInput(this.inputs,e);for(let r of(a.inputCheckUncleanFinalized(e,t),Object.keys(t)))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(r)||delete t[r];return this}combine(...e){return Object.assign(this,i.combine([this].concat(e))),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}}t.Psbt=u},1847:function(e,t){"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.UNSIGNED_TX=0]="UNSIGNED_TX",e[e.GLOBAL_XPUB=1]="GLOBAL_XPUB"}(r=t.GlobalTypes||(t.GlobalTypes={})),t.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],function(e){e[e.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",e[e.WITNESS_UTXO=1]="WITNESS_UTXO",e[e.PARTIAL_SIG=2]="PARTIAL_SIG",e[e.SIGHASH_TYPE=3]="SIGHASH_TYPE",e[e.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=6]="BIP32_DERIVATION",e[e.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",e[e.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",e[e.POR_COMMITMENT=9]="POR_COMMITMENT",e[e.TAP_KEY_SIG=19]="TAP_KEY_SIG",e[e.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",e[e.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",e[e.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",e[e.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"}(n=t.InputTypes||(t.InputTypes={})),t.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"],function(e){e[e.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=2]="BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",e[e.TAP_TREE=6]="TAP_TREE",e[e.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"}(i=t.OutputTypes||(t.OutputTypes={})),t.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]},96403:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=r(71528);function o(e,t){let r=e[t];if(void 0===r)throw Error(`No input #${t}`);return r}function s(e,t){let r=e[t];if(void 0===r)throw Error(`No output #${t}`);return r}function a(e,t,r){if(e.key[0]<r)throw Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&0!==t.filter(t=>t.key.equals(e.key)).length)throw Error(`Duplicate Key: ${e.key.toString("hex")}`)}function u(e){let t=0;return Object.keys(e).forEach(e=>{Number(isNaN(Number(e)))&&t++}),t}function l(e,t){let r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){let e=!!t.redeemScript,n=!!t.witnessScript,i=!e||!!t.finalScriptSig,o=!n||!!t.finalScriptWitness,s=!!t.finalScriptSig||!!t.finalScriptWitness;r=i&&o&&s}if(!1===r)throw Error(`Input #${e} has too much or too little data to clean`)}function c(e,t,r,n){throw Error(`Data for ${e} key ${t} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function f(e){return(t,r)=>{for(let n of Object.keys(t)){let o=t[n],{canAdd:s,canAddToArray:a,check:u,expected:l}=i[e+"s"][n]||{},f=!!a;if(u){if(f){if(!Array.isArray(o)||r[n]&&!Array.isArray(r[n]))throw Error(`Key type ${n} must be an array`);o.every(u)||c(e,n,l,o);let t=r[n]||[],i=new Set;if(!o.every(e=>a(t,e,i)))throw Error("Can not add duplicate data to array");r[n]=t.concat(o)}else{if(u(o)||c(e,n,l,o),!s(r,o))throw Error(`Can not add duplicate data to ${e}`);r[n]=o}}}}}function h(e,r){let n=e.length-1,i=o(e,n);t.updateInput(r,i)}function p(e,r){let n=e.length-1,i=s(e,n);t.updateOutput(r,i)}function d(e,t){if(!n.isBuffer(t)||t.length<4)throw Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t}function y(e,t){if(!n.isBuffer(t)||t.length<4)throw Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}t.checkForInput=o,t.checkForOutput=s,t.checkHasKey=a,t.getEnumLength=u,t.inputCheckUncleanFinalized=l,t.updateGlobal=f("global"),t.updateInput=f("input"),t.updateOutput=f("output"),t.addInputAttributes=h,t.addOutputAttributes=p,t.defaultVersionSetter=d,t.defaultLocktimeSetter=y},30246:function(e){let t=2147483648;var r=function(e){if(!Array.isArray(e))throw Error("Input must be an Array");if(0===e.length)throw Error("Path must contain at least one level");for(var t=0;t<e.length;t++)if("number"!=typeof e[t])throw Error("Path element is not a number");this.path=e};r.validatePathArray=function(e){try{return r.fromPathArray(e),!0}catch(e){return!1}},r.validateString=function(e,t){try{return r.fromString(e,t),!0}catch(e){return!1}},r.fromPathArray=function(e){return new r(e)},r.fromString=function(e,n){if(/^m\//i.test(e))e=e.slice(2);else if(n)throw Error("Root element is required");for(var i=e.split("/"),o=Array(i.length),s=0;s<i.length;s++){var a=/(\d+)([hH\']?)/.exec(i[s]);if(null===a)throw Error("Invalid input");if(o[s]=parseInt(a[1],10),o[s]>=t)throw Error("Invalid child index");if("h"===a[2]||"H"===a[2]||"'"===a[2])o[s]+=t;else if(0!=a[2].length)throw Error("Invalid modifier")}return new r(o)},r.prototype.toPathArray=function(){return this.path},r.prototype.toString=function(e,r){for(var n=Array(this.path.length),i=0;i<this.path.length;i++){var o=this.path[i];o&t?n[i]=(o&~t)+(r?"h":"'"):n[i]=o}return(e?"":"m/")+n.join("/")},r.prototype.inspect=function(){return"BIPPath <"+this.toString()+">"},e.exports=r},93027:function(e,t,r){var n=r(89509).Buffer;function i(e){if(e.length<8||e.length>72||48!==e[0]||e[1]!==e.length-2||2!==e[2])return!1;var t=e[3];if(0===t||5+t>=e.length||2!==e[4+t])return!1;var r=e[5+t];return 0!==r&&6+t+r===e.length&&!(128&e[4])&&(!(t>1)||0!==e[4]||!!(128&e[5]))&&!(128&e[t+6])&&(!(r>1)||0!==e[t+6]||!!(128&e[t+7]))}function o(e){if(e.length<8)throw Error("DER sequence length is too short");if(e.length>72)throw Error("DER sequence length is too long");if(48!==e[0])throw Error("Expected DER sequence");if(e[1]!==e.length-2)throw Error("DER sequence length is invalid");if(2!==e[2])throw Error("Expected DER integer");var t=e[3];if(0===t)throw Error("R length is zero");if(5+t>=e.length)throw Error("R length is too long");if(2!==e[4+t])throw Error("Expected DER integer (2)");var r=e[5+t];if(0===r)throw Error("S length is zero");if(6+t+r!==e.length)throw Error("S length is invalid");if(128&e[4])throw Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw Error("R value excessively padded");if(128&e[t+6])throw Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}}function s(e,t){var r=e.length,i=t.length;if(0===r)throw Error("R length is zero");if(0===i)throw Error("S length is zero");if(r>33)throw Error("R length is too long");if(i>33)throw Error("S length is too long");if(128&e[0])throw Error("R value is negative");if(128&t[0])throw Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw Error("R value excessively padded");if(i>1&&0===t[0]&&!(128&t[1]))throw Error("S value excessively padded");var o=n.allocUnsafe(6+r+i);return o[0]=48,o[1]=o.length-2,o[2]=2,o[3]=e.length,e.copy(o,4),o[4+r]=2,o[5+r]=t.length,t.copy(o,6+r),o}e.exports={check:i,decode:o,encode:s}},10009:function(e){"use strict";function t(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==t[o])throw TypeError(i+" is ambiguous");t[o]=n}var s=e.length,a=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function c(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,i=0;e[r]===a;)n++,r++;for(var o=(e.length-r)*u+1>>>0,l=new Uint8Array(o);e[r];){var c=t[e.charCodeAt(r)];if(255===c)return;for(var f=0,h=o-1;(0!==c||f<i)&&-1!==h;h--,f++)c+=s*l[h]>>>0,l[h]=c%256>>>0,c=c/256>>>0;if(0!==c)throw Error("Non-zero carry");i=f,r++}for(var p=o-i;p!==o&&0===l[p];)p++;for(var d=new Uint8Array(n+(o-p)),y=n;p!==o;)d[y++]=l[p++];return d}function f(e){var t=c(e);if(t)return t;throw Error("Non-base"+s+" character")}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var u=(o-i)*l+1>>>0,c=new Uint8Array(u);i!==o;){for(var f=t[i],h=0,p=u-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw Error("Non-zero carry");n=h,i++}for(var d=u-n;d!==u&&0===c[d];)d++;for(var y=a.repeat(r);d<u;++d)y+=e.charAt(c[d]);return y},decodeUnsafe:c,decode:f}}e.exports=t},79075:function(e,t,r){let n=r(10009),i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";e.exports=n(i)},72882:function(e,t,r){"use strict";var n=r(79075);e.exports=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var r=Uint8Array.from(t),i=e(r),o=r.length+4,s=new Uint8Array(o);return s.set(r,0),s.set(i.subarray(0,4),r.length),n.encode(s,o)},decode:function(r){var i=t(n.decode(r),e);if(!i)throw Error("Invalid checksum");return i},decodeUnsafe:function(e){var r=n.decodeUnsafe(e);if(r)return t(r)}}}},89239:function(e,t,r){"use strict";var{sha256:n}=r(23061),i=r(72882);function o(e){return n(n(e))}e.exports=i(o)},95488:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.toOutputScript=t.fromOutputScript=t.toBech32=t.toBase58Check=t.fromBech32=t.fromBase58Check=void 0;let i=r(74378),o=r(84972),s=r(73357),a=r(41838),u=r(27715),l=r(89239),c=40,f=2,h=16,p=2,d=80,y="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function g(e,t){let r=e.slice(2);if(r.length<f||r.length>c)throw TypeError("Invalid program length for segwit address");let n=e[0]-d;if(n<p||n>h)throw TypeError("Invalid version for segwit address");if(e[1]!==r.length)throw TypeError("Invalid script for segwit address");return console.warn(y),v(r,n,t.bech32)}function m(e){let t=n.from(l.decode(e));if(t.length<21)throw TypeError(e+" is too short");if(t.length>21)throw TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function b(e){let t,r;try{t=u.bech32.decode(e)}catch(e){}if(t){if(0!==(r=t.words[0]))throw TypeError(e+" uses wrong encoding")}else if(0===(r=(t=u.bech32m.decode(e)).words[0]))throw TypeError(e+" uses wrong encoding");let i=u.bech32.fromWords(t.words.slice(1));return{version:r,prefix:t.prefix,data:n.from(i)}}function w(e,t){(0,a.typeforce)((0,a.tuple)(a.Hash160bit,a.UInt8),arguments);let r=n.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),l.encode(r)}function v(e,t,r){let n=u.bech32.toWords(e);return n.unshift(t),0===t?u.bech32.encode(r,n):u.bech32m.encode(r,n)}function _(e,t){t=t||i.bitcoin;try{return o.p2pkh({output:e,network:t}).address}catch(e){}try{return o.p2sh({output:e,network:t}).address}catch(e){}try{return o.p2wpkh({output:e,network:t}).address}catch(e){}try{return o.p2wsh({output:e,network:t}).address}catch(e){}try{return o.p2tr({output:e,network:t}).address}catch(e){}try{return g(e,t)}catch(e){}throw Error(s.toASM(e)+" has no matching Address")}function E(e,t){let r,n;t=t||i.bitcoin;try{r=m(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return o.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return o.p2sh({hash:r.hash}).output}else{try{n=b(e)}catch(e){}if(n){if(n.prefix!==t.bech32)throw Error(e+" has an invalid prefix");if(0===n.version){if(20===n.data.length)return o.p2wpkh({hash:n.data}).output;if(32===n.data.length)return o.p2wsh({hash:n.data}).output}else if(1===n.version){if(32===n.data.length)return o.p2tr({pubkey:n.data}).output}else if(n.version>=p&&n.version<=h&&n.data.length>=f&&n.data.length<=c)return console.warn(y),s.compile([n.version+d,n.data])}}throw Error(e+" has no matching Script")}t.fromBase58Check=m,t.fromBech32=b,t.toBase58Check=w,t.toBech32=v,t.fromOutputScript=_,t.toOutputScript=E},77617:function(e,t,r){"use strict";var n=r(48764).Buffer;function i(e){if(e.length<8||e.length>72||48!==e[0]||e[1]!==e.length-2||2!==e[2])return!1;let t=e[3];if(0===t||5+t>=e.length||2!==e[4+t])return!1;let r=e[5+t];return 0!==r&&6+t+r===e.length&&!(128&e[4])&&(!(t>1)||0!==e[4]||!!(128&e[5]))&&!(128&e[t+6])&&(!(r>1)||0!==e[t+6]||!!(128&e[t+7]))}function o(e){if(e.length<8)throw Error("DER sequence length is too short");if(e.length>72)throw Error("DER sequence length is too long");if(48!==e[0])throw Error("Expected DER sequence");if(e[1]!==e.length-2)throw Error("DER sequence length is invalid");if(2!==e[2])throw Error("Expected DER integer");let t=e[3];if(0===t)throw Error("R length is zero");if(5+t>=e.length)throw Error("R length is too long");if(2!==e[4+t])throw Error("Expected DER integer (2)");let r=e[5+t];if(0===r)throw Error("S length is zero");if(6+t+r!==e.length)throw Error("S length is invalid");if(128&e[4])throw Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw Error("R value excessively padded");if(128&e[t+6])throw Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}}function s(e,t){let r=e.length,i=t.length;if(0===r)throw Error("R length is zero");if(0===i)throw Error("S length is zero");if(r>33)throw Error("R length is too long");if(i>33)throw Error("S length is too long");if(128&e[0])throw Error("R value is negative");if(128&t[0])throw Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw Error("R value excessively padded");if(i>1&&0===t[0]&&!(128&t[1]))throw Error("S value excessively padded");let o=n.allocUnsafe(6+r+i);return o[0]=48,o[1]=o.length-2,o[2]=2,o[3]=e.length,e.copy(o,4),o[4+r]=2,o[5+r]=t.length,t.copy(o,6+r),o}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=t.check=void 0,t.check=i,t.decode=o,t.encode=s},87949:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;let i=r(9357),o=r(5525),s=r(298),a=r(82737),u=r(41838),{typeforce:l}=u,c=TypeError("Cannot compute merkle root for zero transactions"),f=TypeError("Cannot compute witness commit for non-segwit block");class h{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(e){if(e.length<80)throw Error("Buffer too small (< 80 bytes)");let t=new i.BufferReader(e),r=new h;if(r.version=t.readInt32(),r.prevHash=t.readSlice(32),r.merkleRoot=t.readSlice(32),r.timestamp=t.readUInt32(),r.bits=t.readUInt32(),r.nonce=t.readUInt32(),80===e.length)return r;let n=()=>{let e=a.Transaction.fromBuffer(t.buffer.slice(t.offset),!0);return t.offset+=e.byteLength(),e},o=t.readVarInt();r.transactions=[];for(let e=0;e<o;++e){let e=n();r.transactions.push(e)}let s=r.getWitnessCommit();return s&&(r.witnessCommit=s),r}static fromHex(e){return h.fromBuffer(n.from(e,"hex"))}static calculateTarget(e){let t=((4278190080&e)>>24)-3,r=8388607&e,i=n.alloc(32,0);return i.writeUIntBE(r,29-t,3),i}static calculateMerkleRoot(e,t){if(l([{getHash:u.Function}],e),0===e.length)throw c;if(t&&!p(e))throw f;let r=e.map(e=>e.getHash(t)),i=(0,s.fastMerkleRoot)(r,o.hash256);return t?o.hash256(n.concat([i,e[0].ins[0].witness[0]])):i}getWitnessCommit(){if(!p(this.transactions))return null;let e=this.transactions[0].outs.filter(e=>e.script.slice(0,6).equals(n.from("6a24aa21a9ed","hex"))).map(e=>e.script.slice(6,38));if(0===e.length)return null;let t=e[e.length-1];return t instanceof n&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof n&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return d(this.transactions)}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(e,t=!0){return e||!this.transactions?80:80+i.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((e,r)=>e+r.byteLength(t),0)}getHash(){return o.hash256(this.toBuffer(!0))}getId(){return(0,i.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){let e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){let t=n.allocUnsafe(this.byteLength(e)),r=new i.BufferWriter(t);return r.writeInt32(this.version),r.writeSlice(this.prevHash),r.writeSlice(this.merkleRoot),r.writeUInt32(this.timestamp),r.writeUInt32(this.bits),r.writeUInt32(this.nonce),e||!this.transactions||(i.varuint.encode(this.transactions.length,t,r.offset),r.offset+=i.varuint.encode.bytes,this.transactions.forEach(e=>{let n=e.byteLength();e.toBuffer(t,r.offset),r.offset+=n})),t}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){let e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit())}checkProofOfWork(){let e=(0,i.reverseBuffer)(this.getHash()),t=h.calculateTarget(this.bits);return 0>=e.compare(t)}__checkMerkleRoot(){if(!this.transactions)throw c;let e=h.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}__checkWitnessCommit(){if(!this.transactions)throw c;if(!this.hasWitnessCommit())throw f;let e=h.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}function p(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}function d(e){return e instanceof Array&&e.some(e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some(e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0))}t.Block=h},9357:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=t.BufferWriter=t.cloneBuffer=t.reverseBuffer=t.writeUInt64LE=t.readUInt64LE=t.varuint=void 0;let i=r(41838),{typeforce:o}=i,s=r(57795);function a(e,t){if("number"!=typeof e)throw Error("cannot write a non-number as a number");if(e<0)throw Error("specified a negative value for writing an unsigned value");if(e>t)throw Error("RangeError: value out of range");if(Math.floor(e)!==e)throw Error("value has a fractional component")}function u(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return a((n*=4294967296)+r,9007199254740991),n+r}function l(e,t,r){return a(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}function c(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}function f(e){let t=n.allocUnsafe(e.length);return e.copy(t),t}t.varuint=s,t.readUInt64LE=u,t.writeUInt64LE=l,t.reverseBuffer=c,t.cloneBuffer=f;class h{static withCapacity(e){return new h(n.alloc(e))}constructor(e,t=0){this.buffer=e,this.offset=t,o(i.tuple(i.Buffer,i.UInt32),[e,t])}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=l(this.buffer,e,this.offset)}writeVarInt(e){s.encode(e,this.buffer,this.offset),this.offset+=s.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach(e=>this.writeVarSlice(e))}end(){if(this.buffer.length===this.offset)return this.buffer;throw Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}}t.BufferWriter=h;class p{constructor(e,t=0){this.buffer=e,this.offset=t,o(i.tuple(i.Buffer,i.UInt32),[e,t])}readUInt8(){let e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){let e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){let e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){let e=u(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){let e=s.decode(this.buffer,this.offset);return this.offset+=s.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw Error("Cannot read slice out of bounds");let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let e=this.readVarInt(),t=[];for(let r=0;r<e;r++)t.push(this.readVarSlice());return t}}t.BufferReader=p},5525:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.taggedHash=t.TAGGED_HASH_PREFIXES=t.TAGS=t.hash256=t.hash160=t.sha256=t.sha1=t.ripemd160=void 0;let i=r(70830),o=r(73963),s=r(23061);function a(e){return n.from((0,i.ripemd160)(Uint8Array.from(e)))}function u(e){return n.from((0,o.sha1)(Uint8Array.from(e)))}function l(e){return n.from((0,s.sha256)(Uint8Array.from(e)))}function c(e){return n.from((0,i.ripemd160)((0,s.sha256)(Uint8Array.from(e))))}function f(e){return n.from((0,s.sha256)((0,s.sha256)(Uint8Array.from(e))))}function h(e,r){return l(n.concat([t.TAGGED_HASH_PREFIXES[e],r]))}t.ripemd160=a,t.sha1=u,t.sha256=l,t.hash160=c,t.hash256=f,t.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],t.TAGGED_HASH_PREFIXES={"BIP0340/challenge":n.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":n.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":n.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:n.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:n.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:n.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:n.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":n.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":n.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])},t.taggedHash=h},66379:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.getEccLib=t.initEccLib=void 0;let i={};function o(e,t){e?e!==i.eccLib&&(t?.DANGER_DO_NOT_VERIFY_ECCLIB||u(e),i.eccLib=e):i.eccLib=e}function s(){if(!i.eccLib)throw Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return i.eccLib}t.initEccLib=o,t.getEccLib=s;let a=e=>n.from(e,"hex");function u(e){l("function"==typeof e.isXOnlyPoint),l(e.isXOnlyPoint(a("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),l(e.isXOnlyPoint(a("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),l(e.isXOnlyPoint(a("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),l(e.isXOnlyPoint(a("0000000000000000000000000000000000000000000000000000000000000001"))),l(!e.isXOnlyPoint(a("0000000000000000000000000000000000000000000000000000000000000000"))),l(!e.isXOnlyPoint(a("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),l("function"==typeof e.xOnlyPointAddTweak),c.forEach(t=>{let r=e.xOnlyPointAddTweak(a(t.pubkey),a(t.tweak));null===t.result?l(null===r):(l(null!==r),l(r.parity===t.parity),l(n.from(r.xOnlyPubkey).equals(a(t.result))))})}function l(e){if(!e)throw Error("ecc library invalid")}let c=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]},17656:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initEccLib=t.Transaction=t.opcodes=t.Psbt=t.Block=t.script=t.payments=t.networks=t.crypto=t.address=void 0;let n=r(95488);t.address=n;let i=r(5525);t.crypto=i;let o=r(74378);t.networks=o;let s=r(84972);t.payments=s;let a=r(73357);t.script=a;var u=r(87949);Object.defineProperty(t,"Block",{enumerable:!0,get:function(){return u.Block}});var l=r(99930);Object.defineProperty(t,"Psbt",{enumerable:!0,get:function(){return l.Psbt}});var c=r(47334);Object.defineProperty(t,"opcodes",{enumerable:!0,get:function(){return c.OPS}});var f=r(82737);Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return f.Transaction}});var h=r(66379);Object.defineProperty(t,"initEccLib",{enumerable:!0,get:function(){return h.initEccLib}})},298:function(e,t,r){"use strict";var n=r(48764).Buffer;function i(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");let r=e.length,i=e.concat();for(;r>1;){let e=0;for(let o=0;o<r;o+=2,++e){let s=i[o],a=o+1===r?s:i[o+1],u=n.concat([s,a]);i[e]=t(u)}r=e}return i[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.fastMerkleRoot=void 0,t.fastMerkleRoot=i},74378:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testnet=t.regtest=t.bitcoin=void 0,t.bitcoin={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},47334:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REVERSE_OPS=t.OPS=void 0;let r={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};t.OPS=r;let n={};for(let e of(t.REVERSE_OPS=n,Object.keys(r)))n[r[e]]=e},12227:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tweakKey=t.tapTweakHash=t.tapleafHash=t.findScriptPath=t.toHashTree=t.rootHashFromPath=t.MAX_TAPTREE_DEPTH=t.LEAF_VERSION_TAPSCRIPT=void 0;let n=r(48764),i=r(66379),o=r(5525),s=r(9357),a=r(41838);t.LEAF_VERSION_TAPSCRIPT=192,t.MAX_TAPTREE_DEPTH=128;let u=e=>"left"in e&&"right"in e;function l(e,t){if(e.length<33)throw TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);let r=(e.length-33)/32,n=t;for(let t=0;t<r;t++){let r=e.slice(33+32*t,65+32*t);n=0>n.compare(r)?y(n,r):y(r,n)}return n}function c(e){if((0,a.isTapleaf)(e))return{hash:h(e)};let t=[c(e[0]),c(e[1])];t.sort((e,t)=>e.hash.compare(t.hash));let[r,n]=t;return{hash:y(r.hash,n.hash),left:r,right:n}}function f(e,t){if(u(e)){let r=f(e.left,t);if(void 0!==r)return[...r,e.right.hash];let n=f(e.right,t);if(void 0!==n)return[...n,e.left.hash]}else if(e.hash.equals(t))return[]}function h(e){let r=e.version||t.LEAF_VERSION_TAPSCRIPT;return o.taggedHash("TapLeaf",n.Buffer.concat([n.Buffer.from([r]),g(e.output)]))}function p(e,t){return o.taggedHash("TapTweak",n.Buffer.concat(t?[e,t]:[e]))}function d(e,t){if(!n.Buffer.isBuffer(e)||32!==e.length||t&&32!==t.length)return null;let r=p(e,t),o=(0,i.getEccLib)().xOnlyPointAddTweak(e,r);return o&&null!==o.xOnlyPubkey?{parity:o.parity,x:n.Buffer.from(o.xOnlyPubkey)}:null}function y(e,t){return o.taggedHash("TapBranch",n.Buffer.concat([e,t]))}function g(e){let t=s.varuint.encodingLength(e.length),r=n.Buffer.allocUnsafe(t);return s.varuint.encode(e.length,r),n.Buffer.concat([r,e])}t.rootHashFromPath=l,t.toHashTree=c,t.findScriptPath=f,t.tapleafHash=h,t.tapTweakHash=p,t.tweakKey=d},36648:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2data=void 0;let n=r(74378),i=r(73357),o=r(41838),s=r(52691),a=i.OPS;function u(e,t){if(!e.data&&!e.output)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.Buffer),data:o.typeforce.maybe(o.typeforce.arrayOf(o.typeforce.Buffer))},e);let r={name:"embed",network:e.network||n.bitcoin};if(s.prop(r,"output",()=>{if(e.data)return i.compile([a.OP_RETURN].concat(e.data))}),s.prop(r,"data",()=>{if(e.output)return i.decompile(e.output).slice(1)}),t.validate&&e.output){let t=i.decompile(e.output);if(t[0]!==a.OP_RETURN||!t.slice(1).every(o.typeforce.Buffer))throw TypeError("Output is invalid");if(e.data&&!(0,o.stacksEqual)(e.data,r.data))throw TypeError("Data mismatch")}return Object.assign(r,e)}t.p2data=u},84972:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=t.p2wsh=t.p2wpkh=t.p2sh=t.p2pkh=t.p2pk=t.p2ms=t.embed=void 0;let n=r(36648);Object.defineProperty(t,"embed",{enumerable:!0,get:function(){return n.p2data}});let i=r(98793);Object.defineProperty(t,"p2ms",{enumerable:!0,get:function(){return i.p2ms}});let o=r(97759);Object.defineProperty(t,"p2pk",{enumerable:!0,get:function(){return o.p2pk}});let s=r(44483);Object.defineProperty(t,"p2pkh",{enumerable:!0,get:function(){return s.p2pkh}});let a=r(21160);Object.defineProperty(t,"p2sh",{enumerable:!0,get:function(){return a.p2sh}});let u=r(18810);Object.defineProperty(t,"p2wpkh",{enumerable:!0,get:function(){return u.p2wpkh}});let l=r(82401);Object.defineProperty(t,"p2wsh",{enumerable:!0,get:function(){return l.p2wsh}});let c=r(10079);Object.defineProperty(t,"p2tr",{enumerable:!0,get:function(){return c.p2tr}})},52691:function(e,t){"use strict";function r(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let e=r.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})}function n(e){let t;return()=>void 0!==t?t:t=e()}Object.defineProperty(t,"__esModule",{value:!0}),t.value=t.prop=void 0,t.prop=r,t.value=n},98793:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2ms=void 0;let n=r(74378),i=r(73357),o=r(41838),s=r(52691),a=i.OPS,u=a.OP_RESERVED;function l(e,t){if(!e.input&&!e.output&&!(e.pubkeys&&void 0!==e.m)&&!e.signatures)throw TypeError("Not enough data");function r(e){return i.isCanonicalScriptSignature(e)||(t.allowIncomplete&&e===a.OP_0)!==void 0}t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),m:o.typeforce.maybe(o.typeforce.Number),n:o.typeforce.maybe(o.typeforce.Number),output:o.typeforce.maybe(o.typeforce.Buffer),pubkeys:o.typeforce.maybe(o.typeforce.arrayOf(o.isPoint)),signatures:o.typeforce.maybe(o.typeforce.arrayOf(r)),input:o.typeforce.maybe(o.typeforce.Buffer)},e);let l={network:e.network||n.bitcoin},c=[],f=!1;function h(e){f||(f=!0,c=i.decompile(e),l.m=c[0]-u,l.n=c[c.length-2]-u,l.pubkeys=c.slice(1,-2))}if(s.prop(l,"output",()=>{if(e.m&&l.n&&e.pubkeys)return i.compile([].concat(u+e.m,e.pubkeys,u+l.n,a.OP_CHECKMULTISIG))}),s.prop(l,"m",()=>{if(l.output)return h(l.output),l.m}),s.prop(l,"n",()=>{if(l.pubkeys)return l.pubkeys.length}),s.prop(l,"pubkeys",()=>{if(e.output)return h(e.output),l.pubkeys}),s.prop(l,"signatures",()=>{if(e.input)return i.decompile(e.input).slice(1)}),s.prop(l,"input",()=>{if(e.signatures)return i.compile([a.OP_0].concat(e.signatures))}),s.prop(l,"witness",()=>{if(l.input)return[]}),s.prop(l,"name",()=>{if(l.m&&l.n)return`p2ms(${l.m} of ${l.n})`}),t.validate){if(e.output){if(h(e.output),!o.typeforce.Number(c[0])||!o.typeforce.Number(c[c.length-2])||c[c.length-1]!==a.OP_CHECKMULTISIG||l.m<=0||l.n>16||l.m>l.n||l.n!==c.length-3||!l.pubkeys.every(e=>(0,o.isPoint)(e)))throw TypeError("Output is invalid");if(void 0!==e.m&&e.m!==l.m)throw TypeError("m mismatch");if(void 0!==e.n&&e.n!==l.n)throw TypeError("n mismatch");if(e.pubkeys&&!(0,o.stacksEqual)(e.pubkeys,l.pubkeys))throw TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw TypeError("Pubkey count mismatch");if(l.n=e.pubkeys.length,l.n<l.m)throw TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<l.m)throw TypeError("Not enough signatures provided");if(e.signatures.length>l.m)throw TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==a.OP_0)throw TypeError("Input is invalid");if(0===l.signatures.length||!l.signatures.every(r))throw TypeError("Input has invalid signature(s)");if(e.signatures&&!(0,o.stacksEqual)(e.signatures,l.signatures))throw TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw TypeError("Signature count mismatch")}}return Object.assign(l,e)}t.p2ms=l},97759:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2pk=void 0;let n=r(74378),i=r(73357),o=r(41838),s=r(52691),a=i.OPS;function u(e,t){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.Buffer),pubkey:o.typeforce.maybe(o.isPoint),signature:o.typeforce.maybe(i.isCanonicalScriptSignature),input:o.typeforce.maybe(o.typeforce.Buffer)},e);let r=s.value(()=>i.decompile(e.input)),u={name:"p2pk",network:e.network||n.bitcoin};if(s.prop(u,"output",()=>{if(e.pubkey)return i.compile([e.pubkey,a.OP_CHECKSIG])}),s.prop(u,"pubkey",()=>{if(e.output)return e.output.slice(1,-1)}),s.prop(u,"signature",()=>{if(e.input)return r()[0]}),s.prop(u,"input",()=>{if(e.signature)return i.compile([e.signature])}),s.prop(u,"witness",()=>{if(u.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==a.OP_CHECKSIG)throw TypeError("Output is invalid");if(!(0,o.isPoint)(u.pubkey))throw TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(u.pubkey))throw TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(u.input))throw TypeError("Signature mismatch");if(e.input){if(1!==r().length)throw TypeError("Input is invalid");if(!i.isCanonicalScriptSignature(u.signature))throw TypeError("Input has invalid signature")}}return Object.assign(u,e)}t.p2pk=u},44483:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2pkh=void 0;let i=r(5525),o=r(74378),s=r(73357),a=r(41838),u=r(52691),l=r(89239),c=s.OPS;function f(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.input)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),output:a.typeforce.maybe(a.typeforce.BufferN(25)),pubkey:a.typeforce.maybe(a.isPoint),signature:a.typeforce.maybe(s.isCanonicalScriptSignature),input:a.typeforce.maybe(a.typeforce.Buffer)},e);let r=u.value(()=>{let t=n.from(l.decode(e.address));return{version:t.readUInt8(0),hash:t.slice(1)}}),f=u.value(()=>s.decompile(e.input)),h=e.network||o.bitcoin,p={name:"p2pkh",network:h};if(u.prop(p,"address",()=>{if(!p.hash)return;let e=n.allocUnsafe(21);return e.writeUInt8(h.pubKeyHash,0),p.hash.copy(e,1),l.encode(e)}),u.prop(p,"hash",()=>e.output?e.output.slice(3,23):e.address?r().hash:e.pubkey||p.pubkey?i.hash160(e.pubkey||p.pubkey):void 0),u.prop(p,"output",()=>{if(p.hash)return s.compile([c.OP_DUP,c.OP_HASH160,p.hash,c.OP_EQUALVERIFY,c.OP_CHECKSIG])}),u.prop(p,"pubkey",()=>{if(e.input)return f()[1]}),u.prop(p,"signature",()=>{if(e.input)return f()[0]}),u.prop(p,"input",()=>{if(e.pubkey&&e.signature)return s.compile([e.signature,e.pubkey])}),u.prop(p,"witness",()=>{if(p.input)return[]}),t.validate){let t=n.from([]);if(e.address){if(r().version!==h.pubKeyHash)throw TypeError("Invalid version or Network mismatch");if(20!==r().hash.length)throw TypeError("Invalid address");t=r().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==c.OP_DUP||e.output[1]!==c.OP_HASH160||20!==e.output[2]||e.output[23]!==c.OP_EQUALVERIFY||e.output[24]!==c.OP_CHECKSIG)throw TypeError("Output is invalid");let r=e.output.slice(3,23);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");t=r}if(e.pubkey){let r=i.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");t=r}if(e.input){let r=f();if(2!==r.length)throw TypeError("Input is invalid");if(!s.isCanonicalScriptSignature(r[0]))throw TypeError("Input has invalid signature");if(!(0,a.isPoint)(r[1]))throw TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(r[0]))throw TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(r[1]))throw TypeError("Pubkey mismatch");let n=i.hash160(r[1]);if(t.length>0&&!t.equals(n))throw TypeError("Hash mismatch")}}return Object.assign(p,e)}t.p2pkh=f},21160:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2sh=void 0;let i=r(5525),o=r(74378),s=r(73357),a=r(41838),u=r(52691),l=r(89239),c=s.OPS;function f(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.input)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),output:a.typeforce.maybe(a.typeforce.BufferN(23)),redeem:a.typeforce.maybe({network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.Buffer),input:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),input:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);let r=e.network;r||(r=e.redeem&&e.redeem.network||o.bitcoin);let f={network:r},h=u.value(()=>{let t=n.from(l.decode(e.address));return{version:t.readUInt8(0),hash:t.slice(1)}}),p=u.value(()=>s.decompile(e.input)),d=u.value(()=>{let t=p(),i=t[t.length-1];return{network:r,output:i===c.OP_FALSE?n.from([]):i,input:s.compile(t.slice(0,-1)),witness:e.witness||[]}});if(u.prop(f,"address",()=>{if(!f.hash)return;let e=n.allocUnsafe(21);return e.writeUInt8(f.network.scriptHash,0),f.hash.copy(e,1),l.encode(e)}),u.prop(f,"hash",()=>e.output?e.output.slice(2,22):e.address?h().hash:f.redeem&&f.redeem.output?i.hash160(f.redeem.output):void 0),u.prop(f,"output",()=>{if(f.hash)return s.compile([c.OP_HASH160,f.hash,c.OP_EQUAL])}),u.prop(f,"redeem",()=>{if(e.input)return d()}),u.prop(f,"input",()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return s.compile([].concat(s.decompile(e.redeem.input),e.redeem.output))}),u.prop(f,"witness",()=>f.redeem&&f.redeem.witness?f.redeem.witness:f.input?[]:void 0),u.prop(f,"name",()=>{let e=["p2sh"];return void 0!==f.redeem&&void 0!==f.redeem.name&&e.push(f.redeem.name),e.join("-")}),t.validate){let t=n.from([]);if(e.address){if(h().version!==r.scriptHash)throw TypeError("Invalid version or Network mismatch");if(20!==h().hash.length)throw TypeError("Invalid address");t=h().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==c.OP_HASH160||20!==e.output[1]||e.output[22]!==c.OP_EQUAL)throw TypeError("Output is invalid");let r=e.output.slice(2,22);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");t=r}let o=e=>{if(e.output){let r=s.decompile(e.output);if(!r||r.length<1)throw TypeError("Redeem.output too short");if(e.output.byteLength>520)throw TypeError("Redeem.output unspendable if larger than 520 bytes");if(s.countNonPushOnlyOPs(r)>201)throw TypeError("Redeem.output unspendable with more than 201 non-push ops");let n=i.hash160(e.output);if(t.length>0&&!t.equals(n))throw TypeError("Hash mismatch");t=n}if(e.input){let t=e.input.length>0,r=e.witness&&e.witness.length>0;if(!t&&!r)throw TypeError("Empty input");if(t&&r)throw TypeError("Input and witness provided");if(t){let t=s.decompile(e.input);if(!s.isPushOnly(t))throw TypeError("Non push-only scriptSig")}}};if(e.input){let e=p();if(!e||e.length<1)throw TypeError("Input too short");if(!n.isBuffer(d().output))throw TypeError("Input is invalid");o(d())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==r)throw TypeError("Network mismatch");if(e.input){let t=d();if(e.redeem.output&&!e.redeem.output.equals(t.output))throw TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(t.input))throw TypeError("Redeem.input mismatch")}o(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!(0,a.stacksEqual)(e.redeem.witness,e.witness))throw TypeError("Witness and redeem.witness mismatch")}return Object.assign(f,e)}t.p2sh=f},10079:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=void 0;let n=r(48764),i=r(74378),o=r(73357),s=r(41838),a=r(66379),u=r(12227),l=r(52691),c=r(27715),f=r(95488),h=o.OPS,p=1,d=80;function y(e,t){if(!e.address&&!e.output&&!e.pubkey&&!e.internalPubkey&&!(e.witness&&e.witness.length>1))throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,s.typeforce)({address:s.typeforce.maybe(s.typeforce.String),input:s.typeforce.maybe(s.typeforce.BufferN(0)),network:s.typeforce.maybe(s.typeforce.Object),output:s.typeforce.maybe(s.typeforce.BufferN(34)),internalPubkey:s.typeforce.maybe(s.typeforce.BufferN(32)),hash:s.typeforce.maybe(s.typeforce.BufferN(32)),pubkey:s.typeforce.maybe(s.typeforce.BufferN(32)),signature:s.typeforce.maybe(s.typeforce.anyOf(s.typeforce.BufferN(64),s.typeforce.BufferN(65))),witness:s.typeforce.maybe(s.typeforce.arrayOf(s.typeforce.Buffer)),scriptTree:s.typeforce.maybe(s.isTaptree),redeem:s.typeforce.maybe({output:s.typeforce.maybe(s.typeforce.Buffer),redeemVersion:s.typeforce.maybe(s.typeforce.Number),witness:s.typeforce.maybe(s.typeforce.arrayOf(s.typeforce.Buffer))}),redeemVersion:s.typeforce.maybe(s.typeforce.Number)},e);let r=l.value(()=>(0,f.fromBech32)(e.address)),y=l.value(()=>{if(e.witness&&e.witness.length)return e.witness.length>=2&&e.witness[e.witness.length-1][0]===d?e.witness.slice(0,-1):e.witness.slice()}),g=l.value(()=>e.scriptTree?(0,u.toHashTree)(e.scriptTree):e.hash?{hash:e.hash}:void 0),m=e.network||i.bitcoin,b={name:"p2tr",network:m};if(l.prop(b,"address",()=>{if(!b.pubkey)return;let e=c.bech32m.toWords(b.pubkey);return e.unshift(p),c.bech32m.encode(m.bech32,e)}),l.prop(b,"hash",()=>{let e=g();if(e)return e.hash;let t=y();if(t&&t.length>1){let e=t[t.length-1],r=e[0]&s.TAPLEAF_VERSION_MASK,n=t[t.length-2],i=(0,u.tapleafHash)({output:n,version:r});return(0,u.rootHashFromPath)(e,i)}return null}),l.prop(b,"output",()=>{if(b.pubkey)return o.compile([h.OP_1,b.pubkey])}),l.prop(b,"redeemVersion",()=>e.redeemVersion?e.redeemVersion:e.redeem&&void 0!==e.redeem.redeemVersion&&null!==e.redeem.redeemVersion?e.redeem.redeemVersion:u.LEAF_VERSION_TAPSCRIPT),l.prop(b,"redeem",()=>{let e=y();if(e&&!(e.length<2))return{output:e[e.length-2],witness:e.slice(0,-2),redeemVersion:e[e.length-1][0]&s.TAPLEAF_VERSION_MASK}}),l.prop(b,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return r().data;if(b.internalPubkey){let e=(0,u.tweakKey)(b.internalPubkey,b.hash);if(e)return e.x}}),l.prop(b,"internalPubkey",()=>{if(e.internalPubkey)return e.internalPubkey;let t=y();if(t&&t.length>1)return t[t.length-1].slice(1,33)}),l.prop(b,"signature",()=>{if(e.signature)return e.signature;let t=y();if(t&&1===t.length)return t[0]}),l.prop(b,"witness",()=>{if(e.witness)return e.witness;let t=g();if(t&&e.redeem&&e.redeem.output&&e.internalPubkey){let r=(0,u.tapleafHash)({output:e.redeem.output,version:b.redeemVersion}),i=(0,u.findScriptPath)(t,r);if(!i)return;let o=(0,u.tweakKey)(e.internalPubkey,t.hash);if(!o)return;let s=n.Buffer.concat([n.Buffer.from([b.redeemVersion|o.parity]),e.internalPubkey].concat(i));return[e.redeem.output,s]}if(e.signature)return[e.signature]}),t.validate){let t=n.Buffer.from([]);if(e.address){if(m&&m.bech32!==r().prefix)throw TypeError("Invalid prefix or Network mismatch");if(r().version!==p)throw TypeError("Invalid address version");if(32!==r().data.length)throw TypeError("Invalid address data");t=r().data}if(e.pubkey){if(t.length>0&&!t.equals(e.pubkey))throw TypeError("Pubkey mismatch");t=e.pubkey}if(e.output){if(34!==e.output.length||e.output[0]!==h.OP_1||32!==e.output[1])throw TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw TypeError("Pubkey mismatch");t=e.output.slice(2)}if(e.internalPubkey){let r=(0,u.tweakKey)(e.internalPubkey,b.hash);if(t.length>0&&!t.equals(r.x))throw TypeError("Pubkey mismatch");t=r.x}if(t&&t.length&&!(0,a.getEccLib)().isXOnlyPoint(t))throw TypeError("Invalid pubkey for p2tr");let i=g();if(e.hash&&i&&!e.hash.equals(i.hash))throw TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&i){let t=(0,u.tapleafHash)({output:e.redeem.output,version:b.redeemVersion});if(!(0,u.findScriptPath)(i,t))throw TypeError("Redeem script not in tree")}let l=y();if(e.redeem&&b.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==b.redeem.redeemVersion)throw TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(0===o.decompile(e.redeem.output).length)throw TypeError("Redeem.output is invalid");if(b.redeem.output&&!e.redeem.output.equals(b.redeem.output))throw TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&b.redeem.witness&&!(0,s.stacksEqual)(e.redeem.witness,b.redeem.witness))throw TypeError("Redeem.witness and witness mismatch")}if(l&&l.length){if(1===l.length){if(e.signature&&!e.signature.equals(l[0]))throw TypeError("Signature mismatch")}else{let r=l[l.length-1];if(r.length<33)throw TypeError(`The control-block length is too small. Got ${r.length}, expected min 33.`);if((r.length-33)%32!=0)throw TypeError(`The control-block length of ${r.length} is incorrect!`);let n=(r.length-33)/32;if(n>128)throw TypeError(`The script path is too long. Got ${n}, expected max 128.`);let i=r.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(i))throw TypeError("Internal pubkey mismatch");if(!(0,a.getEccLib)().isXOnlyPoint(i))throw TypeError("Invalid internalPubkey for p2tr witness");let o=r[0]&s.TAPLEAF_VERSION_MASK,c=l[l.length-2],f=(0,u.tapleafHash)({output:c,version:o}),h=(0,u.rootHashFromPath)(r,f),p=(0,u.tweakKey)(i,h);if(!p)throw TypeError("Invalid outputKey for p2tr witness");if(t.length&&!t.equals(p.x))throw TypeError("Pubkey mismatch for p2tr witness");if(p.parity!==(1&r[0]))throw Error("Incorrect parity")}}}return Object.assign(b,e)}t.p2tr=y},18810:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2wpkh=void 0;let i=r(5525),o=r(74378),s=r(73357),a=r(41838),u=r(52691),l=r(27715),c=s.OPS,f=n.alloc(0);function h(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.witness)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),input:a.typeforce.maybe(a.typeforce.BufferN(0)),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.BufferN(22)),pubkey:a.typeforce.maybe(a.isPoint),signature:a.typeforce.maybe(s.isCanonicalScriptSignature),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);let r=u.value(()=>{let t=l.bech32.decode(e.address),r=t.words.shift(),i=l.bech32.fromWords(t.words);return{version:r,prefix:t.prefix,data:n.from(i)}}),h=e.network||o.bitcoin,p={name:"p2wpkh",network:h};if(u.prop(p,"address",()=>{if(!p.hash)return;let e=l.bech32.toWords(p.hash);return e.unshift(0),l.bech32.encode(h.bech32,e)}),u.prop(p,"hash",()=>e.output?e.output.slice(2,22):e.address?r().data:e.pubkey||p.pubkey?i.hash160(e.pubkey||p.pubkey):void 0),u.prop(p,"output",()=>{if(p.hash)return s.compile([c.OP_0,p.hash])}),u.prop(p,"pubkey",()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0),u.prop(p,"signature",()=>{if(e.witness)return e.witness[0]}),u.prop(p,"input",()=>{if(p.witness)return f}),u.prop(p,"witness",()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]}),t.validate){let t=n.from([]);if(e.address){if(h&&h.bech32!==r().prefix)throw TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw TypeError("Invalid address version");if(20!==r().data.length)throw TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==c.OP_0||20!==e.output[1])throw TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){let r=i.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");if(t=r,!(0,a.isPoint)(e.pubkey)||33!==e.pubkey.length)throw TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw TypeError("Witness is invalid");if(!s.isCanonicalScriptSignature(e.witness[0]))throw TypeError("Witness has invalid signature");if(!(0,a.isPoint)(e.witness[1])||33!==e.witness[1].length)throw TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw TypeError("Pubkey mismatch");let r=i.hash160(e.witness[1]);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch")}}return Object.assign(p,e)}t.p2wpkh=h},82401:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2wsh=void 0;let i=r(5525),o=r(74378),s=r(73357),a=r(41838),u=r(52691),l=r(27715),c=s.OPS,f=n.alloc(0);function h(e){return!!(n.isBuffer(e)&&65===e.length&&4===e[0]&&(0,a.isPoint)(e))}function p(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.witness)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(32)),output:a.typeforce.maybe(a.typeforce.BufferN(34)),redeem:a.typeforce.maybe({input:a.typeforce.maybe(a.typeforce.Buffer),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),input:a.typeforce.maybe(a.typeforce.BufferN(0)),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);let r=u.value(()=>{let t=l.bech32.decode(e.address),r=t.words.shift(),i=l.bech32.fromWords(t.words);return{version:r,prefix:t.prefix,data:n.from(i)}}),p=u.value(()=>s.decompile(e.redeem.input)),d=e.network;d||(d=e.redeem&&e.redeem.network||o.bitcoin);let y={network:d};if(u.prop(y,"address",()=>{if(!y.hash)return;let e=l.bech32.toWords(y.hash);return e.unshift(0),l.bech32.encode(d.bech32,e)}),u.prop(y,"hash",()=>e.output?e.output.slice(2):e.address?r().data:y.redeem&&y.redeem.output?i.sha256(y.redeem.output):void 0),u.prop(y,"output",()=>{if(y.hash)return s.compile([c.OP_0,y.hash])}),u.prop(y,"redeem",()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:f,witness:e.witness.slice(0,-1)}}),u.prop(y,"input",()=>{if(y.witness)return f}),u.prop(y,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){let t=s.toStack(p());return y.redeem=Object.assign({witness:t},e.redeem),y.redeem.input=f,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),u.prop(y,"name",()=>{let e=["p2wsh"];return void 0!==y.redeem&&void 0!==y.redeem.name&&e.push(y.redeem.name),e.join("-")}),t.validate){let t=n.from([]);if(e.address){if(r().prefix!==d.bech32)throw TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw TypeError("Invalid address version");if(32!==r().data.length)throw TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==c.OP_0||32!==e.output[1])throw TypeError("Output is invalid");let r=e.output.slice(2);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");t=r}if(e.redeem){if(e.redeem.network&&e.redeem.network!==d)throw TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw TypeError("Ambiguous witness source");if(e.redeem.output){let r=s.decompile(e.redeem.output);if(!r||r.length<1)throw TypeError("Redeem.output is invalid");if(e.redeem.output.byteLength>3600)throw TypeError("Redeem.output unspendable if larger than 3600 bytes");if(s.countNonPushOnlyOPs(r)>201)throw TypeError("Redeem.output unspendable with more than 201 non-push ops");let n=i.sha256(e.redeem.output);if(t.length>0&&!t.equals(n))throw TypeError("Hash mismatch");t=n}if(e.redeem.input&&!s.isPushOnly(p()))throw TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!(0,a.stacksEqual)(e.witness,e.redeem.witness))throw TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&p().some(h)||e.redeem.output&&(s.decompile(e.redeem.output)||[]).some(h))throw TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){let t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(t))throw TypeError("Witness and redeem.output mismatch");if(e.witness.some(h)||(s.decompile(t)||[]).some(h))throw TypeError("Witness contains uncompressed pubkey")}}return Object.assign(y,e)}t.p2wsh=p},99930:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Psbt=void 0;let i=r(95011),o=r(3493),s=r(96403),a=r(95488),u=r(9357),l=r(74378),c=r(84972),f=r(12227),h=r(73357),p=r(82737),d=r(23064),y=r(87929),g={network:l.bitcoin,maximumFeeRate:5e3};class m{static fromBase64(e,t={}){let r=n.from(e,"base64");return this.fromBuffer(r,t)}static fromHex(e,t={}){let r=n.from(e,"hex");return this.fromBuffer(r,t)}static fromBuffer(e,t={}){let r=new m(t,i.Psbt.fromBuffer(e,b));return C(r.__CACHE.__TX,r.__CACHE),r}constructor(e={},t=new i.Psbt(new w)){this.data=t,this.opts=Object.assign({},g,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);let r=(e,t,r,n)=>Object.defineProperty(e,t,{enumerable:r,writable:n});r(this,"__CACHE",!1,!0),r(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map(e=>({hash:(0,u.cloneBuffer)(e.hash),index:e.index,sequence:e.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(e=>{let t;try{t=(0,a.fromOutputScript)(e.script,this.opts.network)}catch(e){}return{script:(0,u.cloneBuffer)(e.script),value:e.value,address:t}})}combine(...e){return this.data.combine(...e.map(e=>e.data)),this}clone(){let e=m.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){I(e),this.opts.maximumFeeRate=e}setVersion(e){I(e),O(this.data.inputs,"setVersion");let t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){I(e),O(this.data.inputs,"setLocktime");let t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){I(t),O(this.data.inputs,"setInputSequence");let r=this.__CACHE;if(r.__TX.ins.length<=e)throw Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach(e=>this.addInput(e)),this}addInput(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,d.checkTaprootInputFields)(e,e,"addInput"),O(this.data.inputs,"addInput"),e.witnessScript&&ef(e.witnessScript);let t=this.__CACHE;this.data.addInput(e);let r=t.__TX.ins[t.__TX.ins.length-1];R(t,r);let n=this.data.inputs.length-1,i=this.data.inputs[n];return i.nonWitnessUtxo&&Q(this.__CACHE,i,n),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach(e=>this.addOutput(e)),this}addOutput(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");O(this.data.inputs,"addOutput");let{address:t}=e;if("string"==typeof t){let{network:r}=this.opts,n=(0,a.toOutputScript)(t,r);e=Object.assign({},e,{script:n})}(0,d.checkTaprootOutputFields)(e,e,"addOutput");let r=this.__CACHE;return this.data.addOutput(e),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(S))throw Error("Not finalized");let t=this.__CACHE;if(e||A(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;let r=t.__TX.clone();return Z(this.data.inputs,r,t,!0),r}getFeeRate(){return D("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return D("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,s.checkForInput)(this.data.inputs,0),ep(this.data.inputs.length).forEach(e=>this.finalizeInput(e)),this}finalizeInput(e,t){let r=(0,s.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(r)?this._finalizeTaprootInput(e,r,void 0,t):this._finalizeInput(e,r,t)}finalizeTaprootInput(e,t,r=d.tapScriptFinalizer){let n=(0,s.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(n))return this._finalizeTaprootInput(e,n,t,r);throw Error(`Cannot finalize input #${e}. Not Taproot.`)}_finalizeInput(e,t,r=L){let{script:n,isP2SH:i,isP2WSH:o,isSegwit:s}=$(e,t,this.__CACHE);if(!n)throw Error(`No script found for input #${e}`);P(t);let{finalScriptSig:a,finalScriptWitness:u}=r(e,t,n,s,i,o);if(a&&this.data.updateInput(e,{finalScriptSig:a}),u&&this.data.updateInput(e,{finalScriptWitness:u}),!a&&!u)throw Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}_finalizeTaprootInput(e,t,r,n=d.tapScriptFinalizer){if(!t.witnessUtxo)throw Error(`Cannot finalize input #${e}. Missing withness utxo.`);if(t.tapKeySig){let r=c.p2tr({output:t.witnessUtxo.script,signature:t.tapKeySig}),n=(0,y.witnessStackToScriptWitness)(r.witness);this.data.updateInput(e,{finalScriptWitness:n})}else{let{finalScriptWitness:i}=n(e,t,r);this.data.updateInput(e,{finalScriptWitness:i})}return this.data.clearFinalizedInput(e),this}getInputType(e){let t=(0,s.checkForInput)(this.data.inputs,e),r=ec(et(e,t,this.__CACHE),e,"input",t.redeemScript||eo(t.finalScriptSig),t.witnessScript||es(t.finalScriptWitness));return("raw"===r.type?"":r.type+"-")+eh(r.meaningfulScript)}inputHasPubkey(e,t){return en(t,(0,s.checkForInput)(this.data.inputs,e),e,this.__CACHE)}inputHasHDKey(e,t){let r=(0,s.checkForInput)(this.data.inputs,e),n=T(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}outputHasPubkey(e,t){return ei(t,(0,s.checkForOutput)(this.data.outputs,e),e,this.__CACHE)}outputHasHDKey(e,t){let r=(0,s.checkForOutput)(this.data.outputs,e),n=T(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}validateSignaturesOfAllInputs(e){return(0,s.checkForInput)(this.data.inputs,0),ep(this.data.inputs.length).map(t=>this.validateSignaturesOfInput(t,e)).reduce((e,t)=>!0===t&&e,!0)}validateSignaturesOfInput(e,t,r){let n=this.data.inputs[e];return(0,d.isTaprootInput)(n)?this.validateSignaturesOfTaprootInput(e,t,r):this._validateSignaturesOfInput(e,t,r)}_validateSignaturesOfInput(e,t,r){let n,i,o;let s=this.data.inputs[e],a=(s||{}).partialSig;if(!s||!a||a.length<1)throw Error("No signatures to validate");if("function"!=typeof t)throw Error("Need validator function to validate signatures");let u=r?a.filter(e=>e.pubkey.equals(r)):a;if(u.length<1)throw Error("No signatures for this pubkey");let l=[];for(let r of u){let a=h.signature.decode(r.signature),{hash:u,script:c}=o!==a.hashType?F(e,Object.assign({},s,{sighashType:a.hashType}),this.__CACHE,!0):{hash:n,script:i};o=a.hashType,n=u,i=c,k(r.pubkey,c,"verify"),l.push(t(r.pubkey,u,a.signature))}return l.every(e=>!0===e)}validateSignaturesOfTaprootInput(e,t,r){let n=this.data.inputs[e],i=(n||{}).tapKeySig,o=(n||{}).tapScriptSig;if(!n&&!i&&!(o&&!o.length))throw Error("No signatures to validate");if("function"!=typeof t)throw Error("Need validator function to validate signatures");let s=(r=r&&(0,d.toXOnly)(r))?W(e,n,this.data.inputs,r,this.__CACHE):j(e,n,this.data.inputs,this.__CACHE);if(!s.length)throw Error("No signatures for this pubkey");let a=s.find(e=>!e.leafHash),u=0;if(i&&a){if(!t(a.pubkey,a.hash,K(i)))return!1;u++}if(o)for(let e of o){let r=s.find(t=>e.pubkey.equals(t.pubkey));if(r){if(!t(e.pubkey,r.hash,K(e.signature)))return!1;u++}}return u>0}signAllInputsHD(e,t=[p.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw Error("Need HDSigner to sign input");let r=[];for(let n of ep(this.data.inputs.length))try{this.signInputHD(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every(e=>!1===e))throw Error("No inputs were signed");return this}signAllInputsHDAsync(e,t=[p.Transaction.SIGHASH_ALL]){return new Promise((r,n)=>{if(!e||!e.publicKey||!e.fingerprint)return n(Error("Need HDSigner to sign input"));let i=[],o=[];for(let r of ep(this.data.inputs.length))o.push(this.signInputHDAsync(r,e,t).then(()=>{i.push(!0)},()=>{i.push(!1)}));return Promise.all(o).then(()=>{if(i.every(e=>!1===e))return n(Error("No inputs were signed"));r()})})}signInputHD(e,t,r=[p.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw Error("Need HDSigner to sign input");return z(e,this.data.inputs,t).forEach(t=>this.signInput(e,t,r)),this}signInputHDAsync(e,t,r=[p.Transaction.SIGHASH_ALL]){return new Promise((n,i)=>t&&t.publicKey&&t.fingerprint?Promise.all(z(e,this.data.inputs,t).map(t=>this.signInputAsync(e,t,r))).then(()=>{n()}).catch(i):i(Error("Need HDSigner to sign input")))}signAllInputs(e,t){if(!e||!e.publicKey)throw Error("Need Signer to sign input");let r=[];for(let n of ep(this.data.inputs.length))try{this.signInput(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every(e=>!1===e))throw Error("No inputs were signed");return this}signAllInputsAsync(e,t){return new Promise((r,n)=>{if(!e||!e.publicKey)return n(Error("Need Signer to sign input"));let i=[],o=[];for(let[r]of this.data.inputs.entries())o.push(this.signInputAsync(r,e,t).then(()=>{i.push(!0)},()=>{i.push(!1)}));return Promise.all(o).then(()=>{if(i.every(e=>!1===e))return n(Error("No inputs were signed"));r()})})}signInput(e,t,r){if(!t||!t.publicKey)throw Error("Need Signer to sign input");let n=(0,s.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(n)?this._signTaprootInput(e,n,t,void 0,r):this._signInput(e,t,r)}signTaprootInput(e,t,r,n){if(!t||!t.publicKey)throw Error("Need Signer to sign input");let i=(0,s.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(i))return this._signTaprootInput(e,i,t,r,n);throw Error(`Input #${e} is not of type Taproot.`)}_signInput(e,t,r=[p.Transaction.SIGHASH_ALL]){let{hash:n,sighashType:i}=M(this.data.inputs,e,t.publicKey,this.__CACHE,r),o=[{pubkey:t.publicKey,signature:h.signature.encode(t.sign(n),i)}];return this.data.updateInput(e,{partialSig:o}),this}_signTaprootInput(e,t,r,n,i=[p.Transaction.SIGHASH_DEFAULT]){let o=this.checkTaprootHashesForSig(e,t,r,n,i),s=o.filter(e=>!e.leafHash).map(e=>(0,d.serializeTaprootSignature)(r.signSchnorr(e.hash),t.sighashType))[0],a=o.filter(e=>!!e.leafHash).map(e=>({pubkey:(0,d.toXOnly)(r.publicKey),signature:(0,d.serializeTaprootSignature)(r.signSchnorr(e.hash),t.sighashType),leafHash:e.leafHash}));return s&&this.data.updateInput(e,{tapKeySig:s}),a.length&&this.data.updateInput(e,{tapScriptSig:a}),this}signInputAsync(e,t,r){return Promise.resolve().then(()=>{if(!t||!t.publicKey)throw Error("Need Signer to sign input");let n=(0,s.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(n)?this._signTaprootInputAsync(e,n,t,void 0,r):this._signInputAsync(e,t,r)})}signTaprootInputAsync(e,t,r,n){return Promise.resolve().then(()=>{if(!t||!t.publicKey)throw Error("Need Signer to sign input");let i=(0,s.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(i))return this._signTaprootInputAsync(e,i,t,r,n);throw Error(`Input #${e} is not of type Taproot.`)})}_signInputAsync(e,t,r=[p.Transaction.SIGHASH_ALL]){let{hash:n,sighashType:i}=M(this.data.inputs,e,t.publicKey,this.__CACHE,r);return Promise.resolve(t.sign(n)).then(r=>{let n=[{pubkey:t.publicKey,signature:h.signature.encode(r,i)}];this.data.updateInput(e,{partialSig:n})})}async _signTaprootInputAsync(e,t,r,n,i=[p.Transaction.SIGHASH_DEFAULT]){let o=this.checkTaprootHashesForSig(e,t,r,n,i),s=[],a=o.filter(e=>!e.leafHash)[0];if(a){let e=Promise.resolve(r.signSchnorr(a.hash)).then(e=>({tapKeySig:(0,d.serializeTaprootSignature)(e,t.sighashType)}));s.push(e)}let u=o.filter(e=>!!e.leafHash);if(u.length){let e=u.map(e=>Promise.resolve(r.signSchnorr(e.hash)).then(n=>({tapScriptSig:[{pubkey:(0,d.toXOnly)(r.publicKey),signature:(0,d.serializeTaprootSignature)(n,t.sighashType),leafHash:e.leafHash}]})));s.push(...e)}return Promise.all(s).then(t=>{t.forEach(t=>this.data.updateInput(e,t))})}checkTaprootHashesForSig(e,t,r,n,i){if("function"!=typeof r.signSchnorr)throw Error(`Need Schnorr Signer to sign taproot input #${e}.`);let o=W(e,t,this.data.inputs,r.publicKey,this.__CACHE,n,i);if(!o||!o.length)throw Error(`Can not sign for input #${e} with the key ${r.publicKey.toString("hex")}`);return o}toBuffer(){return _(this.__CACHE),this.data.toBuffer()}toHex(){return _(this.__CACHE),this.data.toHex()}toBase64(){return _(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return t.witnessScript&&ef(t.witnessScript),(0,d.checkTaprootInputFields)(this.data.inputs[e],t,"updateInput"),this.data.updateInput(e,t),t.nonWitnessUtxo&&Q(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){let r=this.data.outputs[e];return(0,d.checkTaprootOutputFields)(r,t,"updateOutput"),this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}}t.Psbt=m;let b=e=>new w(e);class w{constructor(e=n.from([2,0,0,0,0,0,0,0,0,0])){this.tx=p.Transaction.fromBuffer(e),x(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(void 0===e.hash||void 0===e.index||!n.isBuffer(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw Error("Error adding input.");let t="string"==typeof e.hash?(0,u.reverseBuffer)(n.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}addOutput(e){if(void 0===e.script||void 0===e.value||!n.isBuffer(e.script)||"number"!=typeof e.value)throw Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}}function v(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return E(1,e.partialSig);case"multisig":let n=c.p2ms({output:t});return E(n.m,e.partialSig,n.pubkeys);default:return!1}}function _(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw Error("Not BIP174 compliant, can not export")}function E(e,t,r){let n;if(!t)return!1;if((n=r?r.map(e=>{let r=ea(e);return t.find(e=>e.pubkey.equals(r))}).filter(e=>!!e):t).length>e)throw Error("Too many signatures");return n.length===e}function S(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function T(e){return t=>!!(t.masterFingerprint.equals(e.fingerprint)&&e.derivePath(t.path).publicKey.equals(t.pubkey))}function I(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw Error("Invalid 32 bit integer")}function A(e,t,r){let n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=n*i;if(n>=r.maximumFeeRate)throw Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}function O(e,t){e.forEach(e=>{if((0,d.isTaprootInput)(e)?(0,d.checkTaprootInputForSigs)(e,t):(0,y.checkInputForSig)(e,t))throw Error("Can not modify transaction, signatures exist.")})}function P(e){if(!e.sighashType||!e.partialSig)return;let{partialSig:t,sighashType:r}=e;t.forEach(e=>{let{hashType:t}=h.signature.decode(e.signature);if(r!==t)throw Error("Signature sighash does not match input sighash type")})}function k(e,t,r){if(!(0,y.pubkeyInScript)(e,t))throw Error(`Can not ${r} for this input with the key ${e.toString("hex")}`)}function x(e){if(!e.ins.every(e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length))throw Error("Format Error: Transaction ScriptSigs are not empty")}function C(e,t){e.ins.forEach(e=>{R(t,e)})}function R(e,t){let r=(0,u.reverseBuffer)(n.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function B(e,t){return(r,n,i,o)=>{let s=e({redeem:{output:i}}).output;if(!n.equals(s))throw Error(`${t} for ${o} #${r} doesn't match the scriptPubKey in the prevout`)}}let U=B(c.p2sh,"Redeem script"),N=B(c.p2wsh,"Witness script");function D(e,t,r,n){let i;if(!r.every(S))throw Error(`PSBT must be finalized to calculate ${t}`);if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;let o=!0;return(n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,o=!1):i=n.__TX.clone(),Z(r,i,n,o),"__FEE_RATE"===e)?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function L(e,t,r,n,i,o){let s=eh(r);if(!v(t,r,s))throw Error(`Can not finalize input #${e}`);return H(r,s,t.partialSig,n,i,o)}function H(e,t,r,n,i,o){let s,a;let u=G(e,t,r),l=o?c.p2wsh({redeem:u}):null,f=i?c.p2sh({redeem:l||u}):null;return n?(a=l?(0,y.witnessStackToScriptWitness)(l.witness):(0,y.witnessStackToScriptWitness)(u.witness),f&&(s=f.input)):s=f?f.input:u.input,{finalScriptSig:s,finalScriptWitness:a}}function M(e,t,r,n,i){let o=(0,s.checkForInput)(e,t),{hash:a,sighashType:u,script:l}=F(t,o,n,!1,i);return k(r,l,"sign"),{hash:a,sighashType:u}}function F(e,t,r,n,i){let o,s;let a=r.__TX,u=t.sighashType||p.Transaction.SIGHASH_ALL;if(q(u,i),t.nonWitnessUtxo){let n=ee(r,t,e),i=a.ins[e].hash,o=n.getHash();if(!i.equals(o))throw Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);let u=a.ins[e].index;s=n.outs[u]}else if(t.witnessUtxo)s=t.witnessUtxo;else throw Error("Need a Utxo input item for signing");let{meaningfulScript:l,type:f}=ec(s.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(f)>=0)o=a.hashForWitnessV0(e,l,s.value,u);else if((0,y.isP2WPKH)(l)){let t=c.p2pkh({hash:l.slice(2)}).output;o=a.hashForWitnessV0(e,t,s.value,u)}else{if(void 0===t.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw Error(`Input #${e} has witnessUtxo but non-segwit script: ${l.toString("hex")}`);n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecessor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),o=a.hashForSignature(e,l,u)}return{script:l,sighashType:u,hash:o}}function j(e,t,r,n){let i=[];if(t.tapInternalKey){let r=V(e,t,n);r&&i.push(r)}if(t.tapScriptSig){let e=t.tapScriptSig.map(e=>e.pubkey);i.push(...e)}return i.map(i=>W(e,t,r,i,n)).flat()}function V(e,t,r){let{script:n}=er(e,t,r);return(0,y.isP2TR)(n)?n.subarray(2,34):null}function K(e){return 64===e.length?e:e.subarray(0,64)}function W(e,t,r,i,o,s,a){let u=o.__TX,l=t.sighashType||p.Transaction.SIGHASH_DEFAULT;q(l,a);let c=r.map((e,t)=>er(t,e,o)),h=c.map(e=>e.script),g=c.map(e=>e.value),m=[];if(t.tapInternalKey&&!s){let r=V(e,t,o)||n.from([]);if((0,d.toXOnly)(i).equals(r)){let t=u.hashForWitnessV1(e,h,g,l);m.push({pubkey:i,hash:t})}}let b=(t.tapLeafScript||[]).filter(e=>(0,y.pubkeyInScript)(i,e.script)).map(e=>Object.assign({hash:(0,f.tapleafHash)({output:e.script,version:e.leafVersion})},e)).filter(e=>!s||s.equals(e.hash)).map(t=>({pubkey:i,hash:u.hashForWitnessV1(e,h,g,l,t.hash),leafHash:t.hash}));return m.concat(b)}function q(e,t){if(t&&0>t.indexOf(e)){let t=J(e);throw Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${t}`)}}function G(e,t,r){let n;switch(t){case"multisig":let i=Y(e,r);n=c.p2ms({output:e,signatures:i});break;case"pubkey":n=c.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=c.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=c.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature})}return n}function $(e,t,r){let n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){let o=ee(r,t,e),s=n.ins[e].index;i.script=o.outs[s].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||(0,y.isP2WPKH)(i.script))&&(i.isSegwit=!0),i}function z(e,t,r){let n=(0,s.checkForInput)(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw Error("Need bip32Derivation to sign with HD");let i=n.bip32Derivation.map(e=>e.masterFingerprint.equals(r.fingerprint)?e:void 0).filter(e=>!!e);if(0===i.length)throw Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(e=>{let t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw Error("pubkey did not match bip32Derivation");return t})}function Y(e,t){return c.p2ms({output:e}).pubkeys.map(e=>(t.filter(t=>t.pubkey.equals(e))[0]||{}).signature).filter(e=>!!e)}function X(e){let t=0;function r(r){return t+=r,e.slice(t-r,t)}function n(){let r=o.decode(e,t);return t+=o.decode.bytes,r}function i(){return r(n())}return function(){let e=n(),t=[];for(let r=0;r<e;r++)t.push(i());return t}()}function J(e){let t=e&p.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case p.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case p.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case p.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}function Q(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;let n=p.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;let i=e,o=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){let e=i.__NON_WITNESS_UTXO_BUF_CACHE[o],t=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(void 0!==e)return e;{let e=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e,e}},set(e){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e}})}function Z(e,t,r,n){let i=0;e.forEach((e,o)=>{if(n&&e.finalScriptSig&&(t.ins[o].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[o].witness=X(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){let n=ee(r,e,o),s=t.ins[o].index,a=n.outs[s];i+=a.value}});let o=t.outs.reduce((e,t)=>e+t.value,0),s=i-o;if(s<0)throw Error("Outputs are spending more than Inputs");let a=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(s/a)}function ee(e,t,r){let n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||Q(e,t,r),n[r]}function et(e,t,r){let{script:n}=er(e,t,r);return n}function er(e,t,r){if(void 0!==t.witnessUtxo)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(void 0!==t.nonWitnessUtxo){let n=ee(r,t,e).outs[r.__TX.ins[e].index];return{script:n.script,value:n.value}}throw Error("Can't find pubkey in input without Utxo data")}function en(e,t,r,n){let{meaningfulScript:i}=ec(et(r,t,n),r,"input",t.redeemScript,t.witnessScript);return(0,y.pubkeyInScript)(e,i)}function ei(e,t,r,n){let{meaningfulScript:i}=ec(n.__TX.outs[r].script,r,"output",t.redeemScript,t.witnessScript);return(0,y.pubkeyInScript)(e,i)}function eo(e){if(!e)return;let t=h.decompile(e);if(!t)return;let r=t[t.length-1];if(!(!n.isBuffer(r)||eu(r)||el(r))&&h.decompile(r))return r}function es(e){if(!e)return;let t=X(e),r=t[t.length-1];if(!eu(r)&&h.decompile(r))return r}function ea(e){if(65===e.length){let t=1&e[64],r=e.slice(0,33);return r[0]=2|t,r}return e.slice()}function eu(e){return 33===e.length&&h.isCanonicalPubKey(e)}function el(e){return h.isCanonicalScriptSignature(e)}function ec(e,t,r,n,i){let o;let s=(0,y.isP2SHScript)(e),a=s&&n&&(0,y.isP2WSHScript)(n),u=(0,y.isP2WSHScript)(e);if(s&&void 0===n)throw Error("scriptPubkey is P2SH but redeemScript missing");if((u||a)&&void 0===i)throw Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");return a?(o=i,U(t,e,n,r),N(t,n,i,r),ef(o)):u?(o=i,N(t,e,i,r),ef(o)):s?(o=n,U(t,e,n,r)):o=e,{meaningfulScript:o,type:a?"p2sh-p2wsh":s?"p2sh":u?"p2wsh":"raw"}}function ef(e){if((0,y.isP2WPKH)(e)||(0,y.isP2SHScript)(e))throw Error("P2WPKH or P2SH can not be contained within P2WSH")}function eh(e){return(0,y.isP2WPKH)(e)?"witnesspubkeyhash":(0,y.isP2PKH)(e)?"pubkeyhash":(0,y.isP2MS)(e)?"multisig":(0,y.isP2PK)(e)?"pubkey":"nonstandard"}function ep(e){return[...Array(e).keys()]}},23064:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.checkTaprootInputForSigs=t.tapTreeFromList=t.tapTreeToList=t.tweakInternalPubKey=t.checkTaprootOutputFields=t.checkTaprootInputFields=t.isTaprootOutput=t.isTaprootInput=t.serializeTaprootSignature=t.tapScriptFinalizer=t.toXOnly=void 0;let i=r(41838),o=r(82737),s=r(87929),a=r(12227),u=r(84972),l=r(87929),c=e=>32===e.length?e:e.slice(1,33);function f(e,t,r){let n=N(t,e,r);try{let e=B(t,n).concat(n.script).concat(n.controlBlock);return{finalScriptWitness:(0,s.witnessStackToScriptWitness)(e)}}catch(t){throw Error(`Can not finalize taproot input #${e}: ${t}`)}}function h(e,t){let r=t?n.from([t]):n.from([]);return n.concat([e,r])}function p(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,s.isP2TR)(e.witnessUtxo.script))}function d(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,s.isP2TR)(t))}function y(e,t,r){k(e,t,r),C(e,t,r)}function g(e,t,r){x(e,t,r),m(e,t)}function m(e,t){if(!t.tapTree&&!t.tapInternalKey)return;let r=t.tapInternalKey||e.tapInternalKey,n=t.tapTree||e.tapTree;if(r){let{script:t}=e,i=b(r,n);if(t&&!t.equals(i))throw Error("Error adding output. Script or address missmatch.")}}function b(e,t){let r=t&&_(t.leaves),{output:n}=(0,u.p2tr)({internalPubkey:e,scriptTree:r});return n}function w(e,t){let r=t.tapInternalKey,n=r&&(0,a.tweakKey)(r,t.tapMerkleRoot);if(!n)throw Error(`Cannot tweak tap internal key for input #${e}. Public key: ${r&&r.toString("hex")}`);return n.x}function v(e){if(!(0,i.isTaptree)(e))throw Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return A(e)}function _(e=[]){return 1===e.length&&0===e[0].depth?{output:e[0].script,version:e[0].leafVersion}:O(e)}function E(e,t){return T(e).some(e=>(0,l.signatureBlocksAction)(e,S,t))}function S(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||o.Transaction.SIGHASH_DEFAULT}}function T(e){let t=[];if(e.tapKeySig&&t.push(e.tapKeySig),e.tapScriptSig&&t.push(...e.tapScriptSig.map(e=>e.signature)),!t.length){let r=I(e.finalScriptWitness);r&&t.push(r)}return t}function I(e){if(!e)return;let t=e.slice(2);if(64===t.length||65===t.length)return t}function A(e,t=[],r=0){if(r>a.MAX_TAPTREE_DEPTH)throw Error("Max taptree depth exceeded.");return e?((0,i.isTapleaf)(e)?t.push({depth:r,leafVersion:e.version||a.LEAF_VERSION_TAPSCRIPT,script:e.output}):(e[0]&&A(e[0],t,r+1),e[1]&&A(e[1],t,r+1)),t):[]}function O(e){let t;for(let r of e)if(!(t=P(r,t)))throw Error("No room left to insert tapleaf in tree");return t}function P(e,t,r=0){if(r>a.MAX_TAPTREE_DEPTH)throw Error("Max taptree depth exceeded.");if(e.depth===r)return t?void 0:{output:e.script,version:e.leafVersion};if((0,i.isTapleaf)(t))return;let n=P(e,t&&t[0],r+1);if(n)return[n,t&&t[1]];let o=P(e,t&&t[1],r+1);if(o)return[t&&t[0],o]}function k(e,t,r){let n=p(e)&&L(t),i=L(e)&&p(t),o=e===t&&p(t)&&L(t);if(n||i||o)throw Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function x(e,t,r){let n=d(e)&&L(t),i=L(e)&&d(t),o=e===t&&d(t)&&L(t);if(n||i||o)throw Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function C(e,t,r){if(t.tapMerkleRoot){let n=(t.tapLeafScript||[]).every(e=>R(e,t.tapMerkleRoot)),i=(e.tapLeafScript||[]).every(e=>R(e,t.tapMerkleRoot));if(!n||!i)throw Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot&&!(t.tapLeafScript||[]).every(t=>R(t,e.tapMerkleRoot)))throw Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}function R(e,t){if(!t)return!0;let r=(0,a.tapleafHash)({output:e.script,version:e.leafVersion});return(0,a.rootHashFromPath)(e.controlBlock,r).equals(t)}function B(e,t){let r=(0,a.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter(e=>e.leafHash.equals(r)).map(e=>U(t.script,e)).sort((e,t)=>t.positionInScript-e.positionInScript).map(e=>e.signature)}function U(e,t){return Object.assign({positionInScript:(0,s.pubkeyPositionInScript)(t.pubkey,e)},t)}function N(e,t,r){if(!e.tapScriptSig||!e.tapScriptSig.length)throw Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);let n=(e.tapLeafScript||[]).sort((e,t)=>e.controlBlock.length-t.controlBlock.length).find(t=>D(t,e.tapScriptSig,r));if(!n)throw Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return n}function D(e,t,r){let n=(0,a.tapleafHash)({output:e.script,version:e.leafVersion});return(!r||r.equals(n))&&void 0!==t.find(e=>e.leafHash.equals(n))}function L(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}t.toXOnly=c,t.tapScriptFinalizer=f,t.serializeTaprootSignature=h,t.isTaprootInput=p,t.isTaprootOutput=d,t.checkTaprootInputFields=y,t.checkTaprootOutputFields=g,t.tweakInternalPubKey=w,t.tapTreeToList=v,t.tapTreeFromList=_,t.checkTaprootInputForSigs=E},87929:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.signatureBlocksAction=t.checkInputForSig=t.pubkeyInScript=t.pubkeyPositionInScript=t.witnessStackToScriptWitness=t.isP2TR=t.isP2SHScript=t.isP2WSHScript=t.isP2WPKH=t.isP2PKH=t.isP2PK=t.isP2MS=void 0;let i=r(3493),o=r(73357),s=r(82737),a=r(5525),u=r(84972);function l(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}function c(e){let t=n.allocUnsafe(0);function r(e){t=n.concat([t,n.from(e)])}function o(e){let r=t.length,o=i.encodingLength(e);t=n.concat([t,n.allocUnsafe(o)]),i.encode(e,t,r)}function s(e){o(e.length),r(e)}return function(e){o(e.length),e.forEach(s)}(e),t}function f(e,t){let r=(0,a.hash160)(e),n=e.slice(1,33),i=o.decompile(t);if(null===i)throw Error("Unknown script error");return i.findIndex(t=>"number"!=typeof t&&(t.equals(e)||t.equals(r)||t.equals(n)))}function h(e,t){return -1!==f(e,t)}function p(e,t){return y(e).some(e=>d(e,o.signature.decode,t))}function d(e,t,r){let{hashType:n}=t(e),i=[];switch(n&s.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&n){case s.Transaction.SIGHASH_ALL:break;case s.Transaction.SIGHASH_SINGLE:case s.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}return -1===i.indexOf(r)}function y(e){let t=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=g(e)}else t=e.partialSig;return t.map(e=>e.signature)}function g(e){let t=e.finalScriptSig&&o.decompile(e.finalScriptSig)||[],r=e.finalScriptWitness&&o.decompile(e.finalScriptWitness)||[];return t.concat(r).filter(e=>n.isBuffer(e)&&o.isCanonicalScriptSignature(e)).map(e=>({signature:e}))}t.isP2MS=l(u.p2ms),t.isP2PK=l(u.p2pk),t.isP2PKH=l(u.p2pkh),t.isP2WPKH=l(u.p2wpkh),t.isP2WSHScript=l(u.p2wsh),t.isP2SHScript=l(u.p2sh),t.isP2TR=l(u.p2tr),t.witnessStackToScriptWitness=c,t.pubkeyPositionInScript=f,t.pubkeyInScript=h,t.checkInputForSig=p,t.signatureBlocksAction=d},79937:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.encodingLength=void 0;let n=r(47334);function i(e){return e<n.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}function o(e,t,r){let o=i(t);return 1===o?e.writeUInt8(t,r):2===o?(e.writeUInt8(n.OPS.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===o?(e.writeUInt8(n.OPS.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(n.OPS.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),o}function s(e,t){let r,i;let o=e.readUInt8(t);if(o<n.OPS.OP_PUSHDATA1)r=o,i=1;else if(o===n.OPS.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),i=2}else if(o===n.OPS.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(o!==n.OPS.OP_PUSHDATA4)throw Error("Unexpected opcode");r=e.readUInt32LE(t+1),i=5}return{opcode:o,number:r,size:i}}t.encodingLength=i,t.encode=o,t.decode=s},73357:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.signature=t.number=t.isCanonicalScriptSignature=t.isDefinedHashType=t.isCanonicalPubKey=t.toStack=t.fromASM=t.toASM=t.decompile=t.compile=t.countNonPushOnlyOPs=t.isPushOnly=t.OPS=void 0;let i=r(77617),o=r(47334);Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return o.OPS}});let s=r(79937),a=r(45815),u=r(24362),l=r(41838),{typeforce:c}=l,f=o.OPS.OP_RESERVED;function h(e){return l.Number(e)&&(e===o.OPS.OP_0||e>=o.OPS.OP_1&&e<=o.OPS.OP_16||e===o.OPS.OP_1NEGATE)}function p(e){return l.Buffer(e)||h(e)}function d(e){return l.Array(e)&&e.every(p)}function y(e){return e.length-e.filter(p).length}function g(e){if(0===e.length)return o.OPS.OP_0;if(1===e.length){if(e[0]>=1&&e[0]<=16)return f+e[0];if(129===e[0])return o.OPS.OP_1NEGATE}}function m(e){return n.isBuffer(e)}function b(e){return l.Array(e)}function w(e){return n.isBuffer(e)}function v(e){if(m(e))return e;c(l.Array,e);let t=e.reduce((e,t)=>w(t)?1===t.length&&void 0!==g(t)?e+1:e+s.encodingLength(t.length)+t.length:e+1,0),r=n.allocUnsafe(t),i=0;if(e.forEach(e=>{if(w(e)){let t=g(e);if(void 0!==t){r.writeUInt8(t,i),i+=1;return}i+=s.encode(r,e.length,i),e.copy(r,i),i+=e.length}else r.writeUInt8(e,i),i+=1}),i!==r.length)throw Error("Could not decode chunks");return r}function _(e){if(b(e))return e;c(l.Buffer,e);let t=[],r=0;for(;r<e.length;){let n=e[r];if(n>o.OPS.OP_0&&n<=o.OPS.OP_PUSHDATA4){let n=s.decode(e,r);if(null===n||(r+=n.size)+n.number>e.length)return null;let i=e.slice(r,r+n.number);r+=n.number;let o=g(i);void 0!==o?t.push(o):t.push(i)}else t.push(n),r+=1}return t}function E(e){if(m(e)&&(e=_(e)),!e)throw Error("Could not convert invalid chunks to ASM");return e.map(e=>{if(w(e)){let t=g(e);if(void 0===t)return e.toString("hex");e=t}return o.REVERSE_OPS[e]}).join(" ")}function S(e){return c(l.String,e),v(e.split(" ").map(e=>void 0!==o.OPS[e]?o.OPS[e]:(c(l.Hex,e),n.from(e,"hex"))))}function T(e){return c(d,e=_(e)),e.map(e=>w(e)?e:e===o.OPS.OP_0?n.allocUnsafe(0):a.encode(e-f))}function I(e){return l.isPoint(e)}function A(e){let t=-129&e;return t>0&&t<4}function O(e){return!!(n.isBuffer(e)&&A(e[e.length-1]))&&i.check(e.slice(0,-1))}t.isPushOnly=d,t.countNonPushOnlyOPs=y,t.compile=v,t.decompile=_,t.toASM=E,t.fromASM=S,t.toStack=T,t.isCanonicalPubKey=I,t.isDefinedHashType=A,t.isCanonicalScriptSignature=O,t.number=a,t.signature=u},45815:function(e,t,r){"use strict";var n=r(48764).Buffer;function i(e,t,r){t=t||4,r=void 0===r||r;let n=e.length;if(0===n)return 0;if(n>t)throw TypeError("Script number overflow");if(r&&(127&e[n-1])==0&&(n<=1||(128&e[n-2])==0))throw Error("Non-minimally encoded script number");if(5===n){let t=e.readUInt32LE(0),r=e.readUInt8(4);return 128&r?-((-129&r)*4294967296+t):4294967296*r+t}let i=0;for(let t=0;t<n;++t)i|=e[t]<<8*t;return 128&e[n-1]?-(i&~(128<<8*(n-1))):i}function o(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}function s(e){let t=Math.abs(e),r=o(t),i=n.allocUnsafe(r),s=e<0;for(let e=0;e<r;++e)i.writeUInt8(255&t,e),t>>=8;return 128&i[r-1]?i.writeUInt8(s?128:0,r-1):s&&(i[r-1]|=128),i}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0,t.decode=i,t.encode=s},24362:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0;let i=r(77617),o=r(73357),s=r(41838),{typeforce:a}=s,u=n.alloc(1,0);function l(e){let t=0;for(;0===e[t];)++t;return t===e.length?u:128&(e=e.slice(t))[0]?n.concat([u,e],1+e.length):e}function c(e){0===e[0]&&(e=e.slice(1));let t=n.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}function f(e){let t=e.readUInt8(e.length-1);if(!(0,o.isDefinedHashType)(t))throw Error("Invalid hashType "+t);let r=i.decode(e.slice(0,-1)),s=c(r.r),a=c(r.s);return{signature:n.concat([s,a],64),hashType:t}}function h(e,t){if(a({signature:s.BufferN(64),hashType:s.UInt8},{signature:e,hashType:t}),!(0,o.isDefinedHashType)(t))throw Error("Invalid hashType "+t);let r=n.allocUnsafe(1);r.writeUInt8(t,0);let u=l(e.slice(0,32)),c=l(e.slice(32,64));return n.concat([i.encode(u,c),r])}t.decode=f,t.encode=h},82737:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;let i=r(9357),o=r(5525),s=r(73357),a=r(73357),u=r(41838),{typeforce:l}=u;function c(e){let t=e.length;return i.varuint.encodingLength(t)+t}function f(e){let t=e.length;return i.varuint.encodingLength(t)+e.reduce((e,t)=>e+c(t),0)}let h=n.allocUnsafe(0),p=[],d=n.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),y=n.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),g={script:h,valueBuffer:n.from("ffffffffffffffff","hex")};function m(e){return void 0!==e.value}class b{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(e,t){let r=new i.BufferReader(e),n=new b;n.version=r.readInt32();let o=r.readUInt8(),s=r.readUInt8(),a=!1;o===b.ADVANCED_TRANSACTION_MARKER&&s===b.ADVANCED_TRANSACTION_FLAG?a=!0:r.offset-=2;let u=r.readVarInt();for(let e=0;e<u;++e)n.ins.push({hash:r.readSlice(32),index:r.readUInt32(),script:r.readVarSlice(),sequence:r.readUInt32(),witness:p});let l=r.readVarInt();for(let e=0;e<l;++e)n.outs.push({value:r.readUInt64(),script:r.readVarSlice()});if(a){for(let e=0;e<u;++e)n.ins[e].witness=r.readVector();if(!n.hasWitnesses())throw Error("Transaction has superfluous witness data")}if(n.locktime=r.readUInt32(),t)return n;if(r.offset!==e.length)throw Error("Transaction has unexpected data");return n}static fromHex(e){return b.fromBuffer(n.from(e,"hex"),!1)}static isCoinbaseHash(e){l(u.Hash256bit,e);for(let t=0;t<32;++t)if(0!==e[t])return!1;return!0}isCoinbase(){return 1===this.ins.length&&b.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,r,n){return l(u.tuple(u.Hash256bit,u.UInt32,u.maybe(u.UInt32),u.maybe(u.Buffer)),arguments),u.Null(r)&&(r=b.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||h,sequence:r,witness:p})-1}addOutput(e,t){return l(u.tuple(u.Buffer,u.Satoshi),arguments),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some(e=>0!==e.witness.length)}stripWitnesses(){this.ins.forEach(e=>{e.witness=p})}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){let t=e&&this.hasWitnesses();return(t?10:8)+i.varuint.encodingLength(this.ins.length)+i.varuint.encodingLength(this.outs.length)+this.ins.reduce((e,t)=>e+40+c(t.script),0)+this.outs.reduce((e,t)=>e+8+c(t.script),0)+(t?this.ins.reduce((e,t)=>e+f(t.witness),0):0)}clone(){let e=new b;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map(e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness})),e.outs=this.outs.map(e=>({script:e.script,value:e.value})),e}hashForSignature(e,t,r){if(l(u.tuple(u.UInt32,u.Buffer,u.Number),arguments),e>=this.ins.length)return y;let i=s.compile(s.decompile(t).filter(e=>e!==a.OPS.OP_CODESEPARATOR)),c=this.clone();if((31&r)===b.SIGHASH_NONE)c.outs=[],c.ins.forEach((t,r)=>{r!==e&&(t.sequence=0)});else if((31&r)===b.SIGHASH_SINGLE){if(e>=this.outs.length)return y;c.outs.length=e+1;for(let t=0;t<e;t++)c.outs[t]=g;c.ins.forEach((t,r)=>{r!==e&&(t.sequence=0)})}r&b.SIGHASH_ANYONECANPAY?(c.ins=[c.ins[e]],c.ins[0].script=i):(c.ins.forEach(e=>{e.script=h}),c.ins[e].script=i);let f=n.allocUnsafe(c.byteLength(!1)+4);return f.writeInt32LE(r,f.length-4),c.__toBuffer(f,0,!1),o.hash256(f)}hashForWitnessV1(e,t,r,s,a,f){if(l(u.tuple(u.UInt32,l.arrayOf(u.Buffer),l.arrayOf(u.Satoshi),u.UInt32),arguments),r.length!==this.ins.length||t.length!==this.ins.length)throw Error("Must supply prevout script and value for all inputs");let p=s===b.SIGHASH_DEFAULT?b.SIGHASH_ALL:s&b.SIGHASH_OUTPUT_MASK,d=(s&b.SIGHASH_INPUT_MASK)===b.SIGHASH_ANYONECANPAY,y=p===b.SIGHASH_NONE,g=p===b.SIGHASH_SINGLE,m=h,w=h,v=h,_=h,E=h;if(!d){let e=i.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(t=>{e.writeSlice(t.hash),e.writeUInt32(t.index)}),m=o.sha256(e.end()),e=i.BufferWriter.withCapacity(8*this.ins.length),r.forEach(t=>e.writeUInt64(t)),w=o.sha256(e.end()),e=i.BufferWriter.withCapacity(t.map(c).reduce((e,t)=>e+t)),t.forEach(t=>e.writeVarSlice(t)),v=o.sha256(e.end()),e=i.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(t=>e.writeUInt32(t.sequence)),_=o.sha256(e.end())}if(y||g){if(g&&e<this.outs.length){let t=this.outs[e],r=i.BufferWriter.withCapacity(8+c(t.script));r.writeUInt64(t.value),r.writeVarSlice(t.script),E=o.sha256(r.end())}}else{let e=this.outs.map(e=>8+c(e.script)).reduce((e,t)=>e+t),t=i.BufferWriter.withCapacity(e);this.outs.forEach(e=>{t.writeUInt64(e.value),t.writeVarSlice(e.script)}),E=o.sha256(t.end())}let S=(a?2:0)+(f?1:0),T=174-(d?49:0)-(y?32:0)+(f?32:0)+(a?37:0),I=i.BufferWriter.withCapacity(T);if(I.writeUInt8(s),I.writeInt32(this.version),I.writeUInt32(this.locktime),I.writeSlice(m),I.writeSlice(w),I.writeSlice(v),I.writeSlice(_),y||g||I.writeSlice(E),I.writeUInt8(S),d){let n=this.ins[e];I.writeSlice(n.hash),I.writeUInt32(n.index),I.writeUInt64(r[e]),I.writeVarSlice(t[e]),I.writeUInt32(n.sequence)}else I.writeUInt32(e);if(f){let e=i.BufferWriter.withCapacity(c(f));e.writeVarSlice(f),I.writeSlice(o.sha256(e.end()))}return g&&I.writeSlice(E),a&&(I.writeSlice(a),I.writeUInt8(0),I.writeUInt32(4294967295)),o.taggedHash("TapSighash",n.concat([n.from([0]),I.end()]))}hashForWitnessV0(e,t,r,s){let a;l(u.tuple(u.UInt32,u.Buffer,u.Satoshi,u.UInt32),arguments);let f=n.from([]),h=d,p=d,y=d;if(s&b.SIGHASH_ANYONECANPAY||(f=n.allocUnsafe(36*this.ins.length),a=new i.BufferWriter(f,0),this.ins.forEach(e=>{a.writeSlice(e.hash),a.writeUInt32(e.index)}),p=o.hash256(f)),s&b.SIGHASH_ANYONECANPAY||(31&s)===b.SIGHASH_SINGLE||(31&s)===b.SIGHASH_NONE||(f=n.allocUnsafe(4*this.ins.length),a=new i.BufferWriter(f,0),this.ins.forEach(e=>{a.writeUInt32(e.sequence)}),y=o.hash256(f)),(31&s)!==b.SIGHASH_SINGLE&&(31&s)!==b.SIGHASH_NONE){let e=this.outs.reduce((e,t)=>e+8+c(t.script),0);f=n.allocUnsafe(e),a=new i.BufferWriter(f,0),this.outs.forEach(e=>{a.writeUInt64(e.value),a.writeVarSlice(e.script)}),h=o.hash256(f)}else if((31&s)===b.SIGHASH_SINGLE&&e<this.outs.length){let t=this.outs[e];f=n.allocUnsafe(8+c(t.script)),(a=new i.BufferWriter(f,0)).writeUInt64(t.value),a.writeVarSlice(t.script),h=o.hash256(f)}f=n.allocUnsafe(156+c(t)),a=new i.BufferWriter(f,0);let g=this.ins[e];return a.writeInt32(this.version),a.writeSlice(p),a.writeSlice(y),a.writeSlice(g.hash),a.writeUInt32(g.index),a.writeVarSlice(t),a.writeUInt64(r),a.writeUInt32(g.sequence),a.writeSlice(h),a.writeUInt32(this.locktime),a.writeUInt32(s),o.hash256(f)}getHash(e){return e&&this.isCoinbase()?n.alloc(32,0):o.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return(0,i.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(e,t){return this.__toBuffer(e,t,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){l(u.tuple(u.Number,u.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){l(u.tuple(u.Number,[u.Buffer]),arguments),this.ins[e].witness=t}__toBuffer(e,t,r=!1){e||(e=n.allocUnsafe(this.byteLength(r)));let o=new i.BufferWriter(e,t||0);o.writeInt32(this.version);let s=r&&this.hasWitnesses();return(s&&(o.writeUInt8(b.ADVANCED_TRANSACTION_MARKER),o.writeUInt8(b.ADVANCED_TRANSACTION_FLAG)),o.writeVarInt(this.ins.length),this.ins.forEach(e=>{o.writeSlice(e.hash),o.writeUInt32(e.index),o.writeVarSlice(e.script),o.writeUInt32(e.sequence)}),o.writeVarInt(this.outs.length),this.outs.forEach(e=>{m(e)?o.writeUInt64(e.value):o.writeSlice(e.valueBuffer),o.writeVarSlice(e.script)}),s&&this.ins.forEach(e=>{o.writeVector(e.witness)}),o.writeUInt32(this.locktime),void 0!==t)?e.slice(t,o.offset):e}}t.Transaction=b,b.DEFAULT_SEQUENCE=4294967295,b.SIGHASH_DEFAULT=0,b.SIGHASH_ALL=1,b.SIGHASH_NONE=2,b.SIGHASH_SINGLE=3,b.SIGHASH_ANYONECANPAY=128,b.SIGHASH_OUTPUT_MASK=3,b.SIGHASH_INPUT_MASK=128,b.ADVANCED_TRANSACTION_MARKER=0,b.ADVANCED_TRANSACTION_FLAG=1},41838:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oneOf=t.Null=t.BufferN=t.Function=t.UInt32=t.UInt8=t.tuple=t.maybe=t.Hex=t.Buffer=t.String=t.Boolean=t.Array=t.Number=t.Hash256bit=t.Hash160bit=t.Buffer256bit=t.isTaptree=t.isTapleaf=t.TAPLEAF_VERSION_MASK=t.Satoshi=t.isPoint=t.stacksEqual=t.typeforce=void 0;let n=r(48764);t.typeforce=r(2401);let i=n.Buffer.alloc(32,0),o=n.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function s(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}function a(e){if(!n.Buffer.isBuffer(e)||e.length<33)return!1;let t=e[0],r=e.slice(1,33);if(0===r.compare(i)||r.compare(o)>=0)return!1;if((2===t||3===t)&&33===e.length)return!0;let s=e.slice(33);return!(0===s.compare(i)||s.compare(o)>=0)&&4===t&&65===e.length}t.stacksEqual=s,t.isPoint=a;let u=21*1e14;function l(e){return t.typeforce.UInt53(e)&&e<=u}function c(e){return!!(e&&"output"in e&&n.Buffer.isBuffer(e.output))&&(void 0===e.version||(e.version&t.TAPLEAF_VERSION_MASK)===e.version)}function f(e){return(0,t.Array)(e)?2===e.length&&e.every(e=>f(e)):c(e)}t.Satoshi=l,t.TAPLEAF_VERSION_MASK=254,t.isTapleaf=c,t.isTaptree=f,t.Buffer256bit=t.typeforce.BufferN(32),t.Hash160bit=t.typeforce.BufferN(20),t.Hash256bit=t.typeforce.BufferN(32),t.Number=t.typeforce.Number,t.Array=t.typeforce.Array,t.Boolean=t.typeforce.Boolean,t.String=t.typeforce.String,t.Buffer=t.typeforce.Buffer,t.Hex=t.typeforce.Hex,t.maybe=t.typeforce.maybe,t.tuple=t.typeforce.tuple,t.UInt8=t.typeforce.UInt8,t.UInt32=t.typeforce.UInt32,t.Function=t.typeforce.Function,t.BufferN=t.typeforce.BufferN,t.Null=t.typeforce.Null,t.oneOf=t.typeforce.oneOf},87790:function(e,t,r){var n=r(48764).Buffer;let i=r(58334),o=r(9941),s=r(8055),a=r(23482),u=r(17221),l=r(57795),c={P2WPKH:"p2wpkh",P2SH_P2WPKH:"p2sh(p2wpkh)"};function f(e){return a("sha256").update(e).digest()}function h(e){return f(f(e))}function p(e){return a("ripemd160").update(f(e)).digest()}function d(e,t,r,i){return void 0!==i?(t+=8,i===c.P2WPKH&&(t+=4)):r&&(t+=4),n.concat([n.alloc(1,t+27),e])}function y(e){if(65!==e.length)throw Error("Invalid signature length");let t=e.readUInt8(0)-27;if(t>15||t<0)throw Error("Invalid signature parameter");return{compressed:!!(12&t),segwitType:8&t?4&t?c.P2WPKH:c.P2SH_P2WPKH:null,recovery:3&t,signature:e.slice(1)}}function g(e,t){t=t||"\x18Bitcoin Signed Message:\n",n.isBuffer(t)||(t=n.from(t,"utf8")),n.isBuffer(e)||(e=n.from(e,"utf8"));let r=l.encodingLength(e.length),i=n.allocUnsafe(t.length+r+e.length);return t.copy(i,0),l.encode(e.length,i,t.length),e.copy(i,t.length+r),h(i)}function m(e,t){"object"==typeof e&&void 0===t&&(t=e,e=void 0);let{segwitType:r,extraEntropy:n}=t||{};if(r&&("string"==typeof r||r instanceof String)&&(r=r.toLowerCase()),r&&r!==c.P2SH_P2WPKH&&r!==c.P2WPKH)throw Error('Unrecognized segwitType: use "'+c.P2SH_P2WPKH+'" or "'+c.P2WPKH+'"');return{messagePrefixArg:e,segwitType:r,extraEntropy:n}}function b(e){return e&&"function"==typeof e.sign}function w(e,t,r,n,i){let{messagePrefixArg:o,segwitType:s,extraEntropy:a}=m(n,i),l=g(e,o),c=b(t)?t.sign(l,a):u.sign(l,t,{data:a});return d(c.signature,c.recovery,r,s)}function v(e,t,r,n,i){let o,s,a;return Promise.resolve().then(()=>{({messagePrefixArg:o,segwitType:s,extraEntropy:a}=m(n,i));let r=g(e,o);return b(t)?t.sign(r,a):u.sign(r,t,{data:a})}).then(e=>d(e.signature,e.recovery,r,s))}function _(e){return p(n.concat([n.from("0014","hex"),e]))}function E(e){let t=o.decode(e),r=o.fromWords(t.words.slice(1));return n.from(r)}function S(e,t,r,o,a){let l,f;n.isBuffer(r)||(r=n.from(r,"base64"));let h=y(r);if(a&&!h.compressed)throw Error("checkSegwitAlways can only be used with a compressed pubkey signature flagbyte");let d=g(e,o),m=p(u.recover(d,h.signature,h.recovery,h.compressed));if(h.segwitType)h.segwitType===c.P2SH_P2WPKH?(l=_(m),f=i.decode(t).slice(1)):(l=m,f=E(t));else if(a)try{return f=E(t),s(m,f)}catch(r){let e=_(m);return s(m,f=i.decode(t).slice(1))||s(e,f)}else l=m,f=i.decode(t).slice(1);return s(l,f)}e.exports={magicHash:g,sign:w,signAsync:v,verify:S}},9941:function(e){"use strict";for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={},n=0;n<t.length;n++){var i=t.charAt(n);if(void 0!==r[i])throw TypeError(i+" is ambiguous");r[i]=n}function o(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function s(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=o(t)^n>>5}for(r=0,t=o(t);r<e.length;++r){var i=e.charCodeAt(r);t=o(t)^31&i}return t}function a(e,r,n){if(n=n||90,e.length+7+r.length>n)throw TypeError("Exceeds length limit");var i=s(e=e.toLowerCase());if("string"==typeof i)throw Error(i);for(var a=e+"1",u=0;u<r.length;++u){var l=r[u];if(l>>5!=0)throw Error("Non 5-bit word");i=o(i)^l,a+=t.charAt(l)}for(u=0;u<6;++u)i=o(i);for(i^=1,u=0;u<6;++u){var c=i>>(5-u)*5&31;a+=t.charAt(c)}return a}function u(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var n=e.toLowerCase(),i=e.toUpperCase();if(e!==n&&e!==i)return"Mixed-case string "+e;var a=(e=n).lastIndexOf("1");if(-1===a)return"No separator character for "+e;if(0===a)return"Missing prefix for "+e;var u=e.slice(0,a),l=e.slice(a+1);if(l.length<6)return"Data too short";var c=s(u);if("string"==typeof c)return c;for(var f=[],h=0;h<l.length;++h){var p=l.charAt(h),d=r[p];if(void 0===d)return"Unknown character "+p;c=o(c)^d,h+6>=l.length||f.push(d)}return 1!==c?"Invalid checksum for "+e:{prefix:u,words:f}}function l(){var e=u.apply(null,arguments);if("object"==typeof e)return e}function c(e){var t=u.apply(null,arguments);if("object"==typeof t)return t;throw Error(t)}function f(e,t,r,n){for(var i=0,o=0,s=(1<<r)-1,a=[],u=0;u<e.length;++u)for(i=i<<t|e[u],o+=t;o>=r;)a.push(i>>(o-=r)&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function h(e){var t=f(e,8,5,!0);if(Array.isArray(t))return t}function p(e){var t=f(e,8,5,!0);if(Array.isArray(t))return t;throw Error(t)}function d(e){var t=f(e,5,8,!1);if(Array.isArray(t))return t}function y(e){var t=f(e,5,8,!1);if(Array.isArray(t))return t;throw Error(t)}e.exports={decodeUnsafe:l,decode:c,encode:a,toWordsUnsafe:h,toWords:p,fromWordsUnsafe:d,fromWords:y}},85411:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bnsV2ReadOnlyCall=l,t.zonefileReadOnlyCall=c;let n=r(15378),i=r(83053),o=r(29731),s=r(13751),a=r(85366);async function u(e,t,r,i,u=!1){let l=i instanceof o.StacksMainnet?"mainnet":"testnet",c=(0,s.getFallbackUrl)(l);async function f(i){"mainnet"===l?new o.StacksMainnet({url:i}):new o.StacksTestnet({url:i});try{let i=await (0,n.fetchCallReadOnlyFunction)({contractAddress:t,contractName:r,functionName:e.functionName,functionArgs:e.functionArgs,senderAddress:e.senderAddress,network:l});if(i.error)throw Error(i.error);return i}catch(e){throw a.debug.error("Call failed:",{error:e.message,url:i,networkType:l}),e}}a.debug.log("executeReadOnlyCall initiated:",{networkType:l,contractAddress:t,contractName:r,functionName:e.functionName,coreApiUrl:i.coreApiUrl,fallbackUrl:c,isZonefile:u});try{return await f(i.coreApiUrl)}catch(e){if(c&&c!==i.coreApiUrl)return await f(c);throw e}}async function l(e){let t=(0,s.getNetwork)(e.network),r=(0,i.getBnsContractAddress)(e.network);return u(e,r,i.BnsContractName,t,!1)}async function c(e){let t=(0,s.getNetwork)(e.network),r=(0,i.getZonefileContractAddress)(e.network);return u(e,r,i.ZonefileContractName,t,!0)}},83053:function(e,t){"use strict";var r;function n(e){return"mainnet"===e?r.Mainnet:r.Testnet}function i(e){return"mainnet"===e?"SP2QEZ06AGJ3RKJPBV14SY1V5BBFNAW33D96YPGZF":"ST2QEZ06AGJ3RKJPBV14SY1V5BBFNAW33D9SZJQ0M"}Object.defineProperty(t,"__esModule",{value:!0}),t.ZonefileContractName=t.BnsContractAddress=t.BnsContractName=void 0,t.getBnsContractAddress=n,t.getZonefileContractAddress=i,t.BnsContractName="BNS-V2",function(e){e.Mainnet="SP2QEZ06AGJ3RKJPBV14SY1V5BBFNAW33D96YPGZF",e.Testnet="ST2QEZ06AGJ3RKJPBV14SY1V5BBFNAW33D9SZJQ0M"}(r||(t.BnsContractAddress=r={})),t.ZonefileContractName="zonefile-resolver"},10902:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.buildTransferNameTx=l,t.buildListInUstxTx=c,t.buildUnlistInUstxTx=f,t.buildBuyInUstxTx=h,t.buildSetPrimaryNameTx=p,t.buildFreezeManagerTx=d,t.buildPreorderNamespaceTx=y,t.buildRevealNamespaceTx=g,t.buildLaunchNamespaceTx=m,t.buildTurnOffManagerTransfersTx=b,t.buildImportNameTx=w,t.buildNamespaceUpdatePriceTx=v,t.buildNamespaceFreezePriceTx=_,t.buildNameClaimFastTx=E,t.buildPreorderNameTx=S,t.buildRegisterNameTx=T,t.buildPreviousRegisterNameTx=I,t.buildClaimPreorderTx=A,t.buildRenewNameTx=O,t.buildUpdateZonefileTx=P;let i=r(6602),o=r(15378),s=r(83053),a=r(50470),u=r(19638);async function l({fullyQualifiedName:e,newOwnerAddress:t,senderAddress:r,network:n}){let i="transfer",{subdomain:l,namespace:c,name:f}=(0,a.decodeFQN)(e);if(l)throw Error("Cannot transfer a subdomain using transferName()");let h=await (0,u.getIdFromBns)({fullyQualifiedName:e,network:n}),p=[(0,o.uintCV)(h),(0,o.standardPrincipalCV)(r),(0,o.standardPrincipalCV)(t)],d=o.Pc.principal(r).willSendAsset().nft(`${(0,s.getBnsContractAddress)(n)}.${s.BnsContractName}::BNS-V2`,(0,o.uintCV)(h)),y=o.Pc.principal(t).willNotSendAsset().nft(`${(0,s.getBnsContractAddress)(n)}.${s.BnsContractName}::BNS-V2`,(0,o.uintCV)(h));return{contractAddress:(0,s.getBnsContractAddress)(n),contractName:s.BnsContractName,functionName:i,functionArgs:p,postConditions:[d,y],network:n}}async function c({id:e,price:t,commissionTraitAddress:r,commissionTraitName:n,senderAddress:i,network:a}){let u="list-in-ustx";return{contractAddress:(0,s.getBnsContractAddress)(a),contractName:s.BnsContractName,functionName:u,functionArgs:[(0,o.uintCV)(e),(0,o.uintCV)(t),(0,o.contractPrincipalCV)(r,n)],postConditions:[],network:a}}async function f({id:e,senderAddress:t,network:r}){let n="unlist-in-ustx";return{contractAddress:(0,s.getBnsContractAddress)(r),contractName:s.BnsContractName,functionName:n,functionArgs:[(0,o.uintCV)(e)],postConditions:[],network:r}}async function h({id:e,expectedPrice:t,commissionTraitAddress:r,commissionTraitName:n,senderAddress:i,network:a}){let l="buy-in-ustx",c=await (0,u.getOwnerById)({id:e,network:a});if(!c)throw Error("Failed to fetch current owner of the name");let f=[o.Pc.principal(i).willSendLte(t).ustx(),o.Pc.principal(c).willSendAsset().nft(`${(0,s.getBnsContractAddress)(a)}.${s.BnsContractName}::BNS-V2`,(0,o.uintCV)(e))];return{contractAddress:(0,s.getBnsContractAddress)(a),contractName:s.BnsContractName,functionName:l,functionArgs:[(0,o.uintCV)(e),(0,o.contractPrincipalCV)(r,n)],postConditions:f,network:a}}async function p({fullyQualifiedName:e,senderAddress:t,network:r}){let n="set-primary-name",{subdomain:i}=(0,a.decodeFQN)(e);if(i)throw Error("Cannot set a subdomain as primary name");let l=await (0,u.getIdFromBns)({fullyQualifiedName:e,network:r}),c=await (0,u.getOwner)({fullyQualifiedName:e,network:r});if(!c)throw Error("Failed to fetch current owner of the name");let f=[o.Pc.principal(c).willNotSendAsset().nft(`${(0,s.getBnsContractAddress)(r)}.${s.BnsContractName}::BNS-V2`,(0,o.uintCV)(l))];return{contractAddress:(0,s.getBnsContractAddress)(r),contractName:s.BnsContractName,functionName:n,functionArgs:[(0,o.uintCV)(l)],postConditions:f,network:r}}async function d({namespace:e,senderAddress:t,network:r}){let n="freeze-manager",i=await (0,u.getNamespaceProperties)({namespace:e,network:r});if(!i)throw Error("Failed to fetch namespace properties");if(!i.properties["namespace-manager"])throw Error("This namespace does not have a manager");if(i.properties["manager-frozen"])throw Error("Manager is already frozen for this namespace");return{contractAddress:(0,s.getBnsContractAddress)(r),contractName:s.BnsContractName,functionName:n,functionArgs:[(0,o.bufferCVFromString)(e)],postConditions:[],network:r}}async function y({namespace:e,salt:t,stxToBurn:r,senderAddress:n,network:a}){let u="namespace-preorder",l=(0,i.utf8ToBytes)(`${e}.${t}`),c=(0,o.hash160)(l),f=o.Pc.principal(n).willSendEq(r).ustx();return{contractAddress:(0,s.getBnsContractAddress)(a),contractName:s.BnsContractName,functionName:u,functionArgs:[(0,o.bufferCV)(c),(0,o.uintCV)(r)],postConditions:[f],network:a}}async function g({namespace:e,salt:t,priceFunction:r,lifetime:n=0n,namespaceImportAddress:i,namespaceManagerAddress:a,canUpdatePrice:u,managerTransfer:l=!1,managerFrozen:c=!0,senderAddress:f,network:h}){let p;let d="namespace-reveal";if(a){if(a.includes(".")){let[e,t]=a.split(".");p=(0,o.someCV)((0,o.contractPrincipalCV)(e,t))}else p=(0,o.someCV)((0,o.standardPrincipalCV)(a))}else p=(0,o.noneCV)();let y=r||k;return{contractAddress:(0,s.getBnsContractAddress)(h),contractName:s.BnsContractName,functionName:d,functionArgs:[(0,o.bufferCVFromString)(e),(0,o.bufferCVFromString)(t),(0,o.uintCV)(y.base),(0,o.uintCV)(y.coefficient),(0,o.uintCV)(y.b1),(0,o.uintCV)(y.b2),(0,o.uintCV)(y.b3),(0,o.uintCV)(y.b4),(0,o.uintCV)(y.b5),(0,o.uintCV)(y.b6),(0,o.uintCV)(y.b7),(0,o.uintCV)(y.b8),(0,o.uintCV)(y.b9),(0,o.uintCV)(y.b10),(0,o.uintCV)(y.b11),(0,o.uintCV)(y.b12),(0,o.uintCV)(y.b13),(0,o.uintCV)(y.b14),(0,o.uintCV)(y.b15),(0,o.uintCV)(y.b16),(0,o.uintCV)(y.nonAlphaDiscount),(0,o.uintCV)(y.noVowelDiscount),(0,o.uintCV)(n),(0,o.standardPrincipalCV)(i),p,(0,o.boolCV)(u),(0,o.boolCV)(l),(0,o.boolCV)(c)],postConditions:[],network:h}}async function m({namespace:e,senderAddress:t,network:r}){let n="namespace-launch";return{contractAddress:(0,s.getBnsContractAddress)(r),contractName:s.BnsContractName,functionName:n,functionArgs:[(0,o.bufferCVFromString)(e)],postConditions:[],network:r}}async function b({namespace:e,senderAddress:t,network:r}){let n="turn-off-manager-transfers";return{contractAddress:(0,s.getBnsContractAddress)(r),contractName:s.BnsContractName,functionName:n,functionArgs:[(0,o.bufferCVFromString)(e)],postConditions:[],network:r}}async function w({namespace:e,name:t,beneficiary:r,senderAddress:n,network:i}){let a="name-import";return{contractAddress:(0,s.getBnsContractAddress)(i),contractName:s.BnsContractName,functionName:a,functionArgs:[(0,o.bufferCVFromString)(e),(0,o.bufferCVFromString)(t),(0,o.standardPrincipalCV)(r)],postConditions:[],network:i}}async function v({namespace:e,priceFunction:t,senderAddress:r,network:n}){let i="namespace-update-price";return{contractAddress:(0,s.getBnsContractAddress)(n),contractName:s.BnsContractName,functionName:i,functionArgs:[(0,o.bufferCVFromString)(e),(0,o.uintCV)(t.base),(0,o.uintCV)(t.coefficient),(0,o.uintCV)(t.b1),(0,o.uintCV)(t.b2),(0,o.uintCV)(t.b3),(0,o.uintCV)(t.b4),(0,o.uintCV)(t.b5),(0,o.uintCV)(t.b6),(0,o.uintCV)(t.b7),(0,o.uintCV)(t.b8),(0,o.uintCV)(t.b9),(0,o.uintCV)(t.b10),(0,o.uintCV)(t.b11),(0,o.uintCV)(t.b12),(0,o.uintCV)(t.b13),(0,o.uintCV)(t.b14),(0,o.uintCV)(t.b15),(0,o.uintCV)(t.b16),(0,o.uintCV)(t.nonAlphaDiscount),(0,o.uintCV)(t.noVowelDiscount)],postConditions:[],network:n}}async function _({namespace:e,senderAddress:t,network:r}){let n="namespace-freeze-price";return{contractAddress:(0,s.getBnsContractAddress)(r),contractName:s.BnsContractName,functionName:n,functionArgs:[(0,o.bufferCVFromString)(e)],postConditions:[],network:r}}async function E({fullyQualifiedName:e,stxToBurn:t,sendTo:r,senderAddress:i,network:u}){let l="name-claim-fast",{namespace:c,name:f,subdomain:h}=(0,a.decodeFQN)(e);if(h)throw Error("Cannot register a subdomain using registerName()");let p=r.includes(".")?(0,o.contractPrincipalCV)(r.split(".")[0],r.split(".")[1]):(0,o.standardPrincipalCV)(r),d=[];if(t>0){let e=o.Pc.principal(i).willSendEq(t).ustx();d.push(e)}return{contractAddress:(0,s.getBnsContractAddress)(u),contractName:s.BnsContractName,functionName:l,functionArgs:[(0,o.bufferCV)(n.from(f)),(0,o.bufferCV)(n.from(c)),p],postConditions:d,network:u}}async function S({fullyQualifiedName:e,salt:t,stxToBurn:r,senderAddress:i,network:u}){let l="name-preorder",{subdomain:c}=(0,a.decodeFQN)(e);if(c)throw Error("Cannot preorder a subdomain using preorderName()");let f=n.from(`${e}${t}`),h=(0,o.hash160)(f),p=[];if(r>0){let e=o.Pc.principal(i).willSendEq(r).ustx();p.push(e)}return{contractAddress:(0,s.getBnsContractAddress)(u),contractName:s.BnsContractName,functionName:l,functionArgs:[(0,o.bufferCV)(h),(0,o.uintCV)(r)],postConditions:p,network:u}}async function T({fullyQualifiedName:e,salt:t,stxToBurn:r,senderAddress:i,network:u}){let l="name-register",{subdomain:c,namespace:f,name:h}=(0,a.decodeFQN)(e);if(c)throw Error("Cannot register a subdomain using registerName()");let p=[];if(r>0){let e=o.Pc.principal(`${(0,s.getBnsContractAddress)(u)}.${s.BnsContractName}`).willSendEq(r).ustx();p.push(e)}return{contractAddress:(0,s.getBnsContractAddress)(u),contractName:s.BnsContractName,functionName:l,functionArgs:[(0,o.bufferCV)(n.from(f)),(0,o.bufferCV)(n.from(h)),(0,o.bufferCV)(n.from(t))],postConditions:p,network:u}}async function I({fullyQualifiedName:e,salt:t,stxToBurn:r,senderAddress:i,network:l}){let c="name-register",{subdomain:f,namespace:h,name:p}=(0,a.decodeFQN)(e);if(f)throw Error("Cannot register a subdomain using registerName()");let d=await (0,u.getIdFromBns)({fullyQualifiedName:e,network:l}),y=await (0,u.getOwner)({fullyQualifiedName:e,network:l});if(!y)throw Error("Failed to fetch current owner of the name");let g=[];if(r>0){let e=o.Pc.principal(`${(0,s.getBnsContractAddress)(l)}.${s.BnsContractName}`).willSendEq(r).ustx();g.push(e)}let m=o.Pc.principal(y).willSendAsset().nft(`${(0,s.getBnsContractAddress)(l)}.${s.BnsContractName}::BNS-V2`,(0,o.uintCV)(d));return g.push(m),{contractAddress:(0,s.getBnsContractAddress)(l),contractName:s.BnsContractName,functionName:c,functionArgs:[(0,o.bufferCV)(n.from(h)),(0,o.bufferCV)(n.from(p)),(0,o.bufferCV)(n.from(t))],postConditions:g,network:l}}async function A({fullyQualifiedName:e,salt:t,stxToClaim:r,senderAddress:n,network:u}){let l="claim-preorder",{subdomain:c}=(0,a.decodeFQN)(e);if(c)throw Error("Cannot claim a subdomain using claim-preorder()");let f=(0,i.utf8ToBytes)(`${e}${t}`),h=(0,o.hash160)(f),p=o.Pc.principal(`${(0,s.getBnsContractAddress)(u)}.${s.BnsContractName}`).willSendEq(r).ustx();return{contractAddress:(0,s.getBnsContractAddress)(u),contractName:s.BnsContractName,functionName:l,functionArgs:[(0,o.bufferCV)(h)],postConditions:[p],network:u}}async function O({fullyQualifiedName:e,stxToBurn:t,senderAddress:r,network:n}){let i="name-renewal",{subdomain:u,namespace:l,name:c}=(0,a.decodeFQN)(e);if(u)throw Error("Cannot renew a subdomain using renewName()");let f=o.Pc.principal(r).willSendEq(t).ustx();return{contractAddress:(0,s.getBnsContractAddress)(n),contractName:s.BnsContractName,functionName:i,functionArgs:[(0,o.bufferCVFromString)(l),(0,o.bufferCVFromString)(c)],postConditions:[f],network:n}}async function P({fullyQualifiedName:e,zonefileInputs:t,senderAddress:r,network:n}){let i;let u="update-zonefile",{name:l,namespace:c}=(0,a.decodeFQN)(e);if(t){let e=(0,a.createZonefileData)(t),r=(0,a.stringifyZonefile)(e);i=(0,o.someCV)((0,o.bufferCVFromString)(r))}else i=(0,o.noneCV)();return{contractAddress:(0,s.getZonefileContractAddress)(n),contractName:s.ZonefileContractName,functionName:u,functionArgs:[(0,o.bufferCVFromString)(l),(0,o.bufferCVFromString)(c),i],postConditions:[],network:n}}let k={base:1n,coefficient:1n,b1:1n,b2:1n,b3:1n,b4:1n,b5:1n,b6:1n,b7:1n,b8:1n,b9:1n,b10:1n,b11:1n,b12:1n,b13:1n,b14:1n,b15:1n,b16:1n,nonAlphaDiscount:1n,noVowelDiscount:1n}},85366:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debug=void 0;let r=!1;t.debug={enable:()=>{r=!0},disable:()=>{r=!1},log:(...e)=>{r&&console.log("[BNS-V2-SDK]:",...e)},error:(...e)=>{r&&console.error("[BNS-V2-SDK]:",...e)}}},59966:function(e,t,r){"use strict";n={value:!0},n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=n=void 0;var n,i=r(19638);n={enumerable:!0,get:function(){return i.canRegisterName}},n={enumerable:!0,get:function(){return i.getLastTokenId}},n={enumerable:!0,get:function(){return i.getRenewalHeight}},n={enumerable:!0,get:function(){return i.canResolveName}},n={enumerable:!0,get:function(){return i.getOwner}},n={enumerable:!0,get:function(){return i.getOwnerById}},n={enumerable:!0,get:function(){return i.getNamespacePrice}},n={enumerable:!0,get:function(){return i.getNamePrice}},n={enumerable:!0,get:function(){return i.canNamespaceBeRegistered}},n={enumerable:!0,get:function(){return i.getNamespaceProperties}},n={enumerable:!0,get:function(){return i.getNameInfo}},n={enumerable:!0,get:function(){return i.getBnsFromId}},n={enumerable:!0,get:function(){return i.getPrimaryName}},n={enumerable:!0,get:function(){return i.fetchUserOwnedNames}},n={enumerable:!0,get:function(){return i.resolveNameZonefile}},n={enumerable:!0,get:function(){return i.getIdFromBns}};var o=r(10902);n={enumerable:!0,get:function(){return o.buildTransferNameTx}},n={enumerable:!0,get:function(){return o.buildListInUstxTx}},n={enumerable:!0,get:function(){return o.buildUnlistInUstxTx}},n={enumerable:!0,get:function(){return o.buildBuyInUstxTx}},n={enumerable:!0,get:function(){return o.buildSetPrimaryNameTx}},n={enumerable:!0,get:function(){return o.buildFreezeManagerTx}},n={enumerable:!0,get:function(){return o.buildPreorderNamespaceTx}},n={enumerable:!0,get:function(){return o.buildRevealNamespaceTx}},n={enumerable:!0,get:function(){return o.buildLaunchNamespaceTx}},n={enumerable:!0,get:function(){return o.buildTurnOffManagerTransfersTx}},n={enumerable:!0,get:function(){return o.buildImportNameTx}},n={enumerable:!0,get:function(){return o.buildNamespaceUpdatePriceTx}},n={enumerable:!0,get:function(){return o.buildNamespaceFreezePriceTx}},n={enumerable:!0,get:function(){return o.buildNameClaimFastTx}},n={enumerable:!0,get:function(){return o.buildPreorderNameTx}},n={enumerable:!0,get:function(){return o.buildRegisterNameTx}},n={enumerable:!0,get:function(){return o.buildPreviousRegisterNameTx}},n={enumerable:!0,get:function(){return o.buildClaimPreorderTx}},n={enumerable:!0,get:function(){return o.buildRenewNameTx}},n={enumerable:!0,get:function(){return o.buildUpdateZonefileTx}},r(85366)},13751:function(e,t,r){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.configureNetwork=s,t.getNetwork=a,t.getFallbackUrl=u;let i=r(29731),o=r(85366);function s(e){n=e.testnetFallbackUrl,o.debug.log("Network configuration updated - testnet fallback URL:",n)}function a(e){if(o.debug.log("Getting network for type:",e),"mainnet"===e){let e=new i.StacksMainnet;return o.debug.log("Created mainnet network:",{apiUrl:e.coreApiUrl}),e}{let e=new i.StacksTestnet;return o.debug.log("Created testnet network:",{apiUrl:e.coreApiUrl}),e}}function u(e){return(o.debug.log("Getting fallback URL for network type:",e),"testnet"===e&&n)?(o.debug.log("Using testnet fallback URL:",n),n):(o.debug.log("No fallback URL available"),"")}},19638:function(e,t,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getLastTokenId=p,t.getRenewalHeight=d,t.canResolveName=y,t.getOwner=g,t.getOwnerById=m,t.getIdFromBns=b,t.getBnsFromId=w,t.canRegisterName=v,t.getNamespacePrice=E,t.getNamePrice=S,t.canNamespaceBeRegistered=T,t.getNamespaceProperties=I,t.getNameInfo=A,t.getPrimaryName=O,t.fetchUserOwnedNames=P,t.resolveNameZonefile=k;let o=r(15378),s=i(r(97218)),a=r(50470),u=r(83053),l=r(85411),c=r(85366),f="https://api.bnsv2.com",h=async(e,t)=>{try{let r="testnet"===t?"/testnet":"",n=`${f}${r}${e}`;return c.debug.log("Making API call to:",n),(await s.default.get(n)).data}catch(e){throw c.debug.error("API call failed:",e),e}};async function p({network:e}){try{return(await h("/token/last-id",e)).last_token_id}catch(n){c.debug.error("API call failed, falling back to contract call:",n);let t=(0,a.generateRandomAddress)(),r=await (0,l.bnsV2ReadOnlyCall)({functionName:"get-last-token-id",senderAddress:t,functionArgs:[],network:e});if(r.type===o.ClarityType.ResponseOk){if(r.value.type===o.ClarityType.UInt)return r.value.value;throw Error("Response did not contain a UInt")}if(r.type===o.ClarityType.ResponseErr)throw Error((0,o.cvToString)(r.value));throw Error(`Unexpected Clarity Value type: ${(0,o.getCVTypeString)(r)}`)}}async function d({fullyQualifiedName:e,network:t}){try{let r=await h(`/names/${e}/renewal`,t);return BigInt(r.renewal_height)}catch(u){c.debug.error("API call failed, falling back to contract call:",u);let{subdomain:r}=(0,a.decodeFQN)(e);if(r)throw Error("Cannot get renewal height for a subdomain");let n=(0,a.generateRandomAddress)(),i=await b({fullyQualifiedName:e,network:t}),s=await (0,l.bnsV2ReadOnlyCall)({functionName:"get-renewal-height",senderAddress:n,functionArgs:[(0,o.uintCV)(i)],network:t});if(s.type===o.ClarityType.ResponseOk){if(s.value.type===o.ClarityType.UInt)return s.value.value;throw Error("Response did not contain a UInt")}if(s.type===o.ClarityType.ResponseErr)throw Error((0,o.cvToString)(s.value));throw Error(`Unexpected Clarity Value type: ${(0,o.getCVTypeString)(s)}`)}}async function y({fullyQualifiedName:e,network:t}){try{let r=await h(`/names/${e}/can-resolve`,t);return{renewal:BigInt(r.renewal_height),owner:r.owner}}catch(f){c.debug.error("API call failed, falling back to contract call:",f);let{subdomain:r,namespace:n,name:i}=(0,a.decodeFQN)(e);if(r)throw Error("Cannot check resolution for a subdomain");let s=(0,a.generateRandomAddress)(),u=await (0,l.bnsV2ReadOnlyCall)({functionName:"can-resolve-name",senderAddress:s,functionArgs:[(0,o.bufferCVFromString)(n),(0,o.bufferCVFromString)(i)],network:t});if(u.type===o.ClarityType.ResponseOk&&u.value.type===o.ClarityType.Tuple){let e=u.value.value.renewal,t=u.value.value.owner;if(e.type===o.ClarityType.UInt&&(t.type===o.ClarityType.PrincipalStandard||t.type===o.ClarityType.PrincipalContract))return{renewal:e.value,owner:(0,o.cvToString)(t)};throw Error("Unexpected data types in response tuple")}throw Error("Invalid response from contract")}}async function g({fullyQualifiedName:e,network:t}){try{return(await h(`/names/${e}/owner`,t)).owner}catch(f){c.debug.error("API call failed, falling back to contract call:",f);let{subdomain:r,namespace:n,name:i}=(0,a.decodeFQN)(e);if(r)throw Error("Cannot check resolution for a subdomain");let s=(0,a.generateRandomAddress)(),u=await (0,l.bnsV2ReadOnlyCall)({functionName:"get-owner-name",senderAddress:s,functionArgs:[(0,o.bufferCVFromString)(i),(0,o.bufferCVFromString)(n)],network:t});if(u.type===o.ClarityType.ResponseOk){if(u.value.type===o.ClarityType.OptionalSome){if(u.value.value.type===o.ClarityType.PrincipalStandard||u.value.value.type===o.ClarityType.PrincipalContract)return(0,o.cvToString)(u.value.value);throw Error("Owner is not a principal")}if(u.value.type===o.ClarityType.OptionalNone)return null}throw Error("Invalid response from contract")}}async function m({id:e,network:t}){try{return(await h(`/tokens/${e}/owner`,t)).owner}catch(i){c.debug.error("API call failed, falling back to contract call:",i);let r=(0,a.generateRandomAddress)(),n=await (0,l.bnsV2ReadOnlyCall)({functionName:"get-owner",senderAddress:r,functionArgs:[(0,o.uintCV)(e)],network:t});if(n.type===o.ClarityType.ResponseOk){if(n.value.type===o.ClarityType.OptionalSome){if(n.value.value.type===o.ClarityType.PrincipalStandard||n.value.value.type===o.ClarityType.PrincipalContract)return(0,o.cvToString)(n.value.value);throw Error("Owner is not a principal")}if(n.value.type===o.ClarityType.OptionalNone)return null}throw Error("Invalid response from contract")}}async function b({fullyQualifiedName:e,network:t}){try{let r=await h(`/names/${e}/id`,t);return BigInt(r.id)}catch(f){c.debug.error("API call failed, falling back to contract call:",f);let{subdomain:r,namespace:n,name:i}=(0,a.decodeFQN)(e);if(r)throw Error("Cannot get info for a subdomain");let s=(0,a.generateRandomAddress)(),u=await (0,l.bnsV2ReadOnlyCall)({functionName:"get-id-from-bns",senderAddress:s,functionArgs:[(0,o.bufferCVFromString)(i),(0,o.bufferCVFromString)(n)],network:t});if(u.type===o.ClarityType.OptionalSome){if(u.value.type===o.ClarityType.UInt)return u.value.value;throw Error("Response did not contain a UInt")}if(u.type===o.ClarityType.OptionalNone)throw Error("Name not found");throw Error(`Unexpected Clarity Value type: ${(0,o.getCVTypeString)(u)}`)}}async function w({id:e,network:t}){try{let r=await h(`/tokens/${e}/name`,t);return{name:r.name,namespace:r.namespace}}catch(i){c.debug.error("API call failed, falling back to contract call:",i);let r=(0,a.generateRandomAddress)(),n=await (0,l.bnsV2ReadOnlyCall)({functionName:"get-bns-from-id",senderAddress:r,functionArgs:[(0,o.uintCV)(e)],network:t});if(n.type===o.ClarityType.OptionalSome){if(n.value.type===o.ClarityType.Tuple){let e=n.value.value.name;return n.value.value.namespace,{name:e.value.toString(),namespace:e.value.toString()}}throw Error("Response did not contain a Tuple")}if(n.type===o.ClarityType.OptionalNone)return null;throw Error(`Unexpected Clarity Value type: ${(0,o.getCVTypeString)(n)}`)}}async function v({fullyQualifiedName:e,network:t}){let{subdomain:r,namespace:n,name:i}=(0,a.decodeFQN)(e);if(r)throw Error("Cannot register a subdomain using registerName");try{return(await h(`/names/${n}/${i}/can-register`,t)).can_register}catch(e){return c.debug.error("API call failed, falling back to contract call:",e),_(i,n,t)}}async function _(e,t,r){let n=(0,a.generateRandomAddress)();return c.debug.log("Falling back to contract call:",{name:e,namespace:t,network:r}),(0,l.bnsV2ReadOnlyCall)({functionName:"get-bns-info",senderAddress:n,functionArgs:[(0,o.bufferCVFromString)(e),(0,o.bufferCVFromString)(t)],network:r}).then(e=>{if(e.type===o.ClarityType.OptionalSome)return c.debug.log("Name exists in contract"),!1;if(e.type===o.ClarityType.OptionalNone)return c.debug.log("Name available in contract"),!0;throw Error(`Unexpected response type: ${e.type}`)})}async function E({namespace:e,network:t}){let r="get-namespace-price",n=(0,a.generateRandomAddress)();return(0,l.bnsV2ReadOnlyCall)({functionName:r,senderAddress:n,functionArgs:[(0,o.bufferCVFromString)(e)],network:t}).then(e=>{if(e.type===o.ClarityType.ResponseOk){if(e.value.type===o.ClarityType.Int||e.value.type===o.ClarityType.UInt)return e.value.value;throw Error("Response did not contain a number")}if(e.type===o.ClarityType.ResponseErr)throw Error((0,o.cvToString)(e.value));throw Error(`Unexpected Clarity Value type: ${(0,o.getCVTypeString)(e)}`)})}async function S({fullyQualifiedName:e,network:t}){let r="get-name-price",{subdomain:n,namespace:i,name:s}=(0,a.decodeFQN)(e);if(n)throw Error("Cannot get subdomain price");let u=(0,a.generateRandomAddress)();return(0,l.bnsV2ReadOnlyCall)({functionName:r,senderAddress:u,functionArgs:[(0,o.bufferCVFromString)(i),(0,o.bufferCVFromString)(s)],network:t}).then(e=>{if(e.type===o.ClarityType.ResponseOk){let t=e.value;if(t.type===o.ClarityType.ResponseOk){let e=t.value;if(e.type===o.ClarityType.Int||e.type===o.ClarityType.UInt)return e.value;throw Error("Nested response did not contain a number")}if(t.type===o.ClarityType.Int||t.type===o.ClarityType.UInt)return t.value;throw Error("Response did not contain a number")}{let t=e;throw Error((0,o.cvToString)(t.value))}}).catch(e=>{throw e})}async function T({namespace:e,network:t}){let r="can-namespace-be-registered",n=(0,a.generateRandomAddress)();return(0,l.bnsV2ReadOnlyCall)({functionName:r,senderAddress:n,functionArgs:[(0,o.bufferCVFromString)(e)],network:t}).then(e=>{if(e.type===o.ClarityType.ResponseOk){if(e.value.type===o.ClarityType.BoolTrue)return!0;if(e.value.type===o.ClarityType.BoolFalse)return!1;throw Error("Response did not contain a boolean")}if(e.type===o.ClarityType.ResponseErr)throw Error((0,o.cvToString)(e.value));throw Error(`Unexpected Clarity Value type: ${(0,o.getCVTypeString)(e)}`)})}async function I({namespace:e,network:t}){try{let r=(await h(`/namespaces/${e}`,t)).namespace;return{namespace:e,properties:{"namespace-manager":r.namespace_manager||null,"manager-transferable":r.manager_transferable,"manager-frozen":r.manager_frozen||!1,"namespace-import":r.namespace_import,"revealed-at":BigInt(r.revealed_at||0),"launched-at":r.launched_at?BigInt(r.launched_at):null,lifetime:BigInt(r.lifetime||0),"can-update-price-function":r.can_update_price_function,"price-function":{base:BigInt(r.price_function_base),coefficient:BigInt(r.price_function_coeff),b1:BigInt(r.price_function_buckets[0]||0),b2:BigInt(r.price_function_buckets[1]||0),b3:BigInt(r.price_function_buckets[2]||0),b4:BigInt(r.price_function_buckets[3]||0),b5:BigInt(r.price_function_buckets[4]||0),b6:BigInt(r.price_function_buckets[5]||0),b7:BigInt(r.price_function_buckets[6]||0),b8:BigInt(r.price_function_buckets[7]||0),b9:BigInt(r.price_function_buckets[8]||0),b10:BigInt(r.price_function_buckets[9]||0),b11:BigInt(r.price_function_buckets[10]||0),b12:BigInt(r.price_function_buckets[11]||0),b13:BigInt(r.price_function_buckets[12]||0),b14:BigInt(r.price_function_buckets[13]||0),b15:BigInt(r.price_function_buckets[14]||0),b16:BigInt(r.price_function_buckets[15]||0),nonAlphaDiscount:BigInt(r.price_function_nonalpha_discount),noVowelDiscount:BigInt(r.price_function_no_vowel_discount)}}}}catch(i){c.debug.error("API call failed, falling back to contract call:",i);let r=(0,a.generateRandomAddress)(),n=await (0,l.bnsV2ReadOnlyCall)({functionName:"get-namespace-properties",senderAddress:r,functionArgs:[(0,o.bufferCVFromString)(e)],network:t});if(n.type===o.ClarityType.ResponseOk&&n.value.type===o.ClarityType.Tuple){let e=n.value.value.namespace,t=n.value.value.properties.value;return{namespace:e.value.toString(),properties:{"namespace-manager":t["namespace-manager"].type===o.ClarityType.OptionalNone?null:(0,o.cvToString)(t["namespace-manager"].value),"manager-transferable":t["manager-transferable"].type===o.ClarityType.BoolTrue,"manager-frozen":t["manager-frozen"].type===o.ClarityType.BoolTrue,"namespace-import":(0,o.cvToString)(t["namespace-import"]),"revealed-at":t["revealed-at"].value,"launched-at":t["launched-at"].type===o.ClarityType.OptionalNone?null:t["launched-at"].value.value,lifetime:t.lifetime.value,"can-update-price-function":t["can-update-price-function"].type===o.ClarityType.BoolTrue,"price-function":(0,a.parsePriceFunction)(t["price-function"].value)}}}throw Error("Invalid response from contract")}}async function A({fullyQualifiedName:e,network:t}){try{let r=(await h(`/names/${e}`,t)).data;return{owner:r.owner,registeredAt:r.registered_at?BigInt(r.registered_at):null,renewalHeight:BigInt(r.renewal_height||0),stxBurn:BigInt(r.stx_burn||0),importedAt:r.imported_at?BigInt(r.imported_at):null,preorderedBy:r.preordered_by,hashedSaltedFqnPreorder:r.hashedSaltedFqnPreorder}}catch(f){c.debug.error("API call failed, falling back to contract call:",f);let{subdomain:r,namespace:n,name:i}=(0,a.decodeFQN)(e);if(r)throw Error("Cannot get info for a subdomain");let s=(0,a.generateRandomAddress)(),u=await (0,l.bnsV2ReadOnlyCall)({functionName:"get-bns-info",senderAddress:s,functionArgs:[(0,o.bufferCVFromString)(i),(0,o.bufferCVFromString)(n)],network:t});if(u.type===o.ClarityType.OptionalSome&&u.value.type===o.ClarityType.Tuple){let e=u.value.value;return{owner:(0,o.cvToString)(e.owner),registeredAt:e["registered-at"].type===o.ClarityType.OptionalNone?null:e["registered-at"].value.value,renewalHeight:e["renewal-height"].value,stxBurn:e["stx-burn"].value,importedAt:e["imported-at"].type===o.ClarityType.OptionalNone?null:e["imported-at"].value.value,preorderedBy:e["preordered-by"].type===o.ClarityType.OptionalNone?null:(0,o.cvToString)(e["preordered-by"].value),hashedSaltedFqnPreorder:e["hashed-salted-fqn-preorder"].type===o.ClarityType.OptionalNone?null:e["hashed-salted-fqn-preorder"].value.toString()}}throw Error("Invalid response from contract")}}async function O({address:e,network:t}){let r="get-primary",i=(0,a.generateRandomAddress)();return(0,l.bnsV2ReadOnlyCall)({functionName:r,senderAddress:i,functionArgs:[(0,o.standardPrincipalCV)(e)],network:t}).then(e=>{if(e.type===o.ClarityType.ResponseOk){if(e.value.type===o.ClarityType.Tuple){let t=e.value.value.name,r=e.value.value.namespace;return{name:n.from(t.value,"hex").toString(),namespace:n.from(r.value,"hex").toString()}}if(e.value.type===o.ClarityType.OptionalSome){let t=e.value.value;if(t.type===o.ClarityType.Tuple){let e=t.value.name,r=t.value.namespace;return{name:n.from(e.value,"hex").toString(),namespace:n.from(r.value,"hex").toString()}}}throw Error("Unexpected response structure")}if(e.type===o.ClarityType.ResponseErr){if("u131"===(0,o.cvToString)(e.value))return null;throw Error((0,o.cvToString)(e.value))}throw Error(`Unexpected Clarity Value type: ${(0,o.getCVTypeString)(e)}`)})}async function P({senderAddress:e,network:t}){try{let r=[],n=0,i=50;for(;;){let o=await h(`/names/address/${e}/valid?limit=${i}&offset=${n}`,t);if(r=r.concat(o.names),o.names.length<i||r.length>=o.total)break;n+=i}return r.map(e=>({name:e.name_string,namespace:e.namespace_string}))}catch(p){c.debug.error("API call failed, falling back to contract call:",p);let r=(0,u.getBnsContractAddress)(t),n=`${r}.${u.BnsContractName}::BNS-V2`,i="mainnet"===t?"https://api.hiro.so":"https://api.testnet.hiro.so",o=[],l=0,f=50;for(;;){let t=await s.default.get(`${i}/extended/v1/tokens/nft/holdings?principal=${e}&asset_identifiers=${n}&limit=${f}&offset=${l}`),r=t.data.results.map(e=>parseInt(e.value.repr.slice(1)));if(o=o.concat(r),t.data.total<=l+f)break;l+=f}let h=o.map(e=>w({id:BigInt(e),network:t}));return(await Promise.all(h)).filter(e=>null!==e).map(e=>({name:(0,a.asciiToUtf8)(e.name),namespace:(0,a.asciiToUtf8)(e.namespace)})).sort((e,t)=>e.namespace!==t.namespace?e.namespace.localeCompare(t.namespace):e.name.localeCompare(t.name))}}async function k({fullyQualifiedName:e,network:t}){try{return(await h(`/resolve-name/${e}`,t)).zonefile||null}catch(p){if(s.default.isAxiosError(p)&&p.response?.status===404)return null;c.debug.error("API call failed, falling back to contract call:",p);let{subdomain:r,namespace:i,name:u}=(0,a.decodeFQN)(e);if(r)throw Error("Cannot resolve a subdomain");let f=(0,a.generateRandomAddress)(),h=await (0,l.zonefileReadOnlyCall)({functionName:"resolve-name",senderAddress:f,functionArgs:[(0,o.bufferCVFromString)(u),(0,o.bufferCVFromString)(i)],network:t});if(h.type===o.ClarityType.ResponseOk){if(h.value.type===o.ClarityType.OptionalSome&&h.value.value.type===o.ClarityType.Buffer){let e=n.from(h.value.value.value).toString("utf8");return(0,a.parseZonefile)(e)}if(h.value.type===o.ClarityType.OptionalNone)return null}throw Error("Invalid response from contract")}}},50470:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeFQN=i,t.parsePriceFunction=o,t.asciiToUtf8=s,t.generateRandomAddress=a,t.parseZonefile=u,t.stringifyZonefile=l,t.createZonefileData=c,t.addCallbacks=f;let n=r(15378);function i(e){let t=e.split(".");return t.length>2?{subdomain:t[0],name:t[1],namespace:t[2]}:{name:t[0],namespace:t[1]}}function o(e){let t=e.buckets.value;return{base:e.base.value,coefficient:e.coeff.value,b1:t[0].value,b2:t[1].value,b3:t[2].value,b4:t[3].value,b5:t[4].value,b6:t[5].value,b7:t[6].value,b8:t[7].value,b9:t[8].value,b10:t[9].value,b11:t[10].value,b12:t[11].value,b13:t[12].value,b14:t[13].value,b15:t[14].value,b16:t[15].value,nonAlphaDiscount:e["nonalpha-discount"].value,noVowelDiscount:e["no-vowel-discount"].value}}function s(e){return e.split(",").map(e=>String.fromCharCode(parseInt(e.trim()))).join("")}function a(){let e=(0,n.makeRandomPrivKey)();return(0,n.getAddressFromPrivateKey)(e)}function u(e){try{let t=JSON.parse(e);return{owner:t.owner||"",general:t.general||"",twitter:t.twitter||"",url:t.url||"",nostr:t.nostr||"",lightning:t.lightning||"",btc:t.btc||"",subdomains:Array.isArray(t.subdomains)?t.subdomains:[]}}catch(e){return console.error("Error parsing zonefile:",e),{owner:"",general:"",twitter:"",url:"",nostr:"",lightning:"",btc:"",subdomains:[]}}}function l(e){return JSON.stringify(e)}function c(e){return{owner:e.owner,general:e.general||"",twitter:e.twitter||"",url:e.url||"",nostr:e.nostr||"",lightning:e.lightning||"",btc:e.btc||"",subdomains:e.subdomains||[]}}function f(e,t,r){return{...e,onFinish:t,onCancel:r}}},29731:function(e,t,r){"use strict";r.r(t),r.d(t,{HIRO_MAINNET_DEFAULT:function(){return h},HIRO_MOCKNET_DEFAULT:function(){return d},HIRO_TESTNET_DEFAULT:function(){return p},StacksDevnet:function(){return v},StacksMainnet:function(){return m},StacksMocknet:function(){return w},StacksNetwork:function(){return g},StacksNetworks:function(){return y},StacksTestnet:function(){return b},createApiKeyMiddleware:function(){return u},createFetchFn:function(){return c},fetchWrapper:function(){return s},getFetchOptions:function(){return i},hostMatches:function(){return a},setFetchOptions:function(){return o}}),r(31905);let n={referrerPolicy:"origin",headers:{"x-hiro-product":"stacksjs"}},i=()=>n,o=e=>Object.assign(n,e);async function s(e,t){let r={};return Object.assign(r,n,t),await fetch(e,r)}function a(e,t){return"string"==typeof t?t===e:t.exec(e)}function u({apiKey:e,host:t=/(.*)api(.*)(\.stacks\.co|\.hiro\.so)$/i,httpHeader:r="x-api-key"}){return{pre:n=>{a(new URL(n.url).host,t)&&(n.init.headers instanceof Headers?n.init.headers:n.init.headers=new Headers(n.init.headers)).set(r,e)}}}function l(e){let t=s,r=[];return e.length>0&&"function"==typeof e[0]&&(t=e.shift()),e.length>0&&(r=e),{fetchLib:t,middlewares:r}}function c(...e){let{fetchLib:t,middlewares:r}=l(e);return async(e,n)=>{let i={url:e,init:n??{}};for(let e of r)"function"==typeof e.pre&&(i=await Promise.resolve(e.pre({fetch:t,...i}))??i);let o=await t(i.url,i.init);for(let e of r)"function"==typeof e.post&&(o=await Promise.resolve(e.post({fetch:t,url:i.url,init:i.init,response:o?.clone()??o}))??o);return o}}var f=r(52721);let h="https://api.mainnet.hiro.so",p="https://api.testnet.hiro.so",d="http://localhost:3999",y=["mainnet","testnet","devnet","mocknet"];class g{constructor(e){this.version=f.Kn.Mainnet,this.chainId=f.oK.Mainnet,this.bnsLookupUrl="https://api.mainnet.hiro.so",this.broadcastEndpoint="/v2/transactions",this.transferFeeEstimateEndpoint="/v2/fees/transfer",this.transactionFeeEstimateEndpoint="/v2/fees/transaction",this.accountEndpoint="/v2/accounts",this.contractAbiEndpoint="/v2/contracts/interface",this.readOnlyFunctionCallEndpoint="/v2/contracts/call-read",this.isMainnet=()=>this.version===f.Kn.Mainnet,this.getBroadcastApiUrl=()=>`${this.coreApiUrl}${this.broadcastEndpoint}`,this.getTransferFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`,this.getTransactionFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transactionFeeEstimateEndpoint}`,this.getAccountApiUrl=e=>`${this.coreApiUrl}${this.accountEndpoint}/${e}?proof=0`,this.getAccountExtendedBalancesApiUrl=e=>`${this.coreApiUrl}/extended/v1/address/${e}/balances`,this.getAbiApiUrl=(e,t)=>`${this.coreApiUrl}${this.contractAbiEndpoint}/${e}/${t}`,this.getReadOnlyFunctionCallApiUrl=(e,t,r)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${e}/${t}/${encodeURIComponent(r)}`,this.getInfoUrl=()=>`${this.coreApiUrl}/v2/info`,this.getBlockTimeInfoUrl=()=>`${this.coreApiUrl}/extended/v1/info/network_block_times`,this.getPoxInfoUrl=()=>`${this.coreApiUrl}/v2/pox`,this.getRewardsUrl=(e,t)=>{let r=`${this.coreApiUrl}/extended/v1/burnchain/rewards/${e}`;return t&&(r=`${r}?limit=${t.limit}&offset=${t.offset}`),r},this.getRewardsTotalUrl=e=>`${this.coreApiUrl}/extended/v1/burnchain/rewards/${e}/total`,this.getRewardHoldersUrl=(e,t)=>{let r=`${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${e}`;return t&&(r=`${r}?limit=${t.limit}&offset=${t.offset}`),r},this.getStackerInfoUrl=(e,t)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}
    ${e}/${t}/get-stacker-info`,this.getDataVarUrl=(e,t,r)=>`${this.coreApiUrl}/v2/data_var/${e}/${t}/${r}?proof=0`,this.getMapEntryUrl=(e,t,r)=>`${this.coreApiUrl}/v2/map_entry/${e}/${t}/${r}?proof=0`,this.coreApiUrl=e.url,this.fetchFn=e.fetchFn??c()}getNameInfo(e){let t=`${this.bnsLookupUrl}/v1/names/${e}`;return this.fetchFn(t).then(e=>{if(404===e.status)throw Error("Name not found");if(200===e.status)return e.json();throw Error(`Bad response status: ${e.status}`)}).then(e=>e.address?Object.assign({},e,{address:e.address}):e)}}g.fromName=e=>{switch(e){case"mainnet":return new m;case"testnet":return new b;case"devnet":return new v;case"mocknet":return new w;default:throw Error(`Invalid network name provided. Must be one of the following: ${y.join(", ")}`)}},g.fromNameOrNetwork=e=>"string"!=typeof e&&"version"in e?e:g.fromName(e);class m extends g{constructor(e){super({url:e?.url??h,fetchFn:e?.fetchFn}),this.version=f.Kn.Mainnet,this.chainId=f.oK.Mainnet}}class b extends g{constructor(e){super({url:e?.url??p,fetchFn:e?.fetchFn}),this.version=f.Kn.Testnet,this.chainId=f.oK.Testnet}}class w extends g{constructor(e){super({url:e?.url??d,fetchFn:e?.fetchFn}),this.version=f.Kn.Testnet,this.chainId=f.oK.Testnet}}let v=w},53310:function(e,t,r){"use strict";var n=r(77191),i=r(89509).Buffer;e.exports=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var r=e(t);return n.encode(i.concat([t,r],t.length+4))},decode:function(r){var i=t(n.decode(r),e);if(!i)throw Error("Invalid checksum");return i},decodeUnsafe:function(e){var r=n.decodeUnsafe(e);if(r)return t(r)}}}},58334:function(e,t,r){"use strict";var n=r(23482),i=r(53310);function o(e){var t=n("sha256").update(e).digest();return n("sha256").update(t).digest()}e.exports=i(o)},8055:function(e,t,r){"use strict";var n=r(48764).Buffer;e.exports=function(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))throw TypeError("Arguments must be Buffers");if(e===t)return!0;if("function"==typeof e.equals)return e.equals(t);if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}},25730:function(e,t,r){"use strict";var n=r(58612),i=r(1768),o=r(68928),s=r(59770);e.exports=s||n.call(o,i)},93192:function(e,t,r){"use strict";var n=r(58612),i=r(1768),o=r(25730);e.exports=function(){return o(n,i,arguments)}},1768:function(e){"use strict";e.exports=Function.prototype.apply},68928:function(e){"use strict";e.exports=Function.prototype.call},40319:function(e,t,r){"use strict";var n=r(58612),i=r(14453),o=r(68928),s=r(25730);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new i("a function is required");return s(n,o,e)}},59770:function(e){"use strict";e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},21924:function(e,t,r){"use strict";var n=r(40210),i=r(55559),o=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?i(r):r}},55559:function(e,t,r){"use strict";var n=r(67771),i=r(24429),o=r(40319),s=r(93192);e.exports=function(e){var t=o(arguments),r=e.length-(arguments.length-1);return n(t,1+(r>0?r:0),!0)},i?i(e.exports,"apply",{value:s}):e.exports.apply=s},17379:function(e,t,r){"use strict";var n=r(40210),i=r(40319),o=i([n("%String.prototype.indexOf%")]);e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?i([r]):r}},2474:function(e,t,r){var n,i,o,s=r(48764).Buffer;!function(r,s){i=[],void 0!==(o="function"==typeof(n=s)?n.apply(t,i):n)&&(e.exports=o)}(0,function(){var e=function(){function e(e){this.$hex=e}e.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",r=0;r<this.$hex.length;r+=2)t+="%"+this.$hex.substring(r,r+2);return decodeURIComponent(t)}if("latin"===e){for(var t=[],r=0;r<this.$hex.length;r+=2)t.push(parseInt(this.$hex.substring(r,r+2),16));return String.fromCharCode.apply(String,t)}throw Error("Unrecognised format: "+e)}},e.fromLatinString=function(t){for(var r="",n=0;n<t.length;n++){var i=t.charCodeAt(n).toString(16);1===i.length&&(i="0"+i),r+=i}return new e(r)},e.fromUtf8String=function(t){for(var r=encodeURIComponent(t),n="",i=0;i<r.length;i++)if("%"===r.charAt(i))n+=r.substring(i+1,i+3),i+=2;else{var o=r.charCodeAt(i).toString(16);o.length<2&&(o="0"+o),n+=o}return new e(n)};var t=[],r={},n=function(e){return function(){throw Error(e+" not implemented")}};function i(){}function o(){}function a(e){var t=e.readByte();return{type:t>>5,value:31&t}}function u(e,t){var r=e.value;return r<24?r:24==r?t.readByte():25==r?t.readUint16():26==r?t.readUint32():27==r?t.readUint64():31==r?null:void n("Additional info: "+r)()}function l(e,t,r){r.writeByte(e<<5|t)}function c(e,t,r){var n=e<<5;t<24?r.writeByte(n|t):t<256?(r.writeByte(24|n),r.writeByte(t)):t<65536?(r.writeByte(25|n),r.writeUint16(t)):t<4294967296?(r.writeByte(26|n),r.writeUint32(t)):(r.writeByte(27|n),r.writeUint64(t))}i.prototype={peekByte:n("peekByte"),readByte:n("readByte"),readChunk:n("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,r=1023&e,n=32768&e;if(31===t)return 0===r?n?-1/0:1/0:NaN;var i=t?Math.pow(2,t-25)*(1024+r):5960464477539063e-23*r;return n?-i:i},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,r=8388607&e,n=2147483648&e;if(255===t)return 0===r?n?-1/0:1/0:NaN;var i=t?Math.pow(2,t-23-127)*(8388608+r):1401298464324817e-60*r;return n?-i:i},readFloat64:function(){var e=this.readUint32(),t=this.readUint32(),r=e>>20&2047,n=(1048575&e)*4294967296+t,i=2147483648&e;if(2047===r)return 0===n?i?-1/0:1/0:NaN;var o=r?Math.pow(2,r-52-1023)*(4503599627370496+n):5e-324*n;return i?-o:o},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},o.prototype={writeByte:n("writeByte"),result:n("result"),writeFloat16:n("writeFloat16"),writeFloat32:n("writeFloat32"),writeFloat64:n("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:n("writeString"),canWriteBinary:function(e){return!1},writeBinary:n("writeChunk")};var f=Error();function h(e){var t=a(e);switch(t.type){case 0:return u(t,e);case 1:return -1-u(t,e);case 2:return e.readChunk(u(t,e));case 3:return e.readChunk(u(t,e)).toString("utf-8");case 4:case 5:var n,i=u(t,e),o=[];if(null!==i){5===t.type&&(i*=2);for(var s=0;s<i;s++)o[s]=h(e)}else for(;(n=h(e))!==f;)o.push(n);if(5!==t.type)return o;for(var l={},s=0;s<o.length;s+=2)l[o[s]]=o[s+1];return l;case 6:var c=r[u(t,e)],o=h(e);return c?c(o):o;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(u(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case null:return f;default:throw Error("Unknown fixed value: "+t.value)}default:throw Error("Unsupported header: "+JSON.stringify(t))}throw Error("not implemented yet")}function p(e,r){for(var n=0;n<t.length;n++){var i=t[n].fn(e);if(void 0!==i)return c(6,t[n].tag,r),p(i,r)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)c(7,20,r);else if(!0===e)c(7,21,r);else if(null===e)c(7,22,r);else if(void 0===e)c(7,23,r);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?c(1,-1-e,r):c(0,e,r):(l(7,27,r),r.writeFloat64(e));else if("string"==typeof e)r.writeString(e,function(e){c(3,e,r)});else if(r.canWriteBinary(e))r.writeBinary(e,function(e){c(2,e,r)});else if("object"==typeof e){if(g.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){c(4,e.length,r);for(var n=0;n<e.length;n++)p(e[n],r)}else{var o=Object.keys(e);c(5,o.length,r);for(var n=0;n<o.length;n++)p(o[n],r),p(e[o[n]],r)}}else throw Error("CBOR encoding not supported: "+e)}var d=[],y=[],g={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?y.push(function(r){if(e===r)return t(r)}):y.push(e)},addReader:function(e,t){"string"==typeof e?d.push(function(r,n){if(e===n)return t(r,n)}):d.push(e)},encode:function(e,t){for(var r=0;r<y.length;r++){var n=(0,y[r])(t);if(n)return p(e,n),n.result()}throw Error("Unsupported output format: "+t)},decode:function(e,t){for(var r=0;r<d.length;r++){var n=(0,d[r])(e,t);if(n)return h(n)}throw Error("Unsupported input format: "+t)},addSemanticEncode:function(e,r){if("number"!=typeof e||e%1!=0||e<0)throw Error("Tag must be a positive integer");return t.push({tag:e,fn:r}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw Error("Tag must be a positive integer");return r[e]=t,this},Reader:i,Writer:o};function m(e){this.buffer=e,this.pos=0}function b(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=s.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function w(e){this.hex=e,this.pos=0}function v(e){this.$hex="",this.finalFormat=e||"hex"}return m.prototype=Object.create(i.prototype),m.prototype.peekByte=function(){return this.buffer[this.pos]},m.prototype.readByte=function(){return this.buffer[this.pos++]},m.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},m.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},m.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},m.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},m.prototype.readChunk=function(e){var t=s.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},b.prototype=Object.create(o.prototype),b.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=s.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},b.prototype.writeFloat32=function(e){var t=s.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},b.prototype.writeFloat64=function(e){var t=s.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},b.prototype.writeString=function(e,t){var r=s.from(e,"utf-8");t(r.length),this.writeBuffer(r)},b.prototype.canWriteBinary=function(e){return e instanceof s},b.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},b.prototype.writeBuffer=function(e){if(!(e instanceof s))throw TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=s.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=s.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},b.prototype.result=function(){for(var e=s.alloc(this.byteLength),t=0,r=0;r<this.completeBuffers.length;r++){var n=this.completeBuffers[r];n.copy(e,t,0,n.length),t+=n.length}return(this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat)?e.toString(this.stringFormat):e},"function"==typeof s&&(g.addReader(function(e,t){return e instanceof s?new m(e):"hex"===t||"base64"===t?new m(s.from(e,t)):void 0}),g.addWriter(function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new b(e):void 0:new b})),w.prototype=Object.create(i.prototype),w.prototype.peekByte=function(){return parseInt(this.hex.substring(this.pos,2),16)},w.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},w.prototype.readChunk=function(t){var r=this.hex.substring(this.pos,this.pos+2*t);return(this.pos+=2*t,"function"==typeof s)?s.from(r,"hex"):new e(r)},v.prototype=Object.create(o.prototype),v.prototype.writeByte=function(e){if(e<0||e>255)throw Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},v.prototype.canWriteBinary=function(t){return t instanceof e||"function"==typeof s&&t instanceof s},v.prototype.writeBinary=function(t,r){if(t instanceof e)r(t.length()),this.$hex+=t.$hex;else if("function"==typeof s&&t instanceof s)r(t.length),this.$hex+=t.toString("hex");else throw TypeError("HexWriter only accepts BinaryHex or Buffers")},v.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof s?s.from(this.$hex,"hex"):new e(this.$hex).toString(this.finalFormat)},v.prototype.writeString=function(t,r){var n=e.fromUtf8String(t);r(n.length()),this.$hex+=n.$hex},g.addReader(function(t,r){return t instanceof e||t.$hex?new w(t.$hex):"hex"===r?new w(t):void 0}),g.addWriter(function(e){if("hex"===e)return new v}),g}();return e.addSemanticEncode(0,function(e){if(e instanceof Date)return e.toISOString()}).addSemanticDecode(0,function(e){return new Date(e)}).addSemanticDecode(1,function(e){return new Date(e)}),e})},71027:function(e,t,r){var n=r(89509).Buffer,i=r(79681).Transform,o=r(32553).StringDecoder;function s(e){i.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(35717)(s,i),s.prototype.update=function(e,t,r){"string"==typeof e&&(e=n.from(e,t));var i=this._update(e);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state")},s.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},s.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},s.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},s.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new o(t),this._encoding=t),this._encoding!==t)throw Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n},e.exports=s},1860:function(e,t,r){"use strict";r.r(t),r.d(t,{crc1:function(){return s},crc16:function(){return h},crc16ccitt:function(){return d},crc16kermit:function(){return w},crc16modbus:function(){return g},crc16xmodem:function(){return m},crc24:function(){return _},crc32:function(){return S},crc8:function(){return u},crc81wire:function(){return c},crcjam:function(){return I},default:function(){return A}});var n=r(53032),i=n.lW.from&&n.lW.alloc&&n.lW.allocUnsafe&&n.lW.allocUnsafeSlow?n.lW.from:e=>new n.lW(e);function o(e,t){let r=(e,r)=>t(e,r)>>>0;return r.signed=t,r.unsigned=r,r.model=e,r}var s=o("crc1",function(e,t){n.lW.isBuffer(e)||(e=i(e));let r=~~t,o=0;for(let t=0;t<e.length;t++)o+=e[t];return(r+=o%256)%256});let a=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];"undefined"!=typeof Int32Array&&(a=new Int32Array(a));var u=o("crc-8",function(e,t){n.lW.isBuffer(e)||(e=i(e));let r=~~t;for(let t=0;t<e.length;t++)r=255&a[(r^e[t])&255];return r});let l=[0,94,188,226,97,63,221,131,194,156,126,32,163,253,31,65,157,195,33,127,252,162,64,30,95,1,227,189,62,96,130,220,35,125,159,193,66,28,254,160,225,191,93,3,128,222,60,98,190,224,2,92,223,129,99,61,124,34,192,158,29,67,161,255,70,24,250,164,39,121,155,197,132,218,56,102,229,187,89,7,219,133,103,57,186,228,6,88,25,71,165,251,120,38,196,154,101,59,217,135,4,90,184,230,167,249,27,69,198,152,122,36,248,166,68,26,153,199,37,123,58,100,134,216,91,5,231,185,140,210,48,110,237,179,81,15,78,16,242,172,47,113,147,205,17,79,173,243,112,46,204,146,211,141,111,49,178,236,14,80,175,241,19,77,206,144,114,44,109,51,209,143,12,82,176,238,50,108,142,208,83,13,239,177,240,174,76,18,145,207,45,115,202,148,118,40,171,245,23,73,8,86,180,234,105,55,213,139,87,9,235,181,54,104,138,212,149,203,41,119,244,170,72,22,233,183,85,11,136,214,52,106,43,117,151,201,74,20,246,168,116,42,200,150,21,75,169,247,182,232,10,84,215,137,107,53];"undefined"!=typeof Int32Array&&(l=new Int32Array(l));var c=o("dallas-1-wire",function(e,t){n.lW.isBuffer(e)||(e=i(e));let r=~~t;for(let t=0;t<e.length;t++)r=255&l[(r^e[t])&255];return r});let f=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];"undefined"!=typeof Int32Array&&(f=new Int32Array(f));var h=o("crc-16",function(e,t){n.lW.isBuffer(e)||(e=i(e));let r=~~t;for(let t=0;t<e.length;t++)r=(f[(r^e[t])&255]^r>>8)&65535;return r});let p=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920];"undefined"!=typeof Int32Array&&(p=new Int32Array(p));var d=o("ccitt",function(e,t){n.lW.isBuffer(e)||(e=i(e));let r=void 0!==t?~~t:65535;for(let t=0;t<e.length;t++)r=(p[(r>>8^e[t])&255]^r<<8)&65535;return r});let y=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];"undefined"!=typeof Int32Array&&(y=new Int32Array(y));var g=o("crc-16-modbus",function(e,t){n.lW.isBuffer(e)||(e=i(e));let r=void 0!==t?~~t:65535;for(let t=0;t<e.length;t++)r=(y[(r^e[t])&255]^r>>8)&65535;return r}),m=o("xmodem",function(e,t){n.lW.isBuffer(e)||(e=i(e));let r=void 0!==t?~~t:0;for(let t=0;t<e.length;t++){let n=e[t],i=r>>>8&255;i^=255&n,i^=i>>>4,r=r<<8&65535^i^(i=i<<5&65535)^(i=i<<7&65535)}return r});let b=[0,4489,8978,12955,17956,22445,25910,29887,35912,40385,44890,48851,51820,56293,59774,63735,4225,264,13203,8730,22181,18220,30135,25662,40137,36160,49115,44626,56045,52068,63999,59510,8450,12427,528,5017,26406,30383,17460,21949,44362,48323,36440,40913,60270,64231,51324,55797,12675,8202,4753,792,30631,26158,21685,17724,48587,44098,40665,36688,64495,60006,55549,51572,16900,21389,24854,28831,1056,5545,10034,14011,52812,57285,60766,64727,34920,39393,43898,47859,21125,17164,29079,24606,5281,1320,14259,9786,57037,53060,64991,60502,39145,35168,48123,43634,25350,29327,16404,20893,9506,13483,1584,6073,61262,65223,52316,56789,43370,47331,35448,39921,29575,25102,20629,16668,13731,9258,5809,1848,65487,60998,56541,52564,47595,43106,39673,35696,33800,38273,42778,46739,49708,54181,57662,61623,2112,6601,11090,15067,20068,24557,28022,31999,38025,34048,47003,42514,53933,49956,61887,57398,6337,2376,15315,10842,24293,20332,32247,27774,42250,46211,34328,38801,58158,62119,49212,53685,10562,14539,2640,7129,28518,32495,19572,24061,46475,41986,38553,34576,62383,57894,53437,49460,14787,10314,6865,2904,32743,28270,23797,19836,50700,55173,58654,62615,32808,37281,41786,45747,19012,23501,26966,30943,3168,7657,12146,16123,54925,50948,62879,58390,37033,33056,46011,41522,23237,19276,31191,26718,7393,3432,16371,11898,59150,63111,50204,54677,41258,45219,33336,37809,27462,31439,18516,23005,11618,15595,3696,8185,63375,58886,54429,50452,45483,40994,37561,33584,31687,27214,22741,18780,15843,11370,7921,3960];"undefined"!=typeof Int32Array&&(b=new Int32Array(b));var w=o("kermit",function(e,t){n.lW.isBuffer(e)||(e=i(e));let r=void 0!==t?~~t:0;for(let t=0;t<e.length;t++)r=(b[(r^e[t])&255]^r>>8)&65535;return r});let v=[0,8801531,9098509,825846,9692897,1419802,1651692,10452759,10584377,2608578,2839604,11344079,3303384,11807523,12104405,4128302,12930697,4391538,5217156,13227903,5679208,13690003,14450021,5910942,6606768,14844747,15604413,6837830,16197969,7431594,8256604,16494759,840169,9084178,8783076,18463,10434312,1670131,1434117,9678590,11358416,2825259,2590173,10602790,4109873,12122826,11821884,3289031,13213536,5231515,4409965,12912278,5929345,14431610,13675660,5693559,6823513,15618722,14863188,6588335,16513208,8238147,7417269,16212302,1680338,10481449,9664223,1391140,9061683,788936,36926,8838341,12067563,4091408,3340262,11844381,2868234,11372785,10555655,2579964,14478683,5939616,5650518,13661357,5180346,13190977,12967607,4428364,8219746,16457881,16234863,7468436,15633027,6866552,6578062,14816117,1405499,9649856,10463030,1698765,8819930,55329,803287,9047340,11858690,3325945,4072975,12086004,2561507,10574104,11387118,2853909,13647026,5664841,5958079,14460228,4446803,12949160,13176670,5194661,7454091,16249200,16476294,8201341,14834538,6559633,6852199,15647388,3360676,11864927,12161705,4185682,10527045,2551230,2782280,11286707,9619101,1346150,1577872,10379115,73852,8875143,9172337,899466,16124205,7357910,8182816,16421083,6680524,14918455,15678145,6911546,5736468,13747439,14507289,5968354,12873461,4334094,5159928,13170435,4167245,12180150,11879232,3346363,11301036,2767959,2532769,10545498,10360692,1596303,1360505,9604738,913813,9157998,8856728,92259,16439492,8164415,7343561,16138546,6897189,15692510,14936872,6662099,5986813,14488838,13733104,5750795,13156124,5174247,4352529,12855018,2810998,11315341,10498427,2522496,12124823,4148844,3397530,11901793,9135439,862644,110658,8912057,1606574,10407765,9590435,1317464,15706879,6940164,6651890,14889737,8145950,16384229,16161043,7394792,5123014,13133629,12910283,4370992,14535975,5997020,5707818,13718737,2504095,10516836,11329682,2796649,11916158,3383173,4130419,12143240,8893606,129117,876971,9121104,1331783,9576124,10389322,1625009,14908182,6633453,6925851,15721184,7380471,16175372,16402682,8127489,4389423,12891860,13119266,5137369,13704398,5722165,6015427,14517560];"undefined"!=typeof Int32Array&&(v=new Int32Array(v));var _=o("crc-24",function(e,t){n.lW.isBuffer(e)||(e=i(e));let r=void 0!==t?~~t:11994318;for(let t=0;t<e.length;t++)r=(v[(r>>16^e[t])&255]^r<<8)&16777215;return r});let E=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!=typeof Int32Array&&(E=new Int32Array(E));var S=o("crc-32",function(e,t){n.lW.isBuffer(e)||(e=i(e));let r=0===t?0:-1^~~t;for(let t=0;t<e.length;t++)r=E[(r^e[t])&255]^r>>>8;return -1^r});let T=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!=typeof Int32Array&&(T=new Int32Array(T));var I=o("jam",function(e,t=-1){n.lW.isBuffer(e)||(e=i(e));let r=0===t?0:~~t;for(let t=0;t<e.length;t++)r=T[(r^e[t])&255]^r>>>8;return r}),A={crc1:s,crc8:u,crc81wire:c,crc16:h,crc16ccitt:d,crc16modbus:g,crc16xmodem:m,crc16kermit:w,crc24:_,crc32:S,crcjam:I}},53032:function(e,t,r){"use strict";var n,i=r(79742),o=r(80645),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=c,n=_,t.h2=50;var a=2147483647;function u(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function l(e){if(e>a)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return d(e)}return f(e,t,r)}function f(e,t,r){if("string"==typeof e)return y(e,t);if(ArrayBuffer.isView(e))return m(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return b(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);var i=w(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function p(e,t,r){return(h(e),e<=0)?l(e):void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)}function d(e){return h(e),l(e<0?0:0|v(e))}function y(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!c.isEncoding(t))throw TypeError("Unknown encoding: "+t);var r=0|E(e,t),n=l(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function g(e){for(var t=e.length<0?0:0|v(e.length),r=l(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function m(e){if(Q(e,Uint8Array)){var t=new Uint8Array(e);return b(t.buffer,t.byteOffset,t.byteLength)}return g(e)}function b(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),c.prototype),n}function w(e){if(c.isBuffer(e)){var t=0|v(e.length),r=l(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Z(e.length)?l(0):g(e):"Buffer"===e.type&&Array.isArray(e.data)?g(e.data):void 0}function v(e){if(e>=a)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),c.alloc(+e)}function E(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(i)return n?-1:$(e).length;t=(""+t).toLowerCase(),i=!0}}function S(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return H(this,t,r);case"utf8":case"utf-8":return B(this,t,r);case"ascii":return D(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return R(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function T(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function I(e,t,r,n,i){if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Z(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:A(e,t,r,n,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):A(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function A(e,t,r,n,i){var o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,a/=2,u/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(o=r;o<a;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else -1!==c&&(o-=o-c),c=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(l(e,o+h)!==l(t,h)){f=!1;break}if(f)return o}return -1}function O(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(Z(a))break;e[r+s]=a}return s}function P(e,t,r,n){return J($(t,e.length-r),e,r,n)}function k(e,t,r,n){return J(z(t),e,r,n)}function x(e,t,r,n){return J(X(t),e,r,n)}function C(e,t,r,n){return J(Y(t,e.length-r),e,r,n)}function R(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function B(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,u,l=e[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=r)switch(f){case 1:l<128&&(c=l);break;case 2:(192&(o=e[i+1]))==128&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],s=e[i+2],(192&o)==128&&(192&s)==128&&(u=(15&l)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],(192&o)==128&&(192&s)==128&&(192&a)==128&&(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=f}return N(n)}n=2147483647,c.TYPED_ARRAY_SUPPORT=u(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return f(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return p(e,t,r)},c.allocUnsafe=function(e){return d(e)},c.allocUnsafeSlow=function(e){return d(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=c.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(Q(o,Uint8Array))i+o.length>n.length?c.from(o).copy(n,i):Uint8Array.prototype.set.call(n,o,i);else if(c.isBuffer(o))o.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=o.length}return n},c.byteLength=E,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)T(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)T(this,t,t+3),T(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)T(this,t,t+7),T(this,t+1,t+6),T(this,t+2,t+5),T(this,t+3,t+4);return this},c.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?B(this,0,e):S.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.h2;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,i){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,s=r-t,a=Math.min(o,s),u=this.slice(n,i),l=e.slice(t,r),f=0;f<a;++f)if(u[f]!==l[f]){o=u[f],s=l[f];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return I(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return I(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return O(this,e,t,r);case"utf8":case"utf-8":return P(this,e,t,r);case"ascii":case"latin1":case"binary":return k(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,r);default:if(o)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;function N(e){var t=e.length;if(t<=U)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=U));return r}function D(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function L(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function H(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=ee[e[o]];return i}function M(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function j(e,t,r,n,i,o){if(!c.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function V(e,t,r,n,i,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function K(e,t,r,n,i){return t=+t,r>>>=0,i||V(e,t,r,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,r,n,23,4),r+4}function W(e,t,r,n,i){return t=+t,r>>>=0,i||V(e,t,r,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return(e>>>=0,t||F(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;j(this,e,t,r,i,0)}var o=1,s=0;for(this[t]=255&e;++s<r&&(o*=256);)this[t+s]=e/o&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;j(this,e,t,r,i,0)}var o=r-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);j(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);j(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeFloatLE=function(e,t,r){return K(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return K(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return W(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return W(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var i,o=e.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=c.isBuffer(e)?e:c.from(e,n),a=s.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var q=/[^+/0-9A-Za-z-_]/g;function G(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function $(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319||s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function z(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function Y(e,t){for(var r,n,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}function X(e){return i.toByteArray(G(e))}function J(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}var ee=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},23482:function(e,t,r){"use strict";var n=r(35717),i=r(62318),o=r(79785),s=r(89072),a=r(71027);function u(e){a.call(this,"digest"),this._hash=e}n(u,a),u.prototype._update=function(e){this._hash.update(e)},u.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new i:"rmd160"===e||"ripemd160"===e?new o:new u(s(e))}},31905:function(){!function(e){!function(t){var r={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function n(e){return e&&DataView.prototype.isPrototypeOf(e)}if(r.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function c(e){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function h(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function p(e){var t=new FileReader,r=f(t);return t.readAsText(e),r}function d(e){for(var t=new Uint8Array(e),r=Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&n(e)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},r.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=s(e),t=a(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},l.prototype.delete=function(e){delete this.map[s(e)]},l.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},l.prototype.set=function(e,t){this.map[s(e)]=a(t)},l.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),u(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),u(e)},r.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}function w(e,t){var r=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new l(t.headers)),this.method=b(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function _(e){var t=new l;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}}),t}function E(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},g.call(w.prototype),g.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];E.redirect=function(e,t){if(-1===S.indexOf(t))throw RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function T(e,n){return new Promise(function(i,o){var s=new w(e,n);if(s.signal&&s.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:_(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL"),i(new E("response"in a?a.response:a.responseText,e))},a.onerror=function(){o(TypeError("Network request failed"))},a.ontimeout=function(){o(TypeError("Network request failed"))},a.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&r.blob&&(a.responseType="blob"),s.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send(void 0===s._bodyInit?null:s._bodyInit)})}T.polyfill=!0,e.fetch||(e.fetch=T,e.Headers=l,e.Request=w,e.Response=E),t.Headers=l,t.Request=w,t.Response=E,t.fetch=T,Object.defineProperty(t,"__esModule",{value:!0})}({})}("undefined"!=typeof self?self:this)},12296:function(e,t,r){"use strict";var n=r(24429),i=r(33464),o=r(14453),s=r(27296);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new o("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],f=!!s&&s(e,t);if(n)n(e,t,{configurable:null===l&&f?f.configurable:!l,enumerable:null===a&&f?f.enumerable:!a,value:r,writable:null===u&&f?f.writable:!u});else if(!c&&(a||u||l))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");else e[t]=r}},4289:function(e,t,r){"use strict";var n=r(82215),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=r(12296),u=function(e){return"function"==typeof e&&"[object Function]"===o.call(e)},l=r(31044)(),c=function(e,t,r,n){if(t in e){if(!0===n){if(e[t]===r)return}else if(!u(n)||!n())return}l?a(e,t,r,!0):a(e,t,r)},f=function(e,t){var r=arguments.length>2?arguments[2]:{},o=n(t);i&&(o=s.call(o,Object.getOwnPropertySymbols(t)));for(var a=0;a<o.length;a+=1)c(e,o[a],t[o[a]],r[o[a]])};f.supportsDescriptors=!!l,e.exports=f},96504:function(e,t,r){"use strict";var n,i=r(40319),o=r(27296);try{n=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var s=!!n&&o&&o(Object.prototype,"__proto__"),a=Object,u=a.getPrototypeOf;e.exports=s&&"function"==typeof s.get?i([s.get]):"function"==typeof u&&function(e){return u(null==e?e:a(e))}},35015:function(e,t,r){"use strict";var n=r(89509).Buffer,i=r(6972),o=128,s=48,a=2;function u(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(e){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function c(e,t){e=l(e);var r=i(t),c=r+1,f=e.length,h=0;if(e[h++]!==s)throw Error('Could not find expected "seq"');var p=e[h++];if(p===(1|o)&&(p=e[h++]),f-h<p)throw Error('"seq" specified length of "'+p+'", only "'+(f-h)+'" remaining');if(e[h++]!==a)throw Error('Could not find expected "int" for "r"');var d=e[h++];if(f-h-2<d)throw Error('"r" specified length of "'+d+'", only "'+(f-h-2)+'" available');if(c<d)throw Error('"r" specified length of "'+d+'", max of "'+c+'" is acceptable');var y=h;if(h+=d,e[h++]!==a)throw Error('Could not find expected "int" for "s"');var g=e[h++];if(f-h!==g)throw Error('"s" specified length of "'+g+'", expected "'+(f-h)+'"');if(c<g)throw Error('"s" specified length of "'+g+'", max of "'+c+'" is acceptable');var m=h;if((h+=g)!==f)throw Error('Expected to consume entire buffer, but "'+(f-h)+'" bytes remain');var b=r-d,w=r-g,v=n.allocUnsafe(b+d+w+g);for(h=0;h<b;++h)v[h]=0;e.copy(v,h,y+Math.max(-b,0),y+d),h=r;for(var _=h;h<_+w;++h)v[h]=0;return e.copy(v,h,m+Math.max(-w,0),m+g),v=u(v=v.toString("base64"))}function f(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=o&&--n,n}function h(e,t){e=l(e);var r=i(t),u=e.length;if(u!==2*r)throw TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+u+'"');var c=f(e,0,r),h=f(e,r,e.length),p=r-c,d=r-h,y=2+p+1+1+d,g=y<o,m=n.allocUnsafe((g?2:3)+y),b=0;return m[b++]=s,g?m[b++]=y:(m[b++]=1|o,m[b++]=255&y),m[b++]=a,m[b++]=p,c<0?(m[b++]=0,b+=e.copy(m,b,0,r)):b+=e.copy(m,b,c,r),m[b++]=a,m[b++]=d,h<0?(m[b++]=0,e.copy(m,b,r)):e.copy(m,b,r+h),m}e.exports={derToJose:c,joseToDer:h}},6972:function(e){"use strict";function t(e){return(e/8|0)+(e%8==0?0:1)}var r={ES256:t(256),ES384:t(384),ES512:t(521)};function n(e){var t=r[e];if(t)return t;throw Error('Unknown algorithm "'+e+'"')}e.exports=n},86428:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.ECPairFactory=t.networks=void 0;let i=r(14644);t.networks=i;let o=r(4844),s=r(61798),a=r(37174),u=r(25049),l=o.typeforce.maybe(o.typeforce.compile({compressed:o.maybe(o.Boolean),network:o.maybe(o.Network)})),c=e=>32===e.length?e:e.slice(1,33);function f(e){function t(t){return e.isPoint(t)}function r(t,r){if(o.typeforce(o.Buffer256bit,t),!e.isPrivate(t))throw TypeError("Private key not in range [1, n)");return o.typeforce(l,r),new d(t,void 0,r)}function f(t,r){return o.typeforce(e.isPoint,t),o.typeforce(l,r),new d(void 0,t,r)}function h(e,t){let n=a.decode(e),s=n.version;if(o.Array(t)){if(!(t=t.filter(e=>s===e.wif).pop()))throw Error("Unknown network version")}else if(s!==(t=t||i.bitcoin).wif)throw Error("Invalid network version");return r(n.privateKey,{compressed:n.compressed,network:t})}function p(t){let n;o.typeforce(l,t),void 0===t&&(t={});let i=t.rng||s;do n=i(32),o.typeforce(o.Buffer256bit,n);while(!e.isPrivate(n));return r(n,t)}(0,u.testEcc)(e);class d{__D;__Q;compressed;network;lowR;constructor(t,r,o){this.__D=t,this.__Q=r,this.lowR=!1,void 0===o&&(o={}),this.compressed=void 0===o.compressed||o.compressed,this.network=o.network||i.bitcoin,void 0!==r&&(this.__Q=n.from(e.pointCompress(r,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let t=e.pointFromScalar(this.__D,this.compressed);this.__Q=n.from(t)}return this.__Q}toWIF(){if(!this.__D)throw Error("Missing private key");return a.encode(this.network.wif,this.__D,this.compressed)}tweak(e){return this.privateKey?this.tweakFromPrivateKey(e):this.tweakFromPublicKey(e)}sign(t,r){if(!this.__D)throw Error("Missing private key");if(void 0===r&&(r=this.lowR),!1===r)return n.from(e.sign(t,this.__D));{let r=e.sign(t,this.__D),i=n.alloc(32,0),o=0;for(;r[0]>127;)o++,i.writeUIntLE(o,0,6),r=e.sign(t,this.__D,i);return n.from(r)}}signSchnorr(t){if(!this.privateKey)throw Error("Missing private key");if(!e.signSchnorr)throw Error("signSchnorr not supported by ecc library");return n.from(e.signSchnorr(t,this.privateKey))}verify(t,r){return e.verify(t,this.publicKey,r)}verifySchnorr(t,r){if(!e.verifySchnorr)throw Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(t,this.publicKey.subarray(1,33),r)}tweakFromPublicKey(t){let r=c(this.publicKey),i=e.xOnlyPointAddTweak(r,t);if(!i||null===i.xOnlyPubkey)throw Error("Cannot tweak public key!");let o=n.from([0===i.parity?2:3]);return f(n.concat([o,i.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(t){let i=3===this.publicKey[0]||4===this.publicKey[0]&&(1&this.publicKey[64])==1?e.privateNegate(this.privateKey):this.privateKey,o=e.privateAdd(i,t);if(!o)throw Error("Invalid tweaked private key!");return r(n.from(o),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:f,fromWIF:h,makeRandom:p}}t.ECPairFactory=f},45217:function(e,t,r){"use strict";n={value:!0},n=t.eA=n=void 0;var n,i=r(86428);n={enumerable:!0,get:function(){return i.ECPairFactory}},Object.defineProperty(t,"eA",{enumerable:!0,get:function(){return i.ECPairFactory}})},14644:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testnet=t.bitcoin=void 0,t.bitcoin={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.testnet={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},25049:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.testEcc=void 0;let i=e=>n.from(e,"hex");function o(e){s(e.isPoint(i("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),s(!e.isPoint(i("030000000000000000000000000000000000000000000000000000000000000005"))),s(e.isPrivate(i("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),s(e.isPrivate(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),s(!e.isPrivate(i("0000000000000000000000000000000000000000000000000000000000000000"))),s(!e.isPrivate(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),s(!e.isPrivate(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),s(n.from(e.privateAdd(i("0000000000000000000000000000000000000000000000000000000000000001"),i("0000000000000000000000000000000000000000000000000000000000000000"))).equals(i("0000000000000000000000000000000000000000000000000000000000000001"))),s(null===e.privateAdd(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),i("0000000000000000000000000000000000000000000000000000000000000003"))),s(n.from(e.privateAdd(i("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),i("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(i("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),s(n.from(e.privateNegate(i("0000000000000000000000000000000000000000000000000000000000000001"))).equals(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),s(n.from(e.privateNegate(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(i("0000000000000000000000000000000000000000000000000000000000000003"))),s(n.from(e.privateNegate(i("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(i("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),s(n.from(e.pointCompress(i("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(i("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),s(n.from(e.pointCompress(i("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(i("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),s(n.from(e.pointCompress(i("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(i("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),s(n.from(e.pointCompress(i("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(i("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),s(n.from(e.pointFromScalar(i("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(i("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),s(null===e.xOnlyPointAddTweak(i("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140")));let t=e.xOnlyPointAddTweak(i("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),i("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));s(n.from(t.xOnlyPubkey).equals(i("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&1===t.parity),t=e.xOnlyPointAddTweak(i("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),i("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),s(n.from(t.xOnlyPubkey).equals(i("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&0===t.parity),s(n.from(e.sign(i("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(i("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),s(e.verify(i("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),i("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),i("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&s(n.from(e.signSchnorr(i("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),i("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),i("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(i("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&s(e.verifySchnorr(i("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),i("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),i("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}function s(e){if(!e)throw Error("ecc library invalid")}t.testEcc=o},4844:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maybe=t.Boolean=t.Array=t.Buffer256bit=t.Network=t.typeforce=void 0,t.typeforce=r(2401),t.Network=t.typeforce.compile({messagePrefix:t.typeforce.oneOf(t.typeforce.Buffer,t.typeforce.String),bip32:{public:t.typeforce.UInt32,private:t.typeforce.UInt32},pubKeyHash:t.typeforce.UInt8,scriptHash:t.typeforce.UInt8,wif:t.typeforce.UInt8}),t.Buffer256bit=t.typeforce.BufferN(32),t.Array=t.typeforce.Array,t.Boolean=t.typeforce.Boolean,t.maybe=t.typeforce.maybe},24429:function(e){"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}e.exports=t},53981:function(e){"use strict";e.exports=EvalError},81648:function(e){"use strict";e.exports=Error},24726:function(e){"use strict";e.exports=RangeError},26712:function(e){"use strict";e.exports=ReferenceError},33464:function(e){"use strict";e.exports=SyntaxError},14453:function(e){"use strict";e.exports=TypeError},43915:function(e){"use strict";e.exports=URIError},68892:function(e){"use strict";e.exports=Object},94029:function(e,t,r){"use strict";var n=r(95320),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty,s=function(e,t,r){for(var n=0,i=e.length;n<i;n++)o.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))},a=function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)},u=function(e,t,r){for(var n in e)o.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))};function l(e){return"[object Array]"===i.call(e)}e.exports=function(e,t,r){var i;if(!n(t))throw TypeError("iterator must be a function");arguments.length>=3&&(i=r),l(e)?s(e,t,i):"string"==typeof e?a(e,t,i):u(e,t,i)}},17648:function(e){"use strict";var t="Function.prototype.bind called on incompatible ",r=Object.prototype.toString,n=Math.max,i="[object Function]",o=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r},s=function(e,t){for(var r=[],n=t||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r},a=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};e.exports=function(e){var u,l=this;if("function"!=typeof l||r.apply(l)!==i)throw TypeError(t+l);for(var c=s(arguments,1),f=function(){if(this instanceof u){var t=l.apply(this,o(c,arguments));return Object(t)===t?t:this}return l.apply(e,o(c,arguments))},h=n(0,l.length-c.length),p=[],d=0;d<h;d++)p[d]="$"+d;if(u=Function("binder","return function ("+a(p,",")+"){ return binder.apply(this,arguments); }")(f),l.prototype){var y=function(){};y.prototype=l.prototype,u.prototype=new y,y.prototype=null}return u}},58612:function(e,t,r){"use strict";var n=r(17648);e.exports=Function.prototype.bind||n},40210:function(e,t,r){"use strict";var n,i=r(68892),o=r(81648),s=r(53981),a=r(24726),u=r(26712),l=r(33464),c=r(14453),f=r(43915),h=r(59738),p=r(76329),d=r(52264),y=r(55730),g=r(20707),m=r(63862),b=r(29550),w=Function,v=function(e){try{return w('"use strict"; return ('+e+").constructor;")()}catch(e){}},_=r(27296),E=r(24429),S=function(){throw new c},T=_?function(){try{return arguments.callee,S}catch(e){try{return _(arguments,"callee").get}catch(e){return S}}}():S,I=r(41405)(),A=r(81618),O=r(68899),P=r(10443),k=r(1768),x=r(68928),C={},R="undefined"!=typeof Uint8Array&&A?A(Uint8Array):n,B={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":I&&A?A([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":C,"%AsyncGenerator%":C,"%AsyncGeneratorFunction%":C,"%AsyncIteratorPrototype%":C,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":s,"%Float16Array%":"undefined"==typeof Float16Array?n:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":w,"%GeneratorFunction%":C,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":I&&A?A(A([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&I&&A?A(new Map()[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":i,"%Object.getOwnPropertyDescriptor%":_,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":u,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&I&&A?A(new Set()[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":I&&A?A(""[Symbol.iterator]()):n,"%Symbol%":I?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":T,"%TypedArray%":R,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":f,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%Function.prototype.call%":x,"%Function.prototype.apply%":k,"%Object.defineProperty%":E,"%Object.getPrototypeOf%":O,"%Math.abs%":h,"%Math.floor%":p,"%Math.max%":d,"%Math.min%":y,"%Math.pow%":g,"%Math.round%":m,"%Math.sign%":b,"%Reflect.getPrototypeOf%":P};if(A)try{null.error}catch(e){var U=A(A(e));B["%Error.prototype%"]=U}var N=function e(t){var r;if("%AsyncFunction%"===t)r=v("async function () {}");else if("%GeneratorFunction%"===t)r=v("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=v("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&A&&(r=A(i.prototype))}return B[t]=r,r},D={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},L=r(58612),H=r(48824),M=L.call(x,Array.prototype.concat),F=L.call(k,Array.prototype.splice),j=L.call(x,String.prototype.replace),V=L.call(x,String.prototype.slice),K=L.call(x,RegExp.prototype.exec),W=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,q=/\\(\\)?/g,G=function(e){var t=V(e,0,1),r=V(e,-1);if("%"===t&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var n=[];return j(e,W,function(e,t,r,i){n[n.length]=r?j(i,q,"$1"):t||e}),n},$=function(e,t){var r,n=e;if(H(D,n)&&(n="%"+(r=D[n])[0]+"%"),H(B,n)){var i=B[n];if(i===C&&(i=N(n)),void 0===i&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new l("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===K(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=G(e),n=r.length>0?r[0]:"",i=$("%"+n+"%",t),o=i.name,s=i.value,a=!1,u=i.alias;u&&(n=u[0],F(r,M([0,1],u)));for(var f=1,h=!0;f<r.length;f+=1){var p=r[f],d=V(p,0,1),y=V(p,-1);if(('"'===d||"'"===d||"`"===d||'"'===y||"'"===y||"`"===y)&&d!==y)throw new l("property names with quotes must have matching quotes");if("constructor"!==p&&h||(a=!0),n+="."+p,H(B,o="%"+n+"%"))s=B[o];else if(null!=s){if(!(p in s)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(_&&f+1>=r.length){var g=_(s,p);s=(h=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:s[p]}else h=H(s,p),s=s[p];h&&!a&&(B[o]=s)}}return s}},68899:function(e,t,r){"use strict";var n=r(68892);e.exports=n.getPrototypeOf||null},10443:function(e){"use strict";e.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},81618:function(e,t,r){"use strict";var n=r(10443),i=r(68899),o=r(96504);e.exports=n?function(e){return n(e)}:i?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return i(e)}:o?function(e){return o(e)}:null},40690:function(e){"use strict";e.exports=Object.getOwnPropertyDescriptor},27296:function(e,t,r){"use strict";var n=r(40690);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},31044:function(e,t,r){"use strict";var n=r(24429),i=function(){return!!n};i.hasArrayLengthDefineBug=function(){if(!n)return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},41405:function(e,t,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(55419);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&i()}},55419:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;var n=42;for(var i in e[t]=n,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(e,t);if(s.value!==n||!0!==s.enumerable)return!1}return!0}},96410:function(e,t,r){"use strict";var n=r(55419);e.exports=function(){return n()&&!!Symbol.toStringTag}},3349:function(e,t,r){"use strict";var n=r(89509).Buffer,i=r(88473).Transform;function o(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw TypeError(t+" must be a string or a buffer")}function s(e){i.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(35717)(s,i),s.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},s.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},s.prototype.update=function(e,t){if(o(e,"Data"),this._finalized)throw Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)r[s++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var a=0,u=8*e.length;u>0;++a)this._length[a]+=u,(u=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*u);return this},s.prototype._update=function(){throw Error("_update is not implemented")},s.prototype.digest=function(e){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},s.prototype._digest=function(){throw Error("_digest is not implemented")},e.exports=s},48824:function(e,t,r){"use strict";var n=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=r(58612);e.exports=o.call(n,i)},82584:function(e,t,r){"use strict";var n=r(96410)(),i=r(17379)("Object.prototype.toString"),o=function(e){return(!n||!e||"object"!=typeof e||!(Symbol.toStringTag in e))&&"[object Arguments]"===i(e)},s=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"length"in e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"callee"in e&&"[object Function]"===i(e.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,e.exports=a?o:s},95320:function(e){"use strict";var t,r,n=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},i(function(){throw 42},null,t)}catch(e){e!==r&&(i=null)}else i=null;var o=/^\s*class\b/,s=function(e){try{var t=n.call(e);return o.test(t)}catch(e){return!1}},a=function(e){try{if(s(e))return!1;return n.call(e),!0}catch(e){return!1}},u=Object.prototype.toString,l="[object Object]",c="[object Function]",f="[object GeneratorFunction]",h="[object HTMLAllCollection]",p="[object HTML document.all class]",d="[object HTMLCollection]",y="function"==typeof Symbol&&!!Symbol.toStringTag,g=!(0 in[,]),m=function(){return!1};if("object"==typeof document){var b=document.all;u.call(b)===u.call(document.all)&&(m=function(e){if((g||!e)&&(void 0===e||"object"==typeof e))try{var t=u.call(e);return(t===h||t===p||t===d||t===l)&&null==e("")}catch(e){}return!1})}e.exports=i?function(e){if(m(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;try{i(e,null,t)}catch(e){if(e!==r)return!1}return!s(e)&&a(e)}:function(e){if(m(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;if(y)return a(e);if(s(e))return!1;var t=u.call(e);return!!(t===c||t===f||/^\[object HTML/.test(t))&&a(e)}},48662:function(e,t,r){"use strict";var n,i=r(17379),o=r(79246)(/^\s*(?:function)?\*/),s=r(96410)(),a=r(81618),u=i("Object.prototype.toString"),l=i("Function.prototype.toString"),c=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}};e.exports=function(e){if("function"!=typeof e)return!1;if(o(l(e)))return!0;if(!s)return"[object GeneratorFunction]"===u(e);if(!a)return!1;if(void 0===n){var t=c();n=!!t&&a(t)}return a(e)===n}},98611:function(e){"use strict";e.exports=function(e){return e!=e}},20360:function(e,t,r){"use strict";var n=r(55559),i=r(4289),o=r(98611),s=r(29415),a=r(23194),u=n(s(),Number);i(u,{getPolyfill:s,implementation:o,shim:a}),e.exports=u},29415:function(e,t,r){"use strict";var n=r(98611);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:n}},23194:function(e,t,r){"use strict";var n=r(4289),i=r(29415);e.exports=function(){var e=i();return n(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},98420:function(e,t,r){"use strict";var n,i=r(17379),o=r(96410)(),s=r(48824),a=r(27296);if(o){var u=i("RegExp.prototype.exec"),l={},c=function(){throw l},f={toString:c,valueOf:c};"symbol"==typeof Symbol.toPrimitive&&(f[Symbol.toPrimitive]=c),n=function(e){if(!e||"object"!=typeof e)return!1;var t=a(e,"lastIndex");if(!(t&&s(t,"value")))return!1;try{u(e,f)}catch(e){return e===l}}}else{var h=i("Object.prototype.toString"),p="[object RegExp]";n=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&h(e)===p}}e.exports=n},29367:function(e){"use strict";let t=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);e.exports=e=>!t.has(e&&e.code)},85692:function(e,t,r){"use strict";var n=r(86430);e.exports=function(e){return!!n(e)}},39499:function(e){!function(t,r){e.exports=r()}(0,function(){"use strict";var e=Math.imul,t=Math.clz32,r=Math.abs,n=Math.max,i=Math.floor;class o extends Array{constructor(e,t){if(super(e),this.sign=t,e>o.__kMaxLength)throw RangeError("Maximum BigInt size exceeded")}static BigInt(e){var t=Number.isFinite;if("number"==typeof e){if(0===e)return o.__zero();if(o.__isOneDigitInt(e))return 0>e?o.__oneDigit(-e,!0):o.__oneDigit(e,!1);if(!t(e)||i(e)!==e)throw RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return o.__fromDouble(e)}if("string"==typeof e){let t=o.__fromString(e);if(null===t)throw SyntaxError("Cannot convert "+e+" to a BigInt");return t}if("boolean"==typeof e)return!0===e?o.__oneDigit(1,!1):o.__zero();if("object"==typeof e){if(e.constructor===o)return e;let t=o.__toPrimitive(e);return o.BigInt(t)}throw TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){let e=["BigInt["];for(let t of this)e.push((t?(t>>>0).toString(16):t)+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(e&e-1)?o.__toStringBasePowerOfTwo(this,e):o.__toStringGeneric(this,e,!1)}static toNumber(e){let t=e.length;if(0===t)return 0;if(1===t){let t=e.__unsignedDigit(0);return e.sign?-t:t}let r=e.__digit(t-1),n=o.__clz30(r),i=30*t-n;if(1024<i)return e.sign?-1/0:1/0;let s=i-1,a=r,u=t-1,l=n+3,c=32===l?0:a<<l;c>>>=12;let f=l-12,h=12<=l?0:a<<20+l,p=20+l;for(0<f&&0<u&&(u--,c|=(a=e.__digit(u))>>>30-f,h=a<<f+2,p=f+2);0<p&&0<u;)u--,a=e.__digit(u),h|=30<=p?a<<p-30:a>>>30-p,p-=30;let d=o.__decideRounding(e,p,u,a);if((1===d||0===d&&1==(1&h))&&0==(h=h+1>>>0)&&0!=++c>>>20&&(c=0,1023<++s))return e.sign?-1/0:1/0;let y=e.sign?-2147483648:0;return s=s+1023<<20,o.__kBitConversionInts[1]=y|s|c,o.__kBitConversionInts[0]=h,o.__kBitConversionDouble[0]}static unaryMinus(e){if(0===e.length)return e;let t=e.__copy();return t.sign=!e.sign,t}static bitwiseNot(e){return e.sign?o.__absoluteSubOne(e).__trim():o.__absoluteAddOne(e,!0)}static exponentiate(e,t){if(t.sign)throw RangeError("Exponent must be positive");if(0===t.length)return o.__oneDigit(1,!1);if(0===e.length)return e;if(1===e.length&&1===e.__digit(0))return e.sign&&0==(1&t.__digit(0))?o.unaryMinus(e):e;if(1<t.length)throw RangeError("BigInt too big");let r=t.__unsignedDigit(0);if(1===r)return e;if(r>=o.__kMaxLengthBits)throw RangeError("BigInt too big");if(1===e.length&&2===e.__digit(0)){let t=1+(0|r/30),n=new o(t,e.sign&&0!=(1&r));n.__initializeDigits();let i=1<<r%30;return n.__setDigit(t-1,i),n}let n=null,i=e;for(0!=(1&r)&&(n=e),r>>=1;0!==r;r>>=1)i=o.multiply(i,i),0!=(1&r)&&(n=null===n?i:o.multiply(n,i));return n}static multiply(e,t){if(0===e.length)return e;if(0===t.length)return t;let r=e.length+t.length;30<=e.__clzmsd()+t.__clzmsd()&&r--;let n=new o(r,e.sign!==t.sign);n.__initializeDigits();for(let r=0;r<e.length;r++)o.__multiplyAccumulate(t,e.__digit(r),n,r);return n.__trim()}static divide(e,t){let r;if(0===t.length)throw RangeError("Division by zero");if(0>o.__absoluteCompare(e,t))return o.__zero();let n=e.sign!==t.sign,i=t.__unsignedDigit(0);if(1===t.length&&32767>=i){if(1===i)return n===e.sign?e:o.unaryMinus(e);r=o.__absoluteDivSmall(e,i,null)}else r=o.__absoluteDivLarge(e,t,!0,!1);return r.sign=n,r.__trim()}static remainder(e,t){if(0===t.length)throw RangeError("Division by zero");if(0>o.__absoluteCompare(e,t))return e;let r=t.__unsignedDigit(0);if(1===t.length&&32767>=r){if(1===r)return o.__zero();let t=o.__absoluteModSmall(e,r);return 0===t?o.__zero():o.__oneDigit(t,e.sign)}let n=o.__absoluteDivLarge(e,t,!1,!0);return n.sign=e.sign,n.__trim()}static add(e,t){let r=e.sign;return r===t.sign?o.__absoluteAdd(e,t,r):0<=o.__absoluteCompare(e,t)?o.__absoluteSub(e,t,r):o.__absoluteSub(t,e,!r)}static subtract(e,t){let r=e.sign;return r===t.sign?0<=o.__absoluteCompare(e,t)?o.__absoluteSub(e,t,r):o.__absoluteSub(t,e,!r):o.__absoluteAdd(e,t,r)}static leftShift(e,t){return 0===t.length||0===e.length?e:t.sign?o.__rightShiftByAbsolute(e,t):o.__leftShiftByAbsolute(e,t)}static signedRightShift(e,t){return 0===t.length||0===e.length?e:t.sign?o.__leftShiftByAbsolute(e,t):o.__rightShiftByAbsolute(e,t)}static unsignedRightShift(){throw TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,t){return 0>o.__compareToBigInt(e,t)}static lessThanOrEqual(e,t){return 0>=o.__compareToBigInt(e,t)}static greaterThan(e,t){return 0<o.__compareToBigInt(e,t)}static greaterThanOrEqual(e,t){return 0<=o.__compareToBigInt(e,t)}static equal(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e.__digit(r)!==t.__digit(r))return!1;return!0}static notEqual(e,t){return!o.equal(e,t)}static bitwiseAnd(e,t){if(!e.sign&&!t.sign)return o.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){let r=n(e.length,t.length)+1,i=o.__absoluteSubOne(e,r),s=o.__absoluteSubOne(t);return i=o.__absoluteOr(i,s,i),o.__absoluteAddOne(i,!0,i).__trim()}return e.sign&&([e,t]=[t,e]),o.__absoluteAndNot(e,o.__absoluteSubOne(t)).__trim()}static bitwiseXor(e,t){if(!e.sign&&!t.sign)return o.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){let r=n(e.length,t.length),i=o.__absoluteSubOne(e,r),s=o.__absoluteSubOne(t);return o.__absoluteXor(i,s,i).__trim()}let r=n(e.length,t.length)+1;e.sign&&([e,t]=[t,e]);let i=o.__absoluteSubOne(t,r);return i=o.__absoluteXor(i,e,i),o.__absoluteAddOne(i,!0,i).__trim()}static bitwiseOr(e,t){let r=n(e.length,t.length);if(!e.sign&&!t.sign)return o.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){let n=o.__absoluteSubOne(e,r),i=o.__absoluteSubOne(t);return n=o.__absoluteAnd(n,i,n),o.__absoluteAddOne(n,!0,n).__trim()}e.sign&&([e,t]=[t,e]);let i=o.__absoluteSubOne(t,r);return i=o.__absoluteAndNot(i,e,i),o.__absoluteAddOne(i,!0,i).__trim()}static asIntN(e,t){if(0===t.length)return t;if(0>(e=i(e)))throw RangeError("Invalid value: not (convertible to) a safe integer");if(0===e)return o.__zero();if(e>=o.__kMaxLengthBits)return t;let r=0|(e+29)/30;if(t.length<r)return t;let n=t.__unsignedDigit(r-1),s=1<<(e-1)%30;if(t.length===r&&n<s)return t;if((n&s)!==s)return o.__truncateToNBits(e,t);if(!t.sign)return o.__truncateAndSubFromPowerOfTwo(e,t,!0);if(0==(n&s-1)){for(let n=r-2;0<=n;n--)if(0!==t.__digit(n))return o.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===r&&n===s?t:o.__truncateToNBits(e,t)}return o.__truncateAndSubFromPowerOfTwo(e,t,!1)}static asUintN(e,t){if(0===t.length)return t;if(0>(e=i(e)))throw RangeError("Invalid value: not (convertible to) a safe integer");if(0===e)return o.__zero();if(t.sign){if(e>o.__kMaxLengthBits)throw RangeError("BigInt too big");return o.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=o.__kMaxLengthBits)return t;let r=0|(e+29)/30;if(t.length<r)return t;let n=e%30;return t.length==r&&(0===n||0==t.__digit(r-1)>>>n)?t:o.__truncateToNBits(e,t)}static ADD(e,t){if(e=o.__toPrimitive(e),t=o.__toPrimitive(t),"string"==typeof e)return"string"!=typeof t&&(t=t.toString()),e+t;if("string"==typeof t)return e.toString()+t;if(e=o.__toNumeric(e),t=o.__toNumeric(t),o.__isBigInt(e)&&o.__isBigInt(t))return o.add(e,t);if("number"==typeof e&&"number"==typeof t)return e+t;throw TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,t){return o.__compare(e,t,0)}static LE(e,t){return o.__compare(e,t,1)}static GT(e,t){return o.__compare(e,t,2)}static GE(e,t){return o.__compare(e,t,3)}static EQ(e,t){for(;;){if(o.__isBigInt(e))return o.__isBigInt(t)?o.equal(e,t):o.EQ(t,e);if("number"==typeof e){if(o.__isBigInt(t))return o.__equalToNumber(t,e);if("object"!=typeof t)return e==t;t=o.__toPrimitive(t)}else if("string"==typeof e){if(o.__isBigInt(t))return null!==(e=o.__fromString(e))&&o.equal(e,t);if("object"!=typeof t)return e==t;t=o.__toPrimitive(t)}else if("boolean"==typeof e){if(o.__isBigInt(t))return o.__equalToNumber(t,+e);if("object"!=typeof t)return e==t;t=o.__toPrimitive(t)}else if("symbol"==typeof e){if(o.__isBigInt(t))return!1;if("object"!=typeof t)return e==t;t=o.__toPrimitive(t)}else{if("object"!=typeof e||"object"==typeof t&&t.constructor!==o)return e==t;e=o.__toPrimitive(e)}}}static NE(e,t){return!o.EQ(e,t)}static __zero(){return new o(0,!1)}static __oneDigit(e,t){let r=new o(1,t);return r.__setDigit(0,e),r}__copy(){let e=new o(this.length,this.sign);for(let t=0;t<this.length;t++)e[t]=this[t];return e}__trim(){let e=this.length,t=this[e-1];for(;0===t;)t=this[--e-1],this.pop();return 0===e&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,t,r,n){let i;if(0<t)return -1;if(0>t)i=-t-1;else{if(0===r)return -1;r--,n=e.__digit(r),i=29}let o=1<<i;if(0==(n&o))return -1;if(o-=1,0!=(n&o))return 1;for(;0<r;)if(r--,0!==e.__digit(r))return 1;return 0}static __fromDouble(e){o.__kBitConversionDouble[0]=e;let t=(2047&o.__kBitConversionInts[1]>>>20)-1023,r=(0|t/30)+1,n=new o(r,0>e),i=1048575&o.__kBitConversionInts[1]|1048576,s=o.__kBitConversionInts[0],a=20,u=t%30,l,c=0;if(20>u){let e=a-u;c=e+32,l=i>>>e,i=i<<32-e|s>>>e,s<<=32-e}else if(20===u)c=32,l=i,i=s,s=0;else{let e=u-a;c=32-e,l=i<<e|s>>>32-e,i=s<<e,s=0}n.__setDigit(r-1,l);for(let e=r-2;0<=e;e--)0<c?(c-=30,l=i>>>2,i=i<<30|s>>>2,s<<=30):l=0,n.__setDigit(e,l);return n.__trim()}static __isWhitespace(e){return!!(13>=e&&9<=e)||(159>=e?32==e:131071>=e?160==e||5760==e:196607>=e?10>=(e&=131071)||40==e||41==e||47==e||95==e||4096==e:65279==e)}static __fromString(e,t=0){let r=0,n=e.length,i=0;if(0===n)return o.__zero();let s=e.charCodeAt(i);for(;o.__isWhitespace(s);){if(++i===n)return o.__zero();s=e.charCodeAt(i)}if(43===s){if(++i===n)return null;s=e.charCodeAt(i),r=1}else if(45===s){if(++i===n)return null;s=e.charCodeAt(i),r=-1}if(0===t){if(t=10,48===s){if(++i===n)return o.__zero();if(88===(s=e.charCodeAt(i))||120===s){if(t=16,++i===n)return null;s=e.charCodeAt(i)}else if(79===s||111===s){if(t=8,++i===n)return null;s=e.charCodeAt(i)}else if(66===s||98===s){if(t=2,++i===n)return null;s=e.charCodeAt(i)}}}else if(16===t&&48===s){if(++i===n)return o.__zero();if(88===(s=e.charCodeAt(i))||120===s){if(++i===n)return null;s=e.charCodeAt(i)}}if(0!=r&&10!==t)return null;for(;48===s;){if(++i===n)return o.__zero();s=e.charCodeAt(i)}let a=n-i,u=o.__kMaxBitsPerChar[t],l=o.__kBitsPerCharTableMultiplier-1;if(a>1073741824/u)return null;let c=u*a+l>>>o.__kBitsPerCharTableShift,f=new o(0|(c+29)/30,!1),h=10>t?t:10,p=10<t?t-10:0;if(0==(t&t-1)){u>>=o.__kBitsPerCharTableShift;let t=[],r=[],a=!1;do{let o=0,l=0;for(;;){let t;if(s-48>>>0<h)t=s-48;else if((32|s)-97>>>0<p)t=(32|s)-87;else{a=!0;break}if(l+=u,o=o<<u|t,++i===n){a=!0;break}if(s=e.charCodeAt(i),30<l+u)break}t.push(o),r.push(l)}while(!a);o.__fillFromParts(f,t,r)}else{f.__initializeDigits();let r=!1,a=0;do{let c=0,d=1;for(;;){let o;if(s-48>>>0<h)o=s-48;else if((32|s)-97>>>0<p)o=(32|s)-87;else{r=!0;break}let u=d*t;if(1073741823<u)break;if(d=u,c=c*t+o,a++,++i===n){r=!0;break}s=e.charCodeAt(i)}let y=0|(u*a+(l=30*o.__kBitsPerCharTableMultiplier-1)>>>o.__kBitsPerCharTableShift)/30;f.__inplaceMultiplyAdd(d,c,y)}while(!r)}if(i!==n){if(!o.__isWhitespace(s))return null;for(i++;i<n;i++)if(s=e.charCodeAt(i),!o.__isWhitespace(s))return null}return f.sign=-1==r,f.__trim()}static __fillFromParts(e,t,r){let n=0,i=0,o=0;for(let s=t.length-1;0<=s;s--){let a=t[s],u=r[s];i|=a<<o,30===(o+=u)?(e.__setDigit(n++,i),o=0,i=0):30<o&&(e.__setDigit(n++,1073741823&i),o-=30,i=a>>>u-o)}if(0!==i){if(n>=e.length)throw Error("implementation bug");e.__setDigit(n++,i)}for(;n<e.length;n++)e.__setDigit(n,0)}static __toStringBasePowerOfTwo(e,t){let r=e.length,n=t-1,i=n=(15&(n=(51&(n=(85&n>>>1)+(85&n))>>>2)+(51&n))>>>4)+(15&n),s=t-1,a=e.__digit(r-1),u=0|(30*r-o.__clz30(a)+i-1)/i;if(e.sign&&u++,268435456<u)throw Error("string too long");let l=Array(u),c=u-1,f=0,h=0;for(let t=0;t<r-1;t++){let r=e.__digit(t),n=(f|r<<h)&s;l[c--]=o.__kConversionChars[n];let a=i-h;for(f=r>>>a,h=30-a;h>=i;)l[c--]=o.__kConversionChars[f&s],f>>>=i,h-=i}let p=(f|a<<h)&s;for(l[c--]=o.__kConversionChars[p],f=a>>>i-h;0!==f;)l[c--]=o.__kConversionChars[f&s],f>>>=i;if(e.sign&&(l[c--]="-"),-1!=c)throw Error("implementation bug");return l.join("")}static __toStringGeneric(e,t,r){let n,i;let s=e.length;if(0===s)return"";if(1===s){let n=e.__unsignedDigit(0).toString(t);return!1===r&&e.sign&&(n="-"+n),n}let a=30*s-o.__clz30(e.__digit(s-1)),u=o.__kMaxBitsPerChar[t]-1,l=a*o.__kBitsPerCharTableMultiplier;l+=u-1;let c=(l=0|l/u)+1>>1,f=o.exponentiate(o.__oneDigit(t,!1),o.__oneDigit(c,!1)),h=f.__unsignedDigit(0);if(1===f.length&&32767>=h){(n=new o(e.length,!1)).__initializeDigits();let r=0;for(let t=2*e.length-1;0<=t;t--){let i=r<<15|e.__halfDigit(t);n.__setHalfDigit(t,0|i/h),r=0|i%h}i=r.toString(t)}else{let r=o.__absoluteDivLarge(e,f,!0,!0);n=r.quotient;let s=r.remainder.__trim();i=o.__toStringGeneric(s,t,!0)}n.__trim();let p=o.__toStringGeneric(n,t,!0);for(;i.length<c;)i="0"+i;return!1===r&&e.sign&&(p="-"+p),p+i}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,t){let r=e.sign;if(r!==t.sign)return o.__unequalSign(r);let n=o.__absoluteCompare(e,t);return 0<n?o.__absoluteGreater(r):0>n?o.__absoluteLess(r):0}static __compareToNumber(e,t){if(o.__isOneDigitInt(t)){let n=e.sign,i=0>t;if(n!==i)return o.__unequalSign(n);if(0===e.length){if(i)throw Error("implementation bug");return 0===t?0:-1}if(1<e.length)return o.__absoluteGreater(n);let s=r(t),a=e.__unsignedDigit(0);return a>s?o.__absoluteGreater(n):a<s?o.__absoluteLess(n):0}return o.__compareToDouble(e,t)}static __compareToDouble(e,t){if(t!=t)return t;if(t===1/0)return -1;if(t===-1/0)return 1;let r=e.sign;if(r!==0>t)return o.__unequalSign(r);if(0===t)throw Error("implementation bug: should be handled elsewhere");if(0===e.length)return -1;o.__kBitConversionDouble[0]=t;let n=2047&o.__kBitConversionInts[1]>>>20;if(2047==n)throw Error("implementation bug: handled elsewhere");let i=n-1023;if(0>i)return o.__absoluteGreater(r);let s=e.length,a=e.__digit(s-1),u=o.__clz30(a),l=30*s-u,c=i+1;if(l<c)return o.__absoluteLess(r);if(l>c)return o.__absoluteGreater(r);let f=1048576|1048575&o.__kBitConversionInts[1],h=o.__kBitConversionInts[0],p=20,d=29-u;if(d!==(0|(l-1)%30))throw Error("implementation bug");let y,g=0;if(20>d){let e=p-d;g=e+32,y=f>>>e,f=f<<32-e|h>>>e,h<<=32-e}else if(20===d)g=32,y=f,f=h,h=0;else{let e=d-p;g=32-e,y=f<<e|h>>>32-e,f=h<<e,h=0}if((a>>>=0)>(y>>>=0))return o.__absoluteGreater(r);if(a<y)return o.__absoluteLess(r);for(let t=s-2;0<=t;t--){0<g?(g-=30,y=f>>>2,f=f<<30|h>>>2,h<<=30):y=0;let n=e.__unsignedDigit(t);if(n>y)return o.__absoluteGreater(r);if(n<y)return o.__absoluteLess(r)}if(0!==f||0!==h){if(0===g)throw Error("implementation bug");return o.__absoluteLess(r)}return 0}static __equalToNumber(e,t){return o.__isOneDigitInt(t)?0===t?0===e.length:1===e.length&&e.sign===0>t&&e.__unsignedDigit(0)===r(t):0===o.__compareToDouble(e,t)}static __comparisonResultToBool(e,t){return 0===t?0>e:1===t?0>=e:2===t?0<e:3===t?0<=e:void 0}static __compare(e,t,r){if(e=o.__toPrimitive(e),t=o.__toPrimitive(t),"string"==typeof e&&"string"==typeof t)switch(r){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(o.__isBigInt(e)&&"string"==typeof t)return null!==(t=o.__fromString(t))&&o.__comparisonResultToBool(o.__compareToBigInt(e,t),r);if("string"==typeof e&&o.__isBigInt(t))return null!==(e=o.__fromString(e))&&o.__comparisonResultToBool(o.__compareToBigInt(e,t),r);if(e=o.__toNumeric(e),t=o.__toNumeric(t),o.__isBigInt(e)){if(o.__isBigInt(t))return o.__comparisonResultToBool(o.__compareToBigInt(e,t),r);if("number"!=typeof t)throw Error("implementation bug");return o.__comparisonResultToBool(o.__compareToNumber(e,t),r)}if("number"!=typeof e)throw Error("implementation bug");if(o.__isBigInt(t))return o.__comparisonResultToBool(o.__compareToNumber(t,e),2^r);if("number"!=typeof t)throw Error("implementation bug");return 0===r?e<t:1===r?e<=t:2===r?e>t:3===r?e>=t:void 0}__clzmsd(){return o.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,t,r){if(e.length<t.length)return o.__absoluteAdd(t,e,r);if(0===e.length)return e;if(0===t.length)return e.sign===r?e:o.unaryMinus(e);let n=e.length;(0===e.__clzmsd()||t.length===e.length&&0===t.__clzmsd())&&n++;let i=new o(n,r),s=0,a=0;for(;a<t.length;a++){let r=e.__digit(a)+t.__digit(a)+s;s=r>>>30,i.__setDigit(a,1073741823&r)}for(;a<e.length;a++){let t=e.__digit(a)+s;s=t>>>30,i.__setDigit(a,1073741823&t)}return a<i.length&&i.__setDigit(a,s),i.__trim()}static __absoluteSub(e,t,r){if(0===e.length)return e;if(0===t.length)return e.sign===r?e:o.unaryMinus(e);let n=new o(e.length,r),i=0,s=0;for(;s<t.length;s++){let r=e.__digit(s)-t.__digit(s)-i;i=1&r>>>30,n.__setDigit(s,1073741823&r)}for(;s<e.length;s++){let t=e.__digit(s)-i;i=1&t>>>30,n.__setDigit(s,1073741823&t)}return n.__trim()}static __absoluteAddOne(e,t,r=null){let n=e.length;null===r?r=new o(n,t):r.sign=t;let i=1;for(let t=0;t<n;t++){let n=e.__digit(t)+i;i=n>>>30,r.__setDigit(t,1073741823&n)}return 0!=i&&r.__setDigitGrow(n,1),r}static __absoluteSubOne(e,t){let r=e.length,n=new o(t=t||r,!1),i=1;for(let t=0;t<r;t++){let r=e.__digit(t)-i;i=1&r>>>30,n.__setDigit(t,1073741823&r)}if(0!=i)throw Error("implementation bug");for(let e=r;e<t;e++)n.__setDigit(e,0);return n}static __absoluteAnd(e,t,r=null){let n=e.length,i=t.length,s=i;if(n<i){s=n;let r=e,o=n;e=t,n=i,t=r,i=o}let a=s;null===r?r=new o(a,!1):a=r.length;let u=0;for(;u<s;u++)r.__setDigit(u,e.__digit(u)&t.__digit(u));for(;u<a;u++)r.__setDigit(u,0);return r}static __absoluteAndNot(e,t,r=null){let n=e.length,i=t.length,s=i;n<i&&(s=n);let a=n;null===r?r=new o(a,!1):a=r.length;let u=0;for(;u<s;u++)r.__setDigit(u,e.__digit(u)&~t.__digit(u));for(;u<n;u++)r.__setDigit(u,e.__digit(u));for(;u<a;u++)r.__setDigit(u,0);return r}static __absoluteOr(e,t,r=null){let n=e.length,i=t.length,s=i;if(n<i){s=n;let r=e,o=n;e=t,n=i,t=r,i=o}let a=n;null===r?r=new o(a,!1):a=r.length;let u=0;for(;u<s;u++)r.__setDigit(u,e.__digit(u)|t.__digit(u));for(;u<n;u++)r.__setDigit(u,e.__digit(u));for(;u<a;u++)r.__setDigit(u,0);return r}static __absoluteXor(e,t,r=null){let n=e.length,i=t.length,s=i;if(n<i){s=n;let r=e,o=n;e=t,n=i,t=r,i=o}let a=n;null===r?r=new o(a,!1):a=r.length;let u=0;for(;u<s;u++)r.__setDigit(u,e.__digit(u)^t.__digit(u));for(;u<n;u++)r.__setDigit(u,e.__digit(u));for(;u<a;u++)r.__setDigit(u,0);return r}static __absoluteCompare(e,t){let r=e.length-t.length;if(0!=r)return r;let n=e.length-1;for(;0<=n&&e.__digit(n)===t.__digit(n);)n--;return 0>n?0:e.__unsignedDigit(n)>t.__unsignedDigit(n)?1:-1}static __multiplyAccumulate(e,t,r,n){if(0===t)return;let i=32767&t,s=t>>>15,a=0,u=0;for(let t,l=0;l<e.length;l++,n++){t=r.__digit(n);let c=e.__digit(l),f=32767&c,h=c>>>15,p=o.__imul(f,i),d=o.__imul(f,s),y=o.__imul(h,i),g=o.__imul(h,s);t+=u+p+a,a=t>>>30,t&=1073741823,t+=((32767&d)<<15)+((32767&y)<<15),a+=t>>>30,u=g+(d>>>15)+(y>>>15),r.__setDigit(n,1073741823&t)}for(;0!=a||0!==u;n++){let e=r.__digit(n);e+=a+u,u=0,a=e>>>30,r.__setDigit(n,1073741823&e)}}static __internalMultiplyAdd(e,t,r,n,i){let s=r,a=0;for(let r=0;r<n;r++){let n=e.__digit(r),u=o.__imul(32767&n,t),l=o.__imul(n>>>15,t),c=u+((32767&l)<<15)+a+s;s=c>>>30,a=l>>>15,i.__setDigit(r,1073741823&c)}if(i.length>n)for(i.__setDigit(n++,s+a);n<i.length;)i.__setDigit(n++,0);else if(0!==s+a)throw Error("implementation bug")}__inplaceMultiplyAdd(e,t,r){r>this.length&&(r=this.length);let n=32767&e,i=e>>>15,s=0,a=t;for(let e=0;e<r;e++){let t=this.__digit(e),r=32767&t,u=t>>>15,l=o.__imul(r,n),c=o.__imul(r,i),f=o.__imul(u,n),h=o.__imul(u,i),p=a+l+s;s=p>>>30,p&=1073741823,p+=((32767&c)<<15)+((32767&f)<<15),s+=p>>>30,a=h+(c>>>15)+(f>>>15),this.__setDigit(e,1073741823&p)}if(0!=s||0!==a)throw Error("implementation bug")}static __absoluteDivSmall(e,t,r=null){null===r&&(r=new o(e.length,!1));let n=0;for(let i,o=2*e.length-1;0<=o;o-=2){let s=0|(i=(n<<15|e.__halfDigit(o))>>>0)/t,a=0|(i=((n=0|i%t)<<15|e.__halfDigit(o-1))>>>0)/t;n=0|i%t,r.__setDigit(o>>>1,s<<15|a)}return r}static __absoluteModSmall(e,t){let r=0;for(let n=2*e.length-1;0<=n;n--)r=0|((r<<15|e.__halfDigit(n))>>>0)%t;return r}static __absoluteDivLarge(e,t,r,n){let i=t.__halfDigitLength(),s=t.length,a=e.__halfDigitLength()-i,u=null;r&&(u=new o(a+2>>>1,!1)).__initializeDigits();let l=new o(i+2>>>1,!1);l.__initializeDigits();let c=o.__clz15(t.__halfDigit(i-1));0<c&&(t=o.__specialLeftShift(t,c,0));let f=o.__specialLeftShift(e,c,1),h=t.__halfDigit(i-1),p=0;for(let e,n=a;0<=n;n--){e=32767;let a=f.__halfDigit(n+i);if(a!==h){let r=(a<<15|f.__halfDigit(n+i-1))>>>0;e=0|r/h;let s=0|r%h,u=t.__halfDigit(i-2),l=f.__halfDigit(n+i-2);for(;o.__imul(e,u)>>>0>(s<<16|l)>>>0&&(e--,!(32767<(s+=h))););}o.__internalMultiplyAdd(t,e,0,s,l);let c=f.__inplaceSub(l,n,i+1);0!==c&&(c=f.__inplaceAdd(t,n,i),f.__setHalfDigit(n+i,32767&f.__halfDigit(n+i)+c),e--),r&&(1&n?p=e<<15:u.__setDigit(n>>>1,p|e))}if(n)return f.__inplaceRightShift(c),r?{quotient:u,remainder:f}:f;if(r)return u;throw Error("unreachable")}static __clz15(e){return o.__clz30(e)-15}__inplaceAdd(e,t,r){let n=0;for(let i=0;i<r;i++){let r=this.__halfDigit(t+i)+e.__halfDigit(i)+n;n=r>>>15,this.__setHalfDigit(t+i,32767&r)}return n}__inplaceSub(e,t,r){let n=0;if(1&t){t>>=1;let i=this.__digit(t),o=32767&i,s=0;for(;s<r-1>>>1;s++){let r=e.__digit(s),a=(i>>>15)-(32767&r)-n;n=1&a>>>15,this.__setDigit(t+s,(32767&a)<<15|32767&o),n=1&(o=(32767&(i=this.__digit(t+s+1)))-(r>>>15)-n)>>>15}let a=e.__digit(s),u=(i>>>15)-(32767&a)-n;if(n=1&u>>>15,this.__setDigit(t+s,(32767&u)<<15|32767&o),t+s+1>=this.length)throw RangeError("out of bounds");0==(1&r)&&(n=1&(o=(32767&(i=this.__digit(t+s+1)))-(a>>>15)-n)>>>15,this.__setDigit(t+e.length,1073709056&i|32767&o))}else{t>>=1;let i=0;for(;i<e.length-1;i++){let r=this.__digit(t+i),o=e.__digit(i),s=(32767&r)-(32767&o)-n,a=(r>>>15)-(o>>>15)-(n=1&s>>>15);n=1&a>>>15,this.__setDigit(t+i,(32767&a)<<15|32767&s)}let o=this.__digit(t+i),s=e.__digit(i),a=(32767&o)-(32767&s)-n;n=1&a>>>15;let u=0;0==(1&r)&&(n=1&(u=(o>>>15)-(s>>>15)-n)>>>15),this.__setDigit(t+i,(32767&u)<<15|32767&a)}return n}__inplaceRightShift(e){if(0===e)return;let t=this.__digit(0)>>>e,r=this.length-1;for(let n=0;n<r;n++){let r=this.__digit(n+1);this.__setDigit(n,1073741823&r<<30-e|t),t=r>>>e}this.__setDigit(r,t)}static __specialLeftShift(e,t,r){let n=e.length,i=new o(n+r,!1);if(0===t){for(let t=0;t<n;t++)i.__setDigit(t,e.__digit(t));return 0<r&&i.__setDigit(n,0),i}let s=0;for(let r=0;r<n;r++){let n=e.__digit(r);i.__setDigit(r,1073741823&n<<t|s),s=n>>>30-t}return 0<r&&i.__setDigit(n,s),i}static __leftShiftByAbsolute(e,t){let r=o.__toShiftAmount(t);if(0>r)throw RangeError("BigInt too big");let n=0|r/30,i=r%30,s=e.length,a=0!==i&&0!=e.__digit(s-1)>>>30-i,u=s+n+(a?1:0),l=new o(u,e.sign);if(0===i){let t=0;for(;t<n;t++)l.__setDigit(t,0);for(;t<u;t++)l.__setDigit(t,e.__digit(t-n))}else{let t=0;for(let e=0;e<n;e++)l.__setDigit(e,0);for(let r=0;r<s;r++){let o=e.__digit(r);l.__setDigit(r+n,1073741823&o<<i|t),t=o>>>30-i}if(a)l.__setDigit(s+n,t);else if(0!==t)throw Error("implementation bug")}return l.__trim()}static __rightShiftByAbsolute(e,t){let r=e.length,n=e.sign,i=o.__toShiftAmount(t);if(0>i)return o.__rightShiftByMaximum(n);let s=0|i/30,a=i%30,u=r-s;if(0>=u)return o.__rightShiftByMaximum(n);let l=!1;if(n){if(0!=(e.__digit(s)&(1<<a)-1))l=!0;else for(let t=0;t<s;t++)if(0!==e.__digit(t)){l=!0;break}}l&&0===a&&0==~e.__digit(r-1)&&u++;let c=new o(u,n);if(0===a){c.__setDigit(u-1,0);for(let t=s;t<r;t++)c.__setDigit(t-s,e.__digit(t))}else{let t=e.__digit(s)>>>a,n=r-s-1;for(let r=0;r<n;r++){let n=e.__digit(r+s+1);c.__setDigit(r,1073741823&n<<30-a|t),t=n>>>a}c.__setDigit(n,t)}return l&&(c=o.__absoluteAddOne(c,!0,c)),c.__trim()}static __rightShiftByMaximum(e){return e?o.__oneDigit(1,!0):o.__zero()}static __toShiftAmount(e){if(1<e.length)return -1;let t=e.__unsignedDigit(0);return t>o.__kMaxLengthBits?-1:t}static __toPrimitive(e,t="default"){if("object"!=typeof e||e.constructor===o)return e;if("undefined"!=typeof Symbol&&"symbol"==typeof Symbol.toPrimitive){let r=e[Symbol.toPrimitive];if(r){let e=r(t);if("object"!=typeof e)return e;throw TypeError("Cannot convert object to primitive value")}}let r=e.valueOf;if(r){let t=r.call(e);if("object"!=typeof t)return t}let n=e.toString;if(n){let t=n.call(e);if("object"!=typeof t)return t}throw TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return o.__isBigInt(e)?e:+e}static __isBigInt(e){return"object"==typeof e&&null!==e&&e.constructor===o}static __truncateToNBits(e,t){let r=0|(e+29)/30,n=new o(r,t.sign),i=r-1;for(let e=0;e<i;e++)n.__setDigit(e,t.__digit(e));let s=t.__digit(i);if(0!=e%30){let t=32-e%30;s=s<<t>>>t}return n.__setDigit(i,s),n.__trim()}static __truncateAndSubFromPowerOfTwo(e,t,r){let n;var i=Math.min;let s=0|(e+29)/30,a=new o(s,r),u=0,l=s-1,c=0;for(let e=i(l,t.length);u<e;u++){let e=0-t.__digit(u)-c;c=1&e>>>30,a.__setDigit(u,1073741823&e)}for(;u<l;u++)a.__setDigit(u,0|1073741823&-c);let f=l<t.length?t.__digit(l):0,h=e%30;if(0==h)n=0-f-c&1073741823;else{let e=32-h;f=f<<e>>>e;let t=1<<32-e;n=t-f-c&t-1}return a.__setDigit(l,n),a.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,t){this[e]=0|t}__setDigitGrow(e,t){this[e]=0|t}__halfDigitLength(){let e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,t){let r=e>>>1,n=this.__digit(r),i=1&e?32767&n|t<<15:1073709056&n|32767&t;this.__setDigit(r,i)}static __digitPow(e,t){let r=1;for(;0<t;)1&t&&(r*=e),t>>>=1,e*=e;return r}static __isOneDigitInt(e){return(1073741823&e)===e}}return o.__kMaxLength=33554432,o.__kMaxLengthBits=o.__kMaxLength<<5,o.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],o.__kBitsPerCharTableShift=5,o.__kBitsPerCharTableMultiplier=1<<o.__kBitsPerCharTableShift,o.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o.__kBitConversionBuffer=new ArrayBuffer(8),o.__kBitConversionDouble=new Float64Array(o.__kBitConversionBuffer),o.__kBitConversionInts=new Int32Array(o.__kBitConversionBuffer),o.__clz30=t?function(e){return t(e)-2}:function(e){var t=Math.LN2,r=Math.log;return 0===e?30:0|29-(0|r(e>>>0)/t)},o.__imul=e||function(e,t){return 0|e*t},o})},4400:function(e,t,r){var n=r(54123).stringify,i=r(26813);e.exports=function(e){return{parse:i(e),stringify:n}},e.exports.parse=i(),e.exports.stringify=n},26813:function(e,t,r){var n=null;let i=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,o=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var s=function(e){"use strict";var t={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=e){if(!0===e.strict&&(t.strict=!0),!0===e.storeAsString&&(t.storeAsString=!0),t.alwaysParseAsBig=!0===e.alwaysParseAsBig&&e.alwaysParseAsBig,t.useNativeBigInt=!0===e.useNativeBigInt&&e.useNativeBigInt,void 0!==e.constructorAction){if("error"===e.constructorAction||"ignore"===e.constructorAction||"preserve"===e.constructorAction)t.constructorAction=e.constructorAction;else throw Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${e.constructorAction}`)}if(void 0!==e.protoAction){if("error"===e.protoAction||"ignore"===e.protoAction||"preserve"===e.protoAction)t.protoAction=e.protoAction;else throw Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${e.protoAction}`)}}var s,a,u,l,c={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},f=function(e){throw{name:"SyntaxError",message:e,at:s,text:u}},h=function(e){return e&&e!==a&&f("Expected '"+e+"' instead of '"+a+"'"),a=u.charAt(s),s+=1,a},p=function(){var e,i="";for("-"===a&&(i="-",h("-"));a>="0"&&a<="9";)i+=a,h();if("."===a)for(i+=".";h()&&a>="0"&&a<="9";)i+=a;if("e"===a||"E"===a)for(i+=a,h(),("-"===a||"+"===a)&&(i+=a,h());a>="0"&&a<="9";)i+=a,h();if(isFinite(e=+i))return(null==n&&(n=r(44431)),i.length>15)?t.storeAsString?i:t.useNativeBigInt?BigInt(i):new n(i):t.alwaysParseAsBig?t.useNativeBigInt?BigInt(e):new n(e):e;f("Bad number")},d=function(){var e,t,r,n="";if('"'===a)for(var i=s;h();){if('"'===a)return s-1>i&&(n+=u.substring(i,s-1)),h(),n;if("\\"===a){if(s-1>i&&(n+=u.substring(i,s-1)),h(),"u"===a){for(t=0,r=0;t<4&&isFinite(e=parseInt(h(),16));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else if("string"==typeof c[a])n+=c[a];else break;i=s}}f("Bad string")},y=function(){for(;a&&a<=" ";)h()},g=function(){switch(a){case"t":return h("t"),h("r"),h("u"),h("e"),!0;case"f":return h("f"),h("a"),h("l"),h("s"),h("e"),!1;case"n":return h("n"),h("u"),h("l"),h("l"),null}f("Unexpected '"+a+"'")},m=function(){var e=[];if("["===a){if(h("["),y(),"]"===a)return h("]"),e;for(;a;){if(e.push(l()),y(),"]"===a)return h("]"),e;h(","),y()}}f("Bad array")},b=function(){var e,r=Object.create(null);if("{"===a){if(h("{"),y(),"}"===a)return h("}"),r;for(;a;){if(e=d(),y(),h(":"),!0===t.strict&&Object.hasOwnProperty.call(r,e)&&f('Duplicate key "'+e+'"'),!0===i.test(e)?"error"===t.protoAction?f("Object contains forbidden prototype property"):"ignore"===t.protoAction?l():r[e]=l():!0===o.test(e)?"error"===t.constructorAction?f("Object contains forbidden constructor property"):"ignore"===t.constructorAction?l():r[e]=l():r[e]=l(),y(),"}"===a)return h("}"),r;h(","),y()}}f("Bad object")};return l=function(){switch(y(),a){case"{":return b();case"[":return m();case'"':return d();case"-":return p();default:return a>="0"&&a<="9"?p():g()}},function(e,t){var r;return u=e+"",s=0,a=" ",r=l(),y(),a&&f("Syntax error"),"function"==typeof t?function e(r,n){var i,o=r[n];return o&&"object"==typeof o&&Object.keys(o).forEach(function(t){void 0!==(i=e(o,t))?o[t]=i:delete o[t]}),t.call(r,n,o)}({"":r},""):r}};e.exports=s},54123:function(e,t,r){var n=r(44431),i=e.exports;!function(){"use strict";var e,t,r,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function u(i,o){var s,l,c,f,h,p=e,d=o[i],y=null!=d&&(d instanceof n||n.isBigNumber(d));switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(i)),"function"==typeof r&&(d=r.call(o,i,d)),typeof d){case"string":if(y)return d;return a(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":case"bigint":return String(d);case"object":if(!d)return"null";if(e+=t,h=[],"[object Array]"===Object.prototype.toString.apply(d)){for(s=0,f=d.length;s<f;s+=1)h[s]=u(s,d)||"null";return c=0===h.length?"[]":e?"[\n"+e+h.join(",\n"+e)+"\n"+p+"]":"["+h.join(",")+"]",e=p,c}if(r&&"object"==typeof r)for(s=0,f=r.length;s<f;s+=1)"string"==typeof r[s]&&(c=u(l=r[s],d))&&h.push(a(l)+(e?": ":":")+c);else Object.keys(d).forEach(function(t){var r=u(t,d);r&&h.push(a(t)+(e?": ":":")+r)});return c=0===h.length?"{}":e?"{\n"+e+h.join(",\n"+e)+"\n"+p+"}":"{"+h.join(",")+"}",e=p,c}}"function"!=typeof i.stringify&&(i.stringify=function(n,i,o){var s;if(e="",t="","number"==typeof o)for(s=0;s<o;s+=1)t+=" ";else"string"==typeof o&&(t=o);if(r=i,i&&"function"!=typeof i&&("object"!=typeof i||"number"!=typeof i.length))throw Error("JSON.stringify");return u("",{"":n})})}()},74111:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletPolicy=t.DefaultWalletPolicy=t.PsbtV2=t.AppClient=void 0;let i=n(r(17983));t.AppClient=i.default;let o=r(21740);Object.defineProperty(t,"DefaultWalletPolicy",{enumerable:!0,get:function(){return o.DefaultWalletPolicy}}),Object.defineProperty(t,"WalletPolicy",{enumerable:!0,get:function(){return o.WalletPolicy}});let s=r(47855);Object.defineProperty(t,"PsbtV2",{enumerable:!0,get:function(){return s.PsbtV2}}),t.default=i.default},17983:function(e,t,r){"use strict";var n,i,o=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.AppClient=t.PartialSignature=void 0;let s=r(84181),a=r(10583),u=r(12077),l=r(53834),c=r(47855),f=r(48721),h=225,p=248,d=1;!function(e){e[e.GET_PUBKEY=0]="GET_PUBKEY",e[e.REGISTER_WALLET=2]="REGISTER_WALLET",e[e.GET_WALLET_ADDRESS=3]="GET_WALLET_ADDRESS",e[e.SIGN_PSBT=4]="SIGN_PSBT",e[e.GET_MASTER_FINGERPRINT=5]="GET_MASTER_FINGERPRINT",e[e.SIGN_MESSAGE=16]="SIGN_MESSAGE"}(n||(n={})),function(e){e[e.CONTINUE_INTERRUPTED=1]="CONTINUE_INTERRUPTED"}(i||(i={}));class y{constructor(e,t,r){this.pubkey=e,this.signature=t,this.tapleafHash=r}}function g(e,t){if(64==e.length)return new y(e.slice(0,32),t,e.slice(32,64));if(32==e.length||33==e.length)return new y(e,t);throw Error(`Invalid length for pubkeyAugm: ${e.length} bytes.`)}function m(e){return(e.match(/[asctdvjnlu]+:/g)||[]).some(e=>e.includes("a"))}t.PartialSignature=y;class b{constructor(e){this.transport=e}async makeRequest(e,t,r){let n=await this.transport.send(h,e,0,d,t,[36864,57344]);for(;57344===n.readUInt16BE(n.length-2);){if(!r)throw Error("Unexpected SW_INTERRUPTED_EXECUTION");let e=n.slice(0,-2),t=r.execute(e);n=await this.transport.send(p,i.CONTINUE_INTERRUPTED,0,0,t,[36864,57344])}return n.slice(0,-2)}async getAppAndVersion(){let e=await this.transport.send(176,1,0,0),t=0;if(1!==e[t++])throw Error("Unexpected response");let r=e[t++],n=e.slice(t,t+=r).toString("ascii"),i=e[t++],o=e.slice(t,t+=i).toString("ascii"),s=e[t++];return{name:n,version:o,flags:e.slice(t,t+=s)}}async getExtendedPubkey(e,t=!1){let r=(0,s.pathStringToArray)(e);if(r.length>6)throw Error("Path too long. At most 6 levels allowed.");return(await this.makeRequest(n.GET_PUBKEY,o.concat([o.from(t?[1]:[0]),(0,s.pathElementsToBuffer)(r)]))).toString("ascii")}async registerWallet(e){await this.validatePolicy(e);let t=new a.ClientCommandInterpreter;t.addKnownWalletPolicy(e);let r=e.serialize(),i=await this.makeRequest(n.REGISTER_WALLET,o.concat([(0,f.createVarint)(r.length),r]),t);if(64!=i.length)throw Error(`Invalid response length. Expected 64 bytes, got ${i.length}`);return[i.subarray(0,32),i.subarray(32)]}async getWalletAddress(e,t,r,i,s){if(0!==r&&1!==r)throw Error("Change can only be 0 or 1");if(i<0||!Number.isInteger(i))throw Error("Invalid address index");if(null!=t&&32!=t.length)throw Error("Invalid HMAC length");await this.validatePolicy(e);let u=new a.ClientCommandInterpreter;u.addKnownWalletPolicy(e);let l=o.alloc(4);return l.writeUInt32BE(i,0),(await this.makeRequest(n.GET_WALLET_ADDRESS,o.concat([o.from(s?[1]:[0]),e.getId(),t||o.alloc(32,0),o.from([r]),l]),u)).toString("ascii")}async signPsbt(e,t,r,i){if(await this.validatePolicy(t),"string"==typeof e&&(e=o.from(e,"base64")),o.isBuffer(e)){let t=new c.PsbtV2;t.deserialize(e),e=t}let s=new u.MerkelizedPsbt(e);if(null!=r&&32!=r.length)throw Error("Invalid HMAC length");let h=new a.ClientCommandInterpreter(i);for(let e of(h.addKnownWalletPolicy(t),h.addKnownMapping(s.globalMerkleMap),s.inputMerkleMaps))h.addKnownMapping(e);for(let e of s.outputMerkleMaps)h.addKnownMapping(e);h.addKnownList(s.inputMapCommitments);let p=new l.Merkle(s.inputMapCommitments.map(e=>(0,l.hashLeaf)(e))).getRoot();h.addKnownList(s.outputMapCommitments);let d=new l.Merkle(s.outputMapCommitments.map(e=>(0,l.hashLeaf)(e))).getRoot();await this.makeRequest(n.SIGN_PSBT,o.concat([s.getGlobalKeysValuesRoot(),(0,f.createVarint)(s.getGlobalInputCount()),p,(0,f.createVarint)(s.getGlobalOutputCount()),d,t.getId(),r||o.alloc(32,0)]),h);let y=h.getYielded(),m=[];for(let e of y){let[t,r]=(0,f.parseVarint)(e,0),n=e[r],i=g(e.subarray(r+1,r+1+n),e.subarray(r+1+n));m.push([Number(t),i])}return m}async getMasterFingerprint(){return(await this.makeRequest(n.GET_MASTER_FINGERPRINT,o.from([]))).toString("hex")}async signMessage(e,t){let r=(0,s.pathStringToArray)(t),i=new a.ClientCommandInterpreter,u=Math.ceil(e.length/64),c=[];for(let t=0;t<u;t++)c.push(e.subarray(64*t,64*t+64));i.addKnownList(c);let h=new l.Merkle(c.map(e=>(0,l.hashLeaf)(e))).getRoot();return(await this.makeRequest(n.SIGN_MESSAGE,o.concat([(0,s.pathElementsToBuffer)(r),(0,f.createVarint)(e.length),h]),i)).toString("base64")}async validatePolicy(e){if(m(e.descriptorTemplate)&&["2.1.0","2.1.1"].includes((await this.getAppAndVersion()).version))throw Error("Please update your Ledger Bitcoin app.")}}t.AppClient=b,t.default=b},84181:function(e,t,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hardenedPathOf=t.getXpubComponents=t.pubkeyFromXpub=t.pathStringToArray=t.pathArrayToString=t.bip32asBuffer=t.pathElementsToBuffer=void 0;let o=i(r(30246)),s=i(r(58334));function a(e){let t=n.alloc(1+4*e.length);return t[0]=e.length,e.forEach((e,r)=>{t.writeUInt32BE(e,1+4*r)}),t}function u(e){return a(e?c(e):[])}function l(e){return 0==e.length?"m":o.default.fromPathArray(e).toString()}function c(e){return"m"==e||""==e?[]:o.default.fromString(e).toPathArray()}function f(e){let t=s.default.decode(e);return t.slice(t.length-33)}function h(e){let t=s.default.decode(e);return{chaincode:t.slice(13,45),pubkey:t.slice(t.length-33),version:t.readUInt32BE(0)}}function p(e){for(let t=e.length-1;t>=0;t--)if(e[t]>=2147483648)return e.slice(0,t+1);return[]}t.pathElementsToBuffer=a,t.bip32asBuffer=u,t.pathArrayToString=l,t.pathStringToArray=c,t.pubkeyFromXpub=f,t.getXpubComponents=h,t.hardenedPathOf=p},50713:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=t.BufferWriter=t.unsafeFrom64bitLE=t.unsafeTo64bitLE=void 0;let i=r(48721);function o(e){if(e>Number.MAX_SAFE_INTEGER)throw Error("Can't convert numbers > MAX_SAFE_INT");let t=n.alloc(8,0);for(let r=0;r<t.length;r++){let n=255&e;t[r]=n,e=(e-n)/256}return t}function s(e){let t=0;if(8!=e.length)throw Error("Expected Bufffer of lenght 8");if(0!=e[7]||e[6]>31)throw Error("Can't encode numbers > MAX_SAFE_INT");for(let r=e.length-1;r>=0;r--)t=256*t+e[r];return t}t.unsafeTo64bitLE=o,t.unsafeFrom64bitLE=s;class a{constructor(){this.bufs=[]}write(e,t){let r=n.alloc(e);t(r),this.bufs.push(r)}writeUInt8(e){this.write(1,t=>t.writeUInt8(e,0))}writeInt32(e){this.write(4,t=>t.writeInt32LE(e,0))}writeUInt32(e){this.write(4,t=>t.writeUInt32LE(e,0))}writeUInt64(e){let t=o(e);this.writeSlice(t)}writeVarInt(e){this.bufs.push((0,i.createVarint)(e))}writeSlice(e){this.bufs.push(n.from(e))}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}buffer(){return n.concat(this.bufs)}}t.BufferWriter=a;class u{constructor(e,t=0){this.buffer=e,this.offset=t}available(){return this.buffer.length-this.offset}readUInt8(){let e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){let e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){let e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){return s(this.readSlice(8))}readVarInt(){let[e,t]=(0,i.parseVarint)(this.buffer,this.offset);return this.offset+=t,e}readSlice(e){if(this.buffer.length<this.offset+e)throw Error("Cannot read slice out of bounds");let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){let e=(0,i.sanitizeBigintToNumber)(this.readVarInt());return this.readSlice(e)}readVector(){let e=this.readVarInt(),t=[];for(let r=0;r<e;r++)t.push(this.readVarSlice());return t}}t.BufferReader=u},10583:function(e,t,r){"use strict";var n,i=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.ClientCommandInterpreter=t.GetMoreElementsCommand=t.GetMerkleLeafIndexCommand=t.GetMerkleLeafProofCommand=t.GetPreimageCommand=t.YieldCommand=void 0;let o=r(17656),s=r(50713),a=r(53834),u=r(48721);!function(e){e[e.YIELD=16]="YIELD",e[e.GET_PREIMAGE=64]="GET_PREIMAGE",e[e.GET_MERKLE_LEAF_PROOF=65]="GET_MERKLE_LEAF_PROOF",e[e.GET_MERKLE_LEAF_INDEX=66]="GET_MERKLE_LEAF_INDEX",e[e.GET_MORE_ELEMENTS=160]="GET_MORE_ELEMENTS"}(n||(n={}));class l{}class c extends l{constructor(e,t){super(),this.progressCallback=t,this.code=n.YIELD,this.results=e}execute(e){return this.results.push(i.from(e.subarray(1))),this.progressCallback&&this.progressCallback(),i.from("")}}t.YieldCommand=c;class f extends l{constructor(e,t){super(),this.code=n.GET_PREIMAGE,this.known_preimages=e,this.queue=t}execute(e){let t=i.from(e.subarray(1));if(33!=t.length)throw Error("Invalid request, unexpected trailing data");if(0!=t[0])throw Error("Unsupported request, the first byte should be 0");let r=i.alloc(32);for(let e=0;e<32;e++)r[e]=t[1+e];let n=r.toString("hex"),o=this.known_preimages.get(n);if(void 0!=o){let e=(0,u.createVarint)(o.length),t=Math.min(255-e.length-1,o.length);if(t<o.length)for(let e=t;e<o.length;e++)this.queue.push(i.from([o[e]]));return i.concat([e,i.from([t]),i.from(o.subarray(0,t))])}throw Error(`Requested unknown preimage for: ${n}`)}}t.GetPreimageCommand=f;class h extends l{constructor(e,t){super(),this.code=n.GET_MERKLE_LEAF_PROOF,this.known_trees=e,this.queue=t}execute(e){let t,r;let n=i.from(e.subarray(1));if(n.length<34)throw Error("Invalid request, expected at least 34 bytes");let o=new s.BufferReader(n),a=o.readSlice(32).toString("hex");try{t=(0,u.sanitizeBigintToNumber)(o.readVarInt()),r=(0,u.sanitizeBigintToNumber)(o.readVarInt())}catch(e){throw Error("Invalid request, couldn't parse tree_size or leaf_index")}let l=this.known_trees.get(a);if(!l)throw Error(`Requested Merkle leaf proof for unknown tree: ${a}`);if(r>=t||l.size()!=t)throw Error("Invalid index or tree size.");if(0!=this.queue.length)throw Error("This command should not execute when the queue is not empty.");let c=l.getProof(r),f=Math.min(Math.floor(6.90625),c.length),h=c.length-f;return h>0&&this.queue.push(...c.slice(-h)),i.concat([l.getLeafHash(r),i.from([c.length]),i.from([f]),...c.slice(0,f)])}}t.GetMerkleLeafProofCommand=h;class p extends l{constructor(e){super(),this.code=n.GET_MERKLE_LEAF_INDEX,this.known_trees=e}execute(e){let t=i.from(e.subarray(1));if(64!=t.length)throw Error("Invalid request, unexpected trailing data");let r=i.alloc(32);for(let e=0;e<32;e++)r[e]=t.readUInt8(e);let n=r.toString("hex"),o=i.alloc(32);for(let e=0;e<32;e++)o[e]=t.readUInt8(32+e);let s=o.toString("hex"),a=this.known_trees.get(n);if(!a)throw Error(`Requested Merkle leaf index for unknown root: ${n}`);let l=0,c=0;for(let e=0;e<a.size();e++)if(a.getLeafHash(e).toString("hex")==s){c=1,l=e;break}return i.concat([i.from([c]),(0,u.createVarint)(l)])}}t.GetMerkleLeafIndexCommand=p;class d extends l{constructor(e){super(),this.code=n.GET_MORE_ELEMENTS,this.queue=e}execute(e){if(1!=e.length)throw Error("Invalid request, unexpected trailing data");if(0===this.queue.length)throw Error("No elements to get");let t=this.queue[0].length;if(this.queue.some(e=>e.length!=t))throw Error("The queue contains elements with different byte length, which is not expected");let r=Math.min(Math.floor(253/t),this.queue.length),n=this.queue.splice(0,r);return i.concat([i.from([r]),i.from([t]),...n])}}t.GetMoreElementsCommand=d;class y{constructor(e){for(let t of(this.roots=new Map,this.preimages=new Map,this.yielded=[],this.queue=[],this.commands=new Map,[new c(this.yielded,e),new f(this.preimages,this.queue),new p(this.roots),new h(this.roots,this.queue),new d(this.queue)])){if(this.commands.has(t.code))throw Error(`Multiple commands with code ${t.code}`);this.commands.set(t.code,t)}}getYielded(){return this.yielded}addKnownPreimage(e){this.preimages.set(o.crypto.sha256(e).toString("hex"),e)}addKnownList(e){for(let t of e){let e=i.concat([i.from([0]),t]);this.addKnownPreimage(e)}let t=new a.Merkle(e.map(e=>(0,a.hashLeaf)(e)));this.roots.set(t.getRoot().toString("hex"),t)}addKnownMapping(e){this.addKnownList(e.keys),this.addKnownList(e.values)}addKnownWalletPolicy(e){this.addKnownPreimage(e.serialize()),this.addKnownList(e.keys.map(e=>i.from(e,"ascii"))),this.addKnownPreimage(i.from(e.descriptorTemplate))}execute(e){if(0==e.length)throw Error("Unexpected empty command");let t=e[0],r=this.commands.get(t);if(!r)throw Error(`Unexpected command code ${t}`);return r.execute(e)}}t.ClientCommandInterpreter=y},12077:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.MerkelizedPsbt=void 0;let i=r(20770),o=r(47855);class s extends o.PsbtV2{constructor(e){super(),this.inputMerkleMaps=[],this.outputMerkleMaps=[],e.copy(this),this.globalMerkleMap=s.createMerkleMap(this.globalMap);for(let e=0;e<this.getGlobalInputCount();e++)this.inputMerkleMaps.push(s.createMerkleMap(this.inputMaps[e]));this.inputMapCommitments=[...this.inputMerkleMaps.values()].map(e=>e.commitment());for(let e=0;e<this.getGlobalOutputCount();e++)this.outputMerkleMaps.push(s.createMerkleMap(this.outputMaps[e]));this.outputMapCommitments=[...this.outputMerkleMaps.values()].map(e=>e.commitment())}getGlobalSize(){return this.globalMap.size}getGlobalKeysValuesRoot(){return this.globalMerkleMap.commitment()}static createMerkleMap(e){let t=[...e.keys()].sort(),r=t.map(t=>{let r=e.get(t);if(!r)throw Error("No value for key "+t);return r}),o=t.map(e=>n.from(e,"hex"));return new i.MerkleMap(o,r)}}t.MerkelizedPsbt=s},53834:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.hashLeaf=t.Merkle=void 0;let i=r(17656);class o{constructor(e,t=i.crypto.sha256){this.leaves=e,this.h=t;let r=this.calculateRoot(e);this.rootNode=r.root,this.leafNodes=r.leaves}getRoot(){return this.rootNode.hash}size(){return this.leaves.length}getLeaves(){return this.leaves}getLeafHash(e){return this.leafNodes[e].hash}getProof(e){if(e>=this.leaves.length)throw Error("Index out of bounds");return l(this.leafNodes[e])}calculateRoot(e){let t=e.length;if(0==t)return{root:new u(void 0,void 0,n.alloc(32,0)),leaves:[]};if(1==t){let t=new u(void 0,void 0,e[0]);return{root:t,leaves:[t]}}let r=c(t),i=this.calculateRoot(e.slice(0,r)),o=this.calculateRoot(e.slice(r)),s=i.root,a=o.root,l=this.hashNode(s.hash,a.hash),f=new u(s,a,l);return s.parent=f,a.parent=f,{root:f,leaves:i.leaves.concat(o.leaves)}}hashNode(e,t){return this.h(n.concat([n.from([1]),e,t]))}}function s(e,t=i.crypto.sha256){return a(n.from([0]),e,t)}function a(e,t,r){return r(n.concat([e,t]))}t.Merkle=o,t.hashLeaf=s;class u{constructor(e,t,r){this.leftChild=e,this.rightChild=t,this.hash=r}isLeaf(){return void 0==this.leftChild}}function l(e){if(!e.parent)return[];if(e.parent.leftChild==e){if(!e.parent.rightChild)throw Error("Expected right child to exist");return[e.parent.rightChild.hash,...l(e.parent)]}if(!e.parent.leftChild)throw Error("Expected left child to exist");return[e.parent.leftChild.hash,...l(e.parent)]}function c(e){if(e<2)throw Error("Expected n >= 2");return f(e)?e/2:1<<Math.floor(Math.log2(e))}function f(e){return(e&e-1)==0}},20770:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.MerkleMap=void 0;let i=r(53834),o=r(48721);class s{constructor(e,t){if(e.length!=t.length)throw Error("keys and values should have the same length");for(let t=0;t<e.length-1;t++)if(e[t].toString("hex")>=e[t+1].toString("hex"))throw Error("keys must be in strictly increasing order");this.keys=e,this.keysTree=new i.Merkle(e.map(e=>(0,i.hashLeaf)(e))),this.values=t,this.valuesTree=new i.Merkle(t.map(e=>(0,i.hashLeaf)(e)))}commitment(){return n.concat([(0,o.createVarint)(this.keys.length),this.keysTree.getRoot(),this.valuesTree.getRoot()])}}t.MerkleMap=s},21740:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultWalletPolicy=t.WalletPolicy=void 0;let i=r(17656),o=r(50713),s=r(53834),a=2;class u{constructor(e,t,r){this.name=e,this.descriptorTemplate=t,this.keys=r}getId(){return i.crypto.sha256(this.serialize())}serialize(){let e=this.keys.map(e=>n.from(e,"ascii")),t=new s.Merkle(e.map(e=>(0,s.hashLeaf)(e))),r=new o.BufferWriter;return r.writeUInt8(a),r.writeVarSlice(n.from(this.name,"ascii")),r.writeVarInt(this.descriptorTemplate.length),r.writeSlice(i.crypto.sha256(n.from(this.descriptorTemplate))),r.writeVarInt(this.keys.length),r.writeSlice(t.getRoot()),r.buffer()}}t.WalletPolicy=u;class l extends u{constructor(e,t){super("",e,[t])}}t.DefaultWalletPolicy=l},47855:function(e,t,r){"use strict";var n,i,o,s=r(48764).Buffer,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return u(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PsbtV2=t.NoSuchEntry=t.psbtOut=t.psbtIn=t.psbtGlobal=void 0;let c=l(r(17656)),f=r(50713),h=r(48721);!function(e){e[e.UNSIGNED_TX=0]="UNSIGNED_TX",e[e.XPUB=1]="XPUB",e[e.TX_VERSION=2]="TX_VERSION",e[e.FALLBACK_LOCKTIME=3]="FALLBACK_LOCKTIME",e[e.INPUT_COUNT=4]="INPUT_COUNT",e[e.OUTPUT_COUNT=5]="OUTPUT_COUNT",e[e.TX_MODIFIABLE=6]="TX_MODIFIABLE",e[e.VERSION=251]="VERSION"}(n=t.psbtGlobal||(t.psbtGlobal={})),function(e){e[e.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",e[e.WITNESS_UTXO=1]="WITNESS_UTXO",e[e.PARTIAL_SIG=2]="PARTIAL_SIG",e[e.SIGHASH_TYPE=3]="SIGHASH_TYPE",e[e.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=6]="BIP32_DERIVATION",e[e.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",e[e.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",e[e.PREVIOUS_TXID=14]="PREVIOUS_TXID",e[e.OUTPUT_INDEX=15]="OUTPUT_INDEX",e[e.SEQUENCE=16]="SEQUENCE",e[e.TAP_KEY_SIG=19]="TAP_KEY_SIG",e[e.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION"}(i=t.psbtIn||(t.psbtIn={})),function(e){e[e.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",e[e.BIP_32_DERIVATION=2]="BIP_32_DERIVATION",e[e.AMOUNT=3]="AMOUNT",e[e.SCRIPT=4]="SCRIPT",e[e.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"}(o=t.psbtOut||(t.psbtOut={}));let p=s.from([112,115,98,116,255]);class d extends Error{}t.NoSuchEntry=d;class y{constructor(){this.globalMap=new Map,this.inputMaps=[],this.outputMaps=[]}setGlobalTxVersion(e){this.setGlobal(n.TX_VERSION,S(e))}getGlobalTxVersion(){return this.getGlobal(n.TX_VERSION).readUInt32LE(0)}setGlobalFallbackLocktime(e){this.setGlobal(n.FALLBACK_LOCKTIME,S(e))}getGlobalFallbackLocktime(){var e;return null===(e=this.getGlobalOptional(n.FALLBACK_LOCKTIME))||void 0===e?void 0:e.readUInt32LE(0)}setGlobalInputCount(e){this.setGlobal(n.INPUT_COUNT,I(e))}getGlobalInputCount(){return A(this.getGlobal(n.INPUT_COUNT))}setGlobalOutputCount(e){this.setGlobal(n.OUTPUT_COUNT,I(e))}getGlobalOutputCount(){return A(this.getGlobal(n.OUTPUT_COUNT))}setGlobalTxModifiable(e){this.setGlobal(n.TX_MODIFIABLE,e)}getGlobalTxModifiable(){return this.getGlobalOptional(n.TX_MODIFIABLE)}setGlobalPsbtVersion(e){this.setGlobal(n.VERSION,S(e))}getGlobalPsbtVersion(){return this.getGlobal(n.VERSION).readUInt32LE(0)}setInputNonWitnessUtxo(e,t){this.setInput(e,i.NON_WITNESS_UTXO,_(),t)}getInputNonWitnessUtxo(e){return this.getInputOptional(e,i.NON_WITNESS_UTXO,_())}setInputWitnessUtxo(e,t,r){let n=new f.BufferWriter;n.writeSlice(T(t)),n.writeVarSlice(r),this.setInput(e,i.WITNESS_UTXO,_(),n.buffer())}getInputWitnessUtxo(e){let t=this.getInputOptional(e,i.WITNESS_UTXO,_());if(!t)return;let r=new f.BufferReader(t);return{amount:(0,f.unsafeFrom64bitLE)(r.readSlice(8)),scriptPubKey:r.readVarSlice()}}setInputPartialSig(e,t,r){this.setInput(e,i.PARTIAL_SIG,t,r)}getInputPartialSig(e,t){return this.getInputOptional(e,i.PARTIAL_SIG,t)}setInputSighashType(e,t){this.setInput(e,i.SIGHASH_TYPE,_(),S(t))}getInputSighashType(e){let t=this.getInputOptional(e,i.SIGHASH_TYPE,_());if(t)return t.readUInt32LE(0)}setInputRedeemScript(e,t){this.setInput(e,i.REDEEM_SCRIPT,_(),t)}getInputRedeemScript(e){return this.getInputOptional(e,i.REDEEM_SCRIPT,_())}setInputWitnessScript(e,t){this.setInput(e,i.WITNESS_SCRIPT,_(),t)}getInputWitnessScript(e){return this.getInputOptional(e,i.WITNESS_SCRIPT,_())}setInputBip32Derivation(e,t,r,n){if(33!=t.length)throw Error("Invalid pubkey length: "+t.length);this.setInput(e,i.BIP32_DERIVATION,t,this.encodeBip32Derivation(r,n))}getInputBip32Derivation(e,t){let r=this.getInputOptional(e,i.BIP32_DERIVATION,t);if(r)return this.decodeBip32Derivation(r)}setInputFinalScriptsig(e,t){this.setInput(e,i.FINAL_SCRIPTSIG,_(),t)}getInputFinalScriptsig(e){return this.getInputOptional(e,i.FINAL_SCRIPTSIG,_())}setInputFinalScriptwitness(e,t){this.setInput(e,i.FINAL_SCRIPTWITNESS,_(),t)}getInputFinalScriptwitness(e){return this.getInput(e,i.FINAL_SCRIPTWITNESS,_())}setInputPreviousTxId(e,t){this.setInput(e,i.PREVIOUS_TXID,_(),t)}getInputPreviousTxid(e){return this.getInput(e,i.PREVIOUS_TXID,_())}setInputOutputIndex(e,t){this.setInput(e,i.OUTPUT_INDEX,_(),S(t))}getInputOutputIndex(e){return this.getInput(e,i.OUTPUT_INDEX,_()).readUInt32LE(0)}setInputSequence(e,t){this.setInput(e,i.SEQUENCE,_(),S(t))}getInputSequence(e){var t,r;return null!==(r=null===(t=this.getInputOptional(e,i.SEQUENCE,_()))||void 0===t?void 0:t.readUInt32LE(0))&&void 0!==r?r:4294967295}setInputTapKeySig(e,t){this.setInput(e,i.TAP_KEY_SIG,_(),t)}getInputTapKeySig(e){return this.getInputOptional(e,i.TAP_KEY_SIG,_())}setInputTapBip32Derivation(e,t,r,n,o){if(32!=t.length)throw Error("Invalid pubkey length: "+t.length);let s=this.encodeTapBip32Derivation(r,n,o);this.setInput(e,i.TAP_BIP32_DERIVATION,t,s)}getInputTapBip32Derivation(e,t){let r=this.getInput(e,i.TAP_BIP32_DERIVATION,t);return this.decodeTapBip32Derivation(r)}getInputKeyDatas(e,t){return this.getKeyDatas(this.inputMaps[e],t)}setOutputRedeemScript(e,t){this.setOutput(e,o.REDEEM_SCRIPT,_(),t)}getOutputRedeemScript(e){return this.getOutput(e,o.REDEEM_SCRIPT,_())}setOutputBip32Derivation(e,t,r,n){this.setOutput(e,o.BIP_32_DERIVATION,t,this.encodeBip32Derivation(r,n))}getOutputBip32Derivation(e,t){let r=this.getOutput(e,o.BIP_32_DERIVATION,t);return this.decodeBip32Derivation(r)}setOutputAmount(e,t){this.setOutput(e,o.AMOUNT,_(),T(t))}getOutputAmount(e){let t=this.getOutput(e,o.AMOUNT,_());return(0,f.unsafeFrom64bitLE)(t)}setOutputScript(e,t){this.setOutput(e,o.SCRIPT,_(),t)}getOutputScript(e){return this.getOutput(e,o.SCRIPT,_())}setOutputTapBip32Derivation(e,t,r,n,i){let s=this.encodeTapBip32Derivation(r,n,i);this.setOutput(e,o.TAP_BIP32_DERIVATION,t,s)}getOutputTapBip32Derivation(e,t){let r=this.getOutput(e,o.TAP_BIP32_DERIVATION,t);return this.decodeTapBip32Derivation(r)}deleteInputEntries(e,t){this.inputMaps[e].forEach((e,r,n)=>{this.isKeyType(r,t)&&n.delete(r)})}copy(e){this.copyMap(this.globalMap,e.globalMap),this.copyMaps(this.inputMaps,e.inputMaps),this.copyMaps(this.outputMaps,e.outputMaps)}copyMaps(e,t){e.forEach((e,r)=>{let n=new Map;this.copyMap(e,n),t[r]=n})}copyMap(e,t){e.forEach((e,r)=>t.set(r,s.from(e)))}serialize(){let e=new f.BufferWriter;return e.writeSlice(s.from([112,115,98,116,255])),v(e,this.globalMap),this.inputMaps.forEach(t=>{v(e,t)}),this.outputMaps.forEach(t=>{v(e,t)}),e.buffer()}deserialize(e){let t,r,i;let o=new f.BufferReader(e);if(!o.readSlice(5).equals(p))throw Error("Invalid magic bytes");for(;this.readKeyPair(this.globalMap,o););try{t=this.getGlobalPsbtVersion()}catch(e){t=0}if(0!==t&&2!==t)throw Error("Only PSBTs of version 0 or 2 are supported");if(0==t){let e=this.getGlobal(n.UNSIGNED_TX),t=c.Transaction.fromBuffer(e);r=t.ins.length,i=t.outs.length}else r=this.getGlobalInputCount(),i=this.getGlobalOutputCount();for(let e=0;e<r;e++)for(this.inputMaps[e]=new Map;this.readKeyPair(this.inputMaps[e],o););for(let e=0;e<i;e++)for(this.outputMaps[e]=new Map;this.readKeyPair(this.outputMaps[e],o););this.normalizeToV2()}normalizeToV2(){var e;let t=null===(e=this.getGlobalOptional(n.VERSION))||void 0===e?void 0:e.readInt32LE(0);if(2===t)return;if(void 0!==t)throw Error("Invalid or unsupported value for PSBT_GLOBAL_VERSION");let r=this.getGlobal(n.UNSIGNED_TX),i=c.Transaction.fromBuffer(r);this.setGlobalPsbtVersion(2),this.setGlobalTxVersion(i.version),this.setGlobalFallbackLocktime(i.locktime),this.setGlobalInputCount(i.ins.length),this.setGlobalOutputCount(i.outs.length);for(let e=0;e<i.ins.length;e++)this.setInputPreviousTxId(e,i.ins[e].hash),this.setInputOutputIndex(e,i.ins[e].index),this.setInputSequence(e,i.ins[e].sequence);for(let e=0;e<i.outs.length;e++)this.setOutputAmount(e,i.outs[e].value),this.setOutputScript(e,i.outs[e].script);this.globalMap.delete(n.UNSIGNED_TX.toString(16).padStart(2,"0"))}fromBitcoinJS(e){function t(e){let t;try{c.payments.p2tr({output:e.witnessUtxo.script}),t=!0}catch(e){t=!1}return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||t)}return this.setGlobalPsbtVersion(2),this.setGlobalTxVersion(e.version),this.setGlobalInputCount(e.data.inputs.length),this.setGlobalOutputCount(e.txOutputs.length),void 0!==e.locktime&&this.setGlobalFallbackLocktime(e.locktime),e.data.inputs.forEach((r,n)=>{if(t(r))throw Error("Taproot inputs not supported");this.setInputPreviousTxId(n,e.txInputs[n].hash),void 0!==e.txInputs[n].sequence&&this.setInputSequence(n,e.txInputs[n].sequence),this.setInputOutputIndex(n,e.txInputs[n].index),void 0!==r.sighashType&&this.setInputSighashType(n,r.sighashType),r.nonWitnessUtxo&&this.setInputNonWitnessUtxo(n,r.nonWitnessUtxo),r.witnessUtxo&&this.setInputWitnessUtxo(n,r.witnessUtxo.value,r.witnessUtxo.script),r.witnessScript&&this.setInputWitnessScript(n,r.witnessScript),r.redeemScript&&this.setInputRedeemScript(n,r.redeemScript),e.data.inputs[n].bip32Derivation.forEach(e=>{if(!/^m\//i.test(e.path))throw Error("Invalid input bip32 derivation");let t=e.path.replace(/m\//i,"").split("/").map(e=>e.match(/['h]/i)?parseInt(e)+2147483648:Number(e));this.setInputBip32Derivation(n,e.pubkey,e.masterFingerprint,t)})}),e.txOutputs.forEach((e,t)=>{this.setOutputAmount(t,e.value),this.setOutputScript(t,e.script)}),this}readKeyPair(e,t){let r=(0,h.sanitizeBigintToNumber)(t.readVarInt());return 0!=r&&(E(e,t.readUInt8(),t.readSlice(r-1),t.readVarSlice()),!0)}getKeyDatas(e,t){let r=[];return e.forEach((e,n)=>{this.isKeyType(n,[t])&&r.push(s.from(n.substring(2),"hex"))}),r}isKeyType(e,t){let r=s.from(e.substring(0,2),"hex").readUInt8(0);return t.some(e=>e==r)}setGlobal(e,t){let r=new m(e,s.from([]));this.globalMap.set(r.toString(),t)}getGlobal(e){return g(this.globalMap,e,_(),!1)}getGlobalOptional(e){return g(this.globalMap,e,_(),!0)}setInput(e,t,r,n){E(this.getMap(e,this.inputMaps),t,r,n)}getInput(e,t,r){return g(this.inputMaps[e],t,r,!1)}getInputOptional(e,t,r){return g(this.inputMaps[e],t,r,!0)}setOutput(e,t,r,n){E(this.getMap(e,this.outputMaps),t,r,n)}getOutput(e,t,r){return g(this.outputMaps[e],t,r,!1)}getMap(e,t){return t[e]?t[e]:t[e]=new Map}encodeBip32Derivation(e,t){let r=new f.BufferWriter;return this.writeBip32Derivation(r,e,t),r.buffer()}decodeBip32Derivation(e){let t=new f.BufferReader(e);return this.readBip32Derivation(t)}writeBip32Derivation(e,t,r){e.writeSlice(t),r.forEach(t=>{e.writeUInt32(t)})}readBip32Derivation(e){let t=e.readSlice(4),r=[];for(;e.offset<e.buffer.length;)r.push(e.readUInt32());return{masterFingerprint:t,path:r}}encodeTapBip32Derivation(e,t,r){let n=new f.BufferWriter;return n.writeVarInt(e.length),e.forEach(e=>{n.writeSlice(e)}),this.writeBip32Derivation(n,t,r),n.buffer()}decodeTapBip32Derivation(e){let t=new f.BufferReader(e),r=(0,h.sanitizeBigintToNumber)(t.readVarInt()),n=[];for(let e=0;e<r;e++)n.push(t.readSlice(32));return Object.assign({hashes:n},this.readBip32Derivation(t))}}function g(e,t,r,n){if(!e)throw Error("No such map");let i=new m(t,r),o=e.get(i.toString());if(!o){if(n)return;throw new d(i.toString())}return s.from(o)}t.PsbtV2=y;class m{constructor(e,t){this.keyType=e,this.keyData=t}toString(){let e=new f.BufferWriter;return this.toBuffer(e),e.buffer().toString("hex")}serialize(e){e.writeVarInt(1+this.keyData.length),this.toBuffer(e)}toBuffer(e){e.writeUInt8(this.keyType),e.writeSlice(this.keyData)}}class b{constructor(e,t){this.key=e,this.value=t}serialize(e){this.key.serialize(e),e.writeVarSlice(this.value)}}function w(e){return new m(e.readUInt8(0),e.slice(1))}function v(e,t){for(let[r,n]of[...t].sort(([e],[t])=>e.localeCompare(t)))new b(w(s.from(r,"hex")),n).serialize(e);e.writeUInt8(0)}function _(){return s.from([])}function E(e,t,r,n){let i=new m(t,r);e.set(i.toString(),n)}function S(e){let t=s.alloc(4);return t.writeUInt32LE(e,0),t}function T(e){return(0,f.unsafeTo64bitLE)(e)}function I(e){let t=new f.BufferWriter;return t.writeVarInt(e),t.buffer()}function A(e){return(0,h.sanitizeBigintToNumber)(new f.BufferReader(e).readVarInt())}},48721:function(e,t,r){"use strict";var n=r(48764).Buffer;function i(e,t,r,n){for(let i=0;i<t;i++){if(void 0==r[i+n])throw Error("Buffer too small");r[i+n]=Number(e%BigInt(256)),e>>=BigInt(8)}}function o(e,t,r){let n=BigInt(0);for(let i=0;i<r;i++){if(void 0==e[i+t])throw Error("Buffer too small");n+=BigInt(e[i+t])<<BigInt(8*i)}return n}function s(e){if(e<0)throw RangeError("Negative bigint is not a valid varint");if(e>Number.MAX_SAFE_INTEGER)throw RangeError("Too large for a Number");return Number(e)}function a(e){if("number"==typeof e&&(e=s(e)),e<BigInt(0))throw RangeError("Negative numbers are not supported");if(e>=BigInt(1)<<BigInt(64))throw RangeError("Too large for a Bitcoin-style varint");return e<BigInt(253)?1:e<=BigInt(65535)?3:e<=BigInt(4294967295)?5:9}function u(e,t){if(t<0)throw RangeError("Negative offset is invalid");if(void 0==e[t])throw Error("Buffer too small");if(e[t]<253)return[BigInt(e[t]),1];{let r;return r=253===e[t]?2:254===e[t]?4:8,[o(e,t+1,r),r+1]}}function l(e){"number"==typeof e&&(e=s(e));let t=a(e);e=BigInt(e);let r=n.alloc(t);return 1==t?r[0]=Number(e):(3==t?r[0]=253:5===t?r[0]=254:r[0]=255,i(e,t-1,r,1)),r}Object.defineProperty(t,"__esModule",{value:!0}),t.createVarint=t.parseVarint=t.sanitizeBigintToNumber=void 0,t.sanitizeBigintToNumber=s,t.parseVarint=u,t.createVarint=l},59738:function(e){"use strict";e.exports=Math.abs},76329:function(e){"use strict";e.exports=Math.floor},43678:function(e){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},52264:function(e){"use strict";e.exports=Math.max},55730:function(e){"use strict";e.exports=Math.min},20707:function(e){"use strict";e.exports=Math.pow},63862:function(e){"use strict";e.exports=Math.round},29550:function(e,t,r){"use strict";var n=r(43678);e.exports=function(e){return n(e)||0===e?e:e<0?-1:1}},62318:function(e,t,r){"use strict";var n=r(35717),i=r(3349),o=r(89509).Buffer,s=Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(e,t){return e<<t|e>>>32-t}function l(e,t,r,n,i,o,s){return u(e+(t&r|~t&n)+i+o|0,s)+t|0}function c(e,t,r,n,i,o,s){return u(e+(t&n|r&~n)+i+o|0,s)+t|0}function f(e,t,r,n,i,o,s){return u(e+(t^r^n)+i+o|0,s)+t|0}function h(e,t,r,n,i,o,s){return u(e+(r^(t|~n))+i+o|0,s)+t|0}n(a,i),a.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,o=this._d;r=l(r,n,i,o,e[0],3614090360,7),o=l(o,r,n,i,e[1],3905402710,12),i=l(i,o,r,n,e[2],606105819,17),n=l(n,i,o,r,e[3],3250441966,22),r=l(r,n,i,o,e[4],4118548399,7),o=l(o,r,n,i,e[5],1200080426,12),i=l(i,o,r,n,e[6],2821735955,17),n=l(n,i,o,r,e[7],4249261313,22),r=l(r,n,i,o,e[8],1770035416,7),o=l(o,r,n,i,e[9],2336552879,12),i=l(i,o,r,n,e[10],4294925233,17),n=l(n,i,o,r,e[11],2304563134,22),r=l(r,n,i,o,e[12],1804603682,7),o=l(o,r,n,i,e[13],4254626195,12),i=l(i,o,r,n,e[14],2792965006,17),n=l(n,i,o,r,e[15],1236535329,22),r=c(r,n,i,o,e[1],4129170786,5),o=c(o,r,n,i,e[6],3225465664,9),i=c(i,o,r,n,e[11],643717713,14),n=c(n,i,o,r,e[0],3921069994,20),r=c(r,n,i,o,e[5],3593408605,5),o=c(o,r,n,i,e[10],38016083,9),i=c(i,o,r,n,e[15],3634488961,14),n=c(n,i,o,r,e[4],3889429448,20),r=c(r,n,i,o,e[9],568446438,5),o=c(o,r,n,i,e[14],3275163606,9),i=c(i,o,r,n,e[3],4107603335,14),n=c(n,i,o,r,e[8],1163531501,20),r=c(r,n,i,o,e[13],2850285829,5),o=c(o,r,n,i,e[2],4243563512,9),i=c(i,o,r,n,e[7],1735328473,14),n=c(n,i,o,r,e[12],2368359562,20),r=f(r,n,i,o,e[5],4294588738,4),o=f(o,r,n,i,e[8],2272392833,11),i=f(i,o,r,n,e[11],1839030562,16),n=f(n,i,o,r,e[14],4259657740,23),r=f(r,n,i,o,e[1],2763975236,4),o=f(o,r,n,i,e[4],1272893353,11),i=f(i,o,r,n,e[7],4139469664,16),n=f(n,i,o,r,e[10],3200236656,23),r=f(r,n,i,o,e[13],681279174,4),o=f(o,r,n,i,e[0],3936430074,11),i=f(i,o,r,n,e[3],3572445317,16),n=f(n,i,o,r,e[6],76029189,23),r=f(r,n,i,o,e[9],3654602809,4),o=f(o,r,n,i,e[12],3873151461,11),i=f(i,o,r,n,e[15],530742520,16),n=f(n,i,o,r,e[2],3299628645,23),r=h(r,n,i,o,e[0],4096336452,6),o=h(o,r,n,i,e[7],1126891415,10),i=h(i,o,r,n,e[14],2878612391,15),n=h(n,i,o,r,e[5],4237533241,21),r=h(r,n,i,o,e[12],1700485571,6),o=h(o,r,n,i,e[3],2399980690,10),i=h(i,o,r,n,e[10],4293915773,15),n=h(n,i,o,r,e[1],2240044497,21),r=h(r,n,i,o,e[8],1873313359,6),o=h(o,r,n,i,e[15],4264355552,10),i=h(i,o,r,n,e[6],2734768916,15),n=h(n,i,o,r,e[13],1309151649,21),r=h(r,n,i,o,e[4],4149444226,6),o=h(o,r,n,i,e[11],3174756917,10),i=h(i,o,r,n,e[2],718787259,15),n=h(n,i,o,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=o.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=a},38399:function(e){"use strict";e.exports=function(){return Object.assign}},31690:function(e,t,r){"use strict";let n,i,o,s,a,u,l,c;r.d(t,{AmT:function(){return ty},r$q:function(){return iU},LCm:function(){return tc},gHs:function(){return os},_Yo:function(){return td.eN},gar:function(){return M},Ku8:function(){return b},onO:function(){return ck},Qb_:function(){return L},oi4:function(){return tD},OQ9:function(){return cm},azF:function(){return N},p6d:function(){return tu},OJM:function(){return i1},sz5:function(){return K},tXe:function(){return ch},tNF:function(){return W},wtd:function(){return on},aNQ:function(){return i0},oxA:function(){return iW},CL1:function(){return lo},RS1:function(){return or},a0P:function(){return V},qEf:function(){return cg},lQP:function(){return cv},WPw:function(){return F},KBj:function(){return H},Cff:function(){return j},wEO:function(){return cy}});var f,h,p,d,y,g,m={};r.r(m),r.d(m,{hasBrowserEnv:function(){return r1},hasStandardBrowserEnv:function(){return r3},hasStandardBrowserWebWorkerEnv:function(){return r4},navigator:function(){return r2},origin:function(){return r5}});var b={};r.r(b),r.d(b,{ActionType:function(){return h},EnhancedPsbt:function(){return lQ},EnhancedTransaction:function(){return l6},ExtendedUtxo:function(){return lB},TransactionContext:function(){return l$},combineUtxos:function(){return cr},createTransactionContext:function(){return lY},estimateVSize:function(){return lw},extractOrdinalsFromUtxo:function(){return cs},groupBtcTxsByDate:function(){return lX},recoverBitcoin:function(){return ca},recoverOrdinal:function(){return cu},sendBtc:function(){return cn},sendMaxBtc:function(){return ct},sendOrdinals:function(){return ci},sendOrdinalsWithSplit:function(){return co}});var w=r(70794),v=r(4400),_=r.n(v);let E={EXPONENTIAL_AT:1e9},S=w.O.clone();S.config(E);let T=e=>{e.parse('{"big":1234567890123456789012345678901234567890}').big.constructor.config(E)},I=_()({alwaysParseAsBig:!0}),A=_()();T(I),T(A);let O=e=>function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];let o=S.isBigNumber(t)?t:new S(t.toString());for(let t of n){let r=S.isBigNumber(t)?t:new S(t.toString());(void 0===o||e&&r.gt(o)||!e&&r.lt(o))&&(o=r)}return o};O(!1),O(!0);var P=r(7414);let k="0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",x="0x03fe2b97c1fd336e750087d68b9b867997fd64a2661ff3ca5a7c771641e8e7ac",C="0x053c91253bc9682c04929ca02ed00b3e423f6710d2ee7e0d5ebb06f3ecf368a8";P._G.NetworkName.SN_MAIN,P._G.NetworkName.SN_SEPOLIA,r(48764).Buffer;var R=r(77986),B=r.t(R,2);(0,r(45217).eA)(B);let U=e=>{if(!e&&0!==e)return"-";let t="string"==typeof e?e.replace(/,/g,""):e;return new Intl.NumberFormat().format(Number(t))},N=e=>{let[t,r]=e.split("."),n=null==r?void 0:r.replace(/0+$/,"");if(!n||/^0+$/.test(n))return{prefix:U(t),isRounded:!1};let i=n.match(/^0+/),o=i?i[0].length:0;if(o<=3){let e=S("0.".concat(n)),r=e.dp(6,S.ROUND_FLOOR),i=r.toString().split(".");return{prefix:"".concat(U(t),".").concat(i[1]||"0"),isRounded:e.gt(r)}}let s=n.slice(o),a=s.slice(0,4),u=s.length>4;return{prefix:"".concat(U(t),".0"),suffix:{subscript:o.toString(),value:a},isRounded:u}},D=e=>e.replace(/[^a-zA-Z]/g,"").toUpperCase(),L={USD:"$",EUR:"€",CAD:"$",CNY:"\xa5",ARS:"$",KRW:"₩",HKD:"$",JPY:"\xa5",SGD:"$",GBP:"\xa3",BRL:"R$",RUB:"₽",AUD:"$",NGN:"₦",TRY:"₺",INR:"₹",CHF:"₣r.",VND:"₫",PLN:"zł",MYR:"RM",TWD:"NT$",IDR:"Rp",HUF:"Ft",THB:"฿",PHP:"₱",PKR:"₨",ZAR:"R",MXN:"$",RON:"lei",GTQ:"Q",COP:"$",DOP:"$",PEN:"S/"},H=e=>e?S(e).multipliedBy(1e-8):S(0),M=e=>e?S(e).multipliedBy(1e8):S(0),F=e=>e?S(e).multipliedBy(1e-6):S(0),j=e=>e?S(e).multipliedBy(1e6):S(0),V=(e,t,r)=>F(e).multipliedBy(t).multipliedBy(r),K=(e,t)=>H(e).multipliedBy(t),W=(e,t,r,n,i)=>{if("NFT"===t||"Ordinal"===t||"brc20-Ordinal"===t||"RareSat"===t)return"";let o=S.isBigNumber(e)?e:new S(e||0);if(o.isZero()||o.isNaN())return"0";switch(t){case"STX":return V(j(o),r,n).toFixed(2);case"BTC":return K(M(o),n).toFixed(2);case"FT":case"SN":if(!(null==i?void 0:i.tokenFiatRate))return"";return o.multipliedBy(i.tokenFiatRate).toFixed(2);default:throw Error("Unknown Currency",{cause:t})}};[...Object.values({[x]:{name:"Wrapped BTC",symbol:"WBTC",onramperId:"wbtc_starknet",network:"starknet",decimals:8},[k]:{name:"Starknet",symbol:"STRK",onramperId:"strk_starknet",network:"starknet",decimals:18},[C]:{name:"USD Coin",symbol:"USDC",onramperId:"usdc_starknet",network:"starknet",decimals:6}})];var q=r(71002);function G(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function $(e){G(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,q.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}function z(e){G(1,arguments);var t=$(e);return t.setHours(0,0,0,0),t}function Y(e,t){G(2,arguments);var r=z(e),n=z(t);return r.getTime()===n.getTime()}function X(e){return G(1,arguments),Y(e,Date.now())}function J(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Q(e,t){G(2,arguments);var r=$(e),n=J(t);return isNaN(n)?new Date(NaN):(n&&r.setDate(r.getDate()+n),r)}function Z(e,t){return G(2,arguments),Q(e,-J(t))}function ee(e){return G(1,arguments),Y(e,Z(Date.now(),1))}function et(e){return G(1,arguments),e instanceof Date||"object"===(0,q.Z)(e)&&"[object Date]"===Object.prototype.toString.call(e)}function er(e){return G(1,arguments),(!!et(e)||"number"==typeof e)&&!isNaN(Number($(e)))}function en(e,t){return G(2,arguments),new Date($(e).getTime()+J(t))}function ei(e,t){return G(2,arguments),en(e,-J(t))}var eo=864e5;function es(e){G(1,arguments);var t=$(e),r=t.getTime();return t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),Math.floor((r-t.getTime())/eo)+1}function ea(e){G(1,arguments);var t=1,r=$(e),n=r.getUTCDay(),i=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-i),r.setUTCHours(0,0,0,0),r}function eu(e){G(1,arguments);var t=$(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var i=ea(n),o=new Date(0);o.setUTCFullYear(r,0,4),o.setUTCHours(0,0,0,0);var s=ea(o);return t.getTime()>=i.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}function el(e){G(1,arguments);var t=eu(e),r=new Date(0);return r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0),ea(r)}var ec=6048e5;function ef(e){G(1,arguments);var t=$(e);return Math.round((ea(t).getTime()-el(t).getTime())/ec)+1}var eh={};function ep(){return eh}function ed(e,t){G(1,arguments);var r,n,i,o,s,a,u,l,c=ep(),f=J(null!==(r=null!==(n=null!==(i=null!==(o=null==t?void 0:t.weekStartsOn)&&void 0!==o?o:null==t?void 0:null===(s=t.locale)||void 0===s?void 0:null===(a=s.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:c.weekStartsOn)&&void 0!==n?n:null===(u=c.locale)||void 0===u?void 0:null===(l=u.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:0);if(!(f>=0&&f<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=$(e),p=h.getUTCDay(),d=(p<f?7:0)+p-f;return h.setUTCDate(h.getUTCDate()-d),h.setUTCHours(0,0,0,0),h}function ey(e,t){G(1,arguments);var r,n,i,o,s,a,u,l,c=$(e),f=c.getUTCFullYear(),h=ep(),p=J(null!==(r=null!==(n=null!==(i=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t?void 0:null===(s=t.locale)||void 0===s?void 0:null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==n?n:null===(u=h.locale)||void 0===u?void 0:null===(l=u.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==r?r:1);if(!(p>=1&&p<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=new Date(0);d.setUTCFullYear(f+1,0,p),d.setUTCHours(0,0,0,0);var y=ed(d,t),g=new Date(0);g.setUTCFullYear(f,0,p),g.setUTCHours(0,0,0,0);var m=ed(g,t);return c.getTime()>=y.getTime()?f+1:c.getTime()>=m.getTime()?f:f-1}function eg(e,t){G(1,arguments);var r,n,i,o,s,a,u,l,c=ep(),f=J(null!==(r=null!==(n=null!==(i=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t?void 0:null===(s=t.locale)||void 0===s?void 0:null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:c.firstWeekContainsDate)&&void 0!==n?n:null===(u=c.locale)||void 0===u?void 0:null===(l=u.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==r?r:1),h=ey(e,t),p=new Date(0);return p.setUTCFullYear(h,0,f),p.setUTCHours(0,0,0,0),ed(p,t)}var em=6048e5;function eb(e,t){G(1,arguments);var r=$(e);return Math.round((ed(r,t).getTime()-eg(r,t).getTime())/em)+1}function ew(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var ev={y:function(e,t){var r=e.getUTCFullYear(),n=r>0?r:1-r;return ew("yy"===t?n%100:n,t.length)},M:function(e,t){var r=e.getUTCMonth();return"M"===t?String(r+1):ew(r+1,2)},d:function(e,t){return ew(e.getUTCDate(),t.length)},h:function(e,t){return ew(e.getUTCHours()%12||12,t.length)},H:function(e,t){return ew(e.getUTCHours(),t.length)},m:function(e,t){return ew(e.getUTCMinutes(),t.length)},s:function(e,t){return ew(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length;return ew(Math.floor(e.getUTCMilliseconds()*Math.pow(10,r-3)),t.length)}},e_={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"};function eE(e,t){var r=e>0?"-":"+",n=Math.abs(e),i=Math.floor(n/60),o=n%60;if(0===o)return r+String(i);var s=t||"";return r+String(i)+s+ew(o,2)}function eS(e,t){return e%60==0?(e>0?"-":"+")+ew(Math.abs(e)/60,2):eT(e,t)}function eT(e,t){var r=t||"",n=e>0?"-":"+",i=Math.abs(e);return n+ew(Math.floor(i/60),2)+r+ew(i%60,2)}var eI={G:function(e,t,r){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){var n=e.getUTCFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return ev.y(e,t)},Y:function(e,t,r,n){var i=ey(e,n),o=i>0?i:1-i;return"YY"===t?ew(o%100,2):"Yo"===t?r.ordinalNumber(o,{unit:"year"}):ew(o,t.length)},R:function(e,t){return ew(eu(e),t.length)},u:function(e,t){return ew(e.getUTCFullYear(),t.length)},Q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ew(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ew(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){var n=e.getUTCMonth();switch(t){case"M":case"MM":return ev.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return ew(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){var i=eb(e,n);return"wo"===t?r.ordinalNumber(i,{unit:"week"}):ew(i,t.length)},I:function(e,t,r){var n=ef(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):ew(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):ev.d(e,t)},D:function(e,t,r){var n=es(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):ew(n,t.length)},E:function(e,t,r){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){var i=e.getUTCDay(),o=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return ew(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){var i=e.getUTCDay(),o=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return ew(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){var n=e.getUTCDay(),i=0===n?7:n;switch(t){case"i":return String(i);case"ii":return ew(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){var n,i=e.getUTCHours();switch(n=12===i?e_.noon:0===i?e_.midnight:i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){var n,i=e.getUTCHours();switch(n=i>=17?e_.evening:i>=12?e_.afternoon:i>=4?e_.morning:e_.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ev.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ev.H(e,t)},K:function(e,t,r){var n=e.getUTCHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):ew(n,t.length)},k:function(e,t,r){var n=e.getUTCHours();return(0===n&&(n=24),"ko"===t)?r.ordinalNumber(n,{unit:"hour"}):ew(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ev.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ev.s(e,t)},S:function(e,t){return ev.S(e,t)},X:function(e,t,r,n){var i=(n._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return eS(i);case"XXXX":case"XX":return eT(i);default:return eT(i,":")}},x:function(e,t,r,n){var i=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return eS(i);case"xxxx":case"xx":return eT(i);default:return eT(i,":")}},O:function(e,t,r,n){var i=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+eE(i,":");default:return"GMT"+eT(i,":")}},z:function(e,t,r,n){var i=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+eE(i,":");default:return"GMT"+eT(i,":")}},t:function(e,t,r,n){return ew(Math.floor((n._originalDate||e).getTime()/1e3),t.length)},T:function(e,t,r,n){return ew((n._originalDate||e).getTime(),t.length)}},eA=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},eO=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},eP=function(e,t){var r,n=e.match(/(P+)(p+)?/)||[],i=n[1],o=n[2];if(!o)return eA(e,t);switch(i){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",eA(i,t)).replace("{{time}}",eO(o,t))},ek={p:eO,P:eP};function ex(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var eC=["D","DD"],eR=["YY","YYYY"];function eB(e){return -1!==eC.indexOf(e)}function eU(e){return -1!==eR.indexOf(e)}function eN(e,t,r){if("YYYY"===e)throw RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var eD={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eL=function(e,t,r){var n,i=eD[e];return(n="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!=r&&r.addSuffix)?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function eH(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var eM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ej={date:eH({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:eH({formats:eM,defaultWidth:"full"}),dateTime:eH({formats:eF,defaultWidth:"full"})},eV={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},eK=function(e,t,r,n){return eV[e]};function eW(e){return function(t,r){var n;if("formatting"===(null!=r&&r.context?String(r.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!=r&&r.width?String(r.width):i;n=e.formattingValues[o]||e.formattingValues[i]}else{var s=e.defaultWidth,a=null!=r&&r.width?String(r.width):e.defaultWidth;n=e.values[a]||e.values[s]}return n[e.argumentCallback?e.argumentCallback(t):t]}}var eq={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},eG={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},e$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ez={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},eY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eX={ordinalNumber:function(e,t){var r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:eW({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:eW({values:eq,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:eW({values:eG,defaultWidth:"wide"}),day:eW({values:e$,defaultWidth:"wide"}),dayPeriod:eW({values:ez,defaultWidth:"wide",formattingValues:eY,defaultFormattingWidth:"wide"})};function eJ(e){return function(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.width,o=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=t.match(o);if(!s)return null;var a=s[0],u=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(u)?eZ(u,function(e){return e.test(a)}):eQ(u,function(e){return e.test(a)});return r=e.valueCallback?e.valueCallback(l):l,{value:r=n.valueCallback?n.valueCallback(r):r,rest:t.slice(a.length)}}}function eQ(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function eZ(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}var e0={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},e1={any:[/^b/i,/^(a|c)/i]},e2={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},e3={any:[/1/i,/2/i,/3/i,/4/i]},e4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},e5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},e8={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},e6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},e7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},e9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},te={code:"en-US",formatDistance:eL,formatLong:ej,formatRelative:eK,localize:eX,match:{ordinalNumber:function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var i=n[0],o=t.match(e.parsePattern);if(!o)return null;var s=e.valueCallback?e.valueCallback(o[0]):o[0];return{value:s=r.valueCallback?r.valueCallback(s):s,rest:t.slice(i.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:eJ({matchPatterns:e0,defaultMatchWidth:"wide",parsePatterns:e1,defaultParseWidth:"any"}),quarter:eJ({matchPatterns:e2,defaultMatchWidth:"wide",parsePatterns:e3,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:eJ({matchPatterns:e4,defaultMatchWidth:"wide",parsePatterns:e5,defaultParseWidth:"any"}),day:eJ({matchPatterns:e8,defaultMatchWidth:"wide",parsePatterns:e6,defaultParseWidth:"any"}),dayPeriod:eJ({matchPatterns:e7,defaultMatchWidth:"any",parsePatterns:e9,defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},tt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tn=/^'([^]*?)'?$/,ti=/''/g,to=/[a-zA-Z]/;function ts(e,t,r){G(2,arguments);var n,i,o,s,a,u,l,c,f,h,p,d,y,g,m,b,w,v,_=String(t),E=ep(),S=null!==(n=null!==(i=null==r?void 0:r.locale)&&void 0!==i?i:E.locale)&&void 0!==n?n:te,T=J(null!==(o=null!==(s=null!==(a=null!==(u=null==r?void 0:r.firstWeekContainsDate)&&void 0!==u?u:null==r?void 0:null===(l=r.locale)||void 0===l?void 0:null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:E.firstWeekContainsDate)&&void 0!==s?s:null===(f=E.locale)||void 0===f?void 0:null===(h=f.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==o?o:1);if(!(T>=1&&T<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var I=J(null!==(p=null!==(d=null!==(y=null!==(g=null==r?void 0:r.weekStartsOn)&&void 0!==g?g:null==r?void 0:null===(m=r.locale)||void 0===m?void 0:null===(b=m.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==y?y:E.weekStartsOn)&&void 0!==d?d:null===(w=E.locale)||void 0===w?void 0:null===(v=w.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==p?p:0);if(!(I>=0&&I<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw RangeError("locale must contain localize property");if(!S.formatLong)throw RangeError("locale must contain formatLong property");var A=$(e);if(!er(A))throw RangeError("Invalid time value");var O=ex(A),P=ei(A,O),k={firstWeekContainsDate:T,weekStartsOn:I,locale:S,_originalDate:A};return _.match(tr).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,ek[t])(e,S.formatLong):e}).join("").match(tt).map(function(n){if("''"===n)return"'";var i=n[0];if("'"===i)return ta(n);var o=eI[i];if(o)return!(null!=r&&r.useAdditionalWeekYearTokens)&&eU(n)&&eN(n,t,String(e)),!(null!=r&&r.useAdditionalDayOfYearTokens)&&eB(n)&&eN(n,t,String(e)),o(P,n,S.localize,k);if(i.match(to))throw RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return n}).join("")}function ta(e){var t=e.match(tn);return t?t[1].replace(ti,"'"):e}let tu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMMM dd, yyyy";return X(e)?"Today":ee(e)?"Yesterday":ts(e,t)},tl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd";return ts(e,t)};r(76481);let tc=["1d","1w","1m","1y"];!function(e){e.RUNES_SUPPORT="RUNES_SUPPORT",e.RUNES_LISTING="RUNES_LISTING",e.SWAPS="SWAPS",e.PAYPAL="PAYPAL",e.CROSS_CHAIN_SWAPS="CROSS_CHAIN_SWAPS",e.STACKS_SWAPS="STACKS_SWAPS",e.PORTFOLIO_TRACKING="PORTFOLIO_TRACKING",e.DYNAMIC_MOBILE_ICONS="DYNAMIC_MOBILE_ICONS",e.CLOUD_BACKUP_READ="CLOUD_BACKUP_READ",e.CLOUD_BACKUP_WRITE="CLOUD_BACKUP_WRITE",e.STARKNET_SPONSORSHIP="STARKNET_SPONSORSHIP"}(sr||(sr={}));let tf=["MYTHIC","LEGENDARY","EPIC","RARE","UNCOMMON","COMMON"],th=["BLACK_LEGENDARY","BLACK_EPIC","BLACK_RARE","BLACK_UNCOMMON","FIBONACCI","1D_PALINDROME","2D_PALINDROME","3D_PALINDROME","SEQUENCE_PALINDROME","PERFECT_PALINCEPTION","PALIBLOCK_PALINDROME","PALINDROME","ALPHA","OMEGA","FIRST_TRANSACTION","BLOCK9","BLOCK9_450","BLOCK78","BLOCK286","NAKAMOTO","VINTAGE","PIZZA","JPEG","HITMAN","SILK_ROAD","LEGACY"],tp=e=>tf.includes(e)||th.includes(e);!function(e){e.New="new",e.Waiting="waiting",e.Confirming="confirming",e.Exchanging="exchanging",e.Sending="sending",e.Finished="finished",e.Failed="failed",e.Refunded="refunded",e.Hold="hold",e.Overdue="overdue",e.Expired="expired"}(sn||(sn={})),function(e){e[e.InSufficientBalance=600]="InSufficientBalance",e[e.InSufficientBalanceWithTxFee=601]="InSufficientBalanceWithTxFee",e[e.OrdinalUtxoNotfound=700]="OrdinalUtxoNotfound"}(si||(si={})),function(e){e.ECDSA="ECDSA",e.BIP322="BIP322"}(so||(so={})),function(e){e.OptOut="Opt Out",e.CreateNewWallet="Create new wallet",e.RestoreWallet="Restore wallet",e.ClickApp="click_app",e.AppConnected="app_connected",e.TransactionConfirmed="transaction_confirmed",e.WalletMigrated="wallet_migrated",e.WalletSkippedMigration="wallet_skipped_migration",e.InitiateSwapFlow="initiate_swap_flow",e.FetchSwapQuote="fetch_swap_quote",e.SelectSwapQuote="select_swap_quote",e.ConfirmSwap="confirm_swap",e.SignSwap="sign_swap",e.SelectTokenToSwapFrom="select_token_to_swap_from",e.SelectTokenToSwapTo="select_token_to_swap_to",e.ListRuneInitiated="list_rune_initiated",e.ListRuneSigned="list_rune_signed",e.SetupWallet="setup_wallet",e.BackupWallet="backup_wallet",e.BackupWalletLater="backup_wallet_later",e.InitiateBuyFlow="initiate_buy_flow",e.InitiateSendFlow="initiate_send_flow",e.SetTokenSendRecipient="set_token_send_recipient",e.SetTokenSendAmountFee="set_token_send_amount_fee",e.InitiateReceiveFlow="initiate_receive_flow",e.VisitCollectiblesTab="visit_collectibles_tab",e.VisitStackingTab="visit_stacking_tab",e.VisitExplorePage="visit_explore_page",e.ClickQuickAmountButton="click_quick_amount_button",e.ClickPayWithCryptoTokens="click_pay_with_crypto_tokens",e.ClickQuoteOption="click_quote_option",e.OnrampSuccessful="onramp_successful",e.OnrampFailure="onramp_failure",e.ClickCopyAccountButton="click_copy_account_button",e.ClickShowAllAddresses="click_show_all_addresses",e.ClickHideAddresses="click_hide_addresses",e.ClickCopyAddress="click_copy_address",e.ClickReceiveOption="click_receive_option",e.ClickCopyQrAddress="click_copy_qr_address",e.ClickShareQrButton="click_share_qr_button",e.FeatureAnnouncementCTAClick="feature_announcement_cta_click",e.FeatureAnnouncementDismissClick="feature_announcement_dismiss_click"}(ss||(ss={}));var td=r(29096);let ty=3e4,tg="m/49'/",tm="m/84'/",tb="m/86'/",tw="51024e73",tv="https://btc-1.xverse.app",t_="https://btc-testnet.xverse.app",tE="https://btc-testnet4.xverse.app",tS="https://btc-signet.xverse.app",tT="https://beta.sbtc-mempool.tech/api/proxy",tI="https://api.hiro.so",tA="https://api.testnet.hiro.so",tO={type:"Mainnet",address:tI,btcApiUrl:tv,fallbackBtcApiUrl:"https://mempool.space/api"},tP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(e){case"Mainnet":return"".concat(t);case"Testnet":return"-testnet";case"Testnet4":return"-testnet4";case"Signet":case"Regtest":return"-signet";default:throw Error("Invalid network")}},tk=e=>"https://api".concat(tP(e,"-3"),".xverse.app");function tx(e,t){let r=0;return e.forEach(e=>{e.scriptpubkey_address&&e.scriptpubkey_address===t&&(r+=e.value)}),r}function tC(e,t){let r=0;return e.forEach(e=>{e.prevout.scriptpubkey_address===t&&(r+=e.prevout.value)}),r}function tR(e,t){var r,n;let i=[];e.vin.forEach(e=>{e.prevout.scriptpubkey_address&&i.push(e.prevout.scriptpubkey_address)});let o=!new Set(i).has(t),s=[];e.vout.forEach(e=>{e.scriptpubkey_address&&s.push(e.scriptpubkey_address)});let a=0;a=o?tx(e.vout,t):tC(e.vin,t)-tx(e.vout,t);let u=e.fee+a,l=new Date(0);return e.status.block_time&&l.setUTCSeconds(e.status.block_time),{blockHash:null!==(r=e.status.block_hash)&&void 0!==r?r:"",blockHeight:null!==(n=e.status.block_height)&&void 0!==n?n:0,txid:e.txid,total:u,fees:e.fee,size:e.size,weight:e.weight,confirmed:e.status.confirmed,inputs:e.vin,outputs:e.vout,seenTime:l,incoming:o,amount:new S(a),txType:"bitcoin",txStatus:e.status.confirmed?"success":"pending",isOrdinal:!0,recipientAddress:s[0]}}function tB(e,t,r){var n,i;let o=[];e.vin.forEach(e=>{e.prevout.scriptpubkey_address&&o.push(e.prevout.scriptpubkey_address)});let s=new Set(o),a=!s.has(t),u=s.has(r),l=[];e.vout.forEach(e=>{e.scriptpubkey_address&&e.scriptpubkey_address!==t&&e.scriptpubkey_address!==r&&l.push(e.scriptpubkey_address)});let c=0;c=a?tx(e.vout,t):tC(e.vin,t)-tx(e.vout,t);let f=e.fee+c,h=new Date(0);return e.status.block_time&&h.setUTCSeconds(e.status.block_time),{blockHash:null!==(n=e.status.block_hash)&&void 0!==n?n:"",blockHeight:null!==(i=e.status.block_height)&&void 0!==i?i:0,txid:e.txid,total:f,fees:e.fee,size:e.size,weight:e.weight,confirmed:e.status.confirmed,inputs:e.vin,outputs:e.vout,seenTime:h,incoming:a,amount:new S(c),txType:"bitcoin",txStatus:e.status.confirmed?"success":"pending",isOrdinal:u,recipientAddress:l[0]}}async function tU(e,t){if(!e)return[];let r=[];return(await t.getAddressMempoolTransactions(e)).forEach(t=>{r.push(tR(t,e))}),r.filter(e=>e.incoming)}async function tN(e,t,r){if(!e)return[];let n=[];return(await r.getAddressMempoolTransactions(e)).forEach(r=>{n.push(tB(r,e,t))}),n}async function tD(e,t){var r,n,i,o,s,a,u;let l=null!==(i=null==e?void 0:e.taproot.address)&&void 0!==i?i:"",c=[];return(null===(r=e.nested)||void 0===r?void 0:r.address)&&c.push(tN(null!==(s=null===(o=e.nested)||void 0===o?void 0:o.address)&&void 0!==s?s:"",l,t)),(null===(n=e.native)||void 0===n?void 0:n.address)&&c.push(tN(null!==(u=null===(a=e.native)||void 0===a?void 0:a.address)&&void 0!==u?u:"",l,t)),c.push(tU(l,t)),(await Promise.all(c)).flat()}function tL(e,t){return function(){return e.apply(t,arguments)}}var tH=r(34155);let{toString:tM}=Object.prototype,{getPrototypeOf:tF}=Object,tj=(i=Object.create(null),e=>{let t=tM.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())}),tV=e=>(e=e.toLowerCase(),t=>tj(t)===e),tK=e=>t=>typeof t===e,{isArray:tW}=Array,tq=tK("undefined");function tG(e){return null!==e&&!tq(e)&&null!==e.constructor&&!tq(e.constructor)&&tX(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}let t$=tV("ArrayBuffer");function tz(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&t$(e.buffer)}let tY=tK("string"),tX=tK("function"),tJ=tK("number"),tQ=e=>null!==e&&"object"==typeof e,tZ=e=>!0===e||!1===e,t0=e=>{if("object"!==tj(e))return!1;let t=tF(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},t1=tV("Date"),t2=tV("File"),t3=tV("Blob"),t4=tV("FileList"),t5=e=>tQ(e)&&tX(e.pipe),t8=e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||tX(e.append)&&("formdata"===(t=tj(e))||"object"===t&&tX(e.toString)&&"[object FormData]"===e.toString()))},t6=tV("URLSearchParams"),[t7,t9,re,rt]=["ReadableStream","Request","Response","Headers"].map(tV),rr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rn(e,t){let r,n,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e){if("object"!=typeof e&&(e=[e]),tW(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{let n;let o=i?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;for(r=0;r<s;r++)n=o[r],t.call(null,e[n],n,e)}}}function ri(e,t){let r;t=t.toLowerCase();let n=Object.keys(e),i=n.length;for(;i-- >0;)if(t===(r=n[i]).toLowerCase())return r;return null}let ro="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,rs=e=>!tq(e)&&e!==ro;function ra(){let{caseless:e}=rs(this)&&this||{},t={},r=(r,n)=>{let i=e&&ri(t,n)||n;t0(t[i])&&t0(r)?t[i]=ra(t[i],r):t0(r)?t[i]=ra({},r):tW(r)?t[i]=r.slice():t[i]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&rn(arguments[e],r);return t}let ru=function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return rn(t,(t,n)=>{r&&tX(t)?e[n]=tL(t,r):e[n]=t},{allOwnKeys:n}),e},rl=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),rc=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},rf=(e,t,r,n)=>{let i,o,s;let a={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)s=i[o],(!n||n(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=!1!==r&&tF(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},rh=(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return -1!==n&&n===r},rp=e=>{if(!e)return null;if(tW(e))return e;let t=e.length;if(!tJ(t))return null;let r=Array(t);for(;t-- >0;)r[t]=e[t];return r},rd=(o="undefined"!=typeof Uint8Array&&tF(Uint8Array),e=>o&&e instanceof o),ry=(e,t)=>{let r;let n=(e&&e[Symbol.iterator]).call(e);for(;(r=n.next())&&!r.done;){let n=r.value;t.call(e,n[0],n[1])}},rg=(e,t)=>{let r;let n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},rm=tV("HTMLFormElement"),rb=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),rw=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),rv=tV("RegExp"),r_=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};rn(r,(r,i)=>{let o;!1!==(o=t(r,i,e))&&(n[i]=o||r)}),Object.defineProperties(e,n)},rE=e=>{r_(e,(t,r)=>{if(tX(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;if(tX(e[r])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},rS=(e,t)=>{let r={};return(e=>{e.forEach(e=>{r[e]=!0})})(tW(e)?e:String(e).split(t)),r},rT=()=>{},rI=(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t;function rA(e){return!!(e&&tX(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])}let rO=e=>{let t=Array(10),r=(e,n)=>{if(tQ(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;let i=tW(e)?[]:{};return rn(e,(e,t)=>{let o=r(e,n+1);tq(o)||(i[t]=o)}),t[n]=void 0,i}}return e};return r(e,0)},rP=tV("AsyncFunction"),rk=e=>e&&(tQ(e)||tX(e))&&tX(e.then)&&tX(e.catch),rx=((e,t)=>{let r,n;return e?setImmediate:t?(r="axios@".concat(Math.random()),n=[],ro.addEventListener("message",e=>{let{source:t,data:i}=e;t===ro&&i===r&&n.length&&n.shift()()},!1),e=>{n.push(e),ro.postMessage(r,"*")}):e=>setTimeout(e)})("function"==typeof setImmediate,tX(ro.postMessage)),rC="undefined"!=typeof queueMicrotask?queueMicrotask.bind(ro):void 0!==tH&&tH.nextTick||rx;var rR={isArray:tW,isArrayBuffer:t$,isBuffer:tG,isFormData:t8,isArrayBufferView:tz,isString:tY,isNumber:tJ,isBoolean:tZ,isObject:tQ,isPlainObject:t0,isReadableStream:t7,isRequest:t9,isResponse:re,isHeaders:rt,isUndefined:tq,isDate:t1,isFile:t2,isBlob:t3,isRegExp:rv,isFunction:tX,isStream:t5,isURLSearchParams:t6,isTypedArray:rd,isFileList:t4,forEach:rn,merge:ra,extend:ru,trim:rr,stripBOM:rl,inherits:rc,toFlatObject:rf,kindOf:tj,kindOfTest:tV,endsWith:rh,toArray:rp,forEachEntry:ry,matchAll:rg,isHTMLForm:rm,hasOwnProperty:rw,hasOwnProp:rw,reduceDescriptors:r_,freezeMethods:rE,toObjectSet:rS,toCamelCase:rb,noop:rT,toFiniteNumber:rI,findKey:ri,global:ro,isContextDefined:rs,isSpecCompliantForm:rA,toJSONObject:rO,isAsyncFn:rP,isThenable:rk,setImmediate:rx,asap:rC};function rB(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}rR.inherits(rB,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:rR.toJSONObject(this.config),code:this.code,status:this.status}}});let rU=rB.prototype,rN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{rN[e]={value:e}}),Object.defineProperties(rB,rN),Object.defineProperty(rU,"isAxiosError",{value:!0}),rB.from=(e,t,r,n,i,o)=>{let s=Object.create(rU);return rR.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),rB.call(s,e.message,t,r,n,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};var rD=rB,rL=null,rH=r(48764).Buffer;function rM(e){return rR.isPlainObject(e)||rR.isArray(e)}function rF(e){return rR.endsWith(e,"[]")?e.slice(0,-2):e}function rj(e,t,r){return e?e.concat(t).map(function(e,t){return e=rF(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}function rV(e){return rR.isArray(e)&&!e.some(rM)}let rK=rR.toFlatObject(rR,{},null,function(e){return/^is[A-Z]/.test(e)});var rW=function(e,t,r){if(!rR.isObject(e))throw TypeError("target must be an object");t=t||new(rL||FormData);let n=(r=rR.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!rR.isUndefined(t[e])})).metaTokens,i=r.visitor||l,o=r.dots,s=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&rR.isSpecCompliantForm(t);if(!rR.isFunction(i))throw TypeError("visitor must be a function");function u(e){if(null===e)return"";if(rR.isDate(e))return e.toISOString();if(!a&&rR.isBlob(e))throw new rD("Blob is not supported. Use a Buffer instead.");return rR.isArrayBuffer(e)||rR.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):rH.from(e):e}function l(e,r,i){let a=e;if(e&&!i&&"object"==typeof e){if(rR.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(rR.isArray(e)&&rV(e)||(rR.isFileList(e)||rR.endsWith(r,"[]"))&&(a=rR.toArray(e)))return r=rF(r),a.forEach(function(e,n){rR.isUndefined(e)||null===e||t.append(!0===s?rj([r],n,o):null===s?r:r+"[]",u(e))}),!1}return!!rM(e)||(t.append(rj(i,r,o),u(e)),!1)}let c=[],f=Object.assign(rK,{defaultVisitor:l,convertValue:u,isVisitable:rM});function h(e,r){if(!rR.isUndefined(e)){if(-1!==c.indexOf(e))throw Error("Circular reference detected in "+r.join("."));c.push(e),rR.forEach(e,function(e,n){!0===(!(rR.isUndefined(e)||null===e)&&i.call(t,e,rR.isString(n)?n.trim():n,r,f))&&h(e,r?r.concat(n):[n])}),c.pop()}}if(!rR.isObject(e))throw TypeError("data must be an object");return h(e),t};function rq(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function rG(e,t){this._pairs=[],e&&rW(e,this,t)}let r$=rG.prototype;r$.append=function(e,t){this._pairs.push([e,t])},r$.toString=function(e){let t=e?function(t){return e.call(this,t,rq)}:rq;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};var rz=rG;function rY(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rX(e,t,r){let n;if(!t)return e;let i=r&&r.encode||rY;rR.isFunction(r)&&(r={serialize:r});let o=r&&r.serialize;if(n=o?o(t,r):rR.isURLSearchParams(t)?t.toString():new rz(t,r).toString(i)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}class rJ{use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){rR.forEach(this.handlers,function(t){null!==t&&e(t)})}constructor(){this.handlers=[]}}var rQ=rJ,rZ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},r0={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:rz,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};let r1="undefined"!=typeof document,r2="object"==typeof navigator&&navigator||void 0,r3=r1&&(!r2||0>["ReactNative","NativeScript","NS"].indexOf(r2.product)),r4="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,r5=r1&&window.location.href||"http://localhost";var r8={...m,...r0};function r6(e,t){return rW(e,new r8.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return r8.isNode&&rR.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}function r7(e){return rR.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}function r9(e){let t,r;let n={},i=Object.keys(e),o=i.length;for(t=0;t<o;t++)n[r=i[t]]=e[r];return n}var ne=function(e){function t(e,r,n,i){let o=e[i++];if("__proto__"===o)return!0;let s=Number.isFinite(+o),a=i>=e.length;return(o=!o&&rR.isArray(n)?n.length:o,a)?rR.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r:(n[o]&&rR.isObject(n[o])||(n[o]=[]),t(e,r,n[o],i)&&rR.isArray(n[o])&&(n[o]=r9(n[o]))),!s}if(rR.isFormData(e)&&rR.isFunction(e.entries)){let r={};return rR.forEachEntry(e,(e,n)=>{t(r7(e),n,r,0)}),r}return null};function nt(e,t,r){if(rR.isString(e))try{return(t||JSON.parse)(e),rR.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}let nr={transitional:rZ,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let r;let n=t.getContentType()||"",i=n.indexOf("application/json")>-1,o=rR.isObject(e);if(o&&rR.isHTMLForm(e)&&(e=new FormData(e)),rR.isFormData(e))return i?JSON.stringify(ne(e)):e;if(rR.isArrayBuffer(e)||rR.isBuffer(e)||rR.isStream(e)||rR.isFile(e)||rR.isBlob(e)||rR.isReadableStream(e))return e;if(rR.isArrayBufferView(e))return e.buffer;if(rR.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return r6(e,this.formSerializer).toString();if((r=rR.isFileList(e))||n.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return rW(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),nt(e)):e}],transformResponse:[function(e){let t=this.transitional||nr.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(rR.isResponse(e)||rR.isReadableStream(e))return e;if(e&&rR.isString(e)&&(r&&!this.responseType||n)){let r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw rD.from(e,rD.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:r8.classes.FormData,Blob:r8.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};rR.forEach(["delete","get","head","post","put","patch"],e=>{nr.headers[e]={}});var nn=nr;let ni=rR.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var no=e=>{let t,r,n;let i={};return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),t=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!t||i[t]&&ni[t]||("set-cookie"===t?i[t]?i[t].push(r):i[t]=[r]:i[t]=i[t]?i[t]+", "+r:r)}),i};let ns=Symbol("internals");function na(e){return e&&String(e).trim().toLowerCase()}function nu(e){return!1===e||null==e?e:rR.isArray(e)?e.map(nu):String(e)}function nl(e){let t;let r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=n.exec(e);)r[t[1]]=t[2];return r}let nc=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function nf(e,t,r,n,i){if(rR.isFunction(n))return n.call(this,t,r);if(i&&(t=r),rR.isString(t)){if(rR.isString(n))return -1!==t.indexOf(n);if(rR.isRegExp(n))return n.test(t)}}function nh(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function np(e,t){let r=rR.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,i){return this[n].call(this,t,e,r,i)},configurable:!0})})}class nd{set(e,t,r){let n=this;function i(e,t,r){let i=na(t);if(!i)throw Error("header name must be a non-empty string");let o=rR.findKey(n,i);o&&void 0!==n[o]&&!0!==r&&(void 0!==r||!1===n[o])||(n[o||t]=nu(e))}let o=(e,t)=>rR.forEach(e,(e,r)=>i(e,r,t));if(rR.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(rR.isString(e)&&(e=e.trim())&&!nc(e))o(no(e),t);else if(rR.isHeaders(e))for(let[t,n]of e.entries())i(n,t,r);else null!=e&&i(t,e,r);return this}get(e,t){if(e=na(e)){let r=rR.findKey(this,e);if(r){let e=this[r];if(!t)return e;if(!0===t)return nl(e);if(rR.isFunction(t))return t.call(this,e,r);if(rR.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=na(e)){let r=rR.findKey(this,e);return!!(r&&void 0!==this[r]&&(!t||nf(this,this[r],r,t)))}return!1}delete(e,t){let r=this,n=!1;function i(e){if(e=na(e)){let i=rR.findKey(r,e);i&&(!t||nf(r,r[i],i,t))&&(delete r[i],n=!0)}}return rR.isArray(e)?e.forEach(i):i(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let i=t[r];(!e||nf(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){let t=this,r={};return rR.forEach(this,(n,i)=>{let o=rR.findKey(r,i);if(o){t[o]=nu(n),delete t[i];return}let s=e?nh(i):String(i).trim();s!==i&&delete t[i],t[s]=nu(n),r[s]=!0}),this}concat(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){let t=Object.create(null);return rR.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&rR.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new this(e);return r.forEach(e=>i.set(e)),i}static accessor(e){let t=(this[ns]=this[ns]={accessors:{}}).accessors,r=this.prototype;function n(e){let n=na(e);t[n]||(np(r,e),t[n]=!0)}return rR.isArray(e)?e.forEach(n):n(e),this}constructor(e){e&&this.set(e)}}nd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),rR.reduceDescriptors(nd.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}}),rR.freezeMethods(nd);var ny=nd;function ng(e,t){let r=this||nn,n=t||r,i=ny.from(n.headers),o=n.data;return rR.forEach(e,function(e){o=e.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function nm(e){return!!(e&&e.__CANCEL__)}function nb(e,t,r){rD.call(this,null==e?"canceled":e,rD.ERR_CANCELED,t,r),this.name="CanceledError"}rR.inherits(nb,rD,{__CANCEL__:!0});var nw=nb;function nv(e,t,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new rD("Request failed with status code "+r.status,[rD.ERR_BAD_REQUEST,rD.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function n_(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}var nE=function(e,t){let r;let n=Array(e=e||10),i=Array(e),o=0,s=0;return t=void 0!==t?t:1e3,function(a){let u=Date.now(),l=i[s];r||(r=u),n[o]=a,i[o]=u;let c=s,f=0;for(;c!==o;)f+=n[c++],c%=e;if((o=(o+1)%e)===s&&(s=(s+1)%e),u-r<t)return;let h=l&&u-l;return h?Math.round(1e3*f/h):void 0}},nS=function(e,t){let r,n,i=0,o=1e3/t,s=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let u=Date.now(),l=u-i;l>=o?s(t,u):(r=t,n||(n=setTimeout(()=>{n=null,s(r)},o-l)))},()=>r&&s(r)]};let nT=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0,i=nE(50,250);return nS(r=>{let o=r.loaded,s=r.lengthComputable?r.total:void 0,a=o-n,u=i(a),l=o<=s;n=o,e({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:u||void 0,estimated:u&&s&&l?(s-o)/u:void 0,event:r,lengthComputable:null!=s,[t?"download":"upload"]:!0})},r)},nI=(e,t)=>{let r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},nA=e=>function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rR.asap(()=>e(...r))};var nO=r8.hasStandardBrowserEnv?(s=new URL(r8.origin),a=r8.navigator&&/(msie|trident)/i.test(r8.navigator.userAgent),e=>(e=new URL(e,r8.origin),s.protocol===e.protocol&&s.host===e.host&&(a||s.port===e.port))):()=>!0,nP=r8.hasStandardBrowserEnv?{write(e,t,r,n,i,o){let s=[e+"="+encodeURIComponent(t)];rR.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),rR.isString(n)&&s.push("path="+n),rR.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){let t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function nk(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function nx(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function nC(e,t,r){let n=!nk(t);return e&&(n||!1==r)?nx(e,t):t}let nR=e=>e instanceof ny?{...e}:e;function nB(e,t){t=t||{};let r={};function n(e,t,r,n){return rR.isPlainObject(e)&&rR.isPlainObject(t)?rR.merge.call({caseless:n},e,t):rR.isPlainObject(t)?rR.merge({},t):rR.isArray(t)?t.slice():t}function i(e,t,r,i){return rR.isUndefined(t)?rR.isUndefined(e)?void 0:n(void 0,e,r,i):n(e,t,r,i)}function o(e,t){if(!rR.isUndefined(t))return n(void 0,t)}function s(e,t){return rR.isUndefined(t)?rR.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,i,o){return o in t?n(r,i):o in e?n(void 0,r):void 0}let u={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,r)=>i(nR(e),nR(t),r,!0)};return rR.forEach(Object.keys(Object.assign({},e,t)),function(n){let o=u[n]||i,s=o(e[n],t[n],n);rR.isUndefined(s)&&o!==a||(r[n]=s)}),r}var nU=e=>{let t;let r=nB({},e),{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:u}=r;if(r.headers=a=ny.from(a),r.url=rX(nC(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),rR.isFormData(n)){if(r8.hasStandardBrowserEnv||r8.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(t=a.getContentType())){let[e,...r]=t?t.split(";").map(e=>e.trim()).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...r].join("; "))}}if(r8.hasStandardBrowserEnv&&(i&&rR.isFunction(i)&&(i=i(r)),i||!1!==i&&nO(r.url))){let e=o&&s&&nP.read(s);e&&a.set(o,e)}return r},nN="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){let n,i,o,s,a;let u=nU(e),l=u.data,c=ny.from(u.headers).normalize(),{responseType:f,onUploadProgress:h,onDownloadProgress:p}=u;function d(){s&&s(),a&&a(),u.cancelToken&&u.cancelToken.unsubscribe(n),u.signal&&u.signal.removeEventListener("abort",n)}let y=new XMLHttpRequest;function g(){if(!y)return;let n=ny.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders());nv(function(e){t(e),d()},function(e){r(e),d()},{data:f&&"text"!==f&&"json"!==f?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:n,config:e,request:y}),y=null}y.open(u.method.toUpperCase(),u.url,!0),y.timeout=u.timeout,"onloadend"in y?y.onloadend=g:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(g)},y.onabort=function(){y&&(r(new rD("Request aborted",rD.ECONNABORTED,e,y)),y=null)},y.onerror=function(){r(new rD("Network Error",rD.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let t=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",n=u.transitional||rZ;u.timeoutErrorMessage&&(t=u.timeoutErrorMessage),r(new rD(t,n.clarifyTimeoutError?rD.ETIMEDOUT:rD.ECONNABORTED,e,y)),y=null},void 0===l&&c.setContentType(null),"setRequestHeader"in y&&rR.forEach(c.toJSON(),function(e,t){y.setRequestHeader(t,e)}),rR.isUndefined(u.withCredentials)||(y.withCredentials=!!u.withCredentials),f&&"json"!==f&&(y.responseType=u.responseType),p&&([o,a]=nT(p,!0),y.addEventListener("progress",o)),h&&y.upload&&([i,s]=nT(h),y.upload.addEventListener("progress",i),y.upload.addEventListener("loadend",s)),(u.cancelToken||u.signal)&&(n=t=>{y&&(r(!t||t.type?new nw(null,e,y):t),y.abort(),y=null)},u.cancelToken&&u.cancelToken.subscribe(n),u.signal&&(u.signal.aborted?n():u.signal.addEventListener("abort",n)));let m=n_(u.url);if(m&&-1===r8.protocols.indexOf(m)){r(new rD("Unsupported protocol "+m+":",rD.ERR_BAD_REQUEST,e));return}y.send(l||null)})},nD=(e,t)=>{let{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController,i=function(e){if(!r){r=!0,s();let t=e instanceof Error?e:this.reason;n.abort(t instanceof rD?t:new nw(t instanceof Error?t.message:t))}},o=t&&setTimeout(()=>{o=null,i(new rD("timeout ".concat(t," of ms exceeded"),rD.ETIMEDOUT))},t),s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));let{signal:a}=n;return a.unsubscribe=()=>rR.asap(s),a}};let nL=function*(e,t){let r,n=e.byteLength;if(!t||n<t){yield e;return}let i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},nH=async function*(e,t){for await(let r of nM(e))yield*nL(r,t)},nM=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},nF=(e,t,r,n)=>{let i;let o=nH(e,t),s=0,a=e=>{!i&&(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{let{done:t,value:n}=await o.next();if(t){a(),e.close();return}let i=n.byteLength;if(r){let e=s+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw a(e),e}},cancel:e=>(a(e),o.return())},{highWaterMark:2})},nj="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,nV=nj&&"function"==typeof ReadableStream,nK=nj&&("function"==typeof TextEncoder?(u=new TextEncoder,e=>u.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer())),nW=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];try{return!!e(...r)}catch(e){return!1}},nq=nV&&nW(()=>{let e=!1,t=new Request(r8.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),nG=65536,n$=nV&&nW(()=>rR.isReadableStream(new Response("").body)),nz={stream:n$&&(e=>e.body)};nj&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{nz[t]||(nz[t]=rR.isFunction(e[t])?e=>e[t]():(e,r)=>{throw new rD("Response type '".concat(t,"' is not supported"),rD.ERR_NOT_SUPPORT,r)})})})(new Response);let nY=async e=>{if(null==e)return 0;if(rR.isBlob(e))return e.size;if(rR.isSpecCompliantForm(e)){let t=new Request(r8.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return rR.isArrayBufferView(e)||rR.isArrayBuffer(e)?e.byteLength:(rR.isURLSearchParams(e)&&(e+=""),rR.isString(e))?(await nK(e)).byteLength:void 0},nX=async(e,t)=>{let r=rR.toFiniteNumber(e.getContentLength());return null==r?nY(t):r},nJ={http:rL,xhr:nN,fetch:nj&&(async e=>{let t,r,{url:n,method:i,data:o,signal:s,cancelToken:a,timeout:u,onDownloadProgress:l,onUploadProgress:c,responseType:f,headers:h,withCredentials:p="same-origin",fetchOptions:d}=nU(e);f=f?(f+"").toLowerCase():"text";let y=nD([s,a&&a.toAbortSignal()],u),g=y&&y.unsubscribe&&(()=>{y.unsubscribe()});try{if(c&&nq&&"get"!==i&&"head"!==i&&0!==(r=await nX(h,o))){let e,t=new Request(n,{method:"POST",body:o,duplex:"half"});if(rR.isFormData(o)&&(e=t.headers.get("content-type"))&&h.setContentType(e),t.body){let[e,n]=nI(r,nT(nA(c)));o=nF(t.body,nG,e,n)}}rR.isString(p)||(p=p?"include":"omit");let s="credentials"in Request.prototype;t=new Request(n,{...d,signal:y,method:i.toUpperCase(),headers:h.normalize().toJSON(),body:o,duplex:"half",credentials:s?p:void 0});let a=await fetch(t),u=n$&&("stream"===f||"response"===f);if(n$&&(l||u&&g)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=a[t]});let t=rR.toFiniteNumber(a.headers.get("content-length")),[r,n]=l&&nI(t,nT(nA(l),!0))||[];a=new Response(nF(a.body,nG,r,()=>{n&&n(),g&&g()}),e)}f=f||"text";let m=await nz[rR.findKey(nz,f)||"text"](a,e);return!u&&g&&g(),await new Promise((r,n)=>{nv(r,n,{data:m,headers:ny.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:t})})}catch(r){if(g&&g(),r&&"TypeError"===r.name&&/fetch/i.test(r.message))throw Object.assign(new rD("Network Error",rD.ERR_NETWORK,e,t),{cause:r.cause||r});throw rD.from(r,r&&r.code,e,t)}})};rR.forEach(nJ,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let nQ=e=>"- ".concat(e),nZ=e=>rR.isFunction(e)||null===e||!1===e;var n0=e=>{let t,r;let{length:n}=e=rR.isArray(e)?e:[e],i={};for(let o=0;o<n;o++){let n;if(r=t=e[o],!nZ(t)&&void 0===(r=nJ[(n=String(t)).toLowerCase()]))throw new rD("Unknown adapter '".concat(n,"'"));if(r)break;i[n||"#"+o]=r}if(!r){let e=Object.entries(i).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});throw new rD("There is no suitable adapter to dispatch the request "+(n?e.length>1?"since :\n"+e.map(nQ).join("\n"):" "+nQ(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function n1(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new nw(null,e)}function n2(e){return n1(e),e.headers=ny.from(e.headers),e.data=ng.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),n0(e.adapter||nn.adapter)(e).then(function(t){return n1(e),t.data=ng.call(e,e.transformResponse,t),t.headers=ny.from(t.headers),t},function(t){return!nm(t)&&(n1(e),t&&t.response&&(t.response.data=ng.call(e,e.transformResponse,t.response),t.response.headers=ny.from(t.response.headers))),Promise.reject(t)})}let n3="1.8.4",n4={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{n4[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});let n5={};n4.transitional=function(e,t,r){function n(e,t){return"[Axios v"+n3+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,o)=>{if(!1===e)throw new rD(n(i," has been removed"+(t?" in "+t:"")),rD.ERR_DEPRECATED);return t&&!n5[i]&&(n5[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,o)}},n4.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};var n8={assertOptions:function(e,t,r){if("object"!=typeof e)throw new rD("options must be an object",rD.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),i=n.length;for(;i-- >0;){let o=n[i],s=t[o];if(s){let t=e[o],r=void 0===t||s(t,o,e);if(!0!==r)throw new rD("option "+o+" must be "+r,rD.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new rD("Unknown option "+o,rD.ERR_BAD_OPTION)}},validators:n4};let n6=n8.validators;class n7{async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){let r,n;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:i,paramsSerializer:o,headers:s}=t=nB(this.defaults,t);void 0!==i&&n8.assertOptions(i,{silentJSONParsing:n6.transitional(n6.boolean),forcedJSONParsing:n6.transitional(n6.boolean),clarifyTimeoutError:n6.transitional(n6.boolean)},!1),null!=o&&(rR.isFunction(o)?t.paramsSerializer={serialize:o}:n8.assertOptions(o,{encode:n6.function,serialize:n6.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),n8.assertOptions(t,{baseUrl:n6.spelling("baseURL"),withXsrfToken:n6.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&rR.merge(s.common,s[t.method]);s&&rR.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=ny.concat(a,s);let u=[],l=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(l=l&&e.synchronous,u.unshift(e.fulfilled,e.rejected))});let c=[];this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let f=0;if(!l){let e=[n2.bind(this),void 0];for(e.unshift.apply(e,u),e.push.apply(e,c),n=e.length,r=Promise.resolve(t);f<n;)r=r.then(e[f++],e[f++]);return r}n=u.length;let h=t;for(f=0;f<n;){let e=u[f++],t=u[f++];try{h=e(h)}catch(e){t.call(this,e);break}}try{r=n2.call(this,h)}catch(e){return Promise.reject(e)}for(f=0,n=c.length;f<n;)r=r.then(c[f++],c[f++]);return r}getUri(e){return rX(nC((e=nB(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}constructor(e){this.defaults=e,this.interceptors={request:new rQ,response:new rQ}}}rR.forEach(["delete","get","head","options"],function(e){n7.prototype[e]=function(t,r){return this.request(nB(r||{},{method:e,url:t,data:(r||{}).data}))}}),rR.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,i){return this.request(nB(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}n7.prototype[e]=t(),n7.prototype[e+"Form"]=t(!0)});var n9=n7;class ie{throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ie(function(t){e=t}),cancel:e}}constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});let r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;let n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,i){r.reason||(r.reason=new nw(e,n,i),t(r.reason))})}}var it=ie;function ir(e){return function(t){return e.apply(null,t)}}function ii(e){return rR.isObject(e)&&!0===e.isAxiosError}let io={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(io).forEach(e=>{let[t,r]=e;io[r]=t});var is=io;function ia(e){let t=new n9(e),r=tL(n9.prototype.request,t);return rR.extend(r,n9.prototype,t,{allOwnKeys:!0}),rR.extend(r,t,null,{allOwnKeys:!0}),r.create=function(t){return ia(nB(e,t))},r}let iu=ia(nn);iu.Axios=n9,iu.CanceledError=nw,iu.CancelToken=it,iu.isCancel=nm,iu.VERSION=n3,iu.toFormData=rW,iu.AxiosError=rD,iu.Cancel=iu.CanceledError,iu.all=function(e){return Promise.all(e)},iu.spread=ir,iu.isAxiosError=ii,iu.mergeConfig=nB,iu.AxiosHeaders=ny,iu.formToJSON=e=>ne(rR.isHTMLForm(e)?new FormData(e):e),iu.getAdapter=n0,iu.HttpStatusCode=is,iu.default=iu;var il=iu,ic=r(29367);let ih="axios-retry";function ip(e){let t=["ERR_CANCELED","ECONNABORTED"];return!(e.response||!e.code||t.includes(e.code))&&ic(e)}let id=["get","head","options"],iy=id.concat(["put","delete"]);function ig(e){return"ECONNABORTED"!==e.code&&(!e.response||429===e.response.status||e.response.status>=500&&e.response.status<=599)}function im(e){return!!e.config?.method&&ig(e)&&-1!==id.indexOf(e.config.method)}function ib(e){return!!e.config?.method&&ig(e)&&-1!==iy.indexOf(e.config.method)}function iw(e){return ip(e)||ib(e)}function iv(e){let t=e?.response?.headers["retry-after"];if(!t)return 0;let r=1e3*(Number(t)||0);return 0===r&&(r=(new Date(t).valueOf()||0)-Date.now()),Math.max(0,r)}function i_(e=0,t,r=100){let n=Math.max(2**e*r,iv(t)),i=.2*n*Math.random();return n+i}function iE(e=100){return(t=0,r)=>Math.max(t*e,iv(r))}let iS={retries:3,retryCondition:iw,retryDelay:function(e=0,t){return Math.max(0,iv(t))},shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function iT(e,t){return{...iS,...t,...e[ih]}}function iI(e,t,r=!1){let n=iT(e,t||{});return n.retryCount=n.retryCount||0,(!n.lastRequestTime||r)&&(n.lastRequestTime=Date.now()),e[ih]=n,n}function iA(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}async function iO(e,t){let{retries:r,retryCondition:n}=e,i=(e.retryCount||0)<r&&n(t);if("object"==typeof i)try{let e=await i;return!1!==e}catch(e){return!1}return i}async function iP(e,t,r,n){t.retryCount+=1;let{retryDelay:i,shouldResetTimeout:o,onRetry:s}=t,a=i(t.retryCount,r);if(iA(e,n),!o&&n.timeout&&t.lastRequestTime){let e=Date.now()-t.lastRequestTime,i=n.timeout-e-a;if(i<=0)return Promise.reject(r);n.timeout=i}return(n.transformRequest=[e=>e],await s(t.retryCount,r,n),n.signal?.aborted)?Promise.resolve(e(n)):new Promise(t=>{let r=()=>{clearTimeout(i),t(e(n))},i=setTimeout(()=>{t(e(n)),n.signal?.removeEventListener&&n.signal.removeEventListener("abort",r)},a);n.signal?.addEventListener&&n.signal.addEventListener("abort",r,{once:!0})})}async function ik(e,t){e.retryCount>=e.retries&&await e.onMaxRetryTimesExceeded(t,e.retryCount)}let ix=(e,t)=>({requestInterceptorId:e.interceptors.request.use(e=>(iI(e,t,!0),e[ih]?.validateResponse&&(e.validateStatus=()=>!1),e)),responseInterceptorId:e.interceptors.response.use(null,async r=>{let{config:n}=r;if(!n)return Promise.reject(r);let i=iI(n,t);return r.response&&i.validateResponse?.(r.response)?r.response:await iO(i,r)?iP(e,i,r,n):(await ik(i,r),Promise.reject(r))})});ix.isNetworkError=ip,ix.isSafeRequestError=im,ix.isIdempotentRequestError=ib,ix.isNetworkOrIdempotentRequestError=iw,ix.exponentialDelay=i_,ix.linearDelay=iE,ix.isRetryableError=ig;var iC=ix;function iR(e){e.cancelToken&&e.cancelToken.throwIfRequested()}class iB{constructor(e,t){function r(e){return Promise.reject(e)}this.handleRequest=e=>new Promise((t,r)=>{this.push({resolve:function(){try{iR(e)}catch(e){return r(e),!1}return t(e),!0}})}),this.push=e=>{this.queue.push(e),this.shift()},this.onRequestTimerMet=()=>{this.timeslotRequests--,this.shift()},this.shift=()=>{if(this.timeslotRequests>=this.maxRequests)return;let e=this.queue.shift();if(e){if(!e.resolve()){this.shift();return}this.timeslotRequests++,setTimeout(this.onRequestTimerMet,this.perMilliseconds)}},this.queue=[],this.timeslotRequests=0,"maxRPS"in t?(this.perMilliseconds=1e3,this.maxRequests=t.maxRPS):(this.perMilliseconds=t.perMilliseconds,this.maxRequests=t.maxRequests),(Array.isArray(e)?e:[e]).forEach(e=>e.interceptors.request.use(this.handleRequest,r))}}class iU{async httpGet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(await this.bitcoinApi.get(e,{...r,params:t})).data}async httpPost(e,t){return(await this.bitcoinApi.post(e,t)).data}async getBalance(e){let{chain_stats:t,mempool_stats:r}=await this.httpGet("/address/".concat(e)),n=t.funded_txo_sum-t.spent_txo_sum,i=r.funded_txo_sum-r.spent_txo_sum;return{address:e,finalBalance:n,finalNTx:t.tx_count,totalReceived:t.funded_txo_sum,totalSent:t.spent_txo_sum,unconfirmedTx:r.tx_count,unconfirmedBalance:i}}async getAddressData(e){return await this.httpGet("/address/".concat(e))}async getUnspentUtxos(e){return(await this.httpGet("/address/".concat(e,"/utxo"))).map(t=>({...t,address:e,blockHeight:t.status.block_height}))}async _getAddressTransactionCount(e){let t=await this.httpGet("/address/".concat(e));return t.chain_stats.tx_count+t.mempool_stats.tx_count}async getAddressTransactions(e){return this.httpGet("/address/".concat(e,"/txs"))}async getTransaction(e){return this.httpGet("/tx/".concat(e))}async getTransactionHex(e){let t=await this.bitcoinApi.get("/tx/".concat(e,"/hex"),{validateStatus:e=>e>=200&&(e<300||404===e)});if(404!==t.status)return t.data}async getAddressMempoolTransactions(e){return this.httpGet("/address/".concat(e,"/txs/mempool"))}async sendRawTransaction(e){return{tx:{hash:await this.httpPost("/tx",e)}}}async getTransactionOutspends(e){let t=await this.bitcoinApi.get("/tx/".concat(e,"/outspends"),{validateStatus:e=>e>=200&&(e<300||404===e)});if(404!==t.status)return t.data}async getLatestBlockHeight(){return await this.httpGet("/blocks/tip/height")}async getBlockHash(e){return await this.httpGet("/block-height/".concat(e))}constructor(e){let{url:t,network:r,fallbackUrl:n}=e,i=t;if(!i)switch(r){case"Mainnet":i=tv;break;case"Testnet":i=t_;break;case"Testnet4":i=tE;break;case"Signet":i=tS;break;case"Regtest":i=tT;break;default:throw Error("Invalid network")}let o={baseURL:i};this._network=r,this.bitcoinApi=il.create(o),this.rateLimiter=new iB(this.bitcoinApi,{maxRPS:10}),iC(this.bitcoinApi,{retries:1,retryDelay:i_,retryCondition:e=>{var t,r,n;return(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)===429||(null!==(n=null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.status)&&void 0!==n?n:0)>=500}}),n&&(this.fallbackBitcoinApi=il.create({...o,baseURL:n}),this.fallbackRateLimiter=new iB(this.fallbackBitcoinApi,{maxRPS:10}),this.bitcoinApi.interceptors.response.use(e=>e,e=>{var t,r,i;if(!this.fallbackBitcoinApi)return Promise.reject(e);let o=(null==e?void 0:e.code)==="ECONNABORTED",s=(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)>=500,a=(null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.status)===400&&"string"==typeof e.response.data&&e.response.data.includes("Too many unspent transaction outputs"),u=(null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.status)===429;return o||s||a||u?this.fallbackBitcoinApi.request({...e.config,baseURL:n}):Promise.reject(e)}))}}let iN="https://mempool.space",iD="api/v1";"".concat(iN,"/").concat(iD),"".concat(iN,"/testnet/").concat(iD),"".concat(iN,"/testnet4/").concat(iD),"".concat(iN,"/signet/").concat(iD);let iL={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128},iH={bech32:"tb",pubKeyHash:111,scriptHash:196,wif:239},iM={bech32:"bcrt",pubKeyHash:111,scriptHash:196,wif:128},iF={Mainnet:iL,Testnet:iH,Testnet4:iH,Signet:iH,Regtest:iM},ij=e=>iF[e],iV=e=>{switch(e){case"Mainnet":return iL;case"Testnet":case"Testnet4":case"Signet":case void 0:return iH;case"Regtest":return iM;default:throw Error("Invalid network type")}},iK=e=>"Regtest"!==e;async function iW(e,t){let r="".concat(tk(e),"/v1/ordinals/token/balances/").concat(t);return il.get(r,{timeout:ty}).then(e=>{if(!e.data)return[];{let t=e.data,r=[];return t.forEach(e=>{var t,n;let i={name:e.ticker,balance:e.overallBalance,total_sent:"0",total_received:"0",principal:null===(t=e.ticker)||void 0===t?void 0:t.toUpperCase(),assetName:"",ticker:null===(n=e.ticker)||void 0===n?void 0:n.toUpperCase(),decimals:0,image:"",supported:!0,tokenFiatRate:null,protocol:"brc-20"};r.push(i)}),r}}).catch(e=>[])}let iq=async(e,t,r,n,i)=>{let o={offset:r,limit:n};return iK(e)?((null==i?void 0:i.hideUnconfirmed)&&(o.hideUnconfirmed="true"),(null==i?void 0:i.hideSpecialWithoutSatributes)&&(o.hideSpecialWithoutSatributes="true"),(await il.get("".concat(tk(e),"/v2/address/").concat(t,"/ordinal-utxo"),{params:o,transformResponse:e=>A.parse(e)})).data):{total:0,offset:0,limit:0,results:[],xVersion:0}},iG=async(e,t,r)=>(await il.get("".concat(tk(e),"/v2/ordinal-utxo/").concat(t,":").concat(r),{transformResponse:e=>A.parse(e)})).data;Error("timeout while waiting for mutex to become available"),Error("mutex already locked");let i$=Error("request for lock canceled");var iz=function(e,t,r,n){function i(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};class iY{acquire(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<=0)throw Error("invalid weight ".concat(e,": must be positive"));return new Promise((t,r)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:t,reject:r}),this._dispatch()})}runExclusive(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return iz(this,void 0,void 0,function*(){let[r,n]=yield this.acquire(t);try{return yield e(r)}finally{n()}})}waitForUnlock(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<=0)throw Error("invalid weight ".concat(e,": must be positive"));return new Promise(t=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(t),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<=0)throw Error("invalid weight ".concat(e,": must be positive"));this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach(e=>e.forEach(e=>e.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var e;for(let t=this._value;t>0;t--){let r=null===(e=this._weightedQueues[t-1])||void 0===e?void 0:e.shift();if(!r)continue;let n=this._value,i=t;this._value-=t,t=this._value+1,r.resolve([n,this._newReleaser(i)])}this._drainUnlockWaiters()}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)this._weightedWaiters[e-1]&&(this._weightedWaiters[e-1].forEach(e=>e()),this._weightedWaiters[e-1]=[])}constructor(e,t=i$){this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}}var iX=function(e,t,r,n){function i(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};class iJ{acquire(){return iX(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}constructor(e){this._semaphore=new iY(1,e)}}let iQ=e=>{var t,r;return{name:e.runeName,decimals:e.divisibility,principal:e.id,balance:e.amount.toFixed(),total_sent:"",total_received:"",assetName:e.runeName,ticker:"",runeSymbol:e.symbol,runeInscriptionId:e.inscriptionId,protocol:"runes",supported:!0,priceChangePercentage24h:null===(t=e.priceChangePercentage24h)||void 0===t?void 0:t.toString(),currentPrice:null===(r=e.currentPrice)||void 0===r?void 0:r.toString()}},iZ=e=>[x].includes(e.principal),i0=e=>{let{fungibleToken:t,manageTokens:r,spamTokens:n,showSpamTokens:i}=e,o=new S(t.balance).gt(0),s=!i&&!!(null==n?void 0:n.includes(t.principal)),a=null==r?void 0:r[t.principal],u=iZ(t),l=t.supported&&(u||o)&&!s,c=a||!!(void 0===a&&l),f=c||(o||u)&&!s;return{isSpam:s,isEnabled:c,showToggle:f}},i1=(e,t)=>new S(e).shiftedBy(-t).toFixed();function i2(e){return e&&e.decimals?i1(e.balance,e.decimals):S(null==e?void 0:e.balance).toFixed()}let i3=()=>n,i4={network:void 0,byName:{},byId:new Map},i5={},i8=e=>{i4.network!==e&&(i4.network=e,i4.byName={},i4.byId=new Map)},i6=(e,t)=>{i8(t);try{if("bigint"==typeof e)return i4.byId.get(e);if(/^[0-9]+:[0-9]+$/.test(e)){let[t,r]=e.split(":").map(e=>BigInt(e)),n=(t<<16n)+r;return i4.byId.get(n)}return i4.byName[e.toUpperCase()]}catch(e){return}},i7=(e,t)=>{if(!e)return;i8(t);let[r,n]=e.id.split(":").map(e=>BigInt(e)),i=(r<<16n)+n;i4.byName[e.entry.spaced_rune]=e,i4.byId.set(i,e)},i9=e=>(i5[e]||(i5[e]=new iJ),i5[e]);class oe{async getRuneBalances(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(await this.clientBigNumber.get("/v2/address/".concat(e,"/rune-balance"),{params:{includeUnconfirmed:t}})).data}async getRuneInfo(e){let t=i9("runeInfo-".concat(e));t.isLocked()&&await t.waitForUnlock();let r=i6(e,this.network);if(r)return r;let n=await t.acquire();try{let t;if("bigint"==typeof e){let r=e>>16n,n=e-(r<<16n);t=await this.clientBigNumber.get("/v1/runes/".concat(r,":").concat(n),{validateStatus:e=>200===e||404===e})}else t=await this.clientBigNumber.get("/v1/runes/".concat(e.toUpperCase()),{validateStatus:e=>200===e||404===e});let r=200===t.status?t.data:void 0;return i7(r,this.network),r}finally{n()}}async getRuneFungibleTokens(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(await this.getRuneBalances(e,t)).map(e=>iQ(e)).sort((e,t)=>e.assetName<t.assetName?-1:e.assetName>t.assetName?1:0)}async getEncodedScriptHex(e){return(await this.clientBigNumber.post("/v1/runes/tools/encode-edicts",{payload:e})).data.payload}async getDecodedRuneScript(e){let t=await this.clientBigNumber.post("/v1/runes/tools/decode-script",{transactionHex:e},{validateStatus:e=>200===e||400===e});if(400!==t.status)return t.data}async getRunesSellOrder(e){return(await this.clientBigNumber.post("/v1/market/runes/create-sell-order",e)).data}async submitRunesSellOrder(e){return(await this.clientBigNumber.post("/v1/market/runes/submit-sell-order",e)).data}async cancelRunesSellOrder(e){return(await this.clientBigNumber.post("/v1/market/runes/cancel-sell-order",e)).data}async submitCancelRunesSellOrder(e){return(await this.clientBigNumber.post("/v1/market/runes/submit-cancel-order",e)).data}async getRunesUtxos(e){return(await this.clientBigNumber.get("/v1/market/address/".concat(e.address,"/rune/").concat(e.rune,"/utxos"))).data}async getRuneMarketData(e){return(await this.clientBigNumber.get("/v1/market/runes/".concat(e,"/market-data"))).data}async getRuneFiatRatesByRuneIds(e,t){return(await this.clientBigNumber.post("/v2/runes/fiat-rates",{currency:t,runeIds:e})).data}constructor(e,t){this.clientBigNumber=il.create({baseURL:"".concat(tk(e)),headers:{"Content-Type":"application/json","X-Client-Version":i3()||void 0},transformResponse:(e,t,r)=>200!==r?e:I.parse(e),transformRequest:e=>I.stringify(e),adapter:t}),this.network=e}}let ot={},or=(e,t)=>(ot[e]||(ot[e]=new oe(e,t)),ot[e]);async function on(e,t){let r="".concat(t.client.baseUrl,"/extended/v1/address/").concat(e,"/balances"),n=await il.get(r,{timeout:ty}),i=[];for(let e in n.data.fungible_tokens){let t=n.data.fungible_tokens[e],r=e.indexOf("::");t.assetName=e.substring(r+2),t.principal=e.substring(0,r),t.protocol="stacks",i.push(t)}return i}r(59966);let oi=100,oo=0;class os{async httpGet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(await this.StacksApi.get(e,{...r,params:t})).data}async httpPost(e,t){return(await this.StacksApi.post(e,t)).data}constructor(e){var t=this;this.getAddressBalance=async e=>{let t="/extended/v1/address/".concat(e,"/balances"),r=(await this.httpGet(t)).stx,n=new S(r.balance),i=new S(r.locked),o=new S((null==r?void 0:r.pending_balance_inbound)||0),s=new S((null==r?void 0:r.pending_balance_outbound)||0);return{availableBalance:n.minus(i).minus(s),lockedBalance:i,totalBalance:n.plus(o).minus(s)}},this.getAddressNonce=async e=>{let t="/v2/accounts/".concat(e,"?proof=0");return(await this.httpGet(t)).nonce},this.getAddressTransactions=async e=>{let{stxAddress:t,offset:r,limit:n}=e,i="/extended/v2/address/".concat(t,"/transactions"),o=await this.httpGet(i,{limit:n,offset:r});return{list:o.results,total:o.total}},this.getAddressMempoolTransactions=async e=>{let{stxAddress:t,offset:r,limit:n}=e,i="/extended/v1/tx/mempool?address=".concat(t),o=await this.httpGet(i,{limit:n,offset:r});return{list:o.results,total:o.total}},this.getTransactionEvents=async e=>{let{txid:t,stxAddress:r,limit:n,offset:i}=e,o="/extended/v2/addresses/".concat(r,"/transactions/").concat(t,"/events");return await this.httpGet(o,{limit:n,offset:i})},this.getAllTransactions=async e=>{let{stxAddress:t,offset:r=oo,limit:n=oi}=e,i=[],o=!0;for(;o;){let[e,s]=await Promise.all([this.getAddressTransactions({stxAddress:t,offset:r,limit:n}),this.getAddressMempoolTransactions({stxAddress:t,limit:n,offset:r})]),a=[...s.list,...e.list];i=[...i,...a],a.length<n?o=!1:r+=n}return i},this.getTransaction=async e=>await this.httpGet("/extended/v1/tx/".concat(e)),this.getRawTransaction=async e=>(await this.httpGet("/extended/v1/tx/".concat(e,"/raw"))).raw_tx,this.getNftHistory=async function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return t.httpGet("/extended/v1/tokens/nft/history",{asset_identifier:e,value:r,limit:n,offset:i})};let{network:r}=e,n=r.client.baseUrl;n||(r.chainId!==td.eN.chainId&&(n=tA),n=tI);let i={baseURL:n,timeout:ty};this._network=r,this.StacksApi=il.create(i),this.rateLimiter=new iB(this.StacksApi,{maxRPS:50})}}let{Axios:oa,AxiosError:ou,CanceledError:ol,isCancel:oc,CancelToken:of,VERSION:oh,all:op,Cancel:od,isAxiosError:oy,spread:og,toFormData:om,AxiosHeaders:ob,HttpStatusCode:ow,formToJSON:ov,getAdapter:o_,mergeConfig:oE}=il;class oS{_clearOldestCacheEntry(){let e,t;for(let[r,n]of this._cache.entries())(!t||n.lastAccessed<t)&&(t=n.lastAccessed,e=r);e&&this._cache.delete(e)}constructor(){this._cache=new Map,this.get=e=>{let t=this._cache.get(e);if(t)return t.lastAccessed=Date.now(),t.value},this.set=(e,t)=>{this._cache.set(e,{value:t,lastAccessed:Date.now()}),Object.values(this._cache).length>oS.MAX_CACHED_ITEMS&&this._clearOldestCacheEntry()},this.remove=e=>{this._cache.delete(e)}}}oS.MAX_CACHED_ITEMS=3;class oT{constructor(e){var t=this;this._addressMutexes={},this._writeMutex=new iJ,this._localCache=new oS,this._getAddressCacheStorageKey=e=>"".concat(oT.UTXO_CACHE_KEY_PREFIX,"-").concat(this._network,"-").concat(e),this._clearExpiredCaches=async e=>{let t=(await this._cacheStorageController.getAllKeys()).filter(e=>e.startsWith(oT.UTXO_CACHE_KEY_PREFIX)),r=Date.now();for(let n of t){let t=await this._getCacheDataByKey(n);(!t||r-t.syncTime>oT.CACHE_TTL||t.version!==oT.VERSION||void 0!==e&&t.xVersion!==e)&&await this._cacheStorageController.remove(n)}},this._clearOldestCacheEntry=async()=>{let e,t;for(let r of(await this._cacheStorageController.getAllKeys()).filter(e=>e.startsWith(oT.UTXO_CACHE_KEY_PREFIX))){let n=await this._getCacheDataByKey(r);if(!n){await this._cacheStorageController.remove(r);continue}if(!e){e=n.syncTime,t=r;continue}n.syncTime<e&&(e=n.syncTime,t=r)}t&&await this._cacheStorageController.remove(t)},this._getAddressMutex=e=>(this._addressMutexes[e]||(this._addressMutexes[e]=new iJ),this._addressMutexes[e]),this._getCacheDataByKey=async e=>{let t=await this._cacheStorageController.get(e);if(t)try{let e=A.parse(t);for(let t in e.utxos){var r;for(let[,n]of null!==(r=e.utxos[t].runes)&&void 0!==r?r:[])n.amount=S(n.amount)}return e}catch(e){console.error(e)}},this._getAddressCache=async e=>{let t=this._localCache.get(e);if(t)return t;let r=this._getAddressCacheStorageKey(e),n=await this._getCacheDataByKey(r);if(n){if(Date.now()-n.syncTime>oT.CACHE_TTL||n.version!==oT.VERSION){await this._cacheStorageController.remove(r);return}this._localCache.set(e,n)}return n},this._setAddressCache=async function(e,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=n?await t._writeMutex.acquire():void 0;try{if(!r){await t._cacheStorageController.remove(t._getAddressCacheStorageKey(e)),t._localCache.remove(e);return}await t._cacheStorageController.set(t._getAddressCacheStorageKey(e),A.stringify(r)),t._localCache.set(e,r)}catch(n){var s,a;n instanceof Error&&(null===(s=(a=t._cacheStorageController).isErrorQuotaExceeded)||void 0===s?void 0:s.call(a,n))&&(await t._clearOldestCacheEntry(),i<5&&await t._setAddressCache(e,r,!1,i+1))}finally{null==o||o()}},this._setCachedItem=async(e,t,r)=>{let n=await this._writeMutex.acquire();try{let n=await this._getAddressCache(e);if(!n)return;n.utxos[t]=r,await this._setAddressCache(e,n)}finally{n()}},this._mapUtxoApiBundleToBundle=e=>{var t;return{...e,sat_ranges:e.sat_ranges.map(e=>({...e,satributes:e.satributes.filter(tp)})),runes:(null!==(t=e.runes)&&void 0!==t?t:[]).map(e=>{let[t,r]=e;return[t,{...r,amount:S(r.amount)}]})}},this._getUtxo=async(e,t)=>{try{let{xVersion:r,...n}=await iG(this._network,e,t);return[r,this._mapUtxoApiBundleToBundle(n)]}catch(e){var r;if(oy(e)&&(null===(r=e.response)||void 0===r?void 0:r.status)===404)return[void 0,void 0];throw e}},this._resyncCache=async(e,t)=>{try{if(new Set(Object.keys(t.utxos)).size<2*oT.ORDINAL_UTXO_QUERY_LIMIT)return this._setAddressCache(e,void 0,!0),await this._initCache(e);let r=(await this._electrsApi.getUnspentUtxos(e)).filter(e=>e.status.confirmed).map(e=>"".concat(e.txid,":").concat(e.vout)),n=new Set(r),i=Object.keys(t.utxos),o=new Set(i),s=i.filter(e=>n.has(e)),a=r.filter(e=>!o.has(e));if(0===a.length&&s.length===i.length){await this._setAddressCache(e,{...t,syncTime:Date.now()},!0);return}let u={};for(let e of s)u[e]=t.utxos[e];await this._setAddressCache(e,{...t,utxos:u},!0);let l=0;for(let r of a){let[n,i]=r.split(":"),[o,s]=await this._getUtxo(n,Number(i));if(t.xVersion!==o){await this._clearExpiredCaches(o);return}s&&s.block_height&&(u[r]=s),++l%10==0&&await this._setAddressCache(e,{...t,utxos:u},!0)}await this._setAddressCache(e,{...t,utxos:u,syncTime:Date.now()},!0)}catch(e){return}},this._initCache=async function(e){let{startOffset:r=0,startXVersion:n=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r,o=i+1,s=oT.ORDINAL_UTXO_QUERY_LIMIT,a=-1===n?void 0:n;for(;i<o;){let{results:r,total:n,limit:l,xVersion:c}=await iq(t._network,e,i,s,{hideUnconfirmed:!0});if(a&&a!==c){await t._clearExpiredCaches(c);return}let f=await t._writeMutex.acquire();try{var u;let f=await t._getAddressCache(e);if(f&&f.syncedOffset!==i)return;let h=null!==(u=null==f?void 0:f.utxos)&&void 0!==u?u:{};r.map(t._mapUtxoApiBundleToBundle).forEach(e=>{e.block_height&&(h["".concat(e.txid,":").concat(e.vout)]=e)}),s=l,o=n,i+=s,a=c;let p={version:oT.VERSION,syncTime:Date.now(),syncedOffset:Math.min(i,o),syncComplete:i>=o,utxos:h,xVersion:a};await t._setAddressCache(e,p)}catch(e){return}finally{f()}}},this._syncCache=async(e,t)=>{let r=this._getAddressMutex(e);if(r.isLocked())return;let n=await r.acquire();try{if(await this._clearExpiredCaches(),!t||!t.syncComplete&&t.syncedOffset&&t.syncedOffset>Object.values(t.utxos).length)return await this._setAddressCache(e,void 0,!0),await this._initCache(e);if(!t.syncComplete)return await this._initCache(e,{startOffset:t.syncedOffset,startXVersion:t.xVersion});if(t.syncComplete&&Date.now()-t.syncTime>oT.CACHE_RESYNC_TTL)return await this._resyncCache(e,t)}finally{n()}},this.getUtxoByOutpoint=async function(e,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],[i,o]=e.split(":");if(n){let[,e]=await t._getUtxo(i,+o);return e}let s=await t._getAddressCache(r);if(s&&e in s.utxos)return t._syncCache(r,s).catch(console.error),s.utxos[e];let[a,u]=await t._getUtxo(i,+o);return s&&s.xVersion!==a?(await t._clearExpiredCaches(a),t._syncCache(r,void 0).catch(console.error)):((null==u?void 0:u.block_height)&&await t._setCachedItem(r,e,u),t._syncCache(r,s).catch(console.error)),u},this.getUtxo=async function(e,r,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o="".concat(e,":").concat(r);return t.getUtxoByOutpoint(o,n,i)},this.clearAllCaches=async()=>{for(let e of(await this._cacheStorageController.getAllKeys()).filter(e=>e.startsWith(oT.UTXO_CACHE_KEY_PREFIX)))await this._cacheStorageController.remove(e)},this._cacheStorageController=e.cacheStorageController,this._network=e.network,this._electrsApi=e.electrsApi}}function oI(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function oA(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function oO(e){if("function"!=typeof e)throw Error("function expected");return!0}function oP(e,t){if("string"!=typeof t)throw Error("".concat(e,": string expected"));return!0}function ok(e){if(!Number.isSafeInteger(e))throw Error("invalid integer: ".concat(e))}function ox(e){if(!Array.isArray(e))throw Error("array expected")}function oC(e,t){if(!oA(!0,t))throw Error("".concat(e,": array of strings expected"))}function oR(e,t){if(!oA(!1,t))throw Error("".concat(e,": array of numbers expected"))}function oB(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=e=>e,i=(e,t)=>r=>e(t(r));return{encode:t.map(e=>e.encode).reduceRight(i,n),decode:t.map(e=>e.decode).reduce(i,n)}}function oU(e){let t="string"==typeof e?e.split(""):e,r=t.length;oC("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(ox(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error('alphabet.encode: digit index outside alphabet "'.concat(n,'". Allowed: ').concat(e));return t[n]})),decode:t=>(ox(t),t.map(t=>{oP("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error('Unknown letter: "'.concat(t,'". Allowed: ').concat(e));return r}))}}function oN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return oP("join",e),{encode:t=>(oC("join.decode",t),t.join(e)),decode:t=>(oP("join.decode",t),t.split(e))}}function oD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";return ok(e),oP("padding",t),{encode(r){for(oC("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){oC("padding.decode",r);let n=r.length;if(n*e%8)throw Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function oL(e){return oO(e),{encode:e=>e,decode:t=>e(t)}}function oH(e,t,r){if(t<2)throw Error("convertRadix: invalid from=".concat(t,", base cannot be less than 2"));if(r<2)throw Error("convertRadix: invalid to=".concat(r,", base cannot be less than 2"));if(ox(e),!e.length)return[];let n=0,i=[],o=Array.from(e,e=>{if(ok(e),e<0||e>=t)throw Error("invalid integer: ".concat(e));return e}),s=o.length;for(;;){let e=0,a=!0;for(let i=n;i<s;i++){let s=o[i],u=t*e,l=u+s;if(!Number.isSafeInteger(l)||u/t!==e||l-s!==u)throw Error("convertRadix: carry overflow");let c=l/r;e=l%r;let f=Math.floor(c);if(o[i]=f,!Number.isSafeInteger(f)||f*r+e!==l)throw Error("convertRadix: carry overflow");a&&(f?a=!1:n=i)}if(i.push(e),a)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}oT.VERSION=4,oT.UTXO_CACHE_KEY_PREFIX="utxoCache",oT.ORDINAL_UTXO_QUERY_LIMIT=500,oT.CACHE_TTL=6048e5,oT.CACHE_RESYNC_TTL=864e5;let oM=(e,t)=>0===t?e:oM(t,e%t),oF=(e,t)=>e+(t-oM(e,t)),oj=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function oV(e,t,r,n){if(ox(e),t<=0||t>32)throw Error("convertRadix2: wrong from=".concat(t));if(r<=0||r>32)throw Error("convertRadix2: wrong to=".concat(r));if(oF(t,r)>32)throw Error("convertRadix2: carry overflow from=".concat(t," to=").concat(r," carryBits=").concat(oF(t,r)));let i=0,o=0,s=oj[t],a=oj[r]-1,u=[];for(let n of e){if(ok(n),n>=s)throw Error("convertRadix2: invalid data word=".concat(n," from=").concat(t));if(i=i<<t|n,o+t>32)throw Error("convertRadix2: carry overflow pos=".concat(o," from=").concat(t));for(o+=t;o>=r;o-=r)u.push((i>>o-r&a)>>>0);let e=oj[o];if(void 0===e)throw Error("invalid carry");i&=e-1}if(i=i<<r-o&a,!n&&o>=t)throw Error("Excess padding");if(!n&&i>0)throw Error("Non-zero padding: ".concat(i));return n&&o>0&&u.push(i>>>0),u}function oK(e){ok(e);let t=256;return{encode:r=>{if(!oI(r))throw Error("radix.encode input should be Uint8Array");return oH(Array.from(r),t,e)},decode:r=>(oR("radix.decode",r),Uint8Array.from(oH(r,e,t)))}}function oW(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ok(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(oF(8,e)>32||oF(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!oI(r))throw Error("radix2.encode input should be Uint8Array");return oV(Array.from(r),8,e,!t)},decode:r=>(oR("radix2.decode",r),Uint8Array.from(oV(r,e,8,t)))}}function oq(e,t){return ok(e),oO(t),{encode(r){if(!oI(r))throw Error("checksum.encode: input should be Uint8Array");let n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!oI(r))throw Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-e),i=r.slice(-e),o=t(n).slice(0,e);for(let t=0;t<e;t++)if(o[t]!==i[t])throw Error("Invalid checksum");return n}}}let oG=oU,o$=oB,oz=oq,oY=oW,oX=oB(oW(6),oU("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),oD(6),oN("")),oJ=(l="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",oB(oK(58),oU(l),oN(""))),oQ=e=>oB(oq(4,t=>e(e(t))),oJ),oZ=[996825010,642813549,513874426,1027748829,705979059],o0=oB(oW(4),oU("0123456789abcdef"),oN(""),oL(e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError("hex.decode: expected string, got ".concat(typeof e," with length ").concat(e.length));return e.toLowerCase()}));var o1=r(59969),o2=function(){return(o2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o3="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",o4=e=>{var t;if(!e||"string"!=typeof e)throw Error("Expected base58 string but got “".concat(e,"”"));if(e.match(/[IOl0]/gm))throw Error("Invalid base58 character “".concat(e.match(/[IOl0]/gm),"”"));let r=e.match(/^1+/gm),n=r?r[0].length:0,i=(e.length-n)*(Math.log(58)/Math.log(256))+1>>>0;return new Uint8Array([...new Uint8Array(n),...e.match(/.{1}/g).map(e=>o3.indexOf(e)).reduce((e,t)=>e=e.map(e=>{let r=58*e+t;return t=r>>8,r}),new Uint8Array(i)).reverse().filter((t=!1,e=>t=t||e))])};(()=>{let e=Array(256).fill(-1);for(let t=0;t<o3.length;++t)e[o3.charCodeAt(t)]=t})();var o5=o4;function o8(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o6(e,t){return e(t={exports:{}},t.exports),t.exports}var o7=o6(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bech32m=t.bech32=void 0;let r="qpzry9x8gf2tvdw0s3jn54khce6mua7l",n={};for(let e=0;e<r.length;e++)n[r.charAt(e)]=e;function i(e){let t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function o(e){let t=1;for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=i(t)^n>>5}t=i(t);for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);t=i(t)^31&n}return t}function s(e,t,r,n){let i=0,o=0,s=(1<<r)-1,a=[];for(let n=0;n<e.length;++n)for(i=i<<t|e[n],o+=t;o>=r;)a.push(i>>(o-=r)&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function a(e){return s(e,8,5,!0)}function u(e){let t=s(e,5,8,!1);if(Array.isArray(t))return t}function l(e){let t=s(e,5,8,!1);if(Array.isArray(t))return t;throw Error(t)}function c(e){let t;function s(e,r){if(r=r||90,e.length<8)return e+" too short";if(e.length>r)return"Exceeds length limit";let s=e.toLowerCase(),a=e.toUpperCase();if(e!==s&&e!==a)return"Mixed-case string "+e;let u=(e=s).lastIndexOf("1");if(-1===u)return"No separator character for "+e;if(0===u)return"Missing prefix for "+e;let l=e.slice(0,u),c=e.slice(u+1);if(c.length<6)return"Data too short";let f=o(l);if("string"==typeof f)return f;let h=[];for(let e=0;e<c.length;++e){let t=c.charAt(e),r=n[t];if(void 0===r)return"Unknown character "+t;f=i(f)^r,e+6>=c.length||h.push(r)}return f!==t?"Invalid checksum for "+e:{prefix:l,words:h}}return t="bech32"===e?1:734539939,{decodeUnsafe:function(e,t){let r=s(e,t);if("object"==typeof r)return r},decode:function(e,t){let r=s(e,t);if("object"==typeof r)return r;throw Error(r)},encode:function(e,n,s){if(s=s||90,e.length+7+n.length>s)throw TypeError("Exceeds length limit");let a=o(e=e.toLowerCase());if("string"==typeof a)throw Error(a);let u=e+"1";for(let e=0;e<n.length;++e){let t=n[e];if(t>>5!=0)throw Error("Non 5-bit word");a=i(a)^t,u+=r.charAt(t)}for(let e=0;e<6;++e)a=i(a);a^=t;for(let e=0;e<6;++e)u+=r.charAt(a>>5*(5-e)&31);return u},toWords:a,fromWordsUnsafe:u,fromWords:l}}t.bech32=c("bech32"),t.bech32m=c("bech32m")});o8(o7);var o9=o7.bech32m,se=o7.bech32,st=o6(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.createHash=void 0;let r=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],n={sha256:1};t.createHash=function(e){if(e&&!n[e]&&!n[e.toLowerCase()])throw Error("Digest method not supported");return new i};class i{update(e){if("string"==typeof e)return this._utf8(e);if(null==e)throw TypeError("Invalid type: "+typeof e);let t=e.byteOffset,r=e.byteLength,n=r/64|0,i=0;if(n&&!(3&t)&&!(this._size%64)){let r=new Int32Array(e.buffer,t,16*n);for(;n--;)this._int32(r,i>>2),i+=64;this._size+=i}if(1!==e.BYTES_PER_ELEMENT&&e.buffer){let n=new Uint8Array(e.buffer,t+i,r-i);return this._uint8(n)}return i===r?this:this._uint8(e,i)}_uint8(e,t){let{_byte:r,_word:n}=this,i=e.length;for(t|=0;t<i;){let o=this._size%64,s=o;for(;t<i&&s<64;)r[s++]=e[t++];s>=64&&this._int32(n),this._size+=s-o}return this}_utf8(e){let{_byte:t,_word:r}=this,n=e.length,i=this._sp;for(let o=0;o<n;){let s=this._size%64,a=s;for(;o<n&&a<64;){let r=0|e.charCodeAt(o++);r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<55296||r>57343?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):i?(r=((1023&i)<<10)+(1023&r)+65536,t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r,i=0):i=r}a>=64&&(this._int32(r),r[0]=r[16]),this._size+=a-s}return this._sp=i,this}_int32(e,t){let{A:n,B:i,C:s,D:a,E:u,F:g,G:m,H:b}=this,w=0;for(t|=0;w<16;)o[w++]=l(e[t++]);for(w=16;w<64;w++)o[w]=y(o[w-2])+o[w-7]+d(o[w-15])+o[w-16]|0;for(w=0;w<64;w++){let e=b+p(u)+c(u,g,m)+r[w]+o[w]|0,t=h(n)+f(n,i,s)|0;b=m,m=g,g=u,u=a+e|0,a=s,s=i,i=n,n=e+t|0}this.A=n+this.A|0,this.B=i+this.B|0,this.C=s+this.C|0,this.D=a+this.D|0,this.E=u+this.E|0,this.F=g+this.F|0,this.G=m+this.G|0,this.H=b+this.H|0}digest(e){let{_byte:t,_word:r}=this,n=this._size%64|0;for(t[n++]=128;3&n;)t[n++]=0;if((n>>=2)>14){for(;n<16;)r[n++]=0;n=0,this._int32(r)}for(;n<16;)r[n++]=0;let i=8*this._size,o=(4294967295&i)>>>0,s=(i-o)/4294967296;return s&&(r[14]=l(s)),o&&(r[15]=l(o)),this._int32(r),"hex"===e?this._hex():this._bin()}_hex(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return u(e)+u(t)+u(r)+u(n)+u(i)+u(o)+u(s)+u(a)}_bin(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a,_byte:u,_word:c}=this;return c[0]=l(e),c[1]=l(t),c[2]=l(r),c[3]=l(n),c[4]=l(i),c[5]=l(o),c[6]=l(s),c[7]=l(a),u.slice(0,32)}constructor(){this.A=1779033703,this.B=-1150833019,this.C=1013904242,this.D=-1521486534,this.E=1359893119,this.F=-1694144372,this.G=528734635,this.H=1541459225,this._size=0,this._sp=0,(!s||a>=8e3)&&(s=new ArrayBuffer(8e3),a=0),this._byte=new Uint8Array(s,a,80),this._word=new Int32Array(s,a,20),a+=80}}t.Hash=i;let o=new Int32Array(64),s,a=0,u=e=>(e+4294967296).toString(16).substr(-8),l=254===new Uint8Array(new Uint16Array([65279]).buffer)[0]?e=>e:e=>e<<24&4278190080|e<<8&16711680|e>>8&65280|e>>24&255,c=(e,t,r)=>r^e&(t^r),f=(e,t,r)=>e&t|r&(e|t),h=e=>(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),p=e=>(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7),d=e=>(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3,y=e=>(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10});o8(st),st.Hash;var sr,sn,si,so,ss,sa,su,sl=st.createHash,sc=function(e){return sl().update(e).digest()};!function(e){e.mainnet="mainnet",e.testnet="testnet",e.regtest="regtest"}(sa||(sa={})),function(e){e.p2pkh="p2pkh",e.p2sh="p2sh",e.p2wpkh="p2wpkh",e.p2wsh="p2wsh",e.p2tr="p2tr"}(su||(su={}));var sf={0:{type:su.p2pkh,network:sa.mainnet},111:{type:su.p2pkh,network:sa.testnet},5:{type:su.p2sh,network:sa.mainnet},196:{type:su.p2sh,network:sa.testnet}},sh=function(e){var t,r=e.substr(0,2).toLowerCase();if("bc"===r||"tb"===r)return function(e){try{t=e.startsWith("bc1p")||e.startsWith("tb1p")||e.startsWith("bcrt1p")?o9.decode(e):se.decode(e)}catch(e){throw Error("Invalid address")}var t,r={bc:sa.mainnet,tb:sa.testnet,bcrt:sa.regtest}[t.prefix];if(void 0===r)throw Error("Invalid address");var n=t.words[0];if(n<0||n>16)throw Error("Invalid address");return{bech32:!0,network:r,address:e,type:20===se.fromWords(t.words.slice(1)).length?su.p2wpkh:1===n?su.p2tr:su.p2wsh}}(e);try{t=o5(e)}catch(e){throw Error("Invalid address")}var n=t.length;if(25!==n)throw Error("Invalid address");var i=t[0],o=t.slice(n-4,n),s=sc(sc(t.slice(0,n-4))).slice(0,4);if(o.some(function(e,t){return e!==s[t]})||!Object.keys(sf).map(Number).includes(i))throw Error("Invalid address");return o2(o2({},sf[i]),{address:e,bech32:!1})},sp=r(74111),sd=r.n(sp),sy=r(554),sg=r(57795),sm=r(27760),sb=r(53921),sw=r(94327);r(87790);var sv=r(48764).Buffer;function s_(e){let{sha256:t}=sy.crypto,r="BIP0322-signed-message",n=t(sv.from(r));return t(sv.concat([n,n,sv.from(e)])).toString("hex")}function sE(e){return sv.concat([(0,sg.encode)(e.byteLength),e])}let sS=(e,t)=>{switch(e){case su.p2tr:return sm.xW.getPublicKey(t);case su.p2sh:case su.p2wpkh:return sm.$3(t,!0);default:throw Error("Unsupported Address Type")}},sT=(e,t,r)=>{switch(e){case su.p2tr:return o1.Sq(t,void 0,r);case su.p2wpkh:return o1.Vi(t,r);case su.p2sh:{let e=o1.Vi(t,r);return o1.my(e,r)}default:throw Error("Unsupported Address Type")}},sI=async e=>{var t,r;let{addressType:n,message:i,network:o,privateKey:s}=e,a=sS(n,s),u=sT(n,a,ij(o)),l=o0.decode("0000000000000000000000000000000000000000000000000000000000000000"),c=0,f=4294967295,h=0,p=sb.Xf.encode(["OP_0",o0.decode(s_(i))]),d=new sw.YW({allowUnknownOutputs:!0,version:c});d.addOutput({amount:BigInt(0),script:u.script}),d.addInput({txid:l,index:f,sequence:h,finalScriptSig:p});let y=new sw.YW({allowUnknownOutputs:!0,version:c});y.addInput({txid:d.id,index:0,sequence:h,tapInternalKey:n===su.p2tr?a:void 0,witnessUtxo:{script:u.script,amount:BigInt(0)},redeemScript:n===su.p2sh?u.redeemScript:sv.alloc(0)}),y.addOutput({script:sb.Xf.encode(["RETURN"]),amount:BigInt(0)}),y.sign(s),y.finalize();let g=y.getInput(0);if(null===(t=g.finalScriptWitness)||void 0===t?void 0:t.length){let e=(0,sg.encode)(null===(r=g.finalScriptWitness)||void 0===r?void 0:r.length);return{signature:sv.concat([e,...g.finalScriptWitness.map(e=>sE(e))]).toString("base64"),protocol:so.BIP322}}throw Error("Unable to Sign Message with BIP322")};function sA(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function sO(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function sP(e,...t){if(!sO(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function sk(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");sA(e.outputLen),sA(e.blockLen)}function sx(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function sC(e,t){sP(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}function sR(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function sB(e,t){return e<<32-t|e>>>t}function sU(e,t){return e<<t|e>>>32-t>>>0}r(74725),r(45772),r(35015);let sN="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,sD=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function sL(e){if(sP(e),sN)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=sD[e[r]];return t}let sH={_0:48,_9:57,A:65,F:70,a:97,f:102};function sM(e){return e>=sH._0&&e<=sH._9?e-sH._0:e>=sH.A&&e<=sH.F?e-(sH.A-10):e>=sH.a&&e<=sH.f?e-(sH.a-10):void 0}function sF(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(sN)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=sM(e.charCodeAt(i)),o=sM(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}function sj(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function sV(e){return"string"==typeof e&&(e=sj(e)),sP(e),e}function sK(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];sP(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}class sW{clone(){return this._cloneInto()}}function sq(e){let t=t=>e().update(sV(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}class sG extends sW{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,sk(e);let r=sV(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return sx(this),this.iHash.update(e),this}digestInto(e){sx(this),sP(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let s$=(e,t,r)=>new sG(e,t).update(r).digest();function sz(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,l=n?0:4;e.setUint32(t+u,s,n),e.setUint32(t+l,a,n)}function sY(e,t,r){return e&t^~e&r}function sX(e,t,r){return e&t^e&r^t&r}s$.create=(e,t)=>new sG(e,t);class sJ extends sW{constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=sR(this.buffer)}update(e){sx(this);let{view:t,buffer:r,blockLen:n}=this,i=(e=sV(e)).length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){let t=sR(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){sx(this),sC(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;sz(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=sR(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=a/4,l=this.get();if(u>l.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)s.setUint32(4*e,l[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}let sQ=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),sZ=new Uint8Array(Array(16).fill(0).map((e,t)=>t)),s0=sZ.map(e=>(9*e+5)%16),s1=[sZ],s2=[s0];for(let e=0;e<4;e++)for(let t of[s1,s2])t.push(t[e].map(e=>sQ[e]));let s3=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),s4=s1.map((e,t)=>e.map(e=>s3[t][e])),s5=s2.map((e,t)=>e.map(e=>s3[t][e])),s8=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),s6=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function s7(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}let s9=new Uint32Array(16);class ae extends sJ{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)s9[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,i=0|this.h1,o=i,s=0|this.h2,a=s,u=0|this.h3,l=u,c=0|this.h4,f=c;for(let e=0;e<5;e++){let t=4-e,h=s8[e],p=s6[e],d=s1[e],y=s2[e],g=s4[e],m=s5[e];for(let t=0;t<16;t++){let n=sU(r+s7(e,i,s,u)+s9[d[t]]+h,g[t])+c|0;r=c,c=u,u=0|sU(s,10),s=i,i=n}for(let e=0;e<16;e++){let r=sU(n+s7(t,o,a,l)+s9[y[e]]+p,m[e])+f|0;n=f,f=l,l=0|sU(a,10),a=o,o=r}}this.set(this.h1+s+l|0,this.h2+u+f|0,this.h3+c+n|0,this.h4+r+o|0,this.h0+i+a|0)}roundClean(){s9.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}let at=sq(()=>new ae),ar=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),an=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ai=new Uint32Array(64);class ao extends sJ{constructor(e=32){super(64,e,8,!1),this.A=0|an[0],this.B=0|an[1],this.C=0|an[2],this.D=0|an[3],this.E=0|an[4],this.F=0|an[5],this.G=0|an[6],this.H=0|an[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)ai[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=ai[e-15],r=ai[e-2],n=sB(t,7)^sB(t,18)^t>>>3,i=sB(r,17)^sB(r,19)^r>>>10;ai[e]=i+ai[e-7]+n+ai[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:u,H:l}=this;for(let e=0;e<64;e++){let t=l+(sB(s,6)^sB(s,11)^sB(s,25))+sY(s,a,u)+ar[e]+ai[e]|0,c=(sB(r,2)^sB(r,13)^sB(r,22))+sX(r,n,i)|0;l=u,u=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+c|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,n,i,o,s,a,u,l)}roundClean(){ai.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let as=sq(()=>new ao),aa=BigInt(4294967296-1),au=BigInt(32);function al(e,t=!1){return t?{h:Number(e&aa),l:Number(e>>au&aa)}:{h:0|Number(e>>au&aa),l:0|Number(e&aa)}}var ac={split:function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=al(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]},shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,add:function(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/4294967296|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/4294967296|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/4294967296|0)|0,add5H:(e,t,r,n,i,o)=>t+r+n+i+o+(e/4294967296|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)};let[af,ah]=ac.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ap=new Uint32Array(80),ad=new Uint32Array(80);class ay extends sJ{constructor(e=64){super(128,e,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:u,El:l,Fh:c,Fl:f,Gh:h,Gl:p,Hh:d,Hl:y}=this;return[e,t,r,n,i,o,s,a,u,l,c,f,h,p,d,y]}set(e,t,r,n,i,o,s,a,u,l,c,f,h,p,d,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|l,this.Fh=0|c,this.Fl=0|f,this.Gh=0|h,this.Gl=0|p,this.Hh=0|d,this.Hl=0|y}process(e,t){for(let r=0;r<16;r++,t+=4)ap[r]=e.getUint32(t),ad[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|ap[e-15],r=0|ad[e-15],n=ac.rotrSH(t,r,1)^ac.rotrSH(t,r,8)^ac.shrSH(t,r,7),i=ac.rotrSL(t,r,1)^ac.rotrSL(t,r,8)^ac.shrSL(t,r,7),o=0|ap[e-2],s=0|ad[e-2],a=ac.rotrSH(o,s,19)^ac.rotrBH(o,s,61)^ac.shrSH(o,s,6),u=ac.rotrSL(o,s,19)^ac.rotrBL(o,s,61)^ac.shrSL(o,s,6),l=ac.add4L(i,u,ad[e-7],ad[e-16]),c=ac.add4H(l,n,a,ap[e-7],ap[e-16]);ap[e]=0|c,ad[e]=0|l}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:u,Dl:l,Eh:c,El:f,Fh:h,Fl:p,Gh:d,Gl:y,Hh:g,Hl:m}=this;for(let e=0;e<80;e++){let t=ac.rotrSH(c,f,14)^ac.rotrSH(c,f,18)^ac.rotrBH(c,f,41),b=ac.rotrSL(c,f,14)^ac.rotrSL(c,f,18)^ac.rotrBL(c,f,41),w=c&h^~c&d,v=f&p^~f&y,_=ac.add5L(m,b,v,ah[e],ad[e]),E=ac.add5H(_,g,t,w,af[e],ap[e]),S=0|_,T=ac.rotrSH(r,n,28)^ac.rotrBH(r,n,34)^ac.rotrBH(r,n,39),I=ac.rotrSL(r,n,28)^ac.rotrBL(r,n,34)^ac.rotrBL(r,n,39),A=r&i^r&s^i&s,O=n&o^n&a^o&a;g=0|d,m=0|y,d=0|h,y=0|p,h=0|c,p=0|f,({h:c,l:f}=ac.add(0|u,0|l,0|E,0|S)),u=0|s,l=0|a,s=0|i,a=0|o,i=0|r,o=0|n;let P=ac.add3L(S,I,O);r=ac.add3H(P,E,T,A),n=0|P}({h:r,l:n}=ac.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=ac.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=ac.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:u,l:l}=ac.add(0|this.Dh,0|this.Dl,0|u,0|l)),({h:c,l:f}=ac.add(0|this.Eh,0|this.El,0|c,0|f)),({h:h,l:p}=ac.add(0|this.Fh,0|this.Fl,0|h,0|p)),({h:d,l:y}=ac.add(0|this.Gh,0|this.Gl,0|d,0|y)),({h:g,l:m}=ac.add(0|this.Hh,0|this.Hl,0|g,0|m)),this.set(r,n,i,o,s,a,u,l,c,f,h,p,d,y,g,m)}roundClean(){ap.fill(0),ad.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let ag=sq(()=>new ay);var am=r(89326),ab=r(55525);function aw(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function av(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function a_(e){if("function"!=typeof e)throw Error("function expected");return!0}function aE(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function aS(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function aT(e){if(!Array.isArray(e))throw Error("array expected")}function aI(e,t){if(!av(!0,t))throw Error(`${e}: array of strings expected`)}function aA(e,t){if(!av(!1,t))throw Error(`${e}: array of numbers expected`)}function aO(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function aP(e){let t="string"==typeof e?e.split(""):e,r=t.length;aI("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(aT(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(aT(t),t.map(t=>{aE("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function ak(e=""){return aE("join",e),{encode:t=>(aI("join.decode",t),t.join(e)),decode:t=>(aE("join.decode",t),t.split(e))}}function ax(e,t,r){if(t<2)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(aT(e),!e.length)return[];let n=0,i=[],o=Array.from(e,e=>{if(aS(e),e<0||e>=t)throw Error(`invalid integer: ${e}`);return e}),s=o.length;for(;;){let e=0,a=!0;for(let i=n;i<s;i++){let s=o[i],u=t*e,l=u+s;if(!Number.isSafeInteger(l)||u/t!==e||l-s!==u)throw Error("convertRadix: carry overflow");let c=l/r;e=l%r;let f=Math.floor(c);if(o[i]=f,!Number.isSafeInteger(f)||f*r+e!==l)throw Error("convertRadix: carry overflow");a&&(f?a=!1:n=i)}if(i.push(e),a)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}let aC=(e,t)=>0===t?e:aC(t,e%t),aR=(e,t)=>e+(t-aC(e,t)),aB=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function aU(e){aS(e);let t=256;return{encode:r=>{if(!aw(r))throw Error("radix.encode input should be Uint8Array");return ax(Array.from(r),t,e)},decode:r=>(aA("radix.decode",r),Uint8Array.from(ax(r,e,t)))}}function aN(e,t){return aS(e),a_(t),{encode(r){if(!aw(r))throw Error("checksum.encode: input should be Uint8Array");let n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!aw(r))throw Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-e),i=r.slice(-e),o=t(n).slice(0,e);for(let t=0;t<e;t++)if(o[t]!==i[t])throw Error("Invalid checksum");return n}}}"function"==typeof Uint8Array.from([]).toBase64&&Uint8Array.fromBase64;let aD=(c="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",aO(aU(58),aP(c),ak(""))),aL=e=>aO(aN(4,t=>e(e(t))),aD),aH=[996825010,642813549,513874426,1027748829,705979059];"function"==typeof Uint8Array.from([]).toHex&&Uint8Array.fromHex;let aM=am.kA.ProjectivePoint,aF=aL(as);function aj(e){return sP(e),BigInt("0x"+(0===e.length?"0":sL(e)))}function aV(e){if("bigint"!=typeof e)throw Error("bigint expected");return sF(e.toString(16).padStart(64,"0"))}let aK=sj("Bitcoin seed"),aW={private:76066276,public:76067358},aq=2147483648,aG=e=>at(as(e)),a$=e=>sR(e).getUint32(0,!1),az=e=>{if(!Number.isSafeInteger(e)||e<0||e>4294967296-1)throw Error("invalid number, should be from 0 to 2**32-1, got "+e);let t=new Uint8Array(4);return sR(t).setUint32(0,e,!1),t};class aY{get fingerprint(){if(!this.pubHash)throw Error("No publicKey set!");return a$(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){let e=this.privateKey;if(!e)throw Error("No private key");return aF.encode(this.serialize(this.versions.private,sK(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw Error("No public key");return aF.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=aW){if(sP(e),8*e.length<128||8*e.length>512)throw Error("HDKey: seed length must be between 128 and 512 bits; 256 bits is advised, got "+e.length);let r=s$(ag,aK,e);return new aY({versions:t,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(e,t=aW){let r=aF.decode(e),n=sR(r),i=n.getUint32(0,!1),o={versions:t,depth:r[4],parentFingerprint:n.getUint32(5,!1),index:n.getUint32(9,!1),chainCode:r.slice(13,45)},s=r.slice(45),a=0===s[0];if(i!==t[a?"private":"public"])throw Error("Version mismatch");return new aY(a?{...o,privateKey:s.slice(1)}:{...o,publicKey:s})}static fromJSON(e){return aY.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||aW,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!am.kA.utils.isValidPrivateKey(e.privateKey))throw Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:aj(e.privateKey),this.privKeyBytes=aV(this.privKey),this.pubKey=am.kA.getPublicKey(e.privateKey,!0)}else if(e.publicKey)this.pubKey=aM.fromHex(e.publicKey).toRawBytes(!0);else throw Error("HDKey: no public or private key provided");this.pubHash=aG(this.pubKey)}derive(e){if(!/^[mM]'?/.test(e))throw Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;let t=e.replace(/^[mM]'?\//,"").split("/"),r=this;for(let e of t){let t=/^(\d+)('?)$/.exec(e),n=t&&t[1];if(!t||3!==t.length||"string"!=typeof n)throw Error("invalid child index: "+e);let i=+n;if(!Number.isSafeInteger(i)||i>=aq)throw Error("Invalid index");"'"===t[2]&&(i+=aq),r=r.deriveChild(i)}return r}deriveChild(e){if(!this.pubKey||!this.chainCode)throw Error("No publicKey or chainCode set");let t=az(e);if(e>=aq){let e=this.privateKey;if(!e)throw Error("Could not derive hardened child key");t=sK(new Uint8Array([0]),e,t)}else t=sK(this.pubKey,t);let r=s$(ag,this.chainCode,t),n=aj(r.slice(0,32)),i=r.slice(32);if(!am.kA.utils.isValidPrivateKey(n))throw Error("Tweak bigger than curve order");let o={versions:this.versions,chainCode:i,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){let e=(0,ab.wQ)(this.privKey+n,am.kA.CURVE.n);if(!am.kA.utils.isValidPrivateKey(e))throw Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=e}else{let e=aM.fromHex(this.pubKey).add(aM.fromPrivateKey(n));if(e.equals(aM.ZERO))throw Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=e.toRawBytes(!0)}return new aY(o)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw Error("No privateKey set!");return sP(e,32),am.kA.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){let r;if(sP(e,32),sP(t,64),!this.publicKey)throw Error("No publicKey set!");try{r=am.kA.Signature.fromCompact(t)}catch(e){return!1}return am.kA.verify(r,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw Error("No chainCode set");return sP(t,33),sK(az(e),new Uint8Array([this.depth]),az(this.parentFingerprint),az(this.index),this.chainCode,t)}}r(48764).Buffer;var aX=r(48764).Buffer;let aJ=e=>aX.concat([(0,sg.encode)(e.byteLength),e]),aQ=aX.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),aZ=4294967295,a0=0,a1=async(e,t,r,n,i,o)=>{let s=aX.concat([aX.from("0020","hex"),aX.from(s_(r),"hex")]),a=new sy.YW;a.version=0,a.addInput(aQ,aZ,a0,s),a.addOutput(n,0);let u=new sy._B;for(let r of(u.setVersion(0),u.addInput({hash:a.getHash(),index:0,sequence:0,witnessUtxo:{script:n,value:0},...i}),u.addOutput({script:aX.from("6a","hex"),value:0}),await e.signPsbt(u.toBase64(),t,null)))o?u.updateInput(r[0],{partialSig:[r[1]]}):u.updateInput(r[0],{tapKeySig:r[1].signature});u.finalizeAllInputs();let l=u.extractTransaction(),c=(0,sg.encode)(l.ins[0].witness.length);return{signature:aX.concat([c,...l.ins[0].witness.map(e=>aJ(e))]).toString("base64"),protocol:so.BIP322}};class a2{get IsFinalized(){return this.isFinalized}set IsFinalized(e){this.isFinalized=e,Object.freeze(this.registrationData)}get RegistrationData(){return this.registrationData}constructor(e,t){this.isFinalized=!1,this.registrationData={},this.network=t,this.challenge=e}}var a3=r(48764).Buffer;class a4 extends a2{constructor(e,t,r,n,i){super(e,t),this.hydrate=async e=>{let t,r,n;let i="".concat(e,":").concat(this.account,":").concat(this.index);if(this.registrationData[i])return;if(this.IsFinalized)throw Error("Address registrar is already finalized");let o=e===su.p2wpkh?tm:tb,s="Mainnet"===this.network?0:1,a="".concat(o).concat(s,"'/").concat(this.account,"'/0/").concat(this.index),u=e===su.p2wpkh?"wpkh":"tr",l="".concat(a,"/42"),c="m/42",f=new(sd())(this.transport),h=await f.getExtendedPubkey(a),p=await f.getMasterFingerprint(),d=await f.getExtendedPubkey(l),y=new sp.DefaultWalletPolicy("".concat(u,"(@0/**)"),"[".concat(p,"/").concat(l,"]").concat(d)),g=o0.decode(d),m=iV(this.network);if(e===su.p2tr){let e=g;33===e.length&&(e=e.slice(1)),t=o1.Sq(e,void 0,m).script,r={tapBip32Derivation:[{path:l,pubkey:a3.from(g),masterFingerprint:a3.from(p,"hex"),leafHashes:[]}],tapInternalKey:a3.from(e)},n=!1}else t=o1.Vi(g,m).script,r={bip32Derivation:[{path:l,pubkey:a3.from(g),masterFingerprint:a3.from(p,"hex")}]},n=!0;let{signature:b}=await a1(f,y,this.challenge+c,a3.from(t),r,n);this.registrationData[i]={pathSuffix:c,xPubKey:h,signature:b,type:e},2===Object.keys(this.registrationData).length&&(this.IsFinalized=!0)},this.transport=r,this.account=n,this.index=i}}class a5 extends a2{constructor(e,t,r){super(e,t),this.batchHydrate=async(e,t)=>{let r=e[0].walletId,n=e.some(e=>e.walletId!==r);if(!r||n)throw Error("All accounts must belong to the same wallet");let{rootNode:i,derivationType:o}=null!=t?t:await this.vault.SeedVault.getWalletRootNode(r);for(let t of e)await this.hydrateInternal(t,su.p2sh,{rootNode:i,derivationType:o}),await this.hydrateInternal(t,su.p2wpkh,{rootNode:i,derivationType:o}),await this.hydrateInternal(t,su.p2tr,{rootNode:i,derivationType:o});this.IsFinalized=!0},this.hydrate=async e=>{await this.hydrateInternal(e,su.p2sh),await this.hydrateInternal(e,su.p2wpkh),await this.hydrateInternal(e,su.p2tr),this.IsFinalized=!0},this.hydrateInternal=async(e,t,r)=>{if("software"!==e.accountType)throw Error("Invalid account type for software registrar");let n="".concat(e.walletId,":").concat(e.id,":").concat(t);if(this.registrationData[n])return;if(this.IsFinalized)throw Error("Address registrar is already finalized");let i=t===su.p2sh?tg:t===su.p2wpkh?tm:tb,{rootNode:o,derivationType:s}=null!=r?r:await this.vault.SeedVault.getWalletRootNode(e.walletId);if(!o||!s)throw Error("Root node or derivation type not found");let a="Mainnet"===this.network?0:1,u="account"===s?e.id:0,l="index"===s?e.id:0,c="".concat(i).concat(a,"'/").concat(u,"'/0/").concat(l),f=o.derive(c),h=f.publicExtendedKey,p="m/42",d=f.derive(p),{signature:y}=await sI({addressType:t,message:this.challenge+p,network:this.network,privateKey:d.privateKey});this.registrationData[n]={pathSuffix:p,xPubKey:h,signature:y,type:t}},this.vault=r}}var a8={LedgerAddressRegistrar:a4,SoftwareAddressRegistrar:a5};let a6={vaultVersion:"vault::version",passwordHash:"vault::passwordHash",passwordSalt:"vault::passwordSalt",encryptionVault:"vault::encryptionVault",encryptionVaultDataKeys:"vault::encryptionVault::dataKeys",seedVault:"vault::seedVault",keyValueVaultPrefix:"vault::keyValueVault"},a7=e=>"authToken::".concat(e);class a9{constructor(e,t){this.getFullKey=e=>"".concat(a6.keyValueVaultPrefix,"::").concat(e),this.get=async e=>{let t=this.getFullKey(e),r=await this.commonStorageAdapter.get(t);if(r)return await this.encryptionVault.decrypt(r,"data")},this.set=async(e,t)=>{let r=this.getFullKey(e),n=await this.encryptionVault.encrypt(t,"data");await this.commonStorageAdapter.set(r,n)},this.remove=async e=>{let t=this.getFullKey(e);await this.commonStorageAdapter.remove(t)},this.clear=async()=>{if(!this.commonStorageAdapter.getAllKeys){console.warn("The storage adapter does not implement getAllKeys, so the keyValueVault clear method will not work");return}for(let e of(await this.commonStorageAdapter.getAllKeys()).filter(e=>e.startsWith(a6.keyValueVaultPrefix)))await this.commonStorageAdapter.remove(e)},this.getAllKeys=async()=>{if(!this.commonStorageAdapter.getAllKeys){console.warn("The storage adapter does not implement getAllKeys, so the keyValueVault getAllKeys method will not work");return}return(await this.commonStorageAdapter.getAllKeys()).filter(e=>e.startsWith(a6.keyValueVaultPrefix)).map(e=>e.replace("".concat(a6.keyValueVaultPrefix,"::"),""))},this.commonStorageAdapter=e.commonStorageAdapter,this.encryptionVault=t}}class ue{constructor(e){var t=this;this.saveMutex=new iJ,this.generateEncryptionVaultData=async()=>{let e=await this.cryptoUtilsAdapter.generateRandomBytes(32),t=await this.cryptoUtilsAdapter.generateRandomBytes(32),r=await this.cryptoUtilsAdapter.generateRandomBytes(32);return{seedEncryptionKey:await this.cryptoUtilsAdapter.hash(e,r),dataEncryptionKey:await this.cryptoUtilsAdapter.hash(t,r)}},this.initialise=async e=>{let t=await this.generateEncryptionVaultData();await this.storeEncryptedKeys(t,e),await this.getEncryptionKeysForData("data")},this.initialiseWithHashAndSalt=async(e,t)=>{let r=await this.generateEncryptionVaultData();await this.storeEncryptedKeysWithHashAndSalt(r,e,t),await this.getEncryptionKeysForData("data")},this.changePassword=async e=>{let t=await this.getEncryptionKeys();await this.storeEncryptedKeys(t,e,!0)},this.unlockWithPasswordHash=async e=>{let t=await this.encryptedDataStorageAdapter.get(a6.encryptionVault);if(!t)throw Error("Encryption vault not initialised.");try{await this.cryptoUtilsAdapter.decrypt(t,e),await this.sessionStorageAdapter.set(a6.passwordHash,e),await this.getEncryptionKeysForData("data")}catch(e){throw Error("Wrong password hash")}},this.unlockVault=async(e,t)=>{let r=await this.encryptedDataStorageAdapter.get(a6.passwordSalt),n=await this.encryptedDataStorageAdapter.get(a6.encryptionVault);if(r&&n)try{let t=await this.cryptoUtilsAdapter.hash(e,r);await this.unlockWithPasswordHash(t)}catch(e){throw t&&await this.lockVault(),Error("Wrong password")}else throw t&&await this.lockVault(),Error("Empty vault")},this.softLockVault=async()=>{await this.sessionStorageAdapter.remove(a6.passwordHash)},this.lockVault=async()=>{await this.sessionStorageAdapter.remove(a6.passwordHash),await this.sessionStorageAdapter.remove(a6.encryptionVaultDataKeys),this.dataEncryptionKey=void 0},this.isVaultUnlocked=async()=>!!await this.sessionStorageAdapter.get(a6.passwordHash),this.isInitialised=async()=>{let e=await this.encryptedDataStorageAdapter.get(a6.encryptionVault),t=await this.encryptedDataStorageAdapter.get(a6.passwordSalt);return!!e&&!!t},this.encrypt=async(e,t)=>{let r=await this.getEncryptionKeysForData(t),n=JSON.stringify(e);return await this.cryptoUtilsAdapter.encrypt(n,r)},this.decrypt=async(e,t)=>{if(!e)return;let r=await this.getEncryptionKeysForData(t);return JSON.parse(await this.cryptoUtilsAdapter.decrypt(e,r))},this.getEncryptionKeysForData=async e=>{if("data"===e){if(!this.dataEncryptionKey){let e=await this.sessionStorageAdapter.get(a6.encryptionVaultDataKeys);e&&(this.dataEncryptionKey=e)}if(this.dataEncryptionKey)return this.dataEncryptionKey}let t=await this.getEncryptionKeys(),r="seed"===e?t.seedEncryptionKey:t.dataEncryptionKey;return"data"===e&&(this.dataEncryptionKey=r,await this.sessionStorageAdapter.set(a6.encryptionVaultDataKeys,r)),r},this.getEncryptionKeys=async()=>{let e=await this.encryptedDataStorageAdapter.get(a6.encryptionVault);if(!e)throw Error("Encryption vault not initialised.");let t=await this.sessionStorageAdapter.get(a6.passwordHash);if(!t)throw Error("Vault is locked.");let r=await this.cryptoUtilsAdapter.decrypt(e,t);if(!r)throw Error("Wrong password");let n=JSON.parse(r);if(!n||!n.seedEncryptionKey||!n.dataEncryptionKey)throw Error("Invalid encryption keys");return n},this.storeEncryptedKeys=async function(e,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await t.saveMutex.runExclusive(async()=>{if(await t.isInitialised()&&!n)throw Error("Vault already initialised");let i=await t.cryptoUtilsAdapter.generateRandomBytes(32);if(!i)throw Error("passwordSalt generation failed");let o=await t.cryptoUtilsAdapter.hash(r,i);if(!o)throw Error("passwordHash creation failed");let s=JSON.stringify(e),a=await t.cryptoUtilsAdapter.encrypt(s,o);if(!a)throw Error("Key encryption failed");await t.encryptedDataStorageAdapter.set(a6.passwordSalt,i),await t.encryptedDataStorageAdapter.set(a6.encryptionVault,a),await t.sessionStorageAdapter.set(a6.passwordHash,o)})},this.storeEncryptedKeysWithHashAndSalt=async(e,t,r)=>{await this.saveMutex.runExclusive(async()=>{if(await this.isInitialised())throw Error("Vault already initialised");let n=JSON.stringify(e),i=await this.cryptoUtilsAdapter.encrypt(n,t);if(!i)throw Error("Key encryption failed");await this.encryptedDataStorageAdapter.set(a6.passwordSalt,r),await this.encryptedDataStorageAdapter.set(a6.encryptionVault,i),await this.sessionStorageAdapter.set(a6.passwordHash,t)})},this.sessionStorageAdapter=e.sessionStorageAdapter,this.cryptoUtilsAdapter=e.cryptoUtilsAdapter,this.encryptedDataStorageAdapter=e.encryptedDataStorageAdapter}}let ut={passwordHash:"vault::passwordHash",encryptionVault:"vault::encryptionVault"},ur="vault::backup::toV2",un=async e=>{let t=await e.encryptedDataStorageAdapter.get(ut.encryptionVault);if(!t)throw Error("Encryption vault not initialised.");let r=await e.sessionStorageAdapter.get(ut.passwordHash);if(!r)throw Error("Vault is locked.");let n=await e.cryptoUtilsAdapter.decrypt(t,r);if(!n)throw Error("Wrong password");let i=JSON.parse(n);if(!i||!i.seedEncryptionKey||!i.dataEncryptionKey||!i.dataSalt)throw Error("Invalid encryption keys");return i},ui=async(e,t)=>{let r=await e.sessionStorageAdapter.get(ut.passwordHash);if(!r)throw Error("Vault is locked.");let n=JSON.stringify(t),i=await e.cryptoUtilsAdapter.encrypt(n,r);if(!i)throw Error("Key encryption failed");await e.encryptedDataStorageAdapter.set(ut.encryptionVault,i)},uo={2:{preMigrate:async e=>{let t=await e.encryptedDataStorageAdapter.get(ur);if(t){await e.encryptedDataStorageAdapter.set(ut.encryptionVault,t);return}let r=await e.encryptedDataStorageAdapter.get(ut.encryptionVault);if(!r)throw Error("Encryption vault not initialised.");await e.encryptedDataStorageAdapter.set(ur,r)},migrate:async e=>{let t=await un(e),r={seedEncryptionKey:await e.cryptoUtilsAdapter.hash(t.seedEncryptionKey,t.dataSalt),dataEncryptionKey:await e.cryptoUtilsAdapter.hash(t.dataEncryptionKey,t.dataSalt)};await ui(e,r)},cleanup:async e=>{await e.encryptedDataStorageAdapter.remove(ur)}}},us=async e=>{let t=await e.encryptedDataStorageAdapter.get(a6.vaultVersion);if(!t)return;let r=parseInt(t,10);if(isNaN(r))throw Error("Unsupported vault version: ".concat(t));if(r>u8.Version)throw Error("Current vault version is newer than supported: ".concat(t));if(r!==u8.Version)for(let t=r+1;t<=u8.Version;t++){if(!uo[t])throw Error("No migration available for version ".concat(t));await uo[t].preMigrate(e),await uo[t].migrate(e),await e.encryptedDataStorageAdapter.set(a6.vaultVersion,t.toString()),await uo[t].cleanup(e)}};function ua(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function uu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function ul(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!uu(e))throw Error("Uint8Array expected");if(r.length>0&&!r.includes(e.length))throw Error("Uint8Array expected of length "+r+", got length="+e.length)}function uc(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");ua(e.outputLen),ua(e.blockLen)}function uf(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function uh(e,t){ul(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}function up(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ud(e,t){return e<<32-t|e>>>t}let uy=async()=>{};async function ug(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let e=Date.now()-n;e>=0&&e<t||(await uy(),n+=e)}}function um(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function ub(e){return"string"==typeof e&&(e=um(e)),ul(e),e}class uw{clone(){return this._cloneInto()}}function uv(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)}function u_(e){let t=t=>e().update(ub(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}class uE extends uw{update(e){return uf(this),this.iHash.update(e),this}digestInto(e){uf(this),ul(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}constructor(e,t){super(),this.finished=!1,this.destroyed=!1,uc(e);let r=ub(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}}let uS=(e,t,r)=>new uE(e,t).update(r).digest();function uT(e,t,r,n){uc(e);let{c:i,dkLen:o,asyncTick:s}=uv({dkLen:32,asyncTick:10},n);if(ua(i),ua(o),ua(s),i<1)throw Error("PBKDF2: iterations (c) should be >= 1");let a=ub(t),u=ub(r),l=new Uint8Array(o),c=uS.create(e,a),f=c._cloneInto().update(u);return{c:i,dkLen:o,asyncTick:s,DK:l,PRF:c,PRFSalt:f}}function uI(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}async function uA(e,t,r,n){let i;let{c:o,dkLen:s,asyncTick:a,DK:u,PRF:l,PRFSalt:c}=uT(e,t,r,n),f=new Uint8Array(4),h=up(f),p=new Uint8Array(l.outputLen);for(let e=1,t=0;t<s;e++,t+=l.outputLen){let r=u.subarray(t,t+l.outputLen);h.setInt32(0,e,!1),(i=c._cloneInto(i)).update(f).digestInto(p),r.set(p.subarray(0,r.length)),await ug(o-1,a,()=>{l._cloneInto(i).update(p).digestInto(p);for(let e=0;e<r.length;e++)r[e]^=p[e]})}return uI(l,c,u,i,p)}function uO(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,l=n?0:4;e.setUint32(t+u,s,n),e.setUint32(t+l,a,n)}function uP(e,t,r){return e&t^~e&r}function uk(e,t,r){return e&t^e&r^t&r}uS.create=(e,t)=>new uE(e,t);class ux extends uw{update(e){uf(this);let{view:t,buffer:r,blockLen:n}=this,i=(e=ub(e)).length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){let t=up(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){uf(this),uh(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;uO(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=up(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=a/4,l=this.get();if(u>l.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)s.setUint32(4*e,l[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=up(this.buffer)}}let uC=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),uR=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),uB=new Uint32Array(64);class uU extends ux{get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)uB[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=uB[e-15],r=uB[e-2],n=ud(t,7)^ud(t,18)^t>>>3,i=ud(r,17)^ud(r,19)^r>>>10;uB[e]=i+uB[e-7]+n+uB[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:u,H:l}=this;for(let e=0;e<64;e++){let t=l+(ud(s,6)^ud(s,11)^ud(s,25))+uP(s,a,u)+uC[e]+uB[e]|0,c=(ud(r,2)^ud(r,13)^ud(r,22))+uk(r,n,i)|0;l=u,u=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+c|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,n,i,o,s,a,u,l)}roundClean(){uB.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}constructor(){super(64,32,8,!1),this.A=0|uR[0],this.B=0|uR[1],this.C=0|uR[2],this.D=0|uR[3],this.E=0|uR[4],this.F=0|uR[5],this.G=0|uR[6],this.H=0|uR[7]}}let uN=u_(()=>new uU),uD=BigInt(4294967296-1),uL=BigInt(32);function uH(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?{h:Number(e&uD),l:Number(e>>uL&uD)}:{h:0|Number(e>>uL&uD),l:0|Number(e&uD)}}var uM={split:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=uH(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]},shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,add:function(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/4294967296|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/4294967296|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/4294967296|0)|0,add5H:(e,t,r,n,i,o)=>t+r+n+i+o+(e/4294967296|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)};let[uF,uj]=uM.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),uV=new Uint32Array(80),uK=new Uint32Array(80);class uW extends ux{get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:u,El:l,Fh:c,Fl:f,Gh:h,Gl:p,Hh:d,Hl:y}=this;return[e,t,r,n,i,o,s,a,u,l,c,f,h,p,d,y]}set(e,t,r,n,i,o,s,a,u,l,c,f,h,p,d,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|l,this.Fh=0|c,this.Fl=0|f,this.Gh=0|h,this.Gl=0|p,this.Hh=0|d,this.Hl=0|y}process(e,t){for(let r=0;r<16;r++,t+=4)uV[r]=e.getUint32(t),uK[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|uV[e-15],r=0|uK[e-15],n=uM.rotrSH(t,r,1)^uM.rotrSH(t,r,8)^uM.shrSH(t,r,7),i=uM.rotrSL(t,r,1)^uM.rotrSL(t,r,8)^uM.shrSL(t,r,7),o=0|uV[e-2],s=0|uK[e-2],a=uM.rotrSH(o,s,19)^uM.rotrBH(o,s,61)^uM.shrSH(o,s,6),u=uM.rotrSL(o,s,19)^uM.rotrBL(o,s,61)^uM.shrSL(o,s,6),l=uM.add4L(i,u,uK[e-7],uK[e-16]),c=uM.add4H(l,n,a,uV[e-7],uV[e-16]);uV[e]=0|c,uK[e]=0|l}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:u,Dl:l,Eh:c,El:f,Fh:h,Fl:p,Gh:d,Gl:y,Hh:g,Hl:m}=this;for(let e=0;e<80;e++){let t=uM.rotrSH(c,f,14)^uM.rotrSH(c,f,18)^uM.rotrBH(c,f,41),b=uM.rotrSL(c,f,14)^uM.rotrSL(c,f,18)^uM.rotrBL(c,f,41),w=c&h^~c&d,v=f&p^~f&y,_=uM.add5L(m,b,v,uj[e],uK[e]),E=uM.add5H(_,g,t,w,uF[e],uV[e]),S=0|_,T=uM.rotrSH(r,n,28)^uM.rotrBH(r,n,34)^uM.rotrBH(r,n,39),I=uM.rotrSL(r,n,28)^uM.rotrBL(r,n,34)^uM.rotrBL(r,n,39),A=r&i^r&s^i&s,O=n&o^n&a^o&a;g=0|d,m=0|y,d=0|h,y=0|p,h=0|c,p=0|f,({h:c,l:f}=uM.add(0|u,0|l,0|E,0|S)),u=0|s,l=0|a,s=0|i,a=0|o,i=0|r,o=0|n;let P=uM.add3L(S,I,O);r=uM.add3H(P,E,T,A),n=0|P}({h:r,l:n}=uM.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=uM.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=uM.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:u,l:l}=uM.add(0|this.Dh,0|this.Dl,0|u,0|l)),({h:c,l:f}=uM.add(0|this.Eh,0|this.El,0|c,0|f)),({h:h,l:p}=uM.add(0|this.Fh,0|this.Fl,0|h,0|p)),({h:d,l:y}=uM.add(0|this.Gh,0|this.Gl,0|d,0|y)),({h:g,l:m}=uM.add(0|this.Hh,0|this.Hl,0|g,0|m)),this.set(r,n,i,o,s,a,u,l,c,f,h,p,d,y,g,m)}roundClean(){uV.fill(0),uK.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}}let uq=u_(()=>new uW),uG=e=>"あいこくしん"===e[0];function u$(e){if("string"!=typeof e)throw TypeError("invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function uz(e){let t=u$(e),r=t.split(" ");if(![12,15,18,21,24].includes(r.length))throw Error("Invalid mnemonic");return{nfkd:t,words:r}}function uY(e){ul(e,16,20,24,28,32)}let uX=e=>{let t=8-e.length/4;return new Uint8Array([uN(e)[0]>>t<<t])};function uJ(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw Error("Wordlist: expected array of 2048 strings");return e.forEach(e=>{if("string"!=typeof e)throw Error("wordlist: non-string element: "+e)}),o$(oz(1,uX),oY(11,!0),oG(e))}function uQ(e,t){let{words:r}=uz(e),n=uJ(t).decode(r);return uY(n),n}function uZ(e,t){return uY(e),uJ(t).encode(e).join(uG(t)?"　":" ")}function u0(e,t){try{uQ(e,t)}catch(e){return!1}return!0}let u1=e=>u$("mnemonic"+e);function u2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return uA(uq,uz(e).nfkd,u1(t),{c:2048,dkLen:64})}let u3="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n");!function(e){e.PASSWORD_HASH="passwordHash",e.PASSWORD_SALT="passwordSalt",e.ENCRYPTED_KEY="encryptedKey",e.SEED_VAULT_VERSION="seedVaultVersion"}(f||(f={}));var u4={runMigrations:us,hasMigrationFromOldSeedVault:async e=>{let t=await e.encryptedDataStorageAdapter.get(f.PASSWORD_SALT),r=await e.encryptedDataStorageAdapter.get(f.ENCRYPTED_KEY);return!!(t&&r)},migrateFromOldSeedVaultFromUnlocked:async(e,t,r,n,i)=>{let o;let s=await i.sessionStorageAdapter.get(f.PASSWORD_HASH),a=await i.encryptedDataStorageAdapter.get(f.PASSWORD_SALT),u=await i.encryptedDataStorageAdapter.get(f.ENCRYPTED_KEY);if(s&&a&&u){try{let e=await i.cryptoUtilsAdapter.decrypt(u,s);o=uZ(o0.decode(e),u3)}catch(e){throw Error("Wrong password")}if(await n.isInitialised()){try{await r.unlockWithPasswordHash(s)}catch(e){throw Error("Inconsistent state: Seed vault is already initialised")}let e=await n.getWalletIds();if(e.length>0){if(e.length>1)throw Error("Inconsistent state: Multiple migrated wallets found");let t=await n.getWalletSecrets(e[0]);if(!(null==t?void 0:t.mnemonic)||t.mnemonic!==o)throw Error("Inconsistent state: Other wallet found in new seed vault")}}try{await e.reset(),await t(s,a);let i=await n.storeWalletByMnemonic(o,"index");await r.lockVault(),await r.unlockWithPasswordHash(s);let u=await n.getWalletSecrets(i);if(!(null==u?void 0:u.mnemonic)||u.mnemonic!==o)throw Error("Migration failed")}catch(t){throw await e.reset(),Error("Migration failed")}await i.encryptedDataStorageAdapter.remove(f.PASSWORD_SALT),await i.encryptedDataStorageAdapter.remove(f.ENCRYPTED_KEY),await i.encryptedDataStorageAdapter.remove(f.SEED_VAULT_VERSION),await i.sessionStorageAdapter.remove(f.PASSWORD_HASH)}},migrateFromOldSeedVaultWithPassword:async(e,t,r,n,i,o)=>{let s;let a=await i.encryptedDataStorageAdapter.get(f.PASSWORD_SALT),u=await i.encryptedDataStorageAdapter.get(f.ENCRYPTED_KEY);if(a&&u){try{let e=await i.cryptoUtilsAdapter.hash(o,a),t=await i.cryptoUtilsAdapter.decrypt(u,e);s=uZ(o0.decode(t),u3)}catch(e){throw Error("Wrong password")}if(await n.isInitialised()){try{await r.unlockVault(o,!1)}catch(e){throw Error("Inconsistent state: Seed vault is already initialised")}let e=await n.getWalletIds();if(e.length>0){if(e.length>1)throw Error("Inconsistent state: Multiple migrated wallets found");let t=await n.getWalletSecrets(e[0]);if(!(null==t?void 0:t.mnemonic)||t.mnemonic!==s)throw Error("Inconsistent state: Other wallet found in new seed vault")}}try{await e.reset(),await t(o);let i=await n.storeWalletByMnemonic(s,"index");await r.lockVault(),await r.unlockVault(o,!1);let a=await n.getWalletSecrets(i);if(!(null==a?void 0:a.mnemonic)||a.mnemonic!==s)throw Error("Migration failed")}catch(t){throw await e.reset(),Error("Migration failed")}await i.encryptedDataStorageAdapter.remove(f.PASSWORD_SALT),await i.encryptedDataStorageAdapter.remove(f.ENCRYPTED_KEY),await i.encryptedDataStorageAdapter.remove(f.SEED_VAULT_VERSION),await i.sessionStorageAdapter.remove(f.PASSWORD_HASH)}},oldSeedVaultIsUnlocked:async e=>{let t=await e.encryptedDataStorageAdapter.get(f.PASSWORD_HASH),r=await e.encryptedDataStorageAdapter.get(f.PASSWORD_SALT),n=await e.encryptedDataStorageAdapter.get(f.ENCRYPTED_KEY);return!!(r&&n&&t)}};class u5{constructor(e,t){this.storeSeedMutex=new iJ,this.Version=1,this.migrationsHaveRun=!1,this.migrationMutex=new iJ,this.getVaultData=async()=>{await this.migrationMutex.waitForUnlock();let e=await this.encryptedDataStorageAdapter.get(a6.seedVault);if(!e)return;let t=await this.encryptionVault.decrypt(e,"seed");return this.migrationsHaveRun?t:this.migrationMutex.runExclusive(async()=>{let e=t;return this.migrationsHaveRun=!0,e})},this.getWallet=async e=>{let t=await this.getVaultData(),r=null==t?void 0:t.wallets[e];if(!r)throw Error("Wallet not found");return r},this.setStoreWrapper=async e=>{await this.storeSeedMutex.runExclusive(async()=>{var t;let r=null!==(t=await this.getVaultData())&&void 0!==t?t:{version:this.Version,wallets:{},primaryWalletId:""};if(r.wallets=e(r.wallets),!r.primaryWalletId&&Object.keys(r.wallets).length>0&&(r.primaryWalletId=Object.keys(r.wallets)[0]),r.primaryWalletId&&!r.wallets[r.primaryWalletId])throw Error("Cannot delete primary wallet");let n=await this.encryptionVault.encrypt(r,"seed");await this.encryptedDataStorageAdapter.set(a6.seedVault,n)})},this.tryDecodeSeed=e=>{let t;if("string"==typeof e){try{t=o0.decode(e)}catch(r){try{t=oJ.decode(e)}catch(r){try{t=o0.decode(e)}catch(e){throw Error("Invalid seed provided")}}}t=oX.decode(e)}else t=e;return t},this.isInitialised=async()=>!!await this.encryptedDataStorageAdapter.get(a6.seedVault),this.storeWalletByMnemonic=async(e,t)=>{if(!await u0(e,u3))throw Error("Invalid mnemonic");let r=crypto.randomUUID(),n={keyType:"mnemonic",mnemonic:e,derivationType:t};return await this.setStoreWrapper(e=>({...e,[r]:n})),r},this.storeWalletBySeed=async(e,t)=>{let r=crypto.randomUUID(),n=this.tryDecodeSeed(e),i={keyType:"seed",seedBase64:oX.encode(n),derivationType:t};return await this.setStoreWrapper(e=>({...e,[r]:i})),r},this.getWalletSecrets=async e=>{let t=await this.getWallet(e);if("seed"===t.keyType){let{seedBase64:e,derivationType:r}=t,n=oX.decode(e),i=oJ.encode(n);return{derivationType:r,seedHex:o0.encode(n),seedBase58:i,seedBase64:e}}if("mnemonic"===t.keyType){let{mnemonic:e,derivationType:r}=t,n=await u2(e),i=oX.encode(n),o=oJ.encode(n);return{derivationType:r,mnemonic:e,seedHex:o0.encode(n),seedBase58:o,seedBase64:i}}throw Error("Unrecognised wallet keyType")},this.getWalletRootNode=async e=>{let t=await this.getWallet(e);if("seed"===t.keyType)return{rootNode:aY.fromMasterSeed(oX.decode(t.seedBase64)),derivationType:t.derivationType};if("mnemonic"===t.keyType){let e=await u2(t.mnemonic);return{rootNode:aY.fromMasterSeed(e),derivationType:t.derivationType}}throw Error("Unrecognised wallet keyType")},this.getWalletCount=async()=>{let e=await this.getVaultData();return(null==e?void 0:e.wallets)?Object.values(e.wallets).length:0},this.getWalletIds=async()=>{var e;let t=await this.getVaultData();return Object.keys(null!==(e=null==t?void 0:t.wallets)&&void 0!==e?e:{})},this.getPrimaryWalletId=async()=>{let e=await this.getVaultData();return null==e?void 0:e.primaryWalletId},this.deleteWallet=async e=>{await this.setStoreWrapper(t=>(delete t[e],t))},this.encryptedDataStorageAdapter=e.encryptedDataStorageAdapter,this.encryptionVault=t}}class u8{get SeedVault(){if(!this.migrationsRan)throw Error("Vault not ready. Please unlock the vault or run `masterVault.restoreVault()` before continuing.");return this.seedVault}get KeyValueVault(){if(!this.migrationsRan)throw Error("Vault not ready. Please unlock the vault or run `masterVault.restoreVault()` before continuing.");return this.keyValueVault}constructor(e){var t=this;this.migrationMutex=new iJ,this.unlockMutex=new iJ,this.migrationsRan=!1,this.migrate=async()=>{await this.migrationMutex.waitForUnlock(),this.migrationsRan||await this.migrationMutex.runExclusive(async()=>{await u4.runMigrations(this.config),this.migrationsRan=!0})},this.initialiseInternal=async e=>{await this.encryptionVault.initialise(e),await this.config.encryptedDataStorageAdapter.set(a6.vaultVersion,u8.Version.toString())},this.initialiseInternalWithHashAndSalt=async(e,t)=>{await this.encryptionVault.initialiseWithHashAndSalt(e,t),await this.config.encryptedDataStorageAdapter.set(a6.vaultVersion,u8.Version.toString())},this.restoreVault=async()=>{if(await u4.hasMigrationFromOldSeedVault(this.config)){await u4.oldSeedVaultIsUnlocked(this.config)&&(await u4.migrateFromOldSeedVaultFromUnlocked(this,this.initialiseInternalWithHashAndSalt,this.encryptionVault,this.seedVault,this.config),await this.migrate());return}await this.isVaultUnlocked()&&await this.migrate()},this.isInitialised=async()=>!!await u4.hasMigrationFromOldSeedVault(this.config)||await this.encryptionVault.isInitialised(),this.initialise=async e=>{if(await this.isInitialised())throw Error("Vault already initialised");await this.initialiseInternal(e),this.migrationsRan=!0},this.changePassword=async(e,t)=>{await this.unlockVault(e),await this.encryptionVault.changePassword(t)},this.unlockVault=async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(await t.unlockMutex.waitForUnlock(),await t.isVaultUnlocked()){await t.encryptionVault.unlockVault(e,r);return}await t.unlockMutex.runExclusive(async()=>{await u4.hasMigrationFromOldSeedVault(t.config)&&await u4.migrateFromOldSeedVaultWithPassword(t,t.initialiseInternal,t.encryptionVault,t.seedVault,t.config,e),await t.encryptionVault.unlockVault(e,r),await t.migrate()})},this.lockVault=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?t.encryptionVault.softLockVault():t.encryptionVault.lockVault()},this.isVaultUnlocked=async()=>this.encryptionVault.isVaultUnlocked(),this.reset=async()=>{for(let e of Object.values(a6))await this.config.encryptedDataStorageAdapter.remove(e),await this.config.sessionStorageAdapter.remove(e);await this.keyValueVault.clear(),this.encryptionVault=new ue(this.config),this.seedVault=new u5(this.config,this.encryptionVault),this.keyValueVault=new a9(this.config,this.encryptionVault)},this.config=e,this.encryptionVault=new ue(e),this.seedVault=new u5(e,this.encryptionVault),this.keyValueVault=new a9(e,this.encryptionVault)}}u8.Version=2;let u6="/v1/auth/token",u7="/v1/auth/challenge";class u9 extends oa{constructor(e,t,r){var n;super(il.create(e).defaults),n=this,this.loginMutex=new iJ,this.refreshMutex=new iJ,this.requestInterceptor=async e=>{let t=await this.getAccessToken();return e.headers.Authorization="bearer ".concat(t),e},this.responseInterceptor=async e=>(401===e.status&&await this.storeTokens(void 0),e),this.responseErrorInterceptor=async e=>{if(401===e.status){await this.storeTokens(void 0);let{config:t}=e;if(t&&!t.isRetry)return t.isRetry=!0,this.request(t)}throw e},this.hasScope=async e=>(await this.post("/v1/auth/hasScope",{scope:{addresses:e}})).data.success,this.extend=async e=>{if(Array.isArray(e)){if(!e.length)return;await this.post("/v1/auth/extendScope",{scope:{addresses:e.map(e=>({address:e}))}});return}if(!e.IsFinalized)throw Error("Address registrar is not finalized");let t=Object.values(e.RegistrationData).map(e=>({pathSuffix:e.pathSuffix,xPubKey:e.xPubKey,signature:e.signature,type:e.type}));await this.post("/v1/auth/extendScope",{scope:{addresses:t}})},this.batchExtendSoftwareAccountScope=async(e,t)=>{await this.refreshTokens({force:!0});let r=new a5(await this.getAccessToken(),this.network,this.vault);await r.batchHydrate(e,t),await this.extend(r)},this.extendSoftwareAccountScope=async e=>{await this.refreshTokens({force:!0});let t=new a5(await this.getAccessToken(),this.network,this.vault);await t.hydrate(e),await this.extend(t)},this.createLedgerRegistrar=async(e,t,r)=>(await this.refreshTokens({force:!0}),new a4(await this.getAccessToken(),this.network,e,t,r)),this.getAccessToken=async()=>{var e;this.refreshToken||await this.loadTokens(),await this.refreshTokens(),this.accessToken||await this.login();let t=null===(e=this.accessToken)||void 0===e?void 0:e.value;if(!t)throw Error("Something went wrong. No access token available.");return t},this.loadTokens=async()=>{let e=await this.vault.KeyValueVault.get(this.AUTH_STORAGE_KEY);this.accessToken=null==e?void 0:e.accessToken,this.refreshToken=null==e?void 0:e.refreshToken},this.storeTokens=async e=>{if(!e){this.accessToken=void 0,this.refreshToken=void 0,await this.vault.KeyValueVault.remove(this.AUTH_STORAGE_KEY);return}this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,await this.vault.KeyValueVault.set(this.AUTH_STORAGE_KEY,e)},this.refreshTokens=async function(){let{staleBufferSecs:e=2,force:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.refreshMutex.isLocked()){await n.refreshMutex.waitForUnlock();return}let r=await n.refreshMutex.acquire();try{if(!n.refreshToken||!n.accessToken||!t&&!(n.accessToken&&1e3*n.accessToken.expiresAt-Date.now()<1e3*e))return;if(n.refreshToken&&1e3*n.refreshToken.expiresAt-Date.now()<1e3*e){n.storeTokens(void 0);return}let r={grantType:"refreshToken",refreshToken:n.refreshToken.value},i=await n.unAuthedClient.post(u6,r,{headers:{Authorization:"bearer ".concat(n.accessToken.value)}});n.storeTokens(i.data)}catch(e){console.log("Failed to refresh tokens",e),n.storeTokens(void 0)}finally{r()}},this.login=async()=>{if(this.loginMutex.isLocked()){await this.loginMutex.waitForUnlock();return}let e=await this.loginMutex.acquire();try{let{challenge:e}=(await this.unAuthedClient.get(u7)).data,t=await this.getLoginData(e),r={grantType:"challenge",challengeReply:t},n=await this.unAuthedClient.post(u6,r);this.storeTokens(n.data)}catch(e){console.log("Failed to log in",e),this.storeTokens(void 0)}finally{e()}},this.getLoginData=async e=>{let t=await this.vault.SeedVault.getPrimaryWalletId();if(!t)throw Error("Primary wallet not found");let{rootNode:r}=await this.vault.SeedVault.getWalletRootNode(t),n=r.derive("m/0'/0'/0'"),i=n.publicExtendedKey,o=n.deriveChild(0).deriveChild(0),{signature:s}=await sI({addressType:su.p2wpkh,message:e,network:this.network,privateKey:o.privateKey});return{signature:s,xPubKey:i,challenge:e}},this.vault=t,this.network=r,this.interceptors.request.use(this.requestInterceptor),this.interceptors.response.use(this.responseInterceptor,this.responseErrorInterceptor),this.unAuthedClient=il.create(e),this.AUTH_STORAGE_KEY=a7(r)}}let le=(e,t)=>({x:e,y:t,tooltipLabel:new Date(e).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hourCycle:"h23"})});class lt{constructor(e,t){var r=this;this.fetchBtcFeeRate=async()=>(await this.client.get("/v1/fees/btc")).data,this.fetchStxToBtcRate=async()=>new S((await this.client.get("/v1/prices/stx/btc",{timeout:ty})).data.stxBtcRate.toString()),this.fetchStrkToBtcRate=async()=>new S((await this.client.get("/v1/prices/strk/btc",{timeout:ty})).data.strkBtcRate.toString()),this.fetchBtcToCurrencyRate=async e=>{let{fiatCurrency:t}=e;return new S((await this.client.get("/v1/prices/btc/".concat(t),{timeout:ty})).data.btcFiatRate.toString())},this.fetchTokenFiateRate=async(e,t)=>{let r="/v1/prices/".concat(e,"/").concat(t);return this.client.get(r,{timeout:ty}).then(e=>new S(e.data.tokenFiatRate)).catch(()=>new S(0))},this.getSip10Tokens=async(e,t)=>(await this.client.post("/v1/sip10/tokens",{currency:t,coins:JSON.stringify(e)})).data,this.getBrc20Tokens=async(e,t)=>(await this.client.get("/v1/brc20/tokens",{params:{currency:t,tickers:e}})).data,this.getTokenStatsAndInfo=async(e,t)=>(await this.client.get("/v2/token-stats-and-info",{params:{id:e,protocol:t}})).data,this.getRuneFiatRates=async(e,t)=>(await this.client.post("/v2/runes/fiat-rates",{currency:t,runeNames:e})).data,this.getRuneTxHistory=async(e,t,r,n)=>(await this.client.get("/v1/address/".concat(e,"/rune/").concat(t,"?offset=").concat(r,"&limit=").concat(n))).data,this.fetchAppInfo=async()=>(await this.client.get("/v1/info")).data,this.fetchStackingPoolInfo=async()=>(await this.client.get("/v1/pool/info?pool_version=5")).data,this.fetchPoolStackerInfo=async e=>(await this.client.get("/v1/pool/".concat(e,"/status"))).data,this.getMoonPaySignedUrl=async e=>(await this.client.post("/v1/sign-url",{url:e})).data,this.getBinanceSignature=async e=>(await this.client.post("/v1/binance/sign",{url:e})).data,this.getOrdinalInfo=async e=>(await this.client.get("/v1/ordinals/".concat(e))).data,this.getErc721Metadata=async(e,t)=>(await this.client.get("/v1/eth/".concat(e,"/").concat(t))).data,this.getCollections=async(e,t,r,n)=>(await this.client.post("/v2/address/".concat(e,"/ordinals/collections"),{limit:r,offset:t,filters:n})).data,this.getAllCollections=async e=>{let{ordinalsAddress:t,stacksAddress:r,filters:n,limit:i=20,offset:o=0,currency:s="USD"}=e;return(await this.client.post("/v1/nft/collections",{ordinalsAddress:t,stacksAddress:r,limit:i,offset:o,filters:n,currency:s})).data},this.getOrdinalCollectionDetails=async e=>(await this.client.get("/v1/nft/ordinals/collections/".concat(e,"/info"))).data,this.getStacksCollectionDetails=async e=>(await this.client.get("/v1/nft/stacks/collections/".concat(e,"/info"))).data,this.getAddressCollectionOrdinals=async function(e,t,n,i,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"USD";return(await r.client.post("/v1/nft/ordinals/address/".concat(e,"/collections/").concat(t),{limit:i,offset:n,filters:o,currency:s})).data},this.getAddressCollectionStacks=async function(e,t,n,i,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"USD";return(await r.client.post("/v1/nft/stacks/address/".concat(e,"/collections/").concat(t),{limit:i,offset:n,filters:o,currency:s})).data},this.getCollectionSpecificInscriptions=async(e,t,r,n,i)=>(await this.client.get("/v1/address/".concat(e,"/ordinals/collections/").concat(t),{params:{limit:n,offset:r,filters:i}})).data,this.getCollectionMarketData=async e=>(await this.client.get("/v1/ordinals/collections/".concat(e))).data,this.getInscription=async(e,t)=>(await this.client.get("/v1/address/".concat(e,"/ordinals/inscriptions/").concat(t))).data,this.getAppConfig=async()=>await this.client.get("/v1/app-config"),this.getFeaturedDapps=async()=>(await this.client.get("/v2/featured/dapp")).data.featuredDapp,this.getNotificationBanners=async()=>(await this.client.get("/v2/notification-banners")).data.notificationBanners,this.getCoinsMarketData=async e=>(await this.client.get("/v2/coins-market-data?ids=".concat(e.join(",")))).data,this.getExchangeRate=async e=>(await this.client.get("/v2/exchange-rate?currency=".concat(e))).data,this.getHistoricalData=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i={btc:"bitcoin",stx:"stacks"}[e.toLowerCase()]||e.toLowerCase();return(await r.client.get("/v2/historical-data?id=".concat(i,"&period=").concat(t))).data.map(e=>{let[t,r]=e;return le(t,r*n)})},this.getSpamTokensList=async()=>(await this.client.get("/v1/spam-tokens")).data,this.getTopTokens=async()=>{let e=await this.client.get("/v1/top-tokens"),t={};for(let r in e.data.runes){let n=e.data.runes[r];t[r]=iQ(n)}return{...e.data,runes:t}},this.getAppFeatures=async(e,t)=>(await this.client.post("/v1/app-features",{context:{...e,network:this.network}},{headers:t})).data,this.auth={ensureAccountRegistered:async e=>{let t=Object.values(e.btcAddresses).map(e=>e.address);if(!await this.authenticatedClient.hasScope(t)){if("ledger"===e.accountType||"keystone"===e.accountType){let t=Object.values(e.btcAddresses).map(e=>e.address);return this.authenticatedClient.extend(t)}return this.authenticatedClient.extendSoftwareAccountScope(e)}},batchEnsureSoftwareAccountRegistered:async(e,t)=>{let r=e[0].walletId;if(e.some(e=>e.walletId!==r))throw Error("All accounts must belong to the same wallet");let n=e.map(e=>Object.values(e.btcAddresses).map(e=>e.address)).flat();if(await this.authenticatedClient.hasScope(n))return;let i=3,o=[];for(let t=0;t<e.length;t+=i)o.push(e.slice(t,t+i));let s=await Promise.all(o.map(e=>this.authenticatedClient.hasScope(e.flatMap(e=>Object.values(e.btcAddresses).map(e=>e.address)))));for(let e of o.filter((e,t)=>!s[t]))await this.authenticatedClient.batchExtendSoftwareAccountScope(e,t)}},this.account={fetchAddressBtcHistory:async(e,t)=>(await this.authenticatedClient.get("/v1/account/history",{params:{addresses:e,...t}})).data,fetchAccountBtcHistory:async(e,t)=>{let r=Object.values(e.btcAddresses).map(e=>e.address);return this.account.fetchAddressBtcHistory(r,t)},getGlobalTxHistory:async e=>{if(!e.cursor&&!e.addresses.bitcoin&&!e.addresses.stacks&&!e.addresses.starknet)throw Error("At least one address is required");let t=e.cursor?{type:"cursor",cursor:e.cursor,limit:e.limit}:{type:"initial",addresses:{bitcoin:e.addresses.bitcoin,stacks:e.addresses.stacks,starknet:e.addresses.starknet?{address:e.addresses.starknet}:void 0},limit:e.limit};return(await this.authenticatedClient.post("/v2/global-history",t)).data}},this.listings={getRuneMarketData:async e=>(await this.client.post("/v1/listings/runes/market-data",e)).data,getRuneSellOrder:async e=>(await this.client.post("/v1/listings/runes/create-order",e)).data,submitRuneSellOrder:async e=>(await this.client.post("/v1/listings/runes/submit-order",e)).data,getListedUtxos:async e=>(await this.client.post("/v1/listings/runes/listed-utxos",e)).data,getRuneCancelOrder:async e=>(await this.client.post("/v1/listings/runes/create-cancellation",e)).data,submitRuneCancelOrder:async e=>(await this.client.post("/v1/listings/runes/submit-cancellation",e)).data},this.starknet={getHistory:async e=>{let{address:t,...r}=e,n=await this.client.post("/v1/starknet/address/".concat(t,"/history"),r);return{...n.data,transactions:n.data.transactions.map(e=>{if("starknet"===e.type)try{return{...e,data:{...e.data,contractAddress:(0,P.qn)(e.data.contractAddress),fromAddress:(0,P.qn)(e.data.fromAddress),toAddress:(0,P.qn)(e.data.toAddress)}}}catch(e){console.warn("Failed to normalize Starknet addresses:",e)}return e})}},getTokenBalances:async e=>{let t=await this.client.get("/starknet/v1/tokenBalances",{params:e});return{...t.data,tokenBalances:t.data.tokenBalances.map(e=>({...e,contractAddress:(0,P.qn)(e.contractAddress)}))}}},this.swaps={getSourceTokens:async e=>(await this.client.post("/v1/swaps/get-source-tokens",e)).data,getDestinationTokens:async e=>(await this.client.post("/v1/swaps/get-destination-tokens",e)).data,getQuotes:async e=>(await this.client.post("/v1/swaps/get-quotes",e)).data,getUtxos:async e=>(await this.client.post("/v1/swaps/get-utxos",e)).data,placeOrder:async e=>(await this.client.post("/v1/swaps/place-order",e)).data,executeOrder:async e=>(await this.client.post("/v1/swaps/execute-order",e)).data,placeStxOrder:async e=>(await this.client.post("/v1/swaps/place-stx-order",e)).data,executeStxOrder:async e=>(await this.client.post("/v1/swaps/execute-stx-order",e)).data,placeUtxoOrder:async e=>(await this.client.post("/v1/swaps/place-utxo-order",e)).data,executeUtxoOrder:async e=>(await this.client.post("/v1/swaps/execute-utxo-order",e)).data,placeXcOrder:async e=>(await this.client.post("/v1/swaps/place-xc-order",e)).data,getOrderHistory:async e=>(await this.client.post("/v1/swaps/get-order-history",e)).data},this.v3={getRunesBalance:async e=>(await this.client.get("/v3/address/".concat(e.address,"/runes/balance?includeUnconfirmed=").concat(e.includeUnconfirmed))).data,getRunesMarketData:async e=>(await this.client.post("/v3/runes/market-data",e)).data,getBrc20Balance:async e=>(await this.client.get("/v3/address/".concat(e.address,"/brc20/balance"))).data,getBrc20MarketData:async e=>(await this.client.post("/v3/brc20/market-data",e)).data,getSip10MarketData:async e=>(await this.client.post("/v3/sip10/market-data",e)).data},this.client=il.create({baseURL:tk(t),headers:{"Content-Type":"application/json","X-Client-Version":i3()||void 0}}),this.authenticatedClient=new u9({baseURL:tk(t),headers:{"Content-Type":"application/json","X-Client-Version":i3()||void 0}},e,t),this.rateLimiter=new iB([this.client,this.authenticatedClient],{maxRPS:10}),this.network=t}}function lr(e){let{accountIndex:t,index:r,network:n}=e;return"Mainnet"===n?"".concat(tg,"0'/").concat(t,"'/0/").concat(r.toString()):"".concat(tg,"1'/").concat(t,"'/0/").concat(r.toString())}function ln(e){let{accountIndex:t,index:r,network:n}=e;return"Mainnet"===n?"".concat(tm,"0'/").concat(t,"'/0/").concat(r.toString()):"".concat(tm,"1'/").concat(t,"'/0/").concat(r.toString())}function li(e){let{accountIndex:t,index:r,network:n}=e;return"Mainnet"===n?"".concat(tb,"0'/").concat(t,"'/0/").concat(r.toString()):"".concat(tb,"1'/").concat(t,"'/0/").concat(r.toString())}lt.addressRegistrars=a8,r(56080),r(48764).Buffer,r(48764).Buffer,w.O.clone().config({EXPONENTIAL_AT:1e9,ROUNDING_MODE:w.O.ROUND_HALF_FLOOR}),w.O.clone().config({EXPONENTIAL_AT:1e9,ROUNDING_MODE:w.O.ROUND_HALF_UP});let lo=(e,t)=>{if(t)switch(t){case"stacks":return"stx";case"runes":return"runes";case"starknet":return"starknet";case"brc-20":return"brc20"}switch(e){case"BTC":return"btc";case"STX":return"stx";case"FT":case"NFT":return"sip10";case"brc20-Ordinal":return"brc20";case"Ordinal":case"RareSat":return"runes";case"SN":return"starknet";default:throw Error("Unknown Currency",{cause:e})}};r(67294);var ls=r(95165),la=r.n(ls),lu=r(79541);!function(e){e.SEND_BTC="sendBtc",e.SEND_UTXO="sendUtxo",e.SPLIT_UTXO="splitUtxo",e.SCRIPT="script"}(h||(h={}));var ll=r(78185),lc=r(32398);let lf=new Uint8Array,lh=64,lp=e=>ll.LL.encode(e);function ld(e){if(e.nonWitnessUtxo){if(void 0===e.index)throw Error("Unknown input index");return e.nonWitnessUtxo.outputs[e.index]}if(e.witnessUtxo)return e.witnessUtxo;throw Error("Cannot find previous output info")}function ly(e){let t="legacy",r=sw.cm.ALL,n=ld(e),i=o1.n1.decode(n.script),o=i.type,s=i,a=[i];if("tr"===i.type)return r=sw.cm.DEFAULT,{txType:"taproot",type:"tr",last:i,lastScript:n.script,defaultSighash:r,sighash:e.sighashType||r};{if(("wpkh"===i.type||"wsh"===i.type)&&(t="segwit"),"sh"===i.type){if(!e.redeemScript)throw Error("inputType: sh without redeemScript");let r=o1.n1.decode(e.redeemScript);("wpkh"===r.type||"wsh"===r.type)&&(t="segwit"),a.push(r),s=r,o+="-".concat(r.type)}if("wsh"===s.type){if(!e.witnessScript)throw Error("inputType: wsh without witnessScript");let r=o1.n1.decode(e.witnessScript);"wsh"===r.type&&(t="segwit"),a.push(r),s=r,o+="-".concat(r.type)}let n=a[a.length-1];if("sh"===n.type||"wsh"===n.type)throw Error("inputType: sh/wsh cannot be terminal type");let u=o1.n1.encode(n);return{type:o,txType:t,last:n,lastScript:u,defaultSighash:r,sighash:e.sighashType||r}}}function lg(e,t){if(!e||!e.length)throw Error("no leafs");let r=()=>new Uint8Array(t);for(let[t,n]of e.sort((e,t)=>lp(e[0]).length-lp(t[0]).length)){let e=n.slice(0,-1),i=o1.n1.decode(e),o=[];if("tr_ms"===i.type){let e=i.m,t=i.pubkeys.length-e;for(let t=0;t<e;t++)o.push(r());for(let e=0;e<t;e++)o.push(lc.E_)}else if("tr_ns"===i.type)i.pubkeys.forEach(()=>o.push(r()));else throw Error("Finalize: Unknown tapLeafScript");return o.reverse().concat([e,lp(t)])}throw Error("there was no witness")}function lm(e,t){let r=lf,n,i=ly(e);if("taproot"===i.txType){let r=e.sighashType&&e.sighashType!==sw.cm.DEFAULT?65:64;if(e.tapInternalKey&&!(0,lu.Wd)(e.tapInternalKey,lu.PK)||t.taprootSimpleSign)n=[new Uint8Array(r)];else if(e.tapLeafScript)n=lg(e.tapLeafScript,r);else throw Error("estimateInput/taproot: unknown input")}else{let e=72,t=33,o=lf,s=[];if("ms"===i.last.type){let t=i.last.m,r=[0];for(let n=0;n<t;n++)r.push(new Uint8Array(e));o=sb.Xf.encode(r)}else"pk"===i.last.type?o=sb.Xf.encode([new Uint8Array(e)]):"pkh"===i.last.type?o=sb.Xf.encode([new Uint8Array(e),new Uint8Array(t)]):"wpkh"===i.last.type&&(o=lf,s=[new Uint8Array(e),new Uint8Array(t)]);i.type.includes("wsh-")&&(o.length&&i.lastScript.length&&(s=sb.Xf.decode(o).map(e=>{if(0===e)return lf;if(e instanceof Uint8Array)return e;throw Error("Wrong witness op=".concat(e))})),s=s.concat(i.lastScript)),"segwit"===i.txType&&(n=s),i.type.startsWith("sh-wsh-")?r=sb.Xf.encode([sb.Xf.encode([0,new Uint8Array(lh)])]):i.type.startsWith("sh-")?r=sb.Xf.encode([...sb.Xf.decode(o),i.lastScript]):i.type.startsWith("wsh-")||"segwit"!==i.txType&&(r=o)}let o=144+4*sb.S2.encode(r).length+16,s=!1;return n&&(o+=sb.FF.encode(n).length,s=!0),{weight:o,hasWitnesses:s}}let lb=(e,t)=>{let r;let n=iV(null==t?void 0:t.network);if("address"in e&&"string"==typeof e.address)r=o1.n1.encode(o1.kL(n).decode(e.address));else if("script"in e&&e.script instanceof Uint8Array)r=e.script;else throw Error("Output script could not be determined");return r},lw=(e,t)=>{let r;if(e.isFinal)throw Error("Transaction must not be finalized");let n=t||{};r=32+4*sb.Pd.encode(BigInt(e.inputsLength)).length;let i=!1;for(let t=0;t<e.inputsLength;t++){let{weight:o,hasWitnesses:s}=lm(e.getInput(t),n);r+=o,i=i||s}i&&(r+=2),r+=4*sb.Pd.encode(BigInt(e.outputsLength)).length;for(let t=0;t<e.outputsLength;t++){let i=lb(e.getOutput(t),n).length;r+=(8+sb.Pd.encode(BigInt(i)).length+i)*4}return Math.ceil(r/4)};var lv=r(48764).Buffer;let l_=(e,t)=>!!e&&!!t&&e.length===t.length&&e.every((e,r)=>e===t[r]),lE=(e,t)=>"".concat(e,":").concat(t),lS=e=>{let[t,r]=e.split(":");return lE(t,r)},lT=e=>{let[,,t]=e.split(":");return+t},lI=e=>lE(e.txid,e.vout),lA=e=>{let t={[h.SEND_UTXO]:[],[h.SPLIT_UTXO]:[],[h.SEND_BTC]:[],[h.SCRIPT]:[]};for(let r of e)t[r.type].push(r);let r=new Set;for(let e of t[h.SPLIT_UTXO])r.add(lS(e.location));for(let e of t[h.SEND_UTXO]){let t=e.outpoint;if(r.has(t))throw Error("duplicate UTXO being spent: ".concat(t));r.add(t)}return t},lO=async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=(await e.paymentAddress.getUtxos()).filter(e=>!t.has(e.outpoint)&&(!r||e.utxo.status.confirmed)&&e.utxo.value>n);return i.sort((e,t)=>{let r=e.utxo.value-t.utxo.value;return 0!==r?r:e.outpoint.localeCompare(t.outpoint)}),i},lP=async e=>{let t=0n,r=0n,n=e.inputsLength;for(let r=0;r<n;r++){var i;let n=e.getInput(r);(null===(i=n.witnessUtxo)||void 0===i?void 0:i.amount)&&(t+=n.witnessUtxo.amount)}let o=e.outputsLength;for(let t=0;t<o;t++){let n=e.getOutput(t);n.amount&&(r+=n.amount)}return{inputValue:t,outputValue:r}},lk=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:546n;if(t.isFinal)return t.vsize;if(r){let i=new sw.YW({allowUnknownOutputs:!0,allowLegacyWitnessUtxo:!0,allowUnknownInputs:!0});for(let e=0;e<t.inputsLength;e++){let r=t.getInput(e);i.addInput(r)}for(let e=0;e<t.outputsLength;e++){let r=t.getOutput(e);i.addOutput(r)}return e.addOutputAddress(i,r,n),lw(i)}return lw(t)},lx=e=>{let t=new Set,r=e.inputsLength;for(let n=0;n<r;n++){let r=e.getInput(n);if(!r.txid||!r.index&&0!==r.index)throw Error("Invalid input found on transaction at index ".concat(n));let i=lE(lv.from(r.txid).toString("hex"),r.index);t.add(i)}return t},lC=async(e,t,r)=>{let n=[],i=[],o=0;for(let s of e){if(o+s.utxo.value>t){let e=await s.getBundleData(),a=s.address;null==e||e.sat_ranges.forEach(e=>{e.inscriptions.forEach(i=>{let s={id:i.id,offset:o+e.offset-t,fromAddress:a,number:i.inscription_number,contentType:i.content_type};s.offset>=0&&s.offset<r&&n.push(s)})}),null==e||e.sat_ranges.forEach(e=>{if(0===e.satributes.length)return;let n=Math.max(o+e.offset-t,0),s=Math.min(o+e.offset+Number(BigInt(e.range.end)-BigInt(e.range.start))-t,r),u={types:e.satributes,amount:s-n,offset:n,fromAddress:a};u.offset>=0&&u.offset<r&&u.amount>0&&i.push(u)})}if((o+=s.utxo.value)>=t+r)break}return{inscriptions:n,satributes:i}},lR=async(e,t,r,n)=>{let i=await e.getBundleData(),o=(null==i?void 0:i.sat_ranges.filter(e=>e.inscriptions.length>0).flatMap(t=>t.inscriptions.map(r=>({fromAddress:e.address,id:r.id,offset:t.offset,number:r.inscription_number,contentType:r.content_type}))))||[],s=(null==i?void 0:i.sat_ranges.filter(e=>e.satributes.length>0).map(t=>({fromAddress:e.address,offset:t.offset,types:t.satributes,amount:+t.range.end-+t.range.start})))||[];return{extendedUtxo:e,sigHash:n,inscriptions:o,satributes:s,walletWillSign:t,isPayToAnchor:r}};class lB{get address(){return this._address}get outpoint(){return this._outpoint}get utxo(){return this._utxo}get hex(){return this._hex?Promise.resolve(this._hex):this._esploraApiProvider.getTransactionHex(this._utxo.txid).then(e=>{if(e)return this._hex=e,e})}async getUnconfirmedUtxoFeeData(){if(this.utxo.status.confirmed)return{totalVsize:0,totalFee:0};let e=[this.utxo.txid],t=0,r=0;for(;e.length>0;){let n=e.splice(0,10);for(let i of(await Promise.all(n.map(this._esploraApiProvider.getTransaction))))i.status.confirmed||(t+=i.weight/4,r+=i.fee,e.push(...i.vin.map(e=>e.txid)))}return{totalVsize:t,totalFee:r}}async getBundleData(){return await this._utxoCache.getUtxoByOutpoint(this._outpoint,this._address,this._isExternal)}async isEmbellished(){let e=await this.getBundleData();return null==e?void 0:e.sat_ranges.some(e=>e.inscriptions.length>0||e.satributes.length>0)}async hasRunes(){let e=await this.getBundleData();return(null==e?void 0:e.runes)&&e.runes.some(e=>e[1].amount.gt(0))}async getRuneBalance(e){var t,r;let n=await this.getBundleData();if(!n)return;let i=D(e),o=null===(t=n.runes)||void 0===t?void 0:t.find(e=>D(e[0])===i);return S(null!==(r=null==o?void 0:o[1].amount)&&void 0!==r?r:0)}async getRuneBalances(){var e;let t=await this.getBundleData();if(t)return null===(e=t.runes)||void 0===e?void 0:e.reduce((e,t)=>(e[t[0]]=t[1].amount,e),{})}constructor(e,t,r,n,i=!1){this._utxo=e,this._address=t,this._outpoint=lI(e),this._utxoCache=r,this._esploraApiProvider=n,this._isExternal=i}}class lU{get address(){return this._address}get outpoint(){return this._outpoint}get utxo(){return this._utxo}async getUnconfirmedUtxoFeeData(){return{totalVsize:0,totalFee:0}}async getBundleData(){}async isEmbellished(){}async hasRunes(){}async getRuneBalance(e){}async getRuneBalances(){}constructor(e,t){this._utxo=e,this._address=t,this._outpoint=lI(e)}}var lN=r(48764).Buffer;class lD{get type(){return this._type}get address(){return this._address}async getUtxos(){let e=await this._getUtxoMutex.acquire();try{if(!this._utxos){let e=await this._esploraApiProvider.getUnspentUtxos(this._address);this._utxos=e.map(e=>new lB(e,this._address,this._utxoCache,this._esploraApiProvider))}return[...this._utxos]}finally{e()}}async getCommonUtxos(){let e=await this.getUtxos(),t=[];for(let r of e){let e=await r.isEmbellished();e||void 0===e||t.push(r)}return t}async getEmbellishedUtxos(){let e=await this.getUtxos(),t=[];for(let r of e)await r.isEmbellished()&&t.push(r);return t}async getUtxo(e){return(await this.getUtxos()).find(t=>t.outpoint===e)}async getExternalUtxo(e){let[t,r]=e.split(":"),n=await this._esploraApiProvider.getTransaction(t).catch(e=>{if(!oy(e)||!e.response||404!==e.response.status)throw e});if(!n)return;let i=await this._esploraApiProvider.getTransactionOutspends(t);if(!i)return;let o=i[+r];if(null==o?void 0:o.spent)return;let s=n.vout[+r],a=s.scriptpubkey_address;return new lB({txid:t,vout:+r,value:s.value,status:n.status,address:a},a,this._utxoCache,this._esploraApiProvider,!0)}async constructUtxo(e){return new lB({...e,address:this._address},this._address,this._utxoCache,this._esploraApiProvider)}getDerivationParams(){return"account"===this._derivationType?{accountIndex:this._accountIndex,index:0n}:{index:this._accountIndex,accountIndex:0n}}async getPrivateKey(e){let{rootNode:t}=await this._seedVault.getWalletRootNode(e);return t.derive(this.getDerivationPath()).privateKey}getSignIndexes(e,t,r){let n={};if(t.inputsToSign)for(let r of t.inputsToSign)r.address===this._address&&r.signingIndexes.forEach(t=>{if(n[t])throw Error("Duplicate signing index ".concat(t," for address ").concat(this._address));let r=e.getInput(t);n[t]=void 0,void 0!==r.sighashType&&(n[t]=[r.sighashType])});else for(let t=0;t<e.inputsLength;t++){var i,o,s;let a=e.getInput(t),u=l_(null===(i=a.witnessUtxo)||void 0===i?void 0:i.script,r),l=l_(void 0!==a.index&&(null===(s=a.nonWitnessUtxo)||void 0===s?void 0:null===(o=s.outputs[a.index])||void 0===o?void 0:o.script)||void 0,r);(u||l)&&(n[t]=void 0,void 0!==a.sighashType&&(n[t]=[a.sighashType]))}return n}getChangeIndexes(e,t){let r=[];for(let n=0;n<e.outputsLength;n++){let i=e.getOutput(n);l_(null==i?void 0:i.script,t)&&r.push(n)}return r}async prepareInputs(e,t){}constructor(e,t){this._getUtxoMutex=new iJ,this._type=e,this._address=t.address,this._publicKey=t.publicKey,this._network=t.network,this._seedVault=t.seedVault,this._utxoCache=t.utxoCache,this._accountIndex=t.accountIndex,this._derivationType=t.derivationType,this._esploraApiProvider=t.esploraApiProvider}}class lL extends lD{async addInput(e,t,r){let n=t.utxo;e.addInput({txid:n.txid,index:n.vout,witnessUtxo:{script:this._p2sh.script,amount:BigInt(n.value)},redeemScript:this._p2sh.redeemScript,witnessScript:this._p2sh.witnessScript,sequence:(null==r?void 0:r.rbfEnabled)?4294967293:4294967295})}getDerivationPath(){return lr({...this.getDerivationParams(),network:this._network})}getIOSizes(){return{inputSize:91,outputSize:32}}constructor(e){super("p2sh",e);let t=o0.decode(this._publicKey),r=o1.Vi(t,iV(this._network));this._p2sh=o1.my(r,iV(this._network))}}class lH extends lL{async signInputs(e,t){let r=await this.getPrivateKey(this._walletId);for(let[n,i]of Object.entries(this.getSignIndexes(e,t,this._p2sh.script)))e.signIdx(r,+n,i)}constructor(e){super(e),this._walletId=e.walletId}}class lM extends lD{async addInput(e,t,r){let n=t.utxo;e.addInput({txid:n.txid,index:n.vout,witnessUtxo:{script:this._p2wpkh.script,amount:BigInt(n.value)},sequence:(null==r?void 0:r.rbfEnabled)?4294967293:4294967295})}getDerivationPath(){return ln({...this.getDerivationParams(),network:this._network})}getIOSizes(){return{inputSize:68,outputSize:31}}constructor(e){super("p2wpkh",e);let t=o0.decode(this._publicKey);this._p2wpkh=o1.Vi(t,iV(this._network))}}class lF extends lM{async signInputs(e,t){let r=await this.getPrivateKey(this._walletId);for(let[n,i]of Object.entries(this.getSignIndexes(e,t,this._p2wpkh.script)))e.signIdx(r,+n,i)}constructor(e){super(e),this._walletId=e.walletId}}class lj extends lM{async addInput(e,t,r){super.addInput(e,t,r);let n=await t.hex;if(n){let t=lN.from(n,"hex");e.updateInput(e.inputsLength-1,{nonWitnessUtxo:t})}}async prepareInputs(e,t){var r,n;let{ledgerTransport:i}=t;if(!i)throw Error("Transport is required for Ledger signing");let o=null!==(r=this._masterFingerprint)&&void 0!==r?r:await new(sd())(i).getMasterFingerprint(),s=[lN.from(this._publicKey,"hex"),{path:sw.EV(this.getDerivationPath()),fingerprint:parseInt(o,16)}];for(let r of Object.keys(this.getSignIndexes(e,t,this._p2wpkh.script)))null!==(n=e.getInput(+r).bip32Derivation)&&void 0!==n&&n.some(e=>l_(e[0],s[0]))||e.updateInput(+r,{bip32Derivation:[s]})}async signInputs(e,t){var r;if(0===Object.keys(this.getSignIndexes(e,t,this._p2wpkh.script)).length)return;let{ledgerTransport:n}=t;if(!n)throw Error("Transport is required for Ledger signing");let i=new(sd())(n),o=null!==(r=this._masterFingerprint)&&void 0!==r?r:await i.getMasterFingerprint(),s="Mainnet"===this._network?0:1,a=await i.getExtendedPubkey("".concat(tm).concat(s,"'/0'")),u=new sp.DefaultWalletPolicy("wpkh(@0/**)","[".concat(o,"/84'/").concat(s,"'/0']").concat(a)),l=e.toPSBT(0),c=oX.encode(l);for(let t of(await i.signPsbt(c,u,null)))e.updateInput(t[0],{partialSig:[[t[1].pubkey,t[1].signature]]})}constructor(e){super(e),this._masterFingerprint=e.masterFingerprint}}class lV extends lM{async prepareInputs(e,t){var r,n,i;let{keystoneTransport:o}=t;if(!o)throw Error("keystoneTransport is required for Keystone signing");let s=null!==(r=this._masterFingerprint)&&void 0!==r?r:await new(la())(o).getMasterFingerprint(),a=[lN.from(this._publicKey,"hex"),{path:sw.EV(this.getDerivationPath()),fingerprint:parseInt(s,16)}];for(let r of Object.keys(this.getSignIndexes(e,t,this._p2wpkh.script)))null!==(n=e.getInput(+r).bip32Derivation)&&void 0!==n&&n.some(e=>l_(e[0],a[0]))||e.updateInput(+r,{bip32Derivation:[a]});for(let t of this.getChangeIndexes(e,this._p2wpkh.script)){let r=null!==(i=e.getOutput(+t).bip32Derivation)&&void 0!==i?i:[];r.some(e=>l_(e[0],a[0]))||(r.push(a),e.updateOutput(+t,{bip32Derivation:r}))}}async signInputs(e,t){let r=this.getSignIndexes(e,t,this._p2wpkh.script);if(0===Object.keys(r).length)return;let{keystoneTransport:n}=t;if(!n)throw Error("keystoneTransport is required for Keystone signing");let i=new(la())(n),o=e.toPSBT(0),s=oX.encode(o),a=this.cleanPsbtInputSig(s),u=await i.signPsbtRaw(a),l=sw.YW.fromPSBT(oX.decode(u));for(let t of Object.keys(r)){var c,f;let r=l.getInput(+t),n=null===(c=r.partialSig)||void 0===c?void 0:c[0];if(!n)throw Error("Signature not found for input ".concat(t));let i=null!==(f=r.partialSig)&&void 0!==f?f:[];i.push(n),e.updateInput(+t,{partialSig:i})}}cleanPsbtInputSig(e){let t=sw.YW.fromPSBT(oX.decode(e));for(let e=0;e<t.inputsLength;e++)t.updateInput(e,{partialSig:void 0});return oX.encode(t.toPSBT())}constructor(e){super(e),this._masterFingerprint=e.masterFingerprint}}class lK extends lD{async addInput(e,t,r){let n=t.utxo;e.addInput({txid:n.txid,index:n.vout,witnessUtxo:{script:this._p2tr.script,amount:BigInt(n.value)},tapInternalKey:this._p2tr.tapInternalKey,sequence:(null==r?void 0:r.rbfEnabled)?4294967293:4294967295})}getDerivationPath(){return li({...this.getDerivationParams(),network:this._network})}getIOSizes(){return{inputSize:57,outputSize:43}}constructor(e){super("p2tr",e);let t=o0.decode(this._publicKey);try{this._p2tr=o1.Sq(t,void 0,iV(this._network))}catch(e){if(e instanceof Error&&e.message.includes("schnorr"))this._p2tr=o1.Sq(t.slice(1),void 0,iV(this._network));else throw e}}}class lW extends lK{async signInputs(e,t){let r=await this.getPrivateKey(this._walletId),n=(0,lu.Xn)(r);for(let[i,o]of Object.entries(this.getSignIndexes(e,t,this._p2tr.script)))try{e.signIdx(r,+i,o)}catch(t){if("No taproot scripts signed"!==t.message)throw t;try{e.signIdx(n,+i,o)}catch(e){throw t}}}constructor(e){super(e),this._walletId=e.walletId}}class lq extends lK{async prepareInputs(e,t){var r,n;let{ledgerTransport:i}=t;if(!i)throw Error("Transport is required for Ledger signing");let o=null!==(r=this._masterFingerprint)&&void 0!==r?r:await new(sd())(i).getMasterFingerprint(),s=[this._p2tr.tapInternalKey,{hashes:[],der:{path:sw.EV(this.getDerivationPath()),fingerprint:parseInt(o,16)}}];for(let r of Object.keys(this.getSignIndexes(e,t,this._p2tr.script)))null!==(n=e.getInput(+r).bip32Derivation)&&void 0!==n&&n.some(e=>l_(e[0],s[0]))||e.updateInput(+r,{tapBip32Derivation:[s]})}async signInputs(e,t){var r;if(0===Object.keys(this.getSignIndexes(e,t,this._p2tr.script)).length)return;let{ledgerTransport:n}=t;if(!n)throw Error("Transport is required for Ledger signing");let i=new(sd())(n),o=null!==(r=this._masterFingerprint)&&void 0!==r?r:await i.getMasterFingerprint(),s="Mainnet"===this._network?0:1,a=await i.getExtendedPubkey("".concat(tb).concat(s,"'/0'")),u=new sp.DefaultWalletPolicy("tr(@0/**)","[".concat(o,"/86'/").concat(s,"'/0']").concat(a)),l=e.toPSBT(0),c=oX.encode(l);for(let t of(await i.signPsbt(c,u,null)))e.updateInput(t[0],{tapKeySig:t[1].signature})}constructor(e){super(e),this._masterFingerprint=e.masterFingerprint}}class lG extends lK{async prepareInputs(e,t){var r,n,i;let{keystoneTransport:o}=t;if(!o)throw Error("keystoneTransport is required for Keystone signing");let s=null!==(r=this._masterFingerprint)&&void 0!==r?r:await new(la())(o).getMasterFingerprint(),a=[this._p2tr.tapInternalKey,{hashes:[],der:{path:sw.EV(this.getDerivationPath()),fingerprint:parseInt(s,16)}}];for(let r of Object.keys(this.getSignIndexes(e,t,this._p2tr.script)))null!==(n=e.getInput(+r).bip32Derivation)&&void 0!==n&&n.some(e=>l_(e[0],a[0]))||e.updateInput(+r,{tapBip32Derivation:[a]});for(let t of this.getChangeIndexes(e,this._p2tr.script)){let r=null!==(i=e.getOutput(+t).tapBip32Derivation)&&void 0!==i?i:[];r.some(e=>l_(e[0],a[0]))||(r.push(a),e.updateOutput(+t,{tapBip32Derivation:r}))}}async signInputs(e,t){let r=this.getSignIndexes(e,t,this._p2tr.script);if(0===Object.keys(r).length)return;let{keystoneTransport:n}=t;if(!n)throw Error("keystoneTransport is required for Keystone signing");let i=new(la())(n),o=e.toPSBT(0),s=oX.encode(o),a=this.cleanPsbtInputSig(s),u=await i.signPsbtRaw(a),l=sw.YW.fromPSBT(oX.decode(u));for(let t of Object.keys(r)){let r=l.getInput(+t).tapKeySig;if(!r)throw Error("Signature not found for input ".concat(t));e.updateInput(+t,{tapKeySig:r})}}cleanPsbtInputSig(e){let t=sw.YW.fromPSBT(oX.decode(e));for(let e=0;e<t.inputsLength;e++)t.updateInput(e,{partialSig:void 0});return oX.encode(t.toPSBT())}constructor(e){super(e),this._masterFingerprint=e.masterFingerprint}}class l${get paymentAddress(){return this._paymentAddress}get ordinalsAddress(){return this._ordinalsAddress}get changeAddress(){return this._paymentAddress.address}get network(){return this._network}get btcClient(){return this._btcClient}async getUtxo(e){for(let t of this._addressList){let r=await t.getUtxo(e);if(r)return{extendedUtxo:r,addressContext:t}}return{}}async getUtxoFallbackToExternal(e){let t=await this.getUtxo(e);if(t.extendedUtxo)return t;try{return{extendedUtxo:await this.paymentAddress.getExternalUtxo(e)}}catch(e){if(oy(e)&&e.response&&404===e.response.status)return{};throw e}}async getInscriptionUtxo(e){for(let t of this._addressList)for(let r of(await t.getUtxos())){let n=await r.getBundleData();if(null==n?void 0:n.sat_ranges.some(t=>t.inscriptions.some(t=>t.id===e)))return{extendedUtxo:r,addressContext:t}}return{}}addOutputAddress(e,t,r){e.addOutputAddress(t,r,iV(this._network));let n=e.getOutput(e.outputsLength-1);if(!n.script)throw Error("Output script is undefined");return{script:sb.Xf.decode(n.script).map(e=>e instanceof Uint8Array?o0.encode(e):"".concat(e)),scriptHex:o0.encode(n.script)}}async signTransaction(e,t){await this.paymentAddress.prepareInputs(e,t),await this.ordinalsAddress.prepareInputs(e,t),await this.paymentAddress.signInputs(e,t),await this.ordinalsAddress.signInputs(e,t)}async signPsbt(e,t){let r=sw.YW.fromPSBT(lN.from(e,"base64"));await this.signTransaction(r,t);let n=r.toPSBT();return oX.encode(n)}constructor(e,t,r,n){this._paymentAddress=r,this._ordinalsAddress=n,this._addressList=[this._paymentAddress],r!==n&&this._addressList.push(this._ordinalsAddress),this._btcClient=t,this._network=e}}let lz=e=>{let{type:t}=sh(e.address);if("ledger"===e.accountType){if(t===su.p2wpkh)return new lj(e);if(t===su.p2tr)return new lq(e);throw Error("Ledger support for this type of address not implemented: ".concat(t))}if("keystone"===e.accountType){if(t===su.p2wpkh)return new lV(e);if(t===su.p2tr)return new lG(e);throw Error("Keystone support for this type of address not implemented: ".concat(t))}if(!e.accountType||"software"===e.accountType){if(t===su.p2sh)return new lH(e);if(t===su.p2wpkh)return new lF(e);if(t===su.p2tr)return new lW(e)}throw Error("Unsupported payment address type")},lY=e=>{let t,r;let{esploraApiProvider:n,account:i,seedVault:o,utxoCache:s,network:a,btcPaymentAddressType:u,masterFingerprint:l,walletId:c,derivationType:f}=e,h=i.accountType&&"software"!==i.accountType?i.deviceAccountIndex:i.id;if(void 0===h)throw Error("Cannot identify the account index");let p="nested"===u?i.btcAddresses.nested:i.btcAddresses.native;if(!p)throw Error("Payment address not found");let d=i.accountType,y={esploraApiProvider:n,network:a,derivationType:f,accountIndex:h,seedVault:o,utxoCache:s};if("ledger"===d||"keystone"===d)t={...y,address:p.address,publicKey:p.publicKey,accountType:d,masterFingerprint:l},r={...y,address:i.btcAddresses.taproot.address,publicKey:i.btcAddresses.taproot.publicKey,accountType:d,masterFingerprint:l};else if(d&&"software"!==d)throw Error("Unsupported account type");else{if(!c)throw Error("WalletId is required for software account");t={...y,address:p.address,publicKey:p.publicKey,accountType:d,walletId:c},r={...y,address:i.btcAddresses.taproot.address,publicKey:i.btcAddresses.taproot.publicKey,accountType:d,walletId:c}}return new l$(a,n,lz(t),lz(r))},lX=e=>{let t=[],r={};e.forEach(e=>{if("txStatus"in e&&"pending"===e.txStatus)return t.push(e);if("blockTime"in e){let t=tl(new Date(1e3*e.blockTime));r[t]||(r[t]=[]),r[t].push(e)}});let n=[];return Object.values(r).forEach(e=>{0!==e.length&&(e.sort((e,t)=>{let r=t.blockHeight-e.blockHeight;return 0!==r?r:t.id.localeCompare(e.id)}),n.push([new Date(1e3*e[0].blockTime),tu(new Date(1e3*e[0].blockTime)),e]))}),n.sort((e,t)=>t[0].getTime()-e[0].getTime()),t.length>0&&n.unshift([new Date,"Pending",t]),n};var lJ=r(48764).Buffer;class lQ{parseAddressFromOutput(e,t){let r=e.getOutput(t);if(!(null==r?void 0:r.script))throw Error("Output with no script detected in PSBT");let n=o1.n1.decode(r.script),i=iV(this._context.network);if("unknown"===n.type)return{script:sb.Xf.decode(n.script).map(e=>e instanceof Uint8Array?o0.encode(e):"".concat(e)),scriptHex:o0.encode(n.script)};let o=sb.Xf.decode(r.script).map(e=>e instanceof Uint8Array?o0.encode(e):"".concat(e)),s=o0.encode(r.script);return"pk"===n.type?{type:"pk",pubKeys:[o0.encode(n.pubkey)],script:o,scriptHex:s,m:1}:"ms"===n.type||"tr_ms"===n.type?{type:n.type,pubKeys:n.pubkeys.map(e=>o0.encode(e)),script:o,scriptHex:s,m:n.m}:"tr_ns"===n.type?{type:n.type,pubKeys:n.pubkeys.map(e=>o0.encode(e)),script:o,scriptHex:s,m:n.pubkeys.length}:"p2a"===n.type?{type:n.type,pubKeys:[],script:o,scriptHex:s,m:0}:{address:o1.kL(i).encode(n),script:o,scriptHex:s}}getTxId(){let e=sw.YW.fromPSBT(this._psbt);if(e.isFinal)return e.id;for(let t=0;t<e.inputsLength;t++){let r=e.getInput(t);if(!r.witnessUtxo)return;let n=o1.n1.decode(r.witnessUtxo.script);if(!n||!new Set(["wsh","wpkh","tr","tr_ns","tr_ms"]).has(n.type))return}return o0.encode(uN(uN(lc.P6.concatBytes(e.toBytes(!1)))).reverse())}async _extractInputMetadata(e,t){var r,n,i,o;let s=[],a=null!==(r=this._isSigHashAll)&&void 0!==r&&r,u=null!==(n=this._hasSigHashNone)&&void 0!==n&&n,l=null!==(i=this._hasSigHashSingle)&&void 0!==i&&i,c=0;for(let r=0;r<e.inputsLength;r++){let n=e.getInput(r);if(!n.txid)throw Error("Incomplete input detected at index ".concat(r));let i=o0.encode(n.txid),f=await this._getExtendedUtxoForInput(n,i,t);if(!f)throw Error("Could not parse input ".concat(r));let h=(null===(o=n.witnessUtxo)||void 0===o?void 0:o.script)&&o0.encode(n.witnessUtxo.script)===tw||!1,p=n.sighashType;if(s.push({extendedUtxo:f,sigHash:p,isPayToAnchor:h}),c+=f.utxo.value||0,!this._inputsToSignMap||r in this._inputsToSignMap){let e=(p&&p&sw.cm.SINGLE)===sw.cm.SINGLE;a=a||!e&&(void 0===p||p===sw.cm.DEFAULT||(p&sw.cm.ALL)===sw.cm.ALL),u=u||!e&&(p&&p&sw.cm.NONE)===sw.cm.NONE,l=l||e}}return{inputs:s,isSigHashAll:a,hasSigHashNone:u,hasSigHashSingle:l,inputTotal:c}}async getSummary(e){let t,r;let n=sw.YW.fromPSBT(this._psbt),{inputs:i,inputTotal:o,isSigHashAll:s,hasSigHashNone:a,hasSigHashSingle:u}=await this._extractInputMetadata(n,null==e?void 0:e.knownEmptyTxids),l=[],c=!1,f=0,h=0,p=i.map(e=>e.extendedUtxo);for(let e=0;e<n.outputsLength;e++){let t=this.parseAddressFromOutput(n,e),r=n.getOutput(e);if(void 0===t.type&&void 0===t.address){let e=r.amount?Number(r.amount):0;l.push({type:"script",script:t.script,scriptHex:t.scriptHex,amount:e}),c=!0,f+=e,h+=e;continue}let i=Number(r.amount),o=[],a=[];if(s&&iK(this._context.network)){let e=await lC(p,h,i);o=e.inscriptions,a=e.satributes}void 0!==t.address?l.push({type:"address",address:t.address,script:t.script,scriptHex:t.scriptHex,amount:Number(i),inscriptions:o,satributes:a}):l.push({type:t.type,script:t.script,scriptHex:t.scriptHex,pubKeys:t.pubKeys,amount:Number(i),inscriptions:o,satributes:a,m:t.m}),f+=i,h+=Number(i)}let d=s?o-f:void 0;if(d){let{inscriptions:e,satributes:r}=await lC(p,h,d);t={type:"fee",amount:d,inscriptions:e,satributes:r}}let y=await Promise.all(i.map((e,t)=>lR(e.extendedUtxo,!this._inputsToSignMap||t in this._inputsToSignMap,e.isPayToAnchor,e.sigHash))),g=or(this._context.network),m=c?await g.getDecodedRuneScript(n.hex):void 0,b=s;if(b&&t)try{let e=lw(n);r=t.amount/e}catch(e){}return{inputs:y,outputs:l,feeOutput:t,hasSigHashNone:a,hasSigHashSingle:u,isFinal:b,runeOp:m,feeRate:r}}async getSignedPsbtBase64(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=sw.YW.fromPSBT(this._psbt,{allowUnknownInputs:!0,allowUnknownOutputs:!0}),r=!1;if(e.ledgerTransport){let{inputValue:e,outputValue:n}=await lP(t);e<n&&(t.addInput({txid:"0000000000000000000000000000000000000000000000000000000000000000",index:0,witnessUtxo:{script:lJ.alloc(0),amount:n-e}}),r=!0)}return await this._context.signTransaction(t,{...e,inputsToSign:this._inputsToSign}),r&&t.inputs.pop(),e.finalize&&t.finalize(),oX.encode(t.toPSBT())}constructor(e,t,r){this._getExtendedUtxoForInput=async(e,t,r)=>{var n;if(!(null==r?void 0:r.includes(t))){let r=await this._context.getUtxoFallbackToExternal("".concat(t,":").concat(e.index));if(r&&r.extendedUtxo)return r.extendedUtxo}return new lU({txid:t,vout:e.index,value:Number(null===(n=e.witnessUtxo)||void 0===n?void 0:n.amount)||0,status:{confirmed:!1},address:""},"")},this._context=e,this._psbt=oX.decode(t),this._inputsToSign=r;let n=sw.YW.fromPSBT(this._psbt);if(r){this._inputsToSignMap={};let e=!1,t=!1,o=!1;for(let s of r)for(let r of s.signingIndexes){var i;this._inputsToSignMap[r]||(this._inputsToSignMap[r]=[]),this._inputsToSignMap[r].push({address:s.address});let a=null!==(i=n.getInput(r).sighashType)&&void 0!==i?i:sw.cm.DEFAULT;if((a&sw.cm.SINGLE)===sw.cm.SINGLE){t=!0;continue}if(a===sw.cm.DEFAULT||(a&sw.cm.ALL)===sw.cm.ALL){o=!0;continue}(a&sw.cm.NONE)===sw.cm.NONE&&(e=!0)}this._isSigHashAll=o,this._hasSigHashNone=e,this._hasSigHashSingle=t}}}let lZ=546,l0=async(e,t)=>{let r=[];for(let n of t){let{script:t}=n,i=0n,o=t instanceof Uint8Array?sb.Xf.decode(t):t,s=t instanceof Uint8Array?t:sb.Xf.encode(t);e.addOutput({script:s,amount:i}),r.push({type:"script",script:o.map(e=>e instanceof Uint8Array?o0.encode(e):"".concat(e)),scriptHex:o0.encode(s),amount:Number(i)})}return{outputs:r}},l1=async(e,t,r,n,i)=>{let o=lx(r),s=[],a=[];for(let[l,[c,f]]of Object.entries(i.reduce((e,t)=>{let{toAddress:r}=t;e[r]||(e[r]=[[],[]]);let[n,i]=e[r];return t.combinable?e[r]=[n,[...i,t]]:e[r]=[[...n,t],i],e},{})))for(let i of[...c.map(e=>[e]),f]){let c=0;for(let a of i){var u;if(null===(u=n.excludeOutpointList)||void 0===u?void 0:u.includes(a.outpoint))throw Error("UTXO excluded but used in send UTXO action: ".concat(a.outpoint));let{extendedUtxo:i,addressContext:l}=await e.getUtxo(a.outpoint);if(!i||!l)throw Error("UTXO not found: ".concat(a.outpoint));if(o.has(a.outpoint))throw Error("UTXO already used: ".concat(a.outpoint));await l.addInput(r,i,t),s.push(i),o.add(a.outpoint),c+=i.utxo.value}if(c>0){let{script:t,scriptHex:n}=e.addOutputAddress(r,l,BigInt(c));a.push({type:"address",amount:c,address:l,script:t,scriptHex:n})}}return{inputs:s,outputs:a}},l2=async(e,t,r,n,i)=>{let o=lx(r),s=[],a=[],u=Object.entries(i.reduce((e,t)=>{let{location:r}=t,n=lS(r);if(o.has(n))throw Error("UTXO already used: ".concat(n));return n in e||(e[n]=[]),e[n].push(t),e},{}));u.forEach(e=>{let[,t]=e;t.sort((e,t)=>lT(e.location)-lT(t.location))}),u.sort((e,t)=>{let[,r]=e,[,n]=t,i=r[r.length-1].spendable,o=n[n.length-1].spendable;return i&&!o?1:o&&!i?-1:0});for(let i=0;i<u.length;i++){var l;let[o,c]=u[i];if(null===(l=n.excludeOutpointList)||void 0===l?void 0:l.includes(o))throw Error("UTXO excluded but used in split UTXO action: ".concat(o));let{extendedUtxo:f,addressContext:h}=await e.getUtxo(o);if(!f||!h)throw Error("UTXO for outpoint not found: ".concat(o));await h.addInput(r,f,t),s.push(f);for(let t=0;t<c.length;t++){let n=c[t],{location:o}=n,s=lT(o);if(s<0)throw Error("Cannot split offset ".concat(s," on  ").concat(f.outpoint," as it is negative"));if(0===t&&s>0){if(s<lZ)throw Error("Cannot split offset ".concat(s," on  ").concat(f.outpoint," as it the first output would be below dust"));let{script:t,scriptHex:n}=e.addOutputAddress(r,f.utxo.address,BigInt(s));a.push({type:"address",amount:s,address:f.utxo.address,script:t,scriptHex:n})}let l=c[t+1];if(!(!l&&!u[i+1])||!n.spendable){let t=l?lT(l.location):f.utxo.value;if(t-s<lZ)throw Error("Cannot split offset ".concat(s," on  ").concat(f.outpoint," as there are not enough sats"));let i=n.spendable?f.utxo.address:n.toAddress,{script:o,scriptHex:u}=e.addOutputAddress(r,i,BigInt(t-s));a.push({type:"address",amount:t-s,address:i,script:o,scriptHex:u})}}}return{inputs:s,outputs:a}},l3=async(e,t,r,n,i,o)=>{var s,a,u,l,c;let f=n.overrideChangeAddress,h=lx(r),p=[],d=[],y={};for(let e of i){let{amount:t,combinable:r,toAddress:n}=e;y[n]||(y[n]={combinableAmount:0n,individualAmounts:[]}),r?y[n].combinableAmount+=t:y[n].individualAmounts.push(t)}for(let i of null!==(s=n.forceIncludeOutpointList)&&void 0!==s?s:[]){if(h.has(i))continue;let n=await e.getUtxo(i);if(!n.addressContext||!n.extendedUtxo)throw Error("Pinned UTXO not found: ".concat(i));await n.addressContext.addInput(r,n.extendedUtxo,t),h.add(i),p.push(n.extendedUtxo)}for(let[t,{combinableAmount:n,individualAmounts:i}]of Object.entries(y))for(let o of[n,...i]){if(0n===o)continue;let{script:n,scriptHex:i}=e.addOutputAddress(r,t,o);d.push({type:"address",amount:Number(o),address:t,script:n,scriptHex:i})}let{inputValue:g,outputValue:m}=await lP(r),b=g,{inputSize:w}=e.paymentAddress.getIOSizes(),v=w*o,_=!1,E=0n,S=0,T=0;if(n.useEffectiveFeeRate)for(let t of h){let r=await e.getUtxo(t);if(!r.extendedUtxo||null===(u=null===(a=r.extendedUtxo)||void 0===a?void 0:a.utxo.status.confirmed)||void 0===u||u)continue;let{totalVsize:n,totalFee:i}=await r.extendedUtxo.getUnconfirmedUtxoFeeData();S+=n,T+=i}let I=o,A=o,O=await lO(e,new Set([...null!==(l=n.excludeOutpointList)&&void 0!==l?l:[],...h]),!0,v),P=!1;if(O.length){let n=b+O.reduce((e,t)=>e+BigInt(t.utxo.value),0n),i=r.clone();for(let r of O)await e.paymentAddress.addInput(i,r,t);P=n-(m+BigInt(lk(e,i,null!=f?f:e.changeAddress)*o))>=0n}P||!1===n.allowUnconfirmedInput||(O=await lO(e,new Set([...null!==(c=n.excludeOutpointList)&&void 0!==c?c:[],...h]),!1,v));let k=lk(e,r),x=r.inputsLength;for(;!_;){let i=b-m;if((k+(r.inputsLength-x)*w+S)*o-T<i){let t=lk(e,r,null!=f?f:e.changeAddress);if(t){let n=BigInt((t+S)*o-T);if(n<i&&i-n>lZ){let s=lk(e,r,null!=f?f:e.changeAddress,i-n),a=Math.max(null!=s?s:t,t);if(a){I=Number(E=BigInt((a+S)*o-T))/a,A=(Number(E)+T)/(a+S);let t=i-E,{script:n,scriptHex:s}=e.addOutputAddress(r,null!=f?f:e.changeAddress,t);d.push({type:"address",amount:Number(t),address:null!=f?f:e.changeAddress,script:n,scriptHex:s}),_=!0;break}}}if(r.outputsLength>0){let t=lk(e,r);if(t&&BigInt(t*o)<=i){I=Number(E=i)/t,A=(Number(E)+T)/(t+S),_=!0;break}}}let s=O.pop();if(!s)throw Error("No more UTXOs to use. Insufficient funds for this transaction");if(n.useEffectiveFeeRate){let{totalVsize:e,totalFee:t}=await s.getUnconfirmedUtxoFeeData();S+=e,T+=t}b+=BigInt(s.utxo.value),await e.paymentAddress.addInput(r,s,t),p.push(s)}return{actualFeeRate:I,effectiveFeeRate:n.useEffectiveFeeRate?A:void 0,actualFee:E,inputs:p,outputs:d,dustValue:BigInt(v)}},l4={rbfEnabled:!1},l5=e=>({...l4,...e}),l8={excludeOutpointList:[],useEffectiveFeeRate:!1,allowUnconfirmedInput:!0};class l6{get feeRate(){return this._feeRate}get options(){var e;return{...this._options,excludeOutpointList:[...null!==(e=this._options.excludeOutpointList)&&void 0!==e?e:[]]}}async compile(e){let t={PSBTVersion:2};this._options.allowUnknownInputs&&(t.allowUnknownInputs=!0),this._options.allowUnknownOutputs&&(t.allowUnknownOutputs=!0);let r=new sw.YW(t),{outputs:n}=await l0(r,this._actions[h.SCRIPT]),{inputs:i,outputs:o}=await l1(this._context,e,r,this._options,this._actions[h.SEND_UTXO]),{inputs:s,outputs:a}=await l2(this._context,e,r,this._options,this._actions[h.SPLIT_UTXO]),{actualFee:u,actualFeeRate:l,effectiveFeeRate:c,inputs:f,outputs:p,dustValue:d}=await l3(this._context,e,r,this._options,this._actions[h.SEND_BTC],this._feeRate),y=[...i,...s,...f],g=[...o,...a,...p,{type:"address",address:"",script:[],scriptHex:"",amount:Number(u)}],m=[],b=0;for(let e of g){let t=e.amount,r=[],n=[];if(iK(this._context.network)){let e=await lC(y,b,t);r=e.inscriptions,n=e.satributes}let i={...e,inscriptions:r,satributes:n};m.push(i),b+=Number(t)}let w=or(this._context.network),v=n.length>0?await w.getDecodedRuneScript(r.hex):void 0,{address:_,script:E,scriptHex:S,...T}=m.pop();return{actualFee:u,actualFeeRate:l,effectiveFeeRate:c,transaction:r,inputs:await Promise.all(y.map(e=>lR(e,!0,!1,sw.cm.ALL))),outputs:[...n,...m],feeOutput:{...T,type:"fee"},runeOp:v,dustValue:d}}async getSummary(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{actualFee:t,actualFeeRate:r,effectiveFeeRate:n,transaction:i,inputs:o,outputs:s,feeOutput:a,runeOp:u,dustValue:l}=await this.compile(l5(e));return{fee:t,feeRate:r,effectiveFeeRate:n,vsize:lk(this._context,i),inputs:o,outputs:s,feeOutput:a,runeOp:u,dustValue:l}}async getTransactionHexAndId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{transaction:t}=await this.compile(l5(e));return await this._context.signTransaction(t,e),t.finalize(),{hex:t.hex,id:t.id}}async broadcast(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{hex:t,id:r}=await this.getTransactionHexAndId(e);return await this._context.btcClient.sendRawTransaction(t),r}constructor(e,t,r,n){var i;if(this._context=e,this._feeRate=r,this._options={...l8,...n},!t.length&&!(null===(i=this._options.forceIncludeOutpointList)||void 0===i?void 0:i.length))throw Error("No actions provided for transaction context");this._actions=lA(t)}}let l7=1e4,l9=1500,ce=546,ct=async function(e,t,r){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=arguments.length>4?arguments[4]:void 0,o=await e.paymentAddress.getUtxos(),s=!1;if(0===o.length)throw Error("No utxos found");if(n){let t=new l6(e,[],r,{...i,forceIncludeOutpointList:[o[0].outpoint]}),{dustValue:n}=await t.getSummary(),a=o.filter(e=>e.utxo.value>n);if(s=a.length!==o.length,0===(o=a).length)throw Error("All UTXOs are dust")}let a=o.map(e=>e.outpoint);return{transaction:new l6(e,[],r,{...i,forceIncludeOutpointList:a,overrideChangeAddress:t}),dustFiltered:s}},cr=async(e,t,r,n,i)=>new l6(e,t.map(e=>({type:h.SEND_UTXO,combinable:!0,outpoint:e,toAddress:r})),n,i),cn=async(e,t,r,n)=>new l6(e,t.map(e=>{let{toAddress:t,amount:r}=e;return{type:h.SEND_BTC,toAddress:t,amount:r,combinable:!1}}),r,n),ci=async(e,t,r,n)=>{if(0===t.length)throw Error("Must provide at least 1 recipient");let i=(await Promise.all(t.map(async t=>{if("outpoint"in t)return t;let r=await e.getInscriptionUtxo(t.inscriptionId);if(!r.extendedUtxo)throw Error("No utxo found for inscription");return{toAddress:t.toAddress,outpoint:r.extendedUtxo.outpoint}}))).map(e=>{let{toAddress:t,outpoint:r}=e;return{type:h.SEND_UTXO,toAddress:t,outpoint:r,combinable:!1,spendable:!1}});return new l6(e,i,r,n)},co=async(e,t,r,n)=>{if(0===t.length)throw Error("Must provide at least 1 recipient");let i=(await Promise.all(t.map(async t=>{if("location"in t)return t;let r=await e.getInscriptionUtxo(t.inscriptionId);if(!r.extendedUtxo)throw Error("No utxo found for inscription");let n=await r.extendedUtxo.getBundleData(),i=null==n?void 0:n.sat_ranges.find(e=>e.inscriptions.some(e=>e.id===t.inscriptionId));if(!i)throw Error("No inscription found in utxo");return{toAddress:t.toAddress,location:"".concat(r.extendedUtxo.outpoint,":").concat(i.offset)}}))).reduce((e,t)=>{let{location:r,toAddress:n}=t,[i,o,s]=r.split(":"),a="".concat(i,":").concat(o),u=+s;return e[a]||(e[a]=[]),e[a].push({toAddress:n,offset:u,location:r}),e[a].sort((e,t)=>e.offset-t.offset),e},{}),o=[];for(let[t,r]of Object.entries(i)){let{extendedUtxo:n}=await e.getUtxo(t);if(!n)throw Error("No utxo found for outpoint ".concat(t));if(1===r.length&&n.utxo.value<=l7+ce){o.push({type:h.SEND_UTXO,toAddress:r[0].toAddress,outpoint:t});continue}r.sort((e,t)=>e.offset-t.offset);let i=r.map(e=>({...e,min:e.offset,max:Math.min(n.utxo.value,e.offset+ce)}));for(let e=i.length-1;e>=0;e--){let t=i[e],r=0===e?void 0:i[e-1];if(t.max<t.offset)throw Error("Cannot split utxo, desired offsets interfere with each other");if(r)t.min=Math.min(t.max-ce,t.offset),t.min<r.max&&(r.max=t.min);else{if(t.min=t.max-ce,t.min<0)throw Error("Cannot split utxo, desired offsets interfere with each other");t.min<l9&&(t.min=0,t.max=Math.min(t.max,l9))}}for(let e=0;e<i.length;e++){let{toAddress:r,min:s,max:a}=i[e],u=e===i.length-1?void 0:i[e+1];o.push({type:h.SPLIT_UTXO,location:"".concat(t,":").concat(s),toAddress:r}),u?u.min-a>l9&&o.push({type:h.SPLIT_UTXO,location:"".concat(t,":").concat(a),toAddress:n.utxo.address}):n.utxo.value-a>l9&&o.push({type:h.SPLIT_UTXO,location:"".concat(t,":").concat(a),toAddress:n.utxo.address})}}return new l6(e,o,r,n)},cs=async(e,t,r,n)=>{let i=await e.getUtxo(t);if(!(null==i?void 0:i.extendedUtxo))throw Error("No utxo found for outpoint");let o=await i.extendedUtxo.getBundleData();if(!o)throw Error("UTXO is not yet indexed");let s=null==o?void 0:o.sat_ranges.map(t=>{var r;return{toAddress:e.ordinalsAddress.address,location:(null===(r=i.extendedUtxo)||void 0===r?void 0:r.outpoint)+":"+t.offset}});return co(e,s,r,n)},ca=async(e,t,r,n)=>{if(e.paymentAddress.address===e.ordinalsAddress.address)throw Error("Cannot recover bitcoin to same address");if(r){if(!await e.ordinalsAddress.getUtxo(r))throw Error("No utxo in ordinals address found to recover");return new l6(e,[],t,{...n,forceIncludeOutpointList:[r]})}let i=(await e.ordinalsAddress.getCommonUtxos()).filter(e=>e.utxo.status.confirmed);if(0===i.length)throw Error("No non-ordinal utxos found to recover");let o=i.map(e=>e.outpoint);return new l6(e,[],t,{...n,forceIncludeOutpointList:o})},cu=async(e,t,r,n)=>{if(e.paymentAddress.address===e.ordinalsAddress.address)throw Error("Cannot recover ordinals to same address");if(r){if(!await e.paymentAddress.getUtxo(r))throw Error("No utxo in payments address found to recover");return new l6(e,[{type:h.SEND_UTXO,toAddress:e.ordinalsAddress.address,outpoint:r}],t,n)}let i=await e.paymentAddress.getEmbellishedUtxos();if(0===i.length)throw Error("No ordinal utxos found to recover");let o=await Promise.all(i.map(async t=>{let r=await t.getBundleData();if(!(null==r?void 0:r.sat_ranges))return[];let n=r.sat_ranges.map(r=>({type:h.SPLIT_UTXO,location:t.outpoint+":"+r.offset,toAddress:e.ordinalsAddress.address}));return r.sat_ranges[r.sat_ranges.length-1].offset+l9<t.utxo.value&&n.push({type:h.SPLIT_UTXO,location:t.outpoint+":"+(r.sat_ranges[r.sat_ranges.length-1].offset+ce),spendable:!0}),n}));return new l6(e,o.flat(),t,n)};!function(e){e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.FAILED_TO_FINALIZE="FAILED_TO_FINALIZE",e.UTXOS_MISSING="UTXOS_MISSING",e.INVALID_TICK="INVALID_TICK",e.INVALID_AMOUNT="INVALID_AMOUNT",e.INVALID_FEE_RATE="INVALID_FEE_RATE",e.SERVER_ERROR="SERVER_ERROR",e.USER_REJECTED="USER_REJECTED",e.DEVICE_LOCKED="DEVICE_LOCKED",e.GENERAL_HARDWARE_WALLET_ERROR="GENERAL_HARDWARE_WALLET_ERROR"}(p||(p={})),function(e){e.CreatingInscriptionOrder="CreatingInscriptionOrder",e.CreatingCommitTransaction="CreatingCommitTransaction",e.ExecutingInscriptionOrder="ExecutingInscriptionOrder",e.CreatingTransferTransaction="CreatingTransferTransaction",e.Finalizing="Finalizing"}(d||(d={})),function(e){e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.INVALID_FEE_RATE="INVALID_FEE_RATE",e.INVALID_SERVICE_FEE_CONFIG="INVALID_SERVICE_FEE_CONFIG",e.INVALID_CONTENT="INVALID_CONTENT",e.CONTENT_TOO_BIG="CONTENT_TOO_BIG",e.INSCRIPTION_VALUE_TOO_LOW="INSCRIPTION_VALUE_TOO_LOW",e.NO_NON_ORDINAL_UTXOS="NO_NON_ORDINAL_UTXOS",e.FAILED_TO_FINALIZE="FAILED_TO_FINALIZE",e.SERVER_ERROR="SERVER_ERROR",e.USER_REJECTED="USER_REJECTED",e.DEVICE_LOCKED="DEVICE_LOCKED",e.GENERAL_HARDWARE_WALLET_ERROR="GENERAL_HARDWARE_WALLET_ERROR"}(y||(y={})),r(48764).Buffer;let cl=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(r>30)throw Error("Too many chained transactions");let n=await e.getTransaction(t);if(!n||n.status.confirmed)throw Error("Invalid transaction for RBF detected.");let i=n.weight/4,o=n.weight/4,s=n.fee,a=await e.getTransactionOutspends(t);if(!a)throw Error("Could not retrieve outspends for transaction.");for(let t of a){if(!t.spent)continue;let n=t.txid,{totalVSize:i,fee:a}=await cl(e,n,r+1);o+=i,s+=a}return{transactionVSize:i,totalVSize:o,fee:s}};function cc(e,t){return e&&t?"multi":t?"receive":"send"}r(48764).Buffer;let cf=(e,t)=>e.type!==t.type?"nft"===e.type?1:-1:("ft"===e.type||"stx"===e.type)&&("ft"===t.type||"stx"===t.type)?Number(t.data.amount)-Number(e.data.amount):0,ch=(e,t)=>{var r;let n=0,i=e.events.sort(cf),o={...e,aggregated:{directionType:"send",viewerAddress:t,originalEvents:e.events,assetEvents:[],sendEvents:[],receiveEvents:[]}};for(let e=0;e<i.length;e+=1){let r=i[e],s=r.data.recipient===t;if("stx"===r.type){let e=Number(r.data.amount);n+=s?e:-e}if("nft"===r.type&&o.aggregated.assetEvents.push(r),"ft"===r.type){if("transfer"===r.data.type){let e=o.aggregated.assetEvents.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.asset_identifier)===r.data.asset_identifier});if(e){let n=e.data.recipient===t,i=Number(e.data.amount)*(n?1:-1)+Number(r.data.amount)*(s?1:-1);e.data.amount=String(Math.abs(i)),e.data.sender=i<0?t:"",e.data.recipient=i>0?t:""}else o.aggregated.assetEvents.push(r)}"mint"===r.data.type&&o.aggregated.assetEvents.push(r),"burn"===r.data.type&&o.aggregated.assetEvents.push(r)}}1===o.events.length&&(null===(r=o.events[0])||void 0===r?void 0:r.type)==="stx"?o.aggregated.assetEvents.push(o.events[0]):0!==n&&o.aggregated.assetEvents.push({event_index:9999,type:"stx",data:{type:"transfer",amount:Math.abs(n).toString(),recipient:n>0?t:"",sender:n<0?t:""}});let s=o.aggregated.assetEvents.some(e=>e.data.sender===t),a=o.aggregated.assetEvents.some(e=>e.data.recipient===t);return o.aggregated.directionType=cc(s,a),o.aggregated.receiveEvents=o.aggregated.assetEvents.filter(e=>e.data.recipient===t),o.aggregated.sendEvents=o.aggregated.assetEvents.filter(e=>e.data.sender===t),o},cp=e=>new Date((null==e?void 0:e.block_time_iso)||(null==e?void 0:e.burn_block_time_iso)||""),cd=e=>{let t=[];return"token_transfer"===e.tx_type&&t.push({type:"stx",event_index:0,data:{type:"transfer",amount:e.token_transfer.amount,recipient:e.token_transfer.recipient_address,sender:e.sender_address}}),{tx:e,stx_sent:"0",stx_received:"0",events:t}},cy=e=>{let t=cd(e);return{type:"stacks",data:t,events:t.events}},cg=e=>{let t=[],r=[],n={};return e.forEach(e=>{var t,i,o;if((null===(i=e.data)||void 0===i?void 0:null===(t=i.tx)||void 0===t?void 0:t.tx_status)==="pending")return r.push(e);let s=tl(cp(null===(o=e.data)||void 0===o?void 0:o.tx));n[s]||(n[s]=[]),n[s].push(e)}),Object.keys(n).forEach(e=>{let r=n[e];r.sort((e,t)=>{var r,n,i,o;let s=cp(null===(r=e.data)||void 0===r?void 0:r.tx),a=cp(null===(n=t.data)||void 0===n?void 0:n.tx).getTime()-s.getTime();return 0!==a?a:null===(o=t.data)||void 0===o?void 0:o.tx.tx_id.localeCompare(null===(i=t.data)||void 0===i?void 0:i.tx.tx_id)}),t.push({title:e,data:r})}),t.sort((e,t)=>new Date(t.title).getTime()-new Date(e.title).getTime()),r.length>0&&t.unshift({title:"Pending",data:r}),t},cm=(e,t)=>e.filter(e=>e.events.some(e=>{if("stx"===e.type)return!t;if("ft"===e.type){var r,n;return(null===(n=e.data)||void 0===n?void 0:null===(r=n.asset_identifier)||void 0===r?void 0:r.split("::")[0])===t}return!1})),cb=e=>{if("bitcoin"===e.type)return new Date(1e3*e.data.blockTime);if("stacks"===e.type){let t=e.data.tx;return new Date(t.block_time_iso||t.receipt_time_iso)}return new Date(e.data.blockTimestamp)},cw=e=>"bitcoin"===e.type?e.data.id:"stacks"===e.type?e.data.tx.tx_id:e.data.transactionHash,cv=e=>{let t=[],r={};e.forEach(e=>{let n="txStatus"in e&&"pending"===e.txStatus,i="type"in e&&"stacks"===e.type&&"pending"===e.data.tx.tx_status;if(n||i)return t.push(e);if("type"in e&&e.data){let t=tl(cb(e));r[t]||(r[t]=[]),r[t].push(e)}});let n=[];return Object.values(r).forEach(e=>{0!==e.length&&(e.sort((e,t)=>{let r=cb(e),n=cb(t).getTime()-r.getTime();if(0!==n)return n;let i=cw(e);return cw(t).localeCompare(i)}),n.push([new Date(cb(e[0])),tu(cb(e[0])),e]))}),n.sort((e,t)=>t[0].getTime()-e[0].getTime()),t.length>0&&n.unshift([new Date,"Pending",t]),n};r(48764).Buffer,oQ(uN),r(48764).Buffer,r(48764).Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),function(e){e.NO_PUBLIC_KEY="No public key returned from Ledger device"}(g||(g={}));let c_=e=>e,cE="accountBalances",cS={getAccountStorageKey:(e,t)=>e?"".concat(e.masterPubKey,"-").concat(e.accountType,"-").concat(e.id,"-").concat(t):""},cT=c_({name:cE,defaultValue:{},activeVersion:0,migrate:{},options:{resettable:!0},createMutators:e=>({setAccountBalance:async(t,r,n)=>{await e.updateStoreValue(cE,{[cS.getAccountStorageKey(t,r)]:n.toString()})},setKeyBalance:async(t,r)=>{await e.updateStoreValue(cE,{[t]:r.toString()})},reset:async()=>{await e.resetStoreValue(cE)}}),utils:cS}),cI="activeAccount",cA=c_({name:cI,defaultValue:{selectedAccountIndex:0,selectedAccountType:"software",selectedWalletId:void 0,btcPaymentAddressType:"native",network:tO},activeVersion:0,migrate:{},createMutators:e=>({setSelectedAccount:async t=>{await e.updateStoreValue(cI,{selectedAccountIndex:t.id,selectedAccountType:t.accountType,selectedWalletId:t.walletId})},setBtcPaymentAddressType:async t=>{await e.updateStoreValue(cI,{btcPaymentAddressType:t})},setNetwork:async t=>{await e.updateStoreValue(cI,{network:t})}}),utils:{}}),cO="walletOptions",cP=c_({name:cO,defaultValue:{balanceHidden:!1,showBalanceInBtc:!1,hasBackedUpWallet:!1,hideStx:!1,hasActivatedOrdinalsKey:!1,hasActivatedRareSatsKey:!1,hasActivatedRBFKey:!1,rareSatsNoticeDismissed:!1,showDataCollectionAlert:!0},activeVersion:0,migrate:{},createMutators:e=>({updateOptions:async t=>{await e.updateStoreValue(cO,t)}}),utils:{}});cT.name,cP.name,cA.name,r(27701),r(42474);let ck=e=>{let{stxBalance:t,btcBalance:r,sipCoinsList:n,brcCoinsList:i,runesCoinList:o,stxBtcRate:s,btcFiatRate:a,hideStx:u,starknetCoinList:l}=e,c=new S(0);if(t&&!u){let e=F(new S(t)).multipliedBy(new S(s)).multipliedBy(new S(a));c=c.plus(e)}if(r){let e=H(new S(r)).multipliedBy(new S(a));c=c.plus(e)}return n&&(c=n.reduce((e,t)=>{if(t.isEnabled&&t.tokenFiatRate&&t.decimals){let r=new S(10).exponentiatedBy(new S(t.decimals)),n=new S(t.balance).dividedBy(r).multipliedBy(new S(t.tokenFiatRate));return e.plus(n)}return e},c)),i&&(c=i.reduce((e,t)=>{if(t.isEnabled&&t.tokenFiatRate){let r=new S(t.balance).multipliedBy(new S(t.tokenFiatRate));return e.plus(r)}return e},c)),o&&(c=o.reduce((e,t)=>{if(t.isEnabled&&t.tokenFiatRate){let r=new S(i2(t)).multipliedBy(new S(t.tokenFiatRate));return e.plus(r)}return e},c)),l&&(c=l.reduce((e,t)=>{if(t.isEnabled&&t.tokenFiatRate){let r=new S(i2(t)).multipliedBy(new S(t.tokenFiatRate));return e.plus(r)}return e},c)),c.toNumber().toFixed(2)};var cx=r(77446);let cC=cx.Ryn({name:cx.Z_8(),description:cx.bUp("type",[cx.Ryn({type:cx.i0J("single"),value:cx.Z_8()}),cx.Ryn({type:cx.i0J("multiple"),values:cx.IXX(cx.Z_8())})])}),cR="AccountId",cB=cx.zGw(cx.Z_8(),cx.UQe(cR)),cU=/^[\da-f]{64}$/,cN=cx.zGw(cx.Z_8(),cx.BF5(e=>cU.test(e)),cx.UQe("AccountResourceId")),cD=cx.Ryn({type:cx.i0J("account"),id:cN,accountId:cB,name:cx.Z_8()}),cL=cx.Ryn({read:cx.jtO(cx.O72())});cx.IMB(cx.mMf(cL),cC);let cH=cx.Ryn({type:cx.i0J("account"),resourceId:cN,clientId:cx.Z_8(),actions:cL}),cM=cx.Ryn({type:cx.i0J("wallet"),id:cx.i0J("wallet"),name:cx.i0J("Wallet")}),cF=cx.Ryn({readNetwork:cx.jtO(cx.O72())});cx.IMB(cx.mMf(cF),cC);let cj=cx.i0J("wallet"),cV=cx.Ryn({type:cx.i0J("wallet"),resourceId:cj,clientId:cx.Z_8(),actions:cF}),cK=cx.zGw(cx.Z_8(),cx.HQ2(),cx.vs(e=>new URL(e).origin),cx.UQe("ClientId")),cW=cx.Ryn({id:cK,origin:cx.Z_8(),description:cx.jtO(cx.Z_8())}),cq=cx.IXX(cW),cG=cx.Ryn({clientId:cW.entries.id,lastUsed:cx.jtO(cx.Rxh())}),c$=cx.IXX(cG),cz=cx.bUp("type",[cD,cM]),cY=cx.IXX(cz),cX=cx.bUp("type",[cH,cV]),cJ=cx.IXX(cX);cx.Ryn({version:cx.i0J(4),clients:cq,clientMetadata:c$,resources:cY,permissions:cJ})},77986:function(e,t,r){"use strict";var n=r(48764).Buffer,i=r(79656),o=r(83954),s=r(43739),a=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}(i);a.utils.hmacSha256Sync=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return o.hmac(s.sha256,e,a.utils.concatBytes(...r))},a.utils.sha256Sync=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return s.sha256(a.utils.concatBytes(...t))};let u=a.utils._normalizePrivateKey,l=32,c=32,f=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65]),h=32;function p(e,t){for(let r=0;r<32;++r)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function d(e){return!(!(e instanceof Uint8Array)||e.length!==c||p(e,f)>=0)}function y(e){return e instanceof Uint8Array&&64===e.length&&0>p(e.subarray(0,32),f)&&0>p(e.subarray(32,64),f)}function g(e){return e instanceof Uint8Array&&e.length===l}function m(e){return void 0===e||e instanceof Uint8Array&&e.length===h}function b(e){if("string"!=typeof e)throw TypeError("hexToNumber: expected string, got "+typeof e);return BigInt("0x".concat(e))}function w(e){return b(a.utils.bytesToHex(e))}function v(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>=0)t=BigInt(e);else if("string"==typeof e){if(64!==e.length)throw Error("Expected 32 bytes of private scalar");t=b(e)}else if(e instanceof Uint8Array){if(32!==e.length)throw Error("Expected 32 bytes of private scalar");t=w(e)}else throw TypeError("Expected valid private scalar");if(t<0)throw Error("Expected private scalar >= 0");return t}let _=(e,t)=>{let r=u(e),n=v(t),i=a.utils._bigintTo32Bytes(a.utils.mod(r+n,a.CURVE.n));return a.utils.isValidPrivateKey(i)?i:null},E=(e,t)=>{let r=u(e),n=v(t),i=a.utils._bigintTo32Bytes(a.utils.mod(r-n,a.CURVE.n));return a.utils.isValidPrivateKey(i)?i:null},S=e=>{let t=u(e),r=a.utils._bigintTo32Bytes(a.CURVE.n-t);return a.utils.isValidPrivateKey(r)?r:null},T=(e,t,r)=>{let n=a.Point.fromHex(e),i=v(t),o=a.Point.BASE.multiplyAndAddUnsafe(n,i,1n);if(!o)throw Error("Tweaked point at infinity");return o.toRawBytes(r)},I=(e,t,r)=>{let n=a.Point.fromHex(e),i="string"==typeof t?t:a.utils.bytesToHex(t),o=BigInt("0x".concat(i));return n.multiply(o).toRawBytes(r)};function A(e,t){return void 0===e?void 0===t||x(t):!!e}function O(e){try{return e()}catch(e){return null}}function P(e,t){if(32===e.length!==t)return!1;try{return!!a.Point.fromHex(e)}catch(e){return!1}}function k(e){return P(e,!1)}function x(e){let t=33;return P(e,!1)&&e.length===t}function C(e){return a.utils.isValidPrivateKey(e)}function R(e){return P(e,!0)}function B(e,t){if(!R(e))throw Error("Expected Point");if(!d(t))throw Error("Expected Tweak");return O(()=>{let r=T(e,t,!0);return{parity:r[0]%2==1?1:0,xOnlyPubkey:r.slice(1)}})}function U(e){if(!k(e))throw Error("Expected Point");return e.slice(1,33)}function N(e,t){if(!C(e))throw Error("Expected Private");return O(()=>a.getPublicKey(e,A(t)))}function D(e){if(!C(e))throw Error("Expected Private");return U(N(e))}function L(e,t){if(!k(e))throw Error("Expected Point");return a.Point.fromHex(e).toRawBytes(A(t,e))}function H(e,t,r){if(!k(e))throw Error("Expected Point");if(!d(t))throw Error("Expected Tweak");return O(()=>I(e,t,A(r,e)))}function M(e,t,r){if(!k(e)||!k(t))throw Error("Expected Point");return O(()=>{let n=a.Point.fromHex(e),i=a.Point.fromHex(t);return n.equals(i.negate())?null:n.add(i).toRawBytes(A(r,e))})}function F(e,t,r){if(!k(e))throw Error("Expected Point");if(!d(t))throw Error("Expected Tweak");return O(()=>T(e,t,A(r,e)))}function j(e,t){if(!1===C(e))throw Error("Expected Private");if(!1===d(t))throw Error("Expected Tweak");return O(()=>_(e,t))}function V(e,t){if(!1===C(e))throw Error("Expected Private");if(!1===d(t))throw Error("Expected Tweak");return O(()=>E(e,t))}function K(e){if(!1===C(e))throw Error("Expected Private");return S(e)}function W(e,t,r){if(!C(t))throw Error("Expected Private");if(!g(e))throw Error("Expected Scalar");if(!m(r))throw Error("Expected Extra Data (32 bytes)");return a.signSync(e,t,{der:!1,extraEntropy:r})}function q(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.alloc(32,0);if(!C(t))throw Error("Expected Private");if(!g(e))throw Error("Expected Scalar");if(!m(r))throw Error("Expected Extra Data (32 bytes)");return a.schnorr.signSync(e,t,r)}function G(e,t,r,n){if(!k(t))throw Error("Expected Point");if(!y(r))throw Error("Expected Signature");if(!g(e))throw Error("Expected Scalar");return a.verify(r,e,t,{strict:n})}function $(e,t,r){if(!R(t))throw Error("Expected Point");if(!y(r))throw Error("Expected Signature");if(!g(e))throw Error("Expected Scalar");return a.schnorr.verifySync(r,e,t)}t.isPoint=k,t.isPointCompressed=x,t.isPrivate=C,t.isXOnlyPoint=R,t.pointAdd=M,t.pointAddScalar=F,t.pointCompress=L,t.pointFromScalar=N,t.pointMultiply=H,t.privateAdd=j,t.privateNegate=K,t.privateSub=V,t.sign=W,t.signSchnorr=q,t.verify=G,t.verifySchnorr=$,t.xOnlyPointAddTweak=B,t.xOnlyPointFromPoint=U,t.xOnlyPointFromScalar=D},40953:function(e,t){"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(!n(e))throw Error("Uint8Array expected");if(r.length>0&&!r.includes(e.length))throw Error("Uint8Array expected of length "+r+", got length="+e.length)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function s(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function a(e,t){i(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(t,"__esModule",{value:!0}),t.anumber=r,t.abytes=i,t.ahash=o,t.aexists=s,t.aoutput=a},54640:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HashMD=void 0,t.setBigUint64=o,t.Chi=s,t.Maj=a;let n=r(40953),i=r(53015);function o(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,l=n?0:4;e.setUint32(t+u,s,n),e.setUint32(t+l,a,n)}function s(e,t,r){return e&t^~e&r}function a(e,t,r){return e&t^e&r^t&r}class u extends i.Hash{update(e){(0,n.aexists)(this);let{view:t,buffer:r,blockLen:o}=this,s=(e=(0,i.toBytes)(e)).length;for(let n=0;n<s;){let a=Math.min(o-this.pos,s-n);if(a===o){let t=(0,i.createView)(e);for(;o<=s-n;n+=o)this.process(t,n);continue}r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.aexists)(this),(0,n.aoutput)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:a}=this,{pos:u}=this;t[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>s-u&&(this.process(r,0),u=0);for(let e=u;e<s;e++)t[e]=0;o(r,s-8,BigInt(8*this.length),a),this.process(r,0);let l=(0,i.createView)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,h=this.get();if(f>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<f;e++)l.setUint32(4*e,h[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.createView)(this.buffer)}}t.HashMD=u},34165:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},83954:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;let n=r(40953),i=r(53015);class o extends i.Hash{update(e){return(0,n.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,n.aexists)(this),(0,n.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.ahash)(e);let r=(0,i.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}}t.HMAC=o;let s=(e,t,r)=>new o(e,t).update(r).digest();t.hmac=s,t.hmac.create=(e,t)=>new o(e,t)},26405:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=t.RIPEMD160=void 0;let n=r(54640),i=r(53015),o=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),s=new Uint8Array(Array(16).fill(0).map((e,t)=>t)),a=s.map(e=>(9*e+5)%16),u=[s],l=[a];for(let e=0;e<4;e++)for(let t of[u,l])t.push(t[e].map(e=>o[e]));let c=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),f=u.map((e,t)=>e.map(e=>c[t][e])),h=l.map((e,t)=>e.map(e=>c[t][e])),p=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),d=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function y(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}let g=new Uint32Array(16);class m extends n.HashMD{get(){let{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)g[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,o=0|this.h1,s=o,a=0|this.h2,c=a,m=0|this.h3,b=m,w=0|this.h4,v=w;for(let e=0;e<5;e++){let t=4-e,_=p[e],E=d[e],S=u[e],T=l[e],I=f[e],A=h[e];for(let t=0;t<16;t++){let n=(0,i.rotl)(r+y(e,o,a,m)+g[S[t]]+_,I[t])+w|0;r=w,w=m,m=0|(0,i.rotl)(a,10),a=o,o=n}for(let e=0;e<16;e++){let r=(0,i.rotl)(n+y(t,s,c,b)+g[T[e]]+E,A[e])+v|0;n=v,v=b,b=0|(0,i.rotl)(c,10),c=s,s=r}}this.set(this.h1+a+b|0,this.h2+m+v|0,this.h3+w+n|0,this.h4+r+s|0,this.h0+o+c|0)}roundClean(){g.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}}t.RIPEMD160=m,t.ripemd160=(0,i.wrapConstructor)(()=>new m)},72877:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha1=t.SHA1=void 0;let n=r(54640),i=r(53015),o=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),s=new Uint32Array(80);class a extends n.HashMD{get(){let{A:e,B:t,C:r,D:n,E:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)s[r]=e.getUint32(t,!1);for(let e=16;e<80;e++)s[e]=(0,i.rotl)(s[e-3]^s[e-8]^s[e-14]^s[e-16],1);let{A:r,B:o,C:a,D:u,E:l}=this;for(let e=0;e<80;e++){let t,c;e<20?(t=(0,n.Chi)(o,a,u),c=1518500249):e<40?(t=o^a^u,c=1859775393):e<60?(t=(0,n.Maj)(o,a,u),c=2400959708):(t=o^a^u,c=3395469782);let f=(0,i.rotl)(r,5)+t+l+c+s[e]|0;l=u,u=a,a=(0,i.rotl)(o,30),o=r,r=f}r=r+this.A|0,o=o+this.B|0,a=a+this.C|0,u=u+this.D|0,l=l+this.E|0,this.set(r,o,a,u,l)}roundClean(){s.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}constructor(){super(64,20,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4]}}t.SHA1=a,t.sha1=(0,i.wrapConstructor)(()=>new a)},43739:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=t.SHA256=void 0;let n=r(54640),i=r(53015),o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class u extends n.HashMD{get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)a[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=a[e-15],r=a[e-2],n=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3,o=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;a[e]=o+a[e-7]+n+a[e-16]|0}let{A:r,B:s,C:u,D:l,E:c,F:f,G:h,H:p}=this;for(let e=0;e<64;e++){let t=p+((0,i.rotr)(c,6)^(0,i.rotr)(c,11)^(0,i.rotr)(c,25))+(0,n.Chi)(c,f,h)+o[e]+a[e]|0,d=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+(0,n.Maj)(r,s,u)|0;p=h,h=f,f=c,c=l+t|0,l=u,u=s,s=r,r=t+d|0}r=r+this.A|0,s=s+this.B|0,u=u+this.C|0,l=l+this.D|0,c=c+this.E|0,f=f+this.F|0,h=h+this.G|0,p=p+this.H|0,this.set(r,s,u,l,c,f,h,p)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}}t.SHA256=u;class l extends u{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,i.wrapConstructor)(()=>new u),t.sha224=(0,i.wrapConstructor)(()=>new l)},53015:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=o,t.u8=s,t.u32=a,t.createView=u,t.rotr=l,t.rotl=c,t.byteSwap=f,t.byteSwap32=h,t.bytesToHex=d,t.hexToBytes=m,t.asyncLoop=w,t.utf8ToBytes=v,t.toBytes=_,t.concatBytes=E,t.checkOpts=T,t.wrapConstructor=I,t.wrapConstructorWithOpts=A,t.wrapXOFConstructorWithOpts=O,t.randomBytes=P;let n=r(34165),i=r(40953);function o(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function a(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function u(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function l(e,t){return e<<32-t|e>>>t}function c(e,t){return e<<t|e>>>32-t>>>0}function f(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function h(e){for(let t=0;t<e.length;t++)e[t]=f(e[t])}t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],t.byteSwapIfBE=t.isLE?e=>e:e=>f(e);let p=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function d(e){(0,i.abytes)(e);let t="";for(let r=0;r<e.length;r++)t+=p[e[r]];return t}let y={_0:48,_9:57,A:65,F:70,a:97,f:102};function g(e){return e>=y._0&&e<=y._9?e-y._0:e>=y.A&&e<=y.F?e-(y.A-10):e>=y.a&&e<=y.f?e-(y.a-10):void 0}function m(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=g(e.charCodeAt(i)),o=g(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}let b=async()=>{};async function w(e,r,n){let i=Date.now();for(let o=0;o<e;o++){n(o);let e=Date.now()-i;e>=0&&e<r||(await (0,t.nextTick)(),i+=e)}}function v(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function _(e){return"string"==typeof e&&(e=v(e)),(0,i.abytes)(e),e}function E(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=0;for(let e=0;e<t.length;e++){let r=t[e];(0,i.abytes)(r),n+=r.length}let o=new Uint8Array(n);for(let e=0,r=0;e<t.length;e++){let n=t[e];o.set(n,r),r+=n.length}return o}t.nextTick=b;class S{clone(){return this._cloneInto()}}function T(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)}function I(e){let t=t=>e().update(_(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function A(e){let t=(t,r)=>e(r).update(_(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function O(e){let t=(t,r)=>e(r).update(_(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return n.crypto.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}t.Hash=S},64354:function(e){"use strict";function t(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==t[o])throw TypeError(i+" is ambiguous");t[o]=n}var s=e.length,a=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function c(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,i=0;e[r]===a;)n++,r++;for(var o=(e.length-r)*u+1>>>0,l=new Uint8Array(o);e[r];){var c=e.charCodeAt(r);if(c>255)return;var f=t[c];if(255===f)return;for(var h=0,p=o-1;(0!==f||h<i)&&-1!==p;p--,h++)f+=s*l[p]>>>0,l[p]=f%256>>>0,f=f/256>>>0;if(0!==f)throw Error("Non-zero carry");i=h,r++}for(var d=o-i;d!==o&&0===l[d];)d++;for(var y=new Uint8Array(n+(o-d)),g=n;d!==o;)y[g++]=l[d++];return y}function f(e){var t=c(e);if(t)return t;throw Error("Non-base"+s+" character")}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var u=(o-i)*l+1>>>0,c=new Uint8Array(u);i!==o;){for(var f=t[i],h=0,p=u-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw Error("Non-zero carry");n=h,i++}for(var d=u-n;d!==u&&0===c[d];)d++;for(var y=a.repeat(r);d<u;++d)y+=e.charAt(c[d]);return y},decodeUnsafe:c,decode:f}}e.exports=t},88015:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.toOutputScript=t.fromOutputScript=t.toBech32=t.toBase58Check=t.fromBech32=t.fromBase58Check=void 0;let i=r(59163),o=r(46293),s=r(53595),a=r(94869),u=r(27715),l=r(82946),c=40,f=2,h=16,p=2,d=80,y="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function g(e,t){let r=e.slice(2);if(r.length<f||r.length>c)throw TypeError("Invalid program length for segwit address");let n=e[0]-d;if(n<p||n>h)throw TypeError("Invalid version for segwit address");if(e[1]!==r.length)throw TypeError("Invalid script for segwit address");return console.warn(y),v(r,n,t.bech32)}function m(e){let t=n.from(l.decode(e));if(t.length<21)throw TypeError(e+" is too short");if(t.length>21)throw TypeError(e+" is too long");return{version:t.readUint8(0),hash:t.slice(1)}}function b(e){let t,r;try{t=u.bech32.decode(e)}catch(e){}if(t){if(0!==(r=t.words[0]))throw TypeError(e+" uses wrong encoding")}else if(0===(r=(t=u.bech32m.decode(e)).words[0]))throw TypeError(e+" uses wrong encoding");let i=u.bech32.fromWords(t.words.slice(1));return{version:r,prefix:t.prefix,data:n.from(i)}}function w(e,t){(0,a.typeforce)((0,a.tuple)(a.Hash160bit,a.UInt8),arguments);let r=n.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),l.encode(r)}function v(e,t,r){let n=u.bech32.toWords(e);return n.unshift(t),0===t?u.bech32.encode(r,n):u.bech32m.encode(r,n)}function _(e,t){t=t||i.bitcoin;try{return o.p2pkh({output:e,network:t}).address}catch(e){}try{return o.p2sh({output:e,network:t}).address}catch(e){}try{return o.p2wpkh({output:e,network:t}).address}catch(e){}try{return o.p2wsh({output:e,network:t}).address}catch(e){}try{return o.p2tr({output:e,network:t}).address}catch(e){}try{return g(e,t)}catch(e){}throw Error(s.toASM(e)+" has no matching Address")}function E(e,t){let r,n;t=t||i.bitcoin;try{r=m(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return o.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return o.p2sh({hash:r.hash}).output}else{try{n=b(e)}catch(e){}if(n){if(n.prefix!==t.bech32)throw Error(e+" has an invalid prefix");if(0===n.version){if(20===n.data.length)return o.p2wpkh({hash:n.data}).output;if(32===n.data.length)return o.p2wsh({hash:n.data}).output}else if(1===n.version){if(32===n.data.length)return o.p2tr({pubkey:n.data}).output}else if(n.version>=p&&n.version<=h&&n.data.length>=f&&n.data.length<=c)return console.warn(y),s.compile([n.version+d,n.data])}}throw Error(e+" has no matching Script")}t.fromBase58Check=m,t.fromBech32=b,t.toBase58Check=w,t.toBech32=v,t.fromOutputScript=_,t.toOutputScript=E},60196:function(e,t,r){"use strict";var n=r(48764).Buffer;function i(e){if(e.length<8||e.length>72||48!==e[0]||e[1]!==e.length-2||2!==e[2])return!1;let t=e[3];if(0===t||5+t>=e.length||2!==e[4+t])return!1;let r=e[5+t];return 0!==r&&6+t+r===e.length&&!(128&e[4])&&(!(t>1)||0!==e[4]||!!(128&e[5]))&&!(128&e[t+6])&&(!(r>1)||0!==e[t+6]||!!(128&e[t+7]))}function o(e){if(e.length<8)throw Error("DER sequence length is too short");if(e.length>72)throw Error("DER sequence length is too long");if(48!==e[0])throw Error("Expected DER sequence");if(e[1]!==e.length-2)throw Error("DER sequence length is invalid");if(2!==e[2])throw Error("Expected DER integer");let t=e[3];if(0===t)throw Error("R length is zero");if(5+t>=e.length)throw Error("R length is too long");if(2!==e[4+t])throw Error("Expected DER integer (2)");let r=e[5+t];if(0===r)throw Error("S length is zero");if(6+t+r!==e.length)throw Error("S length is invalid");if(128&e[4])throw Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw Error("R value excessively padded");if(128&e[t+6])throw Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}}function s(e,t){let r=e.length,i=t.length;if(0===r)throw Error("R length is zero");if(0===i)throw Error("S length is zero");if(r>33)throw Error("R length is too long");if(i>33)throw Error("S length is too long");if(128&e[0])throw Error("R value is negative");if(128&t[0])throw Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw Error("R value excessively padded");if(i>1&&0===t[0]&&!(128&t[1]))throw Error("S value excessively padded");let o=n.allocUnsafe(6+r+i);return o[0]=48,o[1]=o.length-2,o[2]=2,o[3]=e.length,e.copy(o,4),o[4+r]=2,o[5+r]=t.length,t.copy(o,6+r),o}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=t.check=void 0,t.check=i,t.decode=o,t.encode=s},49851:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;let i=r(27565),o=r(28243),s=r(70764),a=r(96618),u=r(94869),{typeforce:l}=u,c=TypeError("Cannot compute merkle root for zero transactions"),f=TypeError("Cannot compute witness commit for non-segwit block");class h{static fromBuffer(e){if(e.length<80)throw Error("Buffer too small (< 80 bytes)");let t=new i.BufferReader(e),r=new h;if(r.version=t.readInt32(),r.prevHash=t.readSlice(32),r.merkleRoot=t.readSlice(32),r.timestamp=t.readUInt32(),r.bits=t.readUInt32(),r.nonce=t.readUInt32(),80===e.length)return r;let n=()=>{let e=a.Transaction.fromBuffer(t.buffer.slice(t.offset),!0);return t.offset+=e.byteLength(),e},o=t.readVarInt();r.transactions=[];for(let e=0;e<o;++e){let e=n();r.transactions.push(e)}let s=r.getWitnessCommit();return s&&(r.witnessCommit=s),r}static fromHex(e){return h.fromBuffer(n.from(e,"hex"))}static calculateTarget(e){let t=((4278190080&e)>>24)-3,r=8388607&e,i=n.alloc(32,0);return i.writeUIntBE(r,29-t,3),i}static calculateMerkleRoot(e,t){if(l([{getHash:u.Function}],e),0===e.length)throw c;if(t&&!p(e))throw f;let r=e.map(e=>e.getHash(t)),i=(0,s.fastMerkleRoot)(r,o.hash256);return t?o.hash256(n.concat([i,e[0].ins[0].witness[0]])):i}getWitnessCommit(){if(!p(this.transactions))return null;let e=this.transactions[0].outs.filter(e=>e.script.slice(0,6).equals(n.from("6a24aa21a9ed","hex"))).map(e=>e.script.slice(6,38));if(0===e.length)return null;let t=e[e.length-1];return t instanceof n&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof n&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return d(this.transactions)}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e||!this.transactions?80:80+i.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((e,r)=>e+r.byteLength(t),0)}getHash(){return o.hash256(this.toBuffer(!0))}getId(){return(0,i.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){let e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){let t=n.allocUnsafe(this.byteLength(e)),r=new i.BufferWriter(t);return r.writeInt32(this.version),r.writeSlice(this.prevHash),r.writeSlice(this.merkleRoot),r.writeUInt32(this.timestamp),r.writeUInt32(this.bits),r.writeUInt32(this.nonce),e||!this.transactions||(i.varuint.encode(this.transactions.length,t,r.offset),r.offset+=i.varuint.encode.bytes,this.transactions.forEach(e=>{let n=e.byteLength();e.toBuffer(t,r.offset),r.offset+=n})),t}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){let e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit())}checkProofOfWork(){let e=(0,i.reverseBuffer)(this.getHash()),t=h.calculateTarget(this.bits);return 0>=e.compare(t)}__checkMerkleRoot(){if(!this.transactions)throw c;let e=h.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}__checkWitnessCommit(){if(!this.transactions)throw c;if(!this.hasWitnessCommit())throw f;let e=h.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}}function p(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}function d(e){return e instanceof Array&&e.some(e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some(e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0))}t.Block=h},27565:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=t.BufferWriter=t.cloneBuffer=t.reverseBuffer=t.writeUInt64LE=t.readUInt64LE=t.varuint=void 0;let i=r(94869),{typeforce:o}=i,s=r(57795);function a(e,t){if("number"!=typeof e)throw Error("cannot write a non-number as a number");if(e<0)throw Error("specified a negative value for writing an unsigned value");if(e>t)throw Error("RangeError: value out of range");if(Math.floor(e)!==e)throw Error("value has a fractional component")}function u(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return a((n*=4294967296)+r,9007199254740991),n+r}function l(e,t,r){return a(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}function c(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}function f(e){let t=n.allocUnsafe(e.length);return e.copy(t),t}t.varuint=s,t.readUInt64LE=u,t.writeUInt64LE=l,t.reverseBuffer=c,t.cloneBuffer=f;class h{static withCapacity(e){return new h(n.alloc(e))}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=l(this.buffer,e,this.offset)}writeVarInt(e){s.encode(e,this.buffer,this.offset),this.offset+=s.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach(e=>this.writeVarSlice(e))}end(){if(this.buffer.length===this.offset)return this.buffer;throw Error("buffer size ".concat(this.buffer.length,", offset ").concat(this.offset))}constructor(e,t=0){this.buffer=e,this.offset=t,o(i.tuple(i.Buffer,i.UInt32),[e,t])}}t.BufferWriter=h;class p{readUInt8(){let e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){let e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){let e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){let e=u(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){let e=s.decode(this.buffer,this.offset);return this.offset+=s.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw Error("Cannot read slice out of bounds");let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let e=this.readVarInt(),t=[];for(let r=0;r<e;r++)t.push(this.readVarSlice());return t}constructor(e,t=0){this.buffer=e,this.offset=t,o(i.tuple(i.Buffer,i.UInt32),[e,t])}}t.BufferReader=p},28243:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.taggedHash=t.TAGGED_HASH_PREFIXES=t.TAGS=t.hash256=t.hash160=t.sha256=t.sha1=t.ripemd160=void 0;let i=r(26405),o=r(72877),s=r(43739);function a(e){return n.from((0,i.ripemd160)(Uint8Array.from(e)))}function u(e){return n.from((0,o.sha1)(Uint8Array.from(e)))}function l(e){return n.from((0,s.sha256)(Uint8Array.from(e)))}function c(e){return n.from((0,i.ripemd160)((0,s.sha256)(Uint8Array.from(e))))}function f(e){return n.from((0,s.sha256)((0,s.sha256)(Uint8Array.from(e))))}function h(e,r){return l(n.concat([t.TAGGED_HASH_PREFIXES[e],r]))}t.ripemd160=a,t.sha1=u,t.sha256=l,t.hash160=c,t.hash256=f,t.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],t.TAGGED_HASH_PREFIXES={"BIP0340/challenge":n.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":n.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":n.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:n.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:n.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:n.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:n.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":n.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":n.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])},t.taggedHash=h},55747:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.getEccLib=t.initEccLib=void 0;let i={};function o(e){e?e!==i.eccLib&&(u(e),i.eccLib=e):i.eccLib=e}function s(){if(!i.eccLib)throw Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return i.eccLib}t.initEccLib=o,t.getEccLib=s;let a=e=>n.from(e,"hex");function u(e){l("function"==typeof e.isXOnlyPoint),l(e.isXOnlyPoint(a("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),l(e.isXOnlyPoint(a("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),l(e.isXOnlyPoint(a("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),l(e.isXOnlyPoint(a("0000000000000000000000000000000000000000000000000000000000000001"))),l(!e.isXOnlyPoint(a("0000000000000000000000000000000000000000000000000000000000000000"))),l(!e.isXOnlyPoint(a("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),l("function"==typeof e.xOnlyPointAddTweak),c.forEach(t=>{let r=e.xOnlyPointAddTweak(a(t.pubkey),a(t.tweak));null===t.result?l(null===r):(l(null!==r),l(r.parity===t.parity),l(n.from(r.xOnlyPubkey).equals(a(t.result))))})}function l(e){if(!e)throw Error("ecc library invalid")}let c=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]},554:function(e,t,r){"use strict";i={value:!0},i=t.YW=i=t._B=i=i=i=i=t.crypto=i=void 0,i=r(88015);let n=r(28243);t.crypto=n,i=r(59163),i=r(46293),i=r(53595);var i,o=r(49851);i={enumerable:!0,get:function(){return o.Block}};var s=r(12588);Object.defineProperty(t,"_B",{enumerable:!0,get:function(){return s.Psbt}});var a=r(55319);i={enumerable:!0,get:function(){return a.OPS}};var u=r(96618);Object.defineProperty(t,"YW",{enumerable:!0,get:function(){return u.Transaction}}),r(55747)},70764:function(e,t,r){"use strict";var n=r(48764).Buffer;function i(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");let r=e.length,i=e.concat();for(;r>1;){let e=0;for(let o=0;o<r;o+=2,++e){let s=i[o],a=o+1===r?s:i[o+1],u=n.concat([s,a]);i[e]=t(u)}r=e}return i[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.fastMerkleRoot=void 0,t.fastMerkleRoot=i},59163:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testnet=t.regtest=t.bitcoin=void 0,t.bitcoin={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},55319:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REVERSE_OPS=t.OPS=void 0;let r={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};t.OPS=r;let n={};for(let e of(t.REVERSE_OPS=n,Object.keys(r)))n[r[e]]=e},93207:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tweakKey=t.tapTweakHash=t.tapleafHash=t.findScriptPath=t.toHashTree=t.rootHashFromPath=t.MAX_TAPTREE_DEPTH=t.LEAF_VERSION_TAPSCRIPT=void 0;let n=r(48764),i=r(55747),o=r(28243),s=r(27565),a=r(94869);t.LEAF_VERSION_TAPSCRIPT=192,t.MAX_TAPTREE_DEPTH=128;let u=e=>"left"in e&&"right"in e;function l(e,t){if(e.length<33)throw TypeError("The control-block length is too small. Got ".concat(e.length,", expected min 33."));let r=(e.length-33)/32,n=t;for(let t=0;t<r;t++){let r=e.slice(33+32*t,65+32*t);n=0>n.compare(r)?y(n,r):y(r,n)}return n}function c(e){if((0,a.isTapleaf)(e))return{hash:h(e)};let t=[c(e[0]),c(e[1])];t.sort((e,t)=>e.hash.compare(t.hash));let[r,n]=t;return{hash:y(r.hash,n.hash),left:r,right:n}}function f(e,t){if(u(e)){let r=f(e.left,t);if(void 0!==r)return[...r,e.right.hash];let n=f(e.right,t);if(void 0!==n)return[...n,e.left.hash]}else if(e.hash.equals(t))return[]}function h(e){let r=e.version||t.LEAF_VERSION_TAPSCRIPT;return o.taggedHash("TapLeaf",n.Buffer.concat([n.Buffer.from([r]),g(e.output)]))}function p(e,t){return o.taggedHash("TapTweak",n.Buffer.concat(t?[e,t]:[e]))}function d(e,t){if(!n.Buffer.isBuffer(e)||32!==e.length||t&&32!==t.length)return null;let r=p(e,t),o=(0,i.getEccLib)().xOnlyPointAddTweak(e,r);return o&&null!==o.xOnlyPubkey?{parity:o.parity,x:n.Buffer.from(o.xOnlyPubkey)}:null}function y(e,t){return o.taggedHash("TapBranch",n.Buffer.concat([e,t]))}function g(e){let t=s.varuint.encodingLength(e.length),r=n.Buffer.allocUnsafe(t);return s.varuint.encode(e.length,r),n.Buffer.concat([r,e])}t.rootHashFromPath=l,t.toHashTree=c,t.findScriptPath=f,t.tapleafHash=h,t.tapTweakHash=p,t.tweakKey=d},17526:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2data=void 0;let n=r(59163),i=r(53595),o=r(94869),s=r(42173),a=i.OPS;function u(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}function l(e,t){if(!e.data&&!e.output)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.Buffer),data:o.typeforce.maybe(o.typeforce.arrayOf(o.typeforce.Buffer))},e);let r={name:"embed",network:e.network||n.bitcoin};if(s.prop(r,"output",()=>{if(e.data)return i.compile([a.OP_RETURN].concat(e.data))}),s.prop(r,"data",()=>{if(e.output)return i.decompile(e.output).slice(1)}),t.validate&&e.output){let t=i.decompile(e.output);if(t[0]!==a.OP_RETURN||!t.slice(1).every(o.typeforce.Buffer))throw TypeError("Output is invalid");if(e.data&&!u(e.data,r.data))throw TypeError("Data mismatch")}return Object.assign(r,e)}t.p2data=l},46293:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=t.p2wsh=t.p2wpkh=t.p2sh=t.p2pkh=t.p2pk=t.p2ms=t.embed=void 0;let n=r(17526);Object.defineProperty(t,"embed",{enumerable:!0,get:function(){return n.p2data}});let i=r(11347);Object.defineProperty(t,"p2ms",{enumerable:!0,get:function(){return i.p2ms}});let o=r(57460);Object.defineProperty(t,"p2pk",{enumerable:!0,get:function(){return o.p2pk}});let s=r(3544);Object.defineProperty(t,"p2pkh",{enumerable:!0,get:function(){return s.p2pkh}});let a=r(8938);Object.defineProperty(t,"p2sh",{enumerable:!0,get:function(){return a.p2sh}});let u=r(82125);Object.defineProperty(t,"p2wpkh",{enumerable:!0,get:function(){return u.p2wpkh}});let l=r(89668);Object.defineProperty(t,"p2wsh",{enumerable:!0,get:function(){return l.p2wsh}});let c=r(87552);Object.defineProperty(t,"p2tr",{enumerable:!0,get:function(){return c.p2tr}})},42173:function(e,t){"use strict";function r(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let e=r.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})}function n(e){let t;return()=>void 0!==t?t:t=e()}Object.defineProperty(t,"__esModule",{value:!0}),t.value=t.prop=void 0,t.prop=r,t.value=n},11347:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2ms=void 0;let n=r(59163),i=r(53595),o=r(94869),s=r(42173),a=i.OPS,u=a.OP_RESERVED;function l(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}function c(e,t){if(!e.input&&!e.output&&!(e.pubkeys&&void 0!==e.m)&&!e.signatures)throw TypeError("Not enough data");function r(e){return i.isCanonicalScriptSignature(e)||(t.allowIncomplete&&e===a.OP_0)!==void 0}t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),m:o.typeforce.maybe(o.typeforce.Number),n:o.typeforce.maybe(o.typeforce.Number),output:o.typeforce.maybe(o.typeforce.Buffer),pubkeys:o.typeforce.maybe(o.typeforce.arrayOf(o.isPoint)),signatures:o.typeforce.maybe(o.typeforce.arrayOf(r)),input:o.typeforce.maybe(o.typeforce.Buffer)},e);let c={network:e.network||n.bitcoin},f=[],h=!1;function p(e){h||(h=!0,f=i.decompile(e),c.m=f[0]-u,c.n=f[f.length-2]-u,c.pubkeys=f.slice(1,-2))}if(s.prop(c,"output",()=>{if(e.m&&c.n&&e.pubkeys)return i.compile([].concat(u+e.m,e.pubkeys,u+c.n,a.OP_CHECKMULTISIG))}),s.prop(c,"m",()=>{if(c.output)return p(c.output),c.m}),s.prop(c,"n",()=>{if(c.pubkeys)return c.pubkeys.length}),s.prop(c,"pubkeys",()=>{if(e.output)return p(e.output),c.pubkeys}),s.prop(c,"signatures",()=>{if(e.input)return i.decompile(e.input).slice(1)}),s.prop(c,"input",()=>{if(e.signatures)return i.compile([a.OP_0].concat(e.signatures))}),s.prop(c,"witness",()=>{if(c.input)return[]}),s.prop(c,"name",()=>{if(c.m&&c.n)return"p2ms(".concat(c.m," of ").concat(c.n,")")}),t.validate){if(e.output){if(p(e.output),!o.typeforce.Number(f[0])||!o.typeforce.Number(f[f.length-2])||f[f.length-1]!==a.OP_CHECKMULTISIG||c.m<=0||c.n>16||c.m>c.n||c.n!==f.length-3||!c.pubkeys.every(e=>(0,o.isPoint)(e)))throw TypeError("Output is invalid");if(void 0!==e.m&&e.m!==c.m)throw TypeError("m mismatch");if(void 0!==e.n&&e.n!==c.n)throw TypeError("n mismatch");if(e.pubkeys&&!l(e.pubkeys,c.pubkeys))throw TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw TypeError("Pubkey count mismatch");if(c.n=e.pubkeys.length,c.n<c.m)throw TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<c.m)throw TypeError("Not enough signatures provided");if(e.signatures.length>c.m)throw TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==a.OP_0)throw TypeError("Input is invalid");if(0===c.signatures.length||!c.signatures.every(r))throw TypeError("Input has invalid signature(s)");if(e.signatures&&!l(e.signatures,c.signatures))throw TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw TypeError("Signature count mismatch")}}return Object.assign(c,e)}t.p2ms=c},57460:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2pk=void 0;let n=r(59163),i=r(53595),o=r(94869),s=r(42173),a=i.OPS;function u(e,t){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.Buffer),pubkey:o.typeforce.maybe(o.isPoint),signature:o.typeforce.maybe(i.isCanonicalScriptSignature),input:o.typeforce.maybe(o.typeforce.Buffer)},e);let r=s.value(()=>i.decompile(e.input)),u={name:"p2pk",network:e.network||n.bitcoin};if(s.prop(u,"output",()=>{if(e.pubkey)return i.compile([e.pubkey,a.OP_CHECKSIG])}),s.prop(u,"pubkey",()=>{if(e.output)return e.output.slice(1,-1)}),s.prop(u,"signature",()=>{if(e.input)return r()[0]}),s.prop(u,"input",()=>{if(e.signature)return i.compile([e.signature])}),s.prop(u,"witness",()=>{if(u.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==a.OP_CHECKSIG)throw TypeError("Output is invalid");if(!(0,o.isPoint)(u.pubkey))throw TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(u.pubkey))throw TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(u.input))throw TypeError("Signature mismatch");if(e.input){if(1!==r().length)throw TypeError("Input is invalid");if(!i.isCanonicalScriptSignature(u.signature))throw TypeError("Input has invalid signature")}}return Object.assign(u,e)}t.p2pk=u},3544:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2pkh=void 0;let i=r(28243),o=r(59163),s=r(53595),a=r(94869),u=r(42173),l=r(82946),c=s.OPS;function f(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.input)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),output:a.typeforce.maybe(a.typeforce.BufferN(25)),pubkey:a.typeforce.maybe(a.isPoint),signature:a.typeforce.maybe(s.isCanonicalScriptSignature),input:a.typeforce.maybe(a.typeforce.Buffer)},e);let r=u.value(()=>{let t=n.from(l.decode(e.address));return{version:t.readUInt8(0),hash:t.slice(1)}}),f=u.value(()=>s.decompile(e.input)),h=e.network||o.bitcoin,p={name:"p2pkh",network:h};if(u.prop(p,"address",()=>{if(!p.hash)return;let e=n.allocUnsafe(21);return e.writeUInt8(h.pubKeyHash,0),p.hash.copy(e,1),l.encode(e)}),u.prop(p,"hash",()=>e.output?e.output.slice(3,23):e.address?r().hash:e.pubkey||p.pubkey?i.hash160(e.pubkey||p.pubkey):void 0),u.prop(p,"output",()=>{if(p.hash)return s.compile([c.OP_DUP,c.OP_HASH160,p.hash,c.OP_EQUALVERIFY,c.OP_CHECKSIG])}),u.prop(p,"pubkey",()=>{if(e.input)return f()[1]}),u.prop(p,"signature",()=>{if(e.input)return f()[0]}),u.prop(p,"input",()=>{if(e.pubkey&&e.signature)return s.compile([e.signature,e.pubkey])}),u.prop(p,"witness",()=>{if(p.input)return[]}),t.validate){let t=n.from([]);if(e.address){if(r().version!==h.pubKeyHash)throw TypeError("Invalid version or Network mismatch");if(20!==r().hash.length)throw TypeError("Invalid address");t=r().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==c.OP_DUP||e.output[1]!==c.OP_HASH160||20!==e.output[2]||e.output[23]!==c.OP_EQUALVERIFY||e.output[24]!==c.OP_CHECKSIG)throw TypeError("Output is invalid");let r=e.output.slice(3,23);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");t=r}if(e.pubkey){let r=i.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");t=r}if(e.input){let r=f();if(2!==r.length)throw TypeError("Input is invalid");if(!s.isCanonicalScriptSignature(r[0]))throw TypeError("Input has invalid signature");if(!(0,a.isPoint)(r[1]))throw TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(r[0]))throw TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(r[1]))throw TypeError("Pubkey mismatch");let n=i.hash160(r[1]);if(t.length>0&&!t.equals(n))throw TypeError("Hash mismatch")}}return Object.assign(p,e)}t.p2pkh=f},8938:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2sh=void 0;let i=r(28243),o=r(59163),s=r(53595),a=r(94869),u=r(42173),l=r(82946),c=s.OPS;function f(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}function h(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.input)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),output:a.typeforce.maybe(a.typeforce.BufferN(23)),redeem:a.typeforce.maybe({network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.Buffer),input:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),input:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);let r=e.network;r||(r=e.redeem&&e.redeem.network||o.bitcoin);let h={network:r},p=u.value(()=>{let t=n.from(l.decode(e.address));return{version:t.readUInt8(0),hash:t.slice(1)}}),d=u.value(()=>s.decompile(e.input)),y=u.value(()=>{let t=d(),i=t[t.length-1];return{network:r,output:i===c.OP_FALSE?n.from([]):i,input:s.compile(t.slice(0,-1)),witness:e.witness||[]}});if(u.prop(h,"address",()=>{if(!h.hash)return;let e=n.allocUnsafe(21);return e.writeUInt8(h.network.scriptHash,0),h.hash.copy(e,1),l.encode(e)}),u.prop(h,"hash",()=>e.output?e.output.slice(2,22):e.address?p().hash:h.redeem&&h.redeem.output?i.hash160(h.redeem.output):void 0),u.prop(h,"output",()=>{if(h.hash)return s.compile([c.OP_HASH160,h.hash,c.OP_EQUAL])}),u.prop(h,"redeem",()=>{if(e.input)return y()}),u.prop(h,"input",()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return s.compile([].concat(s.decompile(e.redeem.input),e.redeem.output))}),u.prop(h,"witness",()=>h.redeem&&h.redeem.witness?h.redeem.witness:h.input?[]:void 0),u.prop(h,"name",()=>{let e=["p2sh"];return void 0!==h.redeem&&void 0!==h.redeem.name&&e.push(h.redeem.name),e.join("-")}),t.validate){let t=n.from([]);if(e.address){if(p().version!==r.scriptHash)throw TypeError("Invalid version or Network mismatch");if(20!==p().hash.length)throw TypeError("Invalid address");t=p().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==c.OP_HASH160||20!==e.output[1]||e.output[22]!==c.OP_EQUAL)throw TypeError("Output is invalid");let r=e.output.slice(2,22);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");t=r}let o=e=>{if(e.output){let r=s.decompile(e.output);if(!r||r.length<1)throw TypeError("Redeem.output too short");if(e.output.byteLength>520)throw TypeError("Redeem.output unspendable if larger than 520 bytes");if(s.countNonPushOnlyOPs(r)>201)throw TypeError("Redeem.output unspendable with more than 201 non-push ops");let n=i.hash160(e.output);if(t.length>0&&!t.equals(n))throw TypeError("Hash mismatch");t=n}if(e.input){let t=e.input.length>0,r=e.witness&&e.witness.length>0;if(!t&&!r)throw TypeError("Empty input");if(t&&r)throw TypeError("Input and witness provided");if(t){let t=s.decompile(e.input);if(!s.isPushOnly(t))throw TypeError("Non push-only scriptSig")}}};if(e.input){let e=d();if(!e||e.length<1)throw TypeError("Input too short");if(!n.isBuffer(y().output))throw TypeError("Input is invalid");o(y())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==r)throw TypeError("Network mismatch");if(e.input){let t=y();if(e.redeem.output&&!e.redeem.output.equals(t.output))throw TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(t.input))throw TypeError("Redeem.input mismatch")}o(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!f(e.redeem.witness,e.witness))throw TypeError("Witness and redeem.witness mismatch")}return Object.assign(h,e)}t.p2sh=h},87552:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=void 0;let n=r(48764),i=r(59163),o=r(53595),s=r(94869),a=r(55747),u=r(93207),l=r(42173),c=r(27715),f=o.OPS,h=1,p=80;function d(e,t){if(!e.address&&!e.output&&!e.pubkey&&!e.internalPubkey&&!(e.witness&&e.witness.length>1))throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,s.typeforce)({address:s.typeforce.maybe(s.typeforce.String),input:s.typeforce.maybe(s.typeforce.BufferN(0)),network:s.typeforce.maybe(s.typeforce.Object),output:s.typeforce.maybe(s.typeforce.BufferN(34)),internalPubkey:s.typeforce.maybe(s.typeforce.BufferN(32)),hash:s.typeforce.maybe(s.typeforce.BufferN(32)),pubkey:s.typeforce.maybe(s.typeforce.BufferN(32)),signature:s.typeforce.maybe(s.typeforce.anyOf(s.typeforce.BufferN(64),s.typeforce.BufferN(65))),witness:s.typeforce.maybe(s.typeforce.arrayOf(s.typeforce.Buffer)),scriptTree:s.typeforce.maybe(s.isTaptree),redeem:s.typeforce.maybe({output:s.typeforce.maybe(s.typeforce.Buffer),redeemVersion:s.typeforce.maybe(s.typeforce.Number),witness:s.typeforce.maybe(s.typeforce.arrayOf(s.typeforce.Buffer))}),redeemVersion:s.typeforce.maybe(s.typeforce.Number)},e);let r=l.value(()=>{let t=c.bech32m.decode(e.address),r=t.words.shift(),i=c.bech32m.fromWords(t.words);return{version:r,prefix:t.prefix,data:n.Buffer.from(i)}}),d=l.value(()=>{if(e.witness&&e.witness.length)return e.witness.length>=2&&e.witness[e.witness.length-1][0]===p?e.witness.slice(0,-1):e.witness.slice()}),g=l.value(()=>e.scriptTree?(0,u.toHashTree)(e.scriptTree):e.hash?{hash:e.hash}:void 0),m=e.network||i.bitcoin,b={name:"p2tr",network:m};if(l.prop(b,"address",()=>{if(!b.pubkey)return;let e=c.bech32m.toWords(b.pubkey);return e.unshift(h),c.bech32m.encode(m.bech32,e)}),l.prop(b,"hash",()=>{let e=g();if(e)return e.hash;let t=d();if(t&&t.length>1){let e=t[t.length-1],r=e[0]&s.TAPLEAF_VERSION_MASK,n=t[t.length-2],i=(0,u.tapleafHash)({output:n,version:r});return(0,u.rootHashFromPath)(e,i)}return null}),l.prop(b,"output",()=>{if(b.pubkey)return o.compile([f.OP_1,b.pubkey])}),l.prop(b,"redeemVersion",()=>e.redeemVersion?e.redeemVersion:e.redeem&&void 0!==e.redeem.redeemVersion&&null!==e.redeem.redeemVersion?e.redeem.redeemVersion:u.LEAF_VERSION_TAPSCRIPT),l.prop(b,"redeem",()=>{let e=d();if(e&&!(e.length<2))return{output:e[e.length-2],witness:e.slice(0,-2),redeemVersion:e[e.length-1][0]&s.TAPLEAF_VERSION_MASK}}),l.prop(b,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return r().data;if(b.internalPubkey){let e=(0,u.tweakKey)(b.internalPubkey,b.hash);if(e)return e.x}}),l.prop(b,"internalPubkey",()=>{if(e.internalPubkey)return e.internalPubkey;let t=d();if(t&&t.length>1)return t[t.length-1].slice(1,33)}),l.prop(b,"signature",()=>{if(e.signature)return e.signature;let t=d();if(t&&1===t.length)return t[0]}),l.prop(b,"witness",()=>{if(e.witness)return e.witness;let t=g();if(t&&e.redeem&&e.redeem.output&&e.internalPubkey){let r=(0,u.tapleafHash)({output:e.redeem.output,version:b.redeemVersion}),i=(0,u.findScriptPath)(t,r);if(!i)return;let o=(0,u.tweakKey)(e.internalPubkey,t.hash);if(!o)return;let s=n.Buffer.concat([n.Buffer.from([b.redeemVersion|o.parity]),e.internalPubkey].concat(i));return[e.redeem.output,s]}if(e.signature)return[e.signature]}),t.validate){let t=n.Buffer.from([]);if(e.address){if(m&&m.bech32!==r().prefix)throw TypeError("Invalid prefix or Network mismatch");if(r().version!==h)throw TypeError("Invalid address version");if(32!==r().data.length)throw TypeError("Invalid address data");t=r().data}if(e.pubkey){if(t.length>0&&!t.equals(e.pubkey))throw TypeError("Pubkey mismatch");t=e.pubkey}if(e.output){if(34!==e.output.length||e.output[0]!==f.OP_1||32!==e.output[1])throw TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw TypeError("Pubkey mismatch");t=e.output.slice(2)}if(e.internalPubkey){let r=(0,u.tweakKey)(e.internalPubkey,b.hash);if(t.length>0&&!t.equals(r.x))throw TypeError("Pubkey mismatch");t=r.x}if(t&&t.length&&!(0,a.getEccLib)().isXOnlyPoint(t))throw TypeError("Invalid pubkey for p2tr");let i=g();if(e.hash&&i&&!e.hash.equals(i.hash))throw TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&i){let t=(0,u.tapleafHash)({output:e.redeem.output,version:b.redeemVersion});if(!(0,u.findScriptPath)(i,t))throw TypeError("Redeem script not in tree")}let l=d();if(e.redeem&&b.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==b.redeem.redeemVersion)throw TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(0===o.decompile(e.redeem.output).length)throw TypeError("Redeem.output is invalid");if(b.redeem.output&&!e.redeem.output.equals(b.redeem.output))throw TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&b.redeem.witness&&!y(e.redeem.witness,b.redeem.witness))throw TypeError("Redeem.witness and witness mismatch")}if(l&&l.length){if(1===l.length){if(e.signature&&!e.signature.equals(l[0]))throw TypeError("Signature mismatch")}else{let r=l[l.length-1];if(r.length<33)throw TypeError("The control-block length is too small. Got ".concat(r.length,", expected min 33."));if((r.length-33)%32!=0)throw TypeError("The control-block length of ".concat(r.length," is incorrect!"));let n=(r.length-33)/32;if(n>128)throw TypeError("The script path is too long. Got ".concat(n,", expected max 128."));let i=r.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(i))throw TypeError("Internal pubkey mismatch");if(!(0,a.getEccLib)().isXOnlyPoint(i))throw TypeError("Invalid internalPubkey for p2tr witness");let o=r[0]&s.TAPLEAF_VERSION_MASK,c=l[l.length-2],f=(0,u.tapleafHash)({output:c,version:o}),h=(0,u.rootHashFromPath)(r,f),p=(0,u.tweakKey)(i,h);if(!p)throw TypeError("Invalid outputKey for p2tr witness");if(t.length&&!t.equals(p.x))throw TypeError("Pubkey mismatch for p2tr witness");if(p.parity!==(1&r[0]))throw Error("Incorrect parity")}}}return Object.assign(b,e)}function y(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}t.p2tr=d},82125:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2wpkh=void 0;let i=r(28243),o=r(59163),s=r(53595),a=r(94869),u=r(42173),l=r(27715),c=s.OPS,f=n.alloc(0);function h(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.witness)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),input:a.typeforce.maybe(a.typeforce.BufferN(0)),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.BufferN(22)),pubkey:a.typeforce.maybe(a.isPoint),signature:a.typeforce.maybe(s.isCanonicalScriptSignature),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);let r=u.value(()=>{let t=l.bech32.decode(e.address),r=t.words.shift(),i=l.bech32.fromWords(t.words);return{version:r,prefix:t.prefix,data:n.from(i)}}),h=e.network||o.bitcoin,p={name:"p2wpkh",network:h};if(u.prop(p,"address",()=>{if(!p.hash)return;let e=l.bech32.toWords(p.hash);return e.unshift(0),l.bech32.encode(h.bech32,e)}),u.prop(p,"hash",()=>e.output?e.output.slice(2,22):e.address?r().data:e.pubkey||p.pubkey?i.hash160(e.pubkey||p.pubkey):void 0),u.prop(p,"output",()=>{if(p.hash)return s.compile([c.OP_0,p.hash])}),u.prop(p,"pubkey",()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0),u.prop(p,"signature",()=>{if(e.witness)return e.witness[0]}),u.prop(p,"input",()=>{if(p.witness)return f}),u.prop(p,"witness",()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]}),t.validate){let t=n.from([]);if(e.address){if(h&&h.bech32!==r().prefix)throw TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw TypeError("Invalid address version");if(20!==r().data.length)throw TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==c.OP_0||20!==e.output[1])throw TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){let r=i.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");if(t=r,!(0,a.isPoint)(e.pubkey)||33!==e.pubkey.length)throw TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw TypeError("Witness is invalid");if(!s.isCanonicalScriptSignature(e.witness[0]))throw TypeError("Witness has invalid signature");if(!(0,a.isPoint)(e.witness[1])||33!==e.witness[1].length)throw TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw TypeError("Pubkey mismatch");let r=i.hash160(e.witness[1]);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch")}}return Object.assign(p,e)}t.p2wpkh=h},89668:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2wsh=void 0;let i=r(28243),o=r(59163),s=r(53595),a=r(94869),u=r(42173),l=r(27715),c=s.OPS,f=n.alloc(0);function h(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}function p(e){return!!(n.isBuffer(e)&&65===e.length&&4===e[0]&&(0,a.isPoint)(e))}function d(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.witness)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(32)),output:a.typeforce.maybe(a.typeforce.BufferN(34)),redeem:a.typeforce.maybe({input:a.typeforce.maybe(a.typeforce.Buffer),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),input:a.typeforce.maybe(a.typeforce.BufferN(0)),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);let r=u.value(()=>{let t=l.bech32.decode(e.address),r=t.words.shift(),i=l.bech32.fromWords(t.words);return{version:r,prefix:t.prefix,data:n.from(i)}}),d=u.value(()=>s.decompile(e.redeem.input)),y=e.network;y||(y=e.redeem&&e.redeem.network||o.bitcoin);let g={network:y};if(u.prop(g,"address",()=>{if(!g.hash)return;let e=l.bech32.toWords(g.hash);return e.unshift(0),l.bech32.encode(y.bech32,e)}),u.prop(g,"hash",()=>e.output?e.output.slice(2):e.address?r().data:g.redeem&&g.redeem.output?i.sha256(g.redeem.output):void 0),u.prop(g,"output",()=>{if(g.hash)return s.compile([c.OP_0,g.hash])}),u.prop(g,"redeem",()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:f,witness:e.witness.slice(0,-1)}}),u.prop(g,"input",()=>{if(g.witness)return f}),u.prop(g,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){let t=s.toStack(d());return g.redeem=Object.assign({witness:t},e.redeem),g.redeem.input=f,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),u.prop(g,"name",()=>{let e=["p2wsh"];return void 0!==g.redeem&&void 0!==g.redeem.name&&e.push(g.redeem.name),e.join("-")}),t.validate){let t=n.from([]);if(e.address){if(r().prefix!==y.bech32)throw TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw TypeError("Invalid address version");if(32!==r().data.length)throw TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==c.OP_0||32!==e.output[1])throw TypeError("Output is invalid");let r=e.output.slice(2);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");t=r}if(e.redeem){if(e.redeem.network&&e.redeem.network!==y)throw TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw TypeError("Ambiguous witness source");if(e.redeem.output){let r=s.decompile(e.redeem.output);if(!r||r.length<1)throw TypeError("Redeem.output is invalid");if(e.redeem.output.byteLength>3600)throw TypeError("Redeem.output unspendable if larger than 3600 bytes");if(s.countNonPushOnlyOPs(r)>201)throw TypeError("Redeem.output unspendable with more than 201 non-push ops");let n=i.sha256(e.redeem.output);if(t.length>0&&!t.equals(n))throw TypeError("Hash mismatch");t=n}if(e.redeem.input&&!s.isPushOnly(d()))throw TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!h(e.witness,e.redeem.witness))throw TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&d().some(p)||e.redeem.output&&(s.decompile(e.redeem.output)||[]).some(p))throw TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){let t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(t))throw TypeError("Witness and redeem.output mismatch");if(e.witness.some(p)||(s.decompile(t)||[]).some(p))throw TypeError("Witness contains uncompressed pubkey")}}return Object.assign(g,e)}t.p2wsh=d},12588:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Psbt=void 0;let i=r(95011),o=r(3493),s=r(96403),a=r(88015),u=r(27565),l=r(59163),c=r(46293),f=r(93207),h=r(53595),p=r(96618),d=r(10320),y=r(29199),g={network:l.bitcoin,maximumFeeRate:5e3};class m{static fromBase64(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.from(e,"base64");return this.fromBuffer(r,t)}static fromHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.from(e,"hex");return this.fromBuffer(r,t)}static fromBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new m(t,i.Psbt.fromBuffer(e,b));return C(r.__CACHE.__TX,r.__CACHE),r}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map(e=>({hash:(0,u.cloneBuffer)(e.hash),index:e.index,sequence:e.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(e=>{let t;try{t=(0,a.fromOutputScript)(e.script,this.opts.network)}catch(e){}return{script:(0,u.cloneBuffer)(e.script),value:e.value,address:t}})}combine(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.data.combine(...t.map(e=>e.data)),this}clone(){let e=m.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){I(e),this.opts.maximumFeeRate=e}setVersion(e){I(e),O(this.data.inputs,"setVersion");let t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){I(e),O(this.data.inputs,"setLocktime");let t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){I(t),O(this.data.inputs,"setInputSequence");let r=this.__CACHE;if(r.__TX.ins.length<=e)throw Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach(e=>this.addInput(e)),this}addInput(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,d.checkTaprootInputFields)(e,e,"addInput"),O(this.data.inputs,"addInput"),e.witnessScript&&ef(e.witnessScript);let t=this.__CACHE;this.data.addInput(e);let r=t.__TX.ins[t.__TX.ins.length-1];R(t,r);let n=this.data.inputs.length-1,i=this.data.inputs[n];return i.nonWitnessUtxo&&Q(this.__CACHE,i,n),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach(e=>this.addOutput(e)),this}addOutput(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");O(this.data.inputs,"addOutput");let{address:t}=e;if("string"==typeof t){let{network:r}=this.opts,n=(0,a.toOutputScript)(t,r);e=Object.assign(e,{script:n})}(0,d.checkTaprootOutputFields)(e,e,"addOutput");let r=this.__CACHE;return this.data.addOutput(e),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(S))throw Error("Not finalized");let t=this.__CACHE;if(e||A(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;let r=t.__TX.clone();return Z(this.data.inputs,r,t,!0),r}getFeeRate(){return D("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return D("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,s.checkForInput)(this.data.inputs,0),ep(this.data.inputs.length).forEach(e=>this.finalizeInput(e)),this}finalizeInput(e,t){let r=(0,s.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(r)?this._finalizeTaprootInput(e,r,void 0,t):this._finalizeInput(e,r,t)}finalizeTaprootInput(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.tapScriptFinalizer,n=(0,s.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(n))return this._finalizeTaprootInput(e,n,t,r);throw Error("Cannot finalize input #".concat(e,". Not Taproot."))}_finalizeInput(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L,{script:n,isP2SH:i,isP2WSH:o,isSegwit:s}=$(e,t,this.__CACHE);if(!n)throw Error("No script found for input #".concat(e));P(t);let{finalScriptSig:a,finalScriptWitness:u}=r(e,t,n,s,i,o);if(a&&this.data.updateInput(e,{finalScriptSig:a}),u&&this.data.updateInput(e,{finalScriptWitness:u}),!a&&!u)throw Error("Unknown error finalizing input #".concat(e));return this.data.clearFinalizedInput(e),this}_finalizeTaprootInput(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.tapScriptFinalizer;if(!t.witnessUtxo)throw Error("Cannot finalize input #".concat(e,". Missing withness utxo."));if(t.tapKeySig){let r=c.p2tr({output:t.witnessUtxo.script,signature:t.tapKeySig}),n=(0,y.witnessStackToScriptWitness)(r.witness);this.data.updateInput(e,{finalScriptWitness:n})}else{let{finalScriptWitness:i}=n(e,t,r);this.data.updateInput(e,{finalScriptWitness:i})}return this.data.clearFinalizedInput(e),this}getInputType(e){let t=(0,s.checkForInput)(this.data.inputs,e),r=ec(et(e,t,this.__CACHE),e,"input",t.redeemScript||eo(t.finalScriptSig),t.witnessScript||es(t.finalScriptWitness));return("raw"===r.type?"":r.type+"-")+eh(r.meaningfulScript)}inputHasPubkey(e,t){return en(t,(0,s.checkForInput)(this.data.inputs,e),e,this.__CACHE)}inputHasHDKey(e,t){let r=(0,s.checkForInput)(this.data.inputs,e),n=T(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}outputHasPubkey(e,t){return ei(t,(0,s.checkForOutput)(this.data.outputs,e),e,this.__CACHE)}outputHasHDKey(e,t){let r=(0,s.checkForOutput)(this.data.outputs,e),n=T(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}validateSignaturesOfAllInputs(e){return(0,s.checkForInput)(this.data.inputs,0),ep(this.data.inputs.length).map(t=>this.validateSignaturesOfInput(t,e)).reduce((e,t)=>!0===t&&e,!0)}validateSignaturesOfInput(e,t,r){let n=this.data.inputs[e];return(0,d.isTaprootInput)(n)?this.validateSignaturesOfTaprootInput(e,t,r):this._validateSignaturesOfInput(e,t,r)}_validateSignaturesOfInput(e,t,r){let n,i,o;let s=this.data.inputs[e],a=(s||{}).partialSig;if(!s||!a||a.length<1)throw Error("No signatures to validate");if("function"!=typeof t)throw Error("Need validator function to validate signatures");let u=r?a.filter(e=>e.pubkey.equals(r)):a;if(u.length<1)throw Error("No signatures for this pubkey");let l=[];for(let r of u){let a=h.signature.decode(r.signature),{hash:u,script:c}=o!==a.hashType?F(e,Object.assign({},s,{sighashType:a.hashType}),this.__CACHE,!0):{hash:n,script:i};o=a.hashType,n=u,i=c,k(r.pubkey,c,"verify"),l.push(t(r.pubkey,u,a.signature))}return l.every(e=>!0===e)}validateSignaturesOfTaprootInput(e,t,r){let n=this.data.inputs[e],i=(n||{}).tapKeySig,o=(n||{}).tapScriptSig;if(!n&&!i&&!(o&&!o.length))throw Error("No signatures to validate");if("function"!=typeof t)throw Error("Need validator function to validate signatures");let s=(r=r&&(0,d.toXOnly)(r))?W(e,n,this.data.inputs,r,this.__CACHE):j(e,n,this.data.inputs,this.__CACHE);if(!s.length)throw Error("No signatures for this pubkey");let a=s.find(e=>!e.leafHash),u=0;if(i&&a){if(!t(a.pubkey,a.hash,K(i)))return!1;u++}if(o)for(let e of o){let r=s.find(t=>e.pubkey.equals(t.pubkey));if(r){if(!t(e.pubkey,r.hash,K(e.signature)))return!1;u++}}return u>0}signAllInputsHD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[p.Transaction.SIGHASH_ALL];if(!e||!e.publicKey||!e.fingerprint)throw Error("Need HDSigner to sign input");let r=[];for(let n of ep(this.data.inputs.length))try{this.signInputHD(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every(e=>!1===e))throw Error("No inputs were signed");return this}signAllInputsHDAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[p.Transaction.SIGHASH_ALL];return new Promise((r,n)=>{if(!e||!e.publicKey||!e.fingerprint)return n(Error("Need HDSigner to sign input"));let i=[],o=[];for(let r of ep(this.data.inputs.length))o.push(this.signInputHDAsync(r,e,t).then(()=>{i.push(!0)},()=>{i.push(!1)}));return Promise.all(o).then(()=>{if(i.every(e=>!1===e))return n(Error("No inputs were signed"));r()})})}signInputHD(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[p.Transaction.SIGHASH_ALL];if(!t||!t.publicKey||!t.fingerprint)throw Error("Need HDSigner to sign input");return z(e,this.data.inputs,t).forEach(t=>this.signInput(e,t,r)),this}signInputHDAsync(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[p.Transaction.SIGHASH_ALL];return new Promise((n,i)=>t&&t.publicKey&&t.fingerprint?Promise.all(z(e,this.data.inputs,t).map(t=>this.signInputAsync(e,t,r))).then(()=>{n()}).catch(i):i(Error("Need HDSigner to sign input")))}signAllInputs(e,t){if(!e||!e.publicKey)throw Error("Need Signer to sign input");let r=[];for(let n of ep(this.data.inputs.length))try{this.signInput(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every(e=>!1===e))throw Error("No inputs were signed");return this}signAllInputsAsync(e,t){return new Promise((r,n)=>{if(!e||!e.publicKey)return n(Error("Need Signer to sign input"));let i=[],o=[];for(let[r]of this.data.inputs.entries())o.push(this.signInputAsync(r,e,t).then(()=>{i.push(!0)},()=>{i.push(!1)}));return Promise.all(o).then(()=>{if(i.every(e=>!1===e))return n(Error("No inputs were signed"));r()})})}signInput(e,t,r){if(!t||!t.publicKey)throw Error("Need Signer to sign input");let n=(0,s.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(n)?this._signTaprootInput(e,n,t,void 0,r):this._signInput(e,t,r)}signTaprootInput(e,t,r,n){if(!t||!t.publicKey)throw Error("Need Signer to sign input");let i=(0,s.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(i))return this._signTaprootInput(e,i,t,r,n);throw Error("Input #".concat(e," is not of type Taproot."))}_signInput(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[p.Transaction.SIGHASH_ALL],{hash:n,sighashType:i}=M(this.data.inputs,e,t.publicKey,this.__CACHE,r),o=[{pubkey:t.publicKey,signature:h.signature.encode(t.sign(n),i)}];return this.data.updateInput(e,{partialSig:o}),this}_signTaprootInput(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[p.Transaction.SIGHASH_DEFAULT],o=this.checkTaprootHashesForSig(e,t,r,n,i),s=o.filter(e=>!e.leafHash).map(e=>(0,d.serializeTaprootSignature)(r.signSchnorr(e.hash),t.sighashType))[0],a=o.filter(e=>!!e.leafHash).map(e=>({pubkey:(0,d.toXOnly)(r.publicKey),signature:(0,d.serializeTaprootSignature)(r.signSchnorr(e.hash),t.sighashType),leafHash:e.leafHash}));return s&&this.data.updateInput(e,{tapKeySig:s}),a.length&&this.data.updateInput(e,{tapScriptSig:a}),this}signInputAsync(e,t,r){return Promise.resolve().then(()=>{if(!t||!t.publicKey)throw Error("Need Signer to sign input");let n=(0,s.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(n)?this._signTaprootInputAsync(e,n,t,void 0,r):this._signInputAsync(e,t,r)})}signTaprootInputAsync(e,t,r,n){return Promise.resolve().then(()=>{if(!t||!t.publicKey)throw Error("Need Signer to sign input");let i=(0,s.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(i))return this._signTaprootInputAsync(e,i,t,r,n);throw Error("Input #".concat(e," is not of type Taproot."))})}_signInputAsync(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[p.Transaction.SIGHASH_ALL],{hash:n,sighashType:i}=M(this.data.inputs,e,t.publicKey,this.__CACHE,r);return Promise.resolve(t.sign(n)).then(r=>{let n=[{pubkey:t.publicKey,signature:h.signature.encode(r,i)}];this.data.updateInput(e,{partialSig:n})})}async _signTaprootInputAsync(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[p.Transaction.SIGHASH_DEFAULT],o=this.checkTaprootHashesForSig(e,t,r,n,i),s=[],a=o.filter(e=>!e.leafHash)[0];if(a){let e=Promise.resolve(r.signSchnorr(a.hash)).then(e=>({tapKeySig:(0,d.serializeTaprootSignature)(e,t.sighashType)}));s.push(e)}let u=o.filter(e=>!!e.leafHash);if(u.length){let e=u.map(e=>Promise.resolve(r.signSchnorr(e.hash)).then(n=>({tapScriptSig:[{pubkey:(0,d.toXOnly)(r.publicKey),signature:(0,d.serializeTaprootSignature)(n,t.sighashType),leafHash:e.leafHash}]})));s.push(...e)}return Promise.all(s).then(t=>{t.forEach(t=>this.data.updateInput(e,t))})}checkTaprootHashesForSig(e,t,r,n,i){if("function"!=typeof r.signSchnorr)throw Error("Need Schnorr Signer to sign taproot input #".concat(e,"."));let o=W(e,t,this.data.inputs,r.publicKey,this.__CACHE,n,i);if(!o||!o.length)throw Error("Can not sign for input #".concat(e," with the key ").concat(r.publicKey.toString("hex")));return o}toBuffer(){return _(this.__CACHE),this.data.toBuffer()}toHex(){return _(this.__CACHE),this.data.toHex()}toBase64(){return _(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return t.witnessScript&&ef(t.witnessScript),(0,d.checkTaprootInputFields)(this.data.inputs[e],t,"updateInput"),this.data.updateInput(e,t),t.nonWitnessUtxo&&Q(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){let r=this.data.outputs[e];return(0,d.checkTaprootOutputFields)(r,t,"updateOutput"),this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}constructor(e={},t=new i.Psbt(new w)){this.data=t,this.opts=Object.assign({},g,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);let r=(e,t,r,n)=>Object.defineProperty(e,t,{enumerable:r,writable:n});r(this,"__CACHE",!1,!0),r(this,"opts",!1,!0)}}t.Psbt=m;let b=e=>new w(e);class w{getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(void 0===e.hash||void 0===e.index||!n.isBuffer(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw Error("Error adding input.");let t="string"==typeof e.hash?(0,u.reverseBuffer)(n.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}addOutput(e){if(void 0===e.script||void 0===e.value||!n.isBuffer(e.script)||"number"!=typeof e.value)throw Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}constructor(e=n.from([2,0,0,0,0,0,0,0,0,0])){this.tx=p.Transaction.fromBuffer(e),x(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}}function v(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return E(1,e.partialSig);case"multisig":let n=c.p2ms({output:t});return E(n.m,e.partialSig,n.pubkeys);default:return!1}}function _(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw Error("Not BIP174 compliant, can not export")}function E(e,t,r){let n;if(!t)return!1;if((n=r?r.map(e=>{let r=ea(e);return t.find(e=>e.pubkey.equals(r))}).filter(e=>!!e):t).length>e)throw Error("Too many signatures");return n.length===e}function S(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function T(e){return t=>!!(t.masterFingerprint.equals(e.fingerprint)&&e.derivePath(t.path).publicKey.equals(t.pubkey))}function I(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw Error("Invalid 32 bit integer")}function A(e,t,r){let n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=n*i;if(n>=r.maximumFeeRate)throw Error("Warning: You are paying around ".concat((o/1e8).toFixed(8)," in ")+"fees, which is ".concat(n," satoshi per byte for a transaction ")+"with a VSize of ".concat(i," bytes (segwit counted as 0.25 byte per ")+"byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.")}function O(e,t){e.forEach(e=>{if((0,d.isTaprootInput)(e)?(0,d.checkTaprootInputForSigs)(e,t):(0,y.checkInputForSig)(e,t))throw Error("Can not modify transaction, signatures exist.")})}function P(e){if(!e.sighashType||!e.partialSig)return;let{partialSig:t,sighashType:r}=e;t.forEach(e=>{let{hashType:t}=h.signature.decode(e.signature);if(r!==t)throw Error("Signature sighash does not match input sighash type")})}function k(e,t,r){if(!(0,y.pubkeyInScript)(e,t))throw Error("Can not ".concat(r," for this input with the key ").concat(e.toString("hex")))}function x(e){if(!e.ins.every(e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length))throw Error("Format Error: Transaction ScriptSigs are not empty")}function C(e,t){e.ins.forEach(e=>{R(t,e)})}function R(e,t){let r=(0,u.reverseBuffer)(n.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function B(e,t){return(r,n,i,o)=>{let s=e({redeem:{output:i}}).output;if(!n.equals(s))throw Error("".concat(t," for ").concat(o," #").concat(r," doesn't match the scriptPubKey in the prevout"))}}let U=B(c.p2sh,"Redeem script"),N=B(c.p2wsh,"Witness script");function D(e,t,r,n){let i;if(!r.every(S))throw Error("PSBT must be finalized to calculate ".concat(t));if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;let o=!0;return(n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,o=!1):i=n.__TX.clone(),Z(r,i,n,o),"__FEE_RATE"===e)?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function L(e,t,r,n,i,o){let s=eh(r);if(!v(t,r,s))throw Error("Can not finalize input #".concat(e));return H(r,s,t.partialSig,n,i,o)}function H(e,t,r,n,i,o){let s,a;let u=G(e,t,r),l=o?c.p2wsh({redeem:u}):null,f=i?c.p2sh({redeem:l||u}):null;return n?(a=l?(0,y.witnessStackToScriptWitness)(l.witness):(0,y.witnessStackToScriptWitness)(u.witness),f&&(s=f.input)):s=f?f.input:u.input,{finalScriptSig:s,finalScriptWitness:a}}function M(e,t,r,n,i){let o=(0,s.checkForInput)(e,t),{hash:a,sighashType:u,script:l}=F(t,o,n,!1,i);return k(r,l,"sign"),{hash:a,sighashType:u}}function F(e,t,r,n,i){let o,s;let a=r.__TX,u=t.sighashType||p.Transaction.SIGHASH_ALL;if(q(u,i),t.nonWitnessUtxo){let n=ee(r,t,e),i=a.ins[e].hash,o=n.getHash();if(!i.equals(o))throw Error("Non-witness UTXO hash for input #".concat(e," doesn't match the hash specified in the prevout"));let u=a.ins[e].index;s=n.outs[u]}else if(t.witnessUtxo)s=t.witnessUtxo;else throw Error("Need a Utxo input item for signing");let{meaningfulScript:l,type:f}=ec(s.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(f)>=0)o=a.hashForWitnessV0(e,l,s.value,u);else if((0,y.isP2WPKH)(l)){let t=c.p2pkh({hash:l.slice(2)}).output;o=a.hashForWitnessV0(e,t,s.value,u)}else{if(void 0===t.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw Error("Input #".concat(e," has witnessUtxo but non-segwit script: ")+"".concat(l.toString("hex")));n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),o=a.hashForSignature(e,l,u)}return{script:l,sighashType:u,hash:o}}function j(e,t,r,n){let i=[];if(t.tapInternalKey){let r=V(e,t,n);r&&i.push(r)}if(t.tapScriptSig){let e=t.tapScriptSig.map(e=>e.pubkey);i.push(...e)}return i.map(i=>W(e,t,r,i,n)).flat()}function V(e,t,r){let{script:n}=er(e,t,r);return(0,y.isP2TR)(n)?n.subarray(2,34):null}function K(e){return 64===e.length?e:e.subarray(0,64)}function W(e,t,r,i,o,s,a){let u=o.__TX,l=t.sighashType||p.Transaction.SIGHASH_DEFAULT;q(l,a);let c=r.map((e,t)=>er(t,e,o)),h=c.map(e=>e.script),g=c.map(e=>e.value),m=[];if(t.tapInternalKey&&!s){let r=V(e,t,o)||n.from([]);if((0,d.toXOnly)(i).equals(r)){let t=u.hashForWitnessV1(e,h,g,l);m.push({pubkey:i,hash:t})}}let b=(t.tapLeafScript||[]).filter(e=>(0,y.pubkeyInScript)(i,e.script)).map(e=>Object.assign({hash:(0,f.tapleafHash)({output:e.script,version:e.leafVersion})},e)).filter(e=>!s||s.equals(e.hash)).map(t=>({pubkey:i,hash:u.hashForWitnessV1(e,h,g,p.Transaction.SIGHASH_DEFAULT,t.hash),leafHash:t.hash}));return m.concat(b)}function q(e,t){if(t&&0>t.indexOf(e)){let t=J(e);throw Error("Sighash type is not allowed. Retry the sign method passing the "+"sighashTypes array of whitelisted types. Sighash type: ".concat(t))}}function G(e,t,r){let n;switch(t){case"multisig":let i=Y(e,r);n=c.p2ms({output:e,signatures:i});break;case"pubkey":n=c.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=c.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=c.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature})}return n}function $(e,t,r){let n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){let o=ee(r,t,e),s=n.ins[e].index;i.script=o.outs[s].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||(0,y.isP2WPKH)(i.script))&&(i.isSegwit=!0),i}function z(e,t,r){let n=(0,s.checkForInput)(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw Error("Need bip32Derivation to sign with HD");let i=n.bip32Derivation.map(e=>e.masterFingerprint.equals(r.fingerprint)?e:void 0).filter(e=>!!e);if(0===i.length)throw Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(e=>{let t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw Error("pubkey did not match bip32Derivation");return t})}function Y(e,t){return c.p2ms({output:e}).pubkeys.map(e=>(t.filter(t=>t.pubkey.equals(e))[0]||{}).signature).filter(e=>!!e)}function X(e){let t=0;function r(r){return t+=r,e.slice(t-r,t)}function n(){let r=o.decode(e,t);return t+=o.decode.bytes,r}function i(){return r(n())}return function(){let e=n(),t=[];for(let r=0;r<e;r++)t.push(i());return t}()}function J(e){let t=e&p.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case p.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case p.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case p.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}function Q(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;let n=p.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;let i=e,o=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){let e=i.__NON_WITNESS_UTXO_BUF_CACHE[o],t=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(void 0!==e)return e;{let e=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e,e}},set(e){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e}})}function Z(e,t,r,n){let i=0;e.forEach((e,o)=>{if(n&&e.finalScriptSig&&(t.ins[o].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[o].witness=X(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){let n=ee(r,e,o),s=t.ins[o].index,a=n.outs[s];i+=a.value}});let o=t.outs.reduce((e,t)=>e+t.value,0),s=i-o;if(s<0)throw Error("Outputs are spending more than Inputs");let a=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(s/a)}function ee(e,t,r){let n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||Q(e,t,r),n[r]}function et(e,t,r){let{script:n}=er(e,t,r);return n}function er(e,t,r){if(void 0!==t.witnessUtxo)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(void 0!==t.nonWitnessUtxo){let n=ee(r,t,e).outs[r.__TX.ins[e].index];return{script:n.script,value:n.value}}throw Error("Can't find pubkey in input without Utxo data")}function en(e,t,r,n){let{meaningfulScript:i}=ec(et(r,t,n),r,"input",t.redeemScript,t.witnessScript);return(0,y.pubkeyInScript)(e,i)}function ei(e,t,r,n){let{meaningfulScript:i}=ec(n.__TX.outs[r].script,r,"output",t.redeemScript,t.witnessScript);return(0,y.pubkeyInScript)(e,i)}function eo(e){if(!e)return;let t=h.decompile(e);if(!t)return;let r=t[t.length-1];if(!(!n.isBuffer(r)||eu(r)||el(r))&&h.decompile(r))return r}function es(e){if(!e)return;let t=X(e),r=t[t.length-1];if(!eu(r)&&h.decompile(r))return r}function ea(e){if(65===e.length){let t=1&e[64],r=e.slice(0,33);return r[0]=2|t,r}return e.slice()}function eu(e){return 33===e.length&&h.isCanonicalPubKey(e)}function el(e){return h.isCanonicalScriptSignature(e)}function ec(e,t,r,n,i){let o;let s=(0,y.isP2SHScript)(e),a=s&&n&&(0,y.isP2WSHScript)(n),u=(0,y.isP2WSHScript)(e);if(s&&void 0===n)throw Error("scriptPubkey is P2SH but redeemScript missing");if((u||a)&&void 0===i)throw Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");return a?(o=i,U(t,e,n,r),N(t,n,i,r),ef(o)):u?(o=i,N(t,e,i,r),ef(o)):s?(o=n,U(t,e,n,r)):o=e,{meaningfulScript:o,type:a?"p2sh-p2wsh":s?"p2sh":u?"p2wsh":"raw"}}function ef(e){if((0,y.isP2WPKH)(e)||(0,y.isP2SHScript)(e))throw Error("P2WPKH or P2SH can not be contained within P2WSH")}function eh(e){return(0,y.isP2WPKH)(e)?"witnesspubkeyhash":(0,y.isP2PKH)(e)?"pubkeyhash":(0,y.isP2MS)(e)?"multisig":(0,y.isP2PK)(e)?"pubkey":"nonstandard"}function ep(e){return[...Array(e).keys()]}},10320:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.checkTaprootInputForSigs=t.tapTreeFromList=t.tapTreeToList=t.tweakInternalPubKey=t.checkTaprootOutputFields=t.checkTaprootInputFields=t.isTaprootOutput=t.isTaprootInput=t.serializeTaprootSignature=t.tapScriptFinalizer=t.toXOnly=void 0;let i=r(94869),o=r(96618),s=r(29199),a=r(93207),u=r(46293),l=r(29199),c=e=>32===e.length?e:e.slice(1,33);function f(e,t,r){let n=N(t,e,r);try{let e=B(t,n).concat(n.script).concat(n.controlBlock);return{finalScriptWitness:(0,s.witnessStackToScriptWitness)(e)}}catch(t){throw Error("Can not finalize taproot input #".concat(e,": ").concat(t))}}function h(e,t){let r=t?n.from([t]):n.from([]);return n.concat([e,r])}function p(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,s.isP2TR)(e.witnessUtxo.script))}function d(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,s.isP2TR)(t))}function y(e,t,r){k(e,t,r),C(e,t,r)}function g(e,t,r){x(e,t,r),m(e,t)}function m(e,t){if(!t.tapTree&&!t.tapInternalKey)return;let r=t.tapInternalKey||e.tapInternalKey,n=t.tapTree||e.tapTree;if(r){let{script:t}=e,i=b(r,n);if(t&&!t.equals(i))throw Error("Error adding output. Script or address missmatch.")}}function b(e,t){let r=t&&_(t.leaves),{output:n}=(0,u.p2tr)({internalPubkey:e,scriptTree:r});return n}function w(e,t){let r=t.tapInternalKey,n=r&&(0,a.tweakKey)(r,t.tapMerkleRoot);if(!n)throw Error("Cannot tweak tap internal key for input #".concat(e,". Public key: ").concat(r&&r.toString("hex")));return n.x}function v(e){if(!(0,i.isTaptree)(e))throw Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return A(e)}function _(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 1===e.length&&0===e[0].depth?{output:e[0].script,version:e[0].leafVersion}:O(e)}function E(e,t){return T(e).some(e=>(0,l.signatureBlocksAction)(e,S,t))}function S(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||o.Transaction.SIGHASH_DEFAULT}}function T(e){let t=[];if(e.tapKeySig&&t.push(e.tapKeySig),e.tapScriptSig&&t.push(...e.tapScriptSig.map(e=>e.signature)),!t.length){let r=I(e.finalScriptWitness);r&&t.push(r)}return t}function I(e){if(!e)return;let t=e.slice(2);if(64===t.length||65===t.length)return t}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r>a.MAX_TAPTREE_DEPTH)throw Error("Max taptree depth exceeded.");return e?((0,i.isTapleaf)(e)?t.push({depth:r,leafVersion:e.version||a.LEAF_VERSION_TAPSCRIPT,script:e.output}):(e[0]&&A(e[0],t,r+1),e[1]&&A(e[1],t,r+1)),t):[]}function O(e){let t;for(let r of e)if(!(t=P(r,t)))throw Error("No room left to insert tapleaf in tree");return t}function P(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r>a.MAX_TAPTREE_DEPTH)throw Error("Max taptree depth exceeded.");if(e.depth===r)return t?void 0:{output:e.script,version:e.leafVersion};if((0,i.isTapleaf)(t))return;let n=P(e,t&&t[0],r+1);if(n)return[n,t&&t[1]];let o=P(e,t&&t[1],r+1);if(o)return[t&&t[0],o]}function k(e,t,r){let n=p(e)&&L(t),i=L(e)&&p(t),o=e===t&&p(t)&&L(t);if(n||i||o)throw Error("Invalid arguments for Psbt.".concat(r,". ")+"Cannot use both taproot and non-taproot fields.")}function x(e,t,r){let n=d(e)&&L(t),i=L(e)&&d(t),o=e===t&&d(t)&&L(t);if(n||i||o)throw Error("Invalid arguments for Psbt.".concat(r,". ")+"Cannot use both taproot and non-taproot fields.")}function C(e,t,r){if(t.tapMerkleRoot){let n=(t.tapLeafScript||[]).every(e=>R(e,t.tapMerkleRoot)),i=(e.tapLeafScript||[]).every(e=>R(e,t.tapMerkleRoot));if(!n||!i)throw Error("Invalid arguments for Psbt.".concat(r,". Tapleaf not part of taptree."))}else if(e.tapMerkleRoot&&!(t.tapLeafScript||[]).every(t=>R(t,e.tapMerkleRoot)))throw Error("Invalid arguments for Psbt.".concat(r,". Tapleaf not part of taptree."))}function R(e,t){if(!t)return!0;let r=(0,a.tapleafHash)({output:e.script,version:e.leafVersion});return(0,a.rootHashFromPath)(e.controlBlock,r).equals(t)}function B(e,t){let r=(0,a.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter(e=>e.leafHash.equals(r)).map(e=>U(t.script,e)).sort((e,t)=>t.positionInScript-e.positionInScript).map(e=>e.signature)}function U(e,t){return Object.assign({positionInScript:(0,s.pubkeyPositionInScript)(t.pubkey,e)},t)}function N(e,t,r){if(!e.tapScriptSig||!e.tapScriptSig.length)throw Error("Can not finalize taproot input #".concat(t,". No tapleaf script signature provided."));let n=(e.tapLeafScript||[]).sort((e,t)=>e.controlBlock.length-t.controlBlock.length).find(t=>D(t,e.tapScriptSig,r));if(!n)throw Error("Can not finalize taproot input #".concat(t,". Signature for tapleaf script not found."));return n}function D(e,t,r){let n=(0,a.tapleafHash)({output:e.script,version:e.leafVersion});return(!r||r.equals(n))&&void 0!==t.find(e=>e.leafHash.equals(n))}function L(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}t.toXOnly=c,t.tapScriptFinalizer=f,t.serializeTaprootSignature=h,t.isTaprootInput=p,t.isTaprootOutput=d,t.checkTaprootInputFields=y,t.checkTaprootOutputFields=g,t.tweakInternalPubKey=w,t.tapTreeToList=v,t.tapTreeFromList=_,t.checkTaprootInputForSigs=E},29199:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.signatureBlocksAction=t.checkInputForSig=t.pubkeyInScript=t.pubkeyPositionInScript=t.witnessStackToScriptWitness=t.isP2TR=t.isP2SHScript=t.isP2WSHScript=t.isP2WPKH=t.isP2PKH=t.isP2PK=t.isP2MS=void 0;let i=r(3493),o=r(53595),s=r(96618),a=r(28243),u=r(46293);function l(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}function c(e){let t=n.allocUnsafe(0);function r(e){t=n.concat([t,n.from(e)])}function o(e){let r=t.length,o=i.encodingLength(e);t=n.concat([t,n.allocUnsafe(o)]),i.encode(e,t,r)}function s(e){o(e.length),r(e)}return function(e){o(e.length),e.forEach(s)}(e),t}function f(e,t){let r=(0,a.hash160)(e),n=e.slice(1,33),i=o.decompile(t);if(null===i)throw Error("Unknown script error");return i.findIndex(t=>"number"!=typeof t&&(t.equals(e)||t.equals(r)||t.equals(n)))}function h(e,t){return -1!==f(e,t)}function p(e,t){return y(e).some(e=>d(e,o.signature.decode,t))}function d(e,t,r){let{hashType:n}=t(e),i=[];switch(n&s.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&n){case s.Transaction.SIGHASH_ALL:break;case s.Transaction.SIGHASH_SINGLE:case s.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}return -1===i.indexOf(r)}function y(e){let t=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=g(e)}else t=e.partialSig;return t.map(e=>e.signature)}function g(e){let t=e.finalScriptSig&&o.decompile(e.finalScriptSig)||[],r=e.finalScriptWitness&&o.decompile(e.finalScriptWitness)||[];return t.concat(r).filter(e=>n.isBuffer(e)&&o.isCanonicalScriptSignature(e)).map(e=>({signature:e}))}t.isP2MS=l(u.p2ms),t.isP2PK=l(u.p2pk),t.isP2PKH=l(u.p2pkh),t.isP2WPKH=l(u.p2wpkh),t.isP2WSHScript=l(u.p2wsh),t.isP2SHScript=l(u.p2sh),t.isP2TR=l(u.p2tr),t.witnessStackToScriptWitness=c,t.pubkeyPositionInScript=f,t.pubkeyInScript=h,t.checkInputForSig=p,t.signatureBlocksAction=d},713:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.encodingLength=void 0;let n=r(55319);function i(e){return e<n.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}function o(e,t,r){let o=i(t);return 1===o?e.writeUInt8(t,r):2===o?(e.writeUInt8(n.OPS.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===o?(e.writeUInt8(n.OPS.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(n.OPS.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),o}function s(e,t){let r,i;let o=e.readUInt8(t);if(o<n.OPS.OP_PUSHDATA1)r=o,i=1;else if(o===n.OPS.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),i=2}else if(o===n.OPS.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(o!==n.OPS.OP_PUSHDATA4)throw Error("Unexpected opcode");r=e.readUInt32LE(t+1),i=5}return{opcode:o,number:r,size:i}}t.encodingLength=i,t.encode=o,t.decode=s},53595:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.signature=t.number=t.isCanonicalScriptSignature=t.isDefinedHashType=t.isCanonicalPubKey=t.toStack=t.fromASM=t.toASM=t.decompile=t.compile=t.countNonPushOnlyOPs=t.isPushOnly=t.OPS=void 0;let i=r(60196),o=r(55319);Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return o.OPS}});let s=r(713),a=r(81559),u=r(89023),l=r(94869),{typeforce:c}=l,f=o.OPS.OP_RESERVED;function h(e){return l.Number(e)&&(e===o.OPS.OP_0||e>=o.OPS.OP_1&&e<=o.OPS.OP_16||e===o.OPS.OP_1NEGATE)}function p(e){return l.Buffer(e)||h(e)}function d(e){return l.Array(e)&&e.every(p)}function y(e){return e.length-e.filter(p).length}function g(e){if(0===e.length)return o.OPS.OP_0;if(1===e.length){if(e[0]>=1&&e[0]<=16)return f+e[0];if(129===e[0])return o.OPS.OP_1NEGATE}}function m(e){return n.isBuffer(e)}function b(e){return l.Array(e)}function w(e){return n.isBuffer(e)}function v(e){if(m(e))return e;c(l.Array,e);let t=e.reduce((e,t)=>w(t)?1===t.length&&void 0!==g(t)?e+1:e+s.encodingLength(t.length)+t.length:e+1,0),r=n.allocUnsafe(t),i=0;if(e.forEach(e=>{if(w(e)){let t=g(e);if(void 0!==t){r.writeUInt8(t,i),i+=1;return}i+=s.encode(r,e.length,i),e.copy(r,i),i+=e.length}else r.writeUInt8(e,i),i+=1}),i!==r.length)throw Error("Could not decode chunks");return r}function _(e){if(b(e))return e;c(l.Buffer,e);let t=[],r=0;for(;r<e.length;){let n=e[r];if(n>o.OPS.OP_0&&n<=o.OPS.OP_PUSHDATA4){let n=s.decode(e,r);if(null===n||(r+=n.size)+n.number>e.length)return null;let i=e.slice(r,r+n.number);r+=n.number;let o=g(i);void 0!==o?t.push(o):t.push(i)}else t.push(n),r+=1}return t}function E(e){return m(e)&&(e=_(e)),e.map(e=>{if(w(e)){let t=g(e);if(void 0===t)return e.toString("hex");e=t}return o.REVERSE_OPS[e]}).join(" ")}function S(e){return c(l.String,e),v(e.split(" ").map(e=>void 0!==o.OPS[e]?o.OPS[e]:(c(l.Hex,e),n.from(e,"hex"))))}function T(e){return c(d,e=_(e)),e.map(e=>w(e)?e:e===o.OPS.OP_0?n.allocUnsafe(0):a.encode(e-f))}function I(e){return l.isPoint(e)}function A(e){let t=-129&e;return t>0&&t<4}function O(e){return!!(n.isBuffer(e)&&A(e[e.length-1]))&&i.check(e.slice(0,-1))}t.isPushOnly=d,t.countNonPushOnlyOPs=y,t.compile=v,t.decompile=_,t.toASM=E,t.fromASM=S,t.toStack=T,t.isCanonicalPubKey=I,t.isDefinedHashType=A,t.isCanonicalScriptSignature=O,t.number=a,t.signature=u},81559:function(e,t,r){"use strict";var n=r(48764).Buffer;function i(e,t,r){t=t||4,r=void 0===r||r;let n=e.length;if(0===n)return 0;if(n>t)throw TypeError("Script number overflow");if(r&&(127&e[n-1])==0&&(n<=1||(128&e[n-2])==0))throw Error("Non-minimally encoded script number");if(5===n){let t=e.readUInt32LE(0),r=e.readUInt8(4);return 128&r?-((-129&r)*4294967296+t):4294967296*r+t}let i=0;for(let t=0;t<n;++t)i|=e[t]<<8*t;return 128&e[n-1]?-(i&~(128<<8*(n-1))):i}function o(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}function s(e){let t=Math.abs(e),r=o(t),i=n.allocUnsafe(r),s=e<0;for(let e=0;e<r;++e)i.writeUInt8(255&t,e),t>>=8;return 128&i[r-1]?i.writeUInt8(s?128:0,r-1):s&&(i[r-1]|=128),i}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0,t.decode=i,t.encode=s},89023:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0;let i=r(60196),o=r(94869),{typeforce:s}=o,a=n.alloc(1,0);function u(e){let t=0;for(;0===e[t];)++t;return t===e.length?a:128&(e=e.slice(t))[0]?n.concat([a,e],1+e.length):e}function l(e){0===e[0]&&(e=e.slice(1));let t=n.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}function c(e){let t=e.readUInt8(e.length-1),r=-129&t;if(r<=0||r>=4)throw Error("Invalid hashType "+t);let o=i.decode(e.slice(0,-1)),s=l(o.r),a=l(o.s);return{signature:n.concat([s,a],64),hashType:t}}function f(e,t){s({signature:o.BufferN(64),hashType:o.UInt8},{signature:e,hashType:t});let r=-129&t;if(r<=0||r>=4)throw Error("Invalid hashType "+t);let a=n.allocUnsafe(1);a.writeUInt8(t,0);let l=u(e.slice(0,32)),c=u(e.slice(32,64));return n.concat([i.encode(l,c),a])}t.decode=c,t.encode=f},96618:function(e,t,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;let i=r(27565),o=r(28243),s=r(53595),a=r(53595),u=r(94869),{typeforce:l}=u;function c(e){let t=e.length;return i.varuint.encodingLength(t)+t}function f(e){let t=e.length;return i.varuint.encodingLength(t)+e.reduce((e,t)=>e+c(t),0)}let h=n.allocUnsafe(0),p=[],d=n.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),y=n.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),g={script:h,valueBuffer:n.from("ffffffffffffffff","hex")};function m(e){return void 0!==e.value}class b{static fromBuffer(e,t){let r=new i.BufferReader(e),n=new b;n.version=r.readInt32();let o=r.readUInt8(),s=r.readUInt8(),a=!1;o===b.ADVANCED_TRANSACTION_MARKER&&s===b.ADVANCED_TRANSACTION_FLAG?a=!0:r.offset-=2;let u=r.readVarInt();for(let e=0;e<u;++e)n.ins.push({hash:r.readSlice(32),index:r.readUInt32(),script:r.readVarSlice(),sequence:r.readUInt32(),witness:p});let l=r.readVarInt();for(let e=0;e<l;++e)n.outs.push({value:r.readUInt64(),script:r.readVarSlice()});if(a){for(let e=0;e<u;++e)n.ins[e].witness=r.readVector();if(!n.hasWitnesses())throw Error("Transaction has superfluous witness data")}if(n.locktime=r.readUInt32(),t)return n;if(r.offset!==e.length)throw Error("Transaction has unexpected data");return n}static fromHex(e){return b.fromBuffer(n.from(e,"hex"),!1)}static isCoinbaseHash(e){l(u.Hash256bit,e);for(let t=0;t<32;++t)if(0!==e[t])return!1;return!0}isCoinbase(){return 1===this.ins.length&&b.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,r,n){return l(u.tuple(u.Hash256bit,u.UInt32,u.maybe(u.UInt32),u.maybe(u.Buffer)),arguments),u.Null(r)&&(r=b.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||h,sequence:r,witness:p})-1}addOutput(e,t){return l(u.tuple(u.Buffer,u.Satoshi),arguments),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some(e=>0!==e.witness.length)}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=e&&this.hasWitnesses();return(t?10:8)+i.varuint.encodingLength(this.ins.length)+i.varuint.encodingLength(this.outs.length)+this.ins.reduce((e,t)=>e+40+c(t.script),0)+this.outs.reduce((e,t)=>e+8+c(t.script),0)+(t?this.ins.reduce((e,t)=>e+f(t.witness),0):0)}clone(){let e=new b;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map(e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness})),e.outs=this.outs.map(e=>({script:e.script,value:e.value})),e}hashForSignature(e,t,r){if(l(u.tuple(u.UInt32,u.Buffer,u.Number),arguments),e>=this.ins.length)return y;let i=s.compile(s.decompile(t).filter(e=>e!==a.OPS.OP_CODESEPARATOR)),c=this.clone();if((31&r)===b.SIGHASH_NONE)c.outs=[],c.ins.forEach((t,r)=>{r!==e&&(t.sequence=0)});else if((31&r)===b.SIGHASH_SINGLE){if(e>=this.outs.length)return y;c.outs.length=e+1;for(let t=0;t<e;t++)c.outs[t]=g;c.ins.forEach((t,r)=>{r!==e&&(t.sequence=0)})}r&b.SIGHASH_ANYONECANPAY?(c.ins=[c.ins[e]],c.ins[0].script=i):(c.ins.forEach(e=>{e.script=h}),c.ins[e].script=i);let f=n.allocUnsafe(c.byteLength(!1)+4);return f.writeInt32LE(r,f.length-4),c.__toBuffer(f,0,!1),o.hash256(f)}hashForWitnessV1(e,t,r,s,a,f){if(l(u.tuple(u.UInt32,l.arrayOf(u.Buffer),l.arrayOf(u.Satoshi),u.UInt32),arguments),r.length!==this.ins.length||t.length!==this.ins.length)throw Error("Must supply prevout script and value for all inputs");let p=s===b.SIGHASH_DEFAULT?b.SIGHASH_ALL:s&b.SIGHASH_OUTPUT_MASK,d=(s&b.SIGHASH_INPUT_MASK)===b.SIGHASH_ANYONECANPAY,y=p===b.SIGHASH_NONE,g=p===b.SIGHASH_SINGLE,m=h,w=h,v=h,_=h,E=h;if(!d){let e=i.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(t=>{e.writeSlice(t.hash),e.writeUInt32(t.index)}),m=o.sha256(e.end()),e=i.BufferWriter.withCapacity(8*this.ins.length),r.forEach(t=>e.writeUInt64(t)),w=o.sha256(e.end()),e=i.BufferWriter.withCapacity(t.map(c).reduce((e,t)=>e+t)),t.forEach(t=>e.writeVarSlice(t)),v=o.sha256(e.end()),e=i.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(t=>e.writeUInt32(t.sequence)),_=o.sha256(e.end())}if(y||g){if(g&&e<this.outs.length){let t=this.outs[e],r=i.BufferWriter.withCapacity(8+c(t.script));r.writeUInt64(t.value),r.writeVarSlice(t.script),E=o.sha256(r.end())}}else{let e=this.outs.map(e=>8+c(e.script)).reduce((e,t)=>e+t),t=i.BufferWriter.withCapacity(e);this.outs.forEach(e=>{t.writeUInt64(e.value),t.writeVarSlice(e.script)}),E=o.sha256(t.end())}let S=(a?2:0)+(f?1:0),T=174-(d?49:0)-(y?32:0)+(f?32:0)+(a?37:0),I=i.BufferWriter.withCapacity(T);if(I.writeUInt8(s),I.writeInt32(this.version),I.writeUInt32(this.locktime),I.writeSlice(m),I.writeSlice(w),I.writeSlice(v),I.writeSlice(_),y||g||I.writeSlice(E),I.writeUInt8(S),d){let n=this.ins[e];I.writeSlice(n.hash),I.writeUInt32(n.index),I.writeUInt64(r[e]),I.writeVarSlice(t[e]),I.writeUInt32(n.sequence)}else I.writeUInt32(e);if(f){let e=i.BufferWriter.withCapacity(c(f));e.writeVarSlice(f),I.writeSlice(o.sha256(e.end()))}return g&&I.writeSlice(E),a&&(I.writeSlice(a),I.writeUInt8(0),I.writeUInt32(4294967295)),o.taggedHash("TapSighash",n.concat([n.from([0]),I.end()]))}hashForWitnessV0(e,t,r,s){let a;l(u.tuple(u.UInt32,u.Buffer,u.Satoshi,u.UInt32),arguments);let f=n.from([]),h=d,p=d,y=d;if(s&b.SIGHASH_ANYONECANPAY||(f=n.allocUnsafe(36*this.ins.length),a=new i.BufferWriter(f,0),this.ins.forEach(e=>{a.writeSlice(e.hash),a.writeUInt32(e.index)}),p=o.hash256(f)),s&b.SIGHASH_ANYONECANPAY||(31&s)===b.SIGHASH_SINGLE||(31&s)===b.SIGHASH_NONE||(f=n.allocUnsafe(4*this.ins.length),a=new i.BufferWriter(f,0),this.ins.forEach(e=>{a.writeUInt32(e.sequence)}),y=o.hash256(f)),(31&s)!==b.SIGHASH_SINGLE&&(31&s)!==b.SIGHASH_NONE){let e=this.outs.reduce((e,t)=>e+8+c(t.script),0);f=n.allocUnsafe(e),a=new i.BufferWriter(f,0),this.outs.forEach(e=>{a.writeUInt64(e.value),a.writeVarSlice(e.script)}),h=o.hash256(f)}else if((31&s)===b.SIGHASH_SINGLE&&e<this.outs.length){let t=this.outs[e];f=n.allocUnsafe(8+c(t.script)),(a=new i.BufferWriter(f,0)).writeUInt64(t.value),a.writeVarSlice(t.script),h=o.hash256(f)}f=n.allocUnsafe(156+c(t)),a=new i.BufferWriter(f,0);let g=this.ins[e];return a.writeInt32(this.version),a.writeSlice(p),a.writeSlice(y),a.writeSlice(g.hash),a.writeUInt32(g.index),a.writeVarSlice(t),a.writeUInt64(r),a.writeUInt32(g.sequence),a.writeSlice(h),a.writeUInt32(this.locktime),a.writeUInt32(s),o.hash256(f)}getHash(e){return e&&this.isCoinbase()?n.alloc(32,0):o.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return(0,i.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(e,t){return this.__toBuffer(e,t,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){l(u.tuple(u.Number,u.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){l(u.tuple(u.Number,[u.Buffer]),arguments),this.ins[e].witness=t}__toBuffer(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=n.allocUnsafe(this.byteLength(r)));let o=new i.BufferWriter(e,t||0);o.writeInt32(this.version);let s=r&&this.hasWitnesses();return(s&&(o.writeUInt8(b.ADVANCED_TRANSACTION_MARKER),o.writeUInt8(b.ADVANCED_TRANSACTION_FLAG)),o.writeVarInt(this.ins.length),this.ins.forEach(e=>{o.writeSlice(e.hash),o.writeUInt32(e.index),o.writeVarSlice(e.script),o.writeUInt32(e.sequence)}),o.writeVarInt(this.outs.length),this.outs.forEach(e=>{m(e)?o.writeUInt64(e.value):o.writeSlice(e.valueBuffer),o.writeVarSlice(e.script)}),s&&this.ins.forEach(e=>{o.writeVector(e.witness)}),o.writeUInt32(this.locktime),void 0!==t)?e.slice(t,o.offset):e}constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}}t.Transaction=b,b.DEFAULT_SEQUENCE=4294967295,b.SIGHASH_DEFAULT=0,b.SIGHASH_ALL=1,b.SIGHASH_NONE=2,b.SIGHASH_SINGLE=3,b.SIGHASH_ANYONECANPAY=128,b.SIGHASH_OUTPUT_MASK=3,b.SIGHASH_INPUT_MASK=128,b.ADVANCED_TRANSACTION_MARKER=0,b.ADVANCED_TRANSACTION_FLAG=1},94869:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oneOf=t.Null=t.BufferN=t.Function=t.UInt32=t.UInt8=t.tuple=t.maybe=t.Hex=t.Buffer=t.String=t.Boolean=t.Array=t.Number=t.Hash256bit=t.Hash160bit=t.Buffer256bit=t.isTaptree=t.isTapleaf=t.TAPLEAF_VERSION_MASK=t.Network=t.ECPoint=t.Satoshi=t.Signer=t.BIP32Path=t.UInt31=t.isPoint=t.typeforce=void 0;let n=r(48764);t.typeforce=r(2401);let i=n.Buffer.alloc(32,0),o=n.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function s(e){if(!n.Buffer.isBuffer(e)||e.length<33)return!1;let t=e[0],r=e.slice(1,33);if(0===r.compare(i)||r.compare(o)>=0)return!1;if((2===t||3===t)&&33===e.length)return!0;let s=e.slice(33);return!(0===s.compare(i)||s.compare(o)>=0)&&4===t&&65===e.length}t.isPoint=s;let a=2147483647;function u(e){return t.typeforce.UInt32(e)&&e<=a}function l(e){return t.typeforce.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function c(e){return(t.typeforce.Buffer(e.publicKey)||"function"==typeof e.getPublicKey)&&"function"==typeof e.sign}t.UInt31=u,t.BIP32Path=l,l.toJSON=()=>"BIP32 derivation path",t.Signer=c;let f=21*1e14;function h(e){return t.typeforce.UInt53(e)&&e<=f}function p(e){return!!(e&&"output"in e&&n.Buffer.isBuffer(e.output))&&(void 0===e.version||(e.version&t.TAPLEAF_VERSION_MASK)===e.version)}function d(e){return(0,t.Array)(e)?2===e.length&&e.every(e=>d(e)):p(e)}t.Satoshi=h,t.ECPoint=t.typeforce.quacksLike("Point"),t.Network=t.typeforce.compile({messagePrefix:t.typeforce.oneOf(t.typeforce.Buffer,t.typeforce.String),bip32:{public:t.typeforce.UInt32,private:t.typeforce.UInt32},pubKeyHash:t.typeforce.UInt8,scriptHash:t.typeforce.UInt8,wif:t.typeforce.UInt8}),t.TAPLEAF_VERSION_MASK=254,t.isTapleaf=p,t.isTaptree=d,t.Buffer256bit=t.typeforce.BufferN(32),t.Hash160bit=t.typeforce.BufferN(20),t.Hash256bit=t.typeforce.BufferN(32),t.Number=t.typeforce.Number,t.Array=t.typeforce.Array,t.Boolean=t.typeforce.Boolean,t.String=t.typeforce.String,t.Buffer=t.typeforce.Buffer,t.Hex=t.typeforce.Hex,t.maybe=t.typeforce.maybe,t.tuple=t.typeforce.tuple,t.UInt8=t.typeforce.UInt8,t.UInt32=t.typeforce.UInt32,t.Function=t.typeforce.Function,t.BufferN=t.typeforce.BufferN,t.Null=t.typeforce.Null,t.oneOf=t.typeforce.oneOf},89397:function(e,t,r){"use strict";let n=r(64354),i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";e.exports=n(i)},52841:function(e,t,r){"use strict";var n=r(89397);e.exports=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var r=Uint8Array.from(t),i=e(r),o=r.length+4,s=new Uint8Array(o);return s.set(r,0),s.set(i.subarray(0,4),r.length),n.encode(s,o)},decode:function(r){var i=t(n.decode(r),e);if(!i)throw Error("Invalid checksum");return i},decodeUnsafe:function(e){var r=n.decodeUnsafe(e);if(r)return t(r)}}}},82946:function(e,t,r){"use strict";var{sha256:n}=r(43739),i=r(52841);function o(e){return n(n(e))}e.exports=i(o)},79681:function(e,t,r){var n="/",i=r(34155);!function(){var t={782:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},646:function(e){"use strict";let t={};function r(e,r,n){function i(e,t,n){return"string"==typeof r?r:r(e,t,n)}n||(n=Error);class o extends n{constructor(e,t,r){super(i(e,t,r))}}o.prototype.name=n.name,o.prototype.code=e,t[e]=o}function n(e,t){if(!Array.isArray(e))return`of ${t} ${String(e)}`;{let r=e.length;return(e=e.map(e=>String(e)),r>2)?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}}function i(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function o(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function s(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}r("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(e,t,r){let a,u;if("string"==typeof t&&i(t,"not ")?(a="must not be",t=t.replace(/^not /,"")):a="must be",o(e," argument"))u=`The ${e} ${a} ${n(t,"type")}`;else{let r=s(e,".")?"property":"argument";u=`The "${e}" ${r} ${a} ${n(t,"type")}`}return u+`. Received type ${typeof r}`},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},403:function(e,t,r){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=c;var o=r(709),s=r(337);r(782)(c,o);for(var a=n(s.prototype),u=0;u<a.length;u++){var l=a[u];c.prototype[l]||(c.prototype[l]=s.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||i.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},889:function(e,t,r){"use strict";e.exports=i;var n=r(170);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(782)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},709:function(e,t,n){"use strict";e.exports=k,k.ReadableState=P,n(361).EventEmitter;var o,s,a,u,l,c=function(e,t){return e.listeners(t).length},f=n(678),h=n(300).Buffer,p=r.g.Uint8Array||function(){};function d(e){return h.from(e)}function y(e){return h.isBuffer(e)||e instanceof p}var g=n(837);s=g&&g.debuglog?g.debuglog("stream"):function(){};var m=n(379),b=n(25),w=n(776).getHighWaterMark,v=n(646).q,_=v.ERR_INVALID_ARG_TYPE,E=v.ERR_STREAM_PUSH_AFTER_EOF,S=v.ERR_METHOD_NOT_IMPLEMENTED,T=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(782)(k,f);var I=b.errorOrDestroy,A=["error","close","destroy","pause","resume"];function O(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function P(e,t,r){o=o||n(403),e=e||{},"boolean"!=typeof r&&(r=t instanceof o),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=w(this,e,"readableHighWaterMark",r),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(a||(a=n(704).s),this.decoder=new a(e.encoding),this.encoding=e.encoding)}function k(e){if(o=o||n(403),!(this instanceof k))return new k(e);var t=this instanceof o;this._readableState=new P(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),f.call(this)}function x(e,t,r,n,i){s("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,D(e,a);else if(i||(o=R(a,t)),o)I(e,o);else if(a.objectMode||t&&t.length>0){if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===h.prototype||(t=d(t)),n)a.endEmitted?I(e,new T):C(e,a,t,!0);else if(a.ended)I(e,new E);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?C(e,a,t,!1):M(e,a)):C(e,a,t,!1)}}else n||(a.reading=!1,M(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function C(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&L(e)),M(e,t)}function R(e,t){var r;return y(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new _("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=b.destroy,k.prototype._undestroy=b.undestroy,k.prototype._destroy=function(e,t){t(e)},k.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=h.from(e,t),t=""),r=!0),x(this,e,t,!1,r)},k.prototype.unshift=function(e){return x(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(e){a||(a=n(704).s);var t=new a(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var B=1073741824;function U(e){return e>=B?e=B:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function N(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=U(e)),e<=t.length)?e:t.ended?t.length:(t.needReadable=!0,0)}function D(e,t){if(s("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?L(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,H(e)))}}function L(e){var t=e._readableState;s("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(s("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(H,e))}function H(e){var t=e._readableState;s("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,G(e)}function M(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(F,e,t))}function F(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(s("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function j(e){return function(){var t=e._readableState;s("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&c(e,"data")&&(t.flowing=!0,G(e))}}function V(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function K(e){s("readable nexttick read 0"),e.read(0)}function W(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(q,e,t))}function q(e,t){s("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),G(e),t.flowing&&!t.reading&&e.read(0)}function G(e){var t=e._readableState;for(s("flow",t.flowing);t.flowing&&null!==e.read(););}function $(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function z(e){var t=e._readableState;s("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(Y,t,e))}function Y(e,t){if(s("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function X(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}k.prototype.read=function(e){s("read",e),e=parseInt(e,10);var t,r=this._readableState,n=e;if(0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return s("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?z(this):L(this),null;if(0===(e=N(e,r))&&r.ended)return 0===r.length&&z(this),null;var i=r.needReadable;return s("need readable",i),(0===r.length||r.length-e<r.highWaterMark)&&s("length less than watermark",i=!0),r.ended||r.reading?s("reading or ended",i=!1):i&&(s("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=N(n,r))),null===(t=e>0?$(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),n!==e&&r.ended&&z(this)),null!==t&&this.emit("data",t),t},k.prototype._read=function(e){I(this,new S("_read()"))},k.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,s("pipe count=%d opts=%j",n.pipesCount,t);var o=t&&!1===t.end||e===i.stdout||e===i.stderr?m:u;function a(e,t){s("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,h())}function u(){s("onend"),e.end()}n.endEmitted?i.nextTick(o):r.once("end",o),e.on("unpipe",a);var l=j(r);e.on("drain",l);var f=!1;function h(){s("cleanup"),e.removeListener("close",y),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",a),r.removeListener("end",u),r.removeListener("end",m),r.removeListener("data",p),f=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&l()}function p(t){s("ondata");var i=e.write(t);s("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==X(n.pipes,e))&&!f&&(s("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function d(t){s("onerror",t),m(),e.removeListener("error",d),0===c(e,"error")&&I(e,t)}function y(){e.removeListener("finish",g),m()}function g(){s("onfinish"),e.removeListener("close",y),m()}function m(){s("unpipe"),r.unpipe(e)}return r.on("data",p),O(e,"error",d),e.once("close",y),e.once("finish",g),e.emit("pipe",r),n.flowing||(s("pipe resume"),r.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=X(t.pipes,e);return -1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},k.prototype.on=function(e,t){var r=f.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"!==e||n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,s("on readable",n.length,n.reading),n.length?L(this):n.reading||i.nextTick(K,this)),r},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(e,t){var r=f.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(V,this),r},k.prototype.removeAllListeners=function(e){var t=f.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&i.nextTick(V,this),t},k.prototype.resume=function(){var e=this._readableState;return e.flowing||(s("resume"),e.flowing=!e.readableListening,W(this,e)),e.paused=!1,this},k.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(s("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){s("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!=i)&&(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<A.length;o++)e.on(A[o],this.emit.bind(this,A[o]));return this._read=function(t){s("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=n(871)),u(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=$,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(e,t){return void 0===l&&(l=n(727)),l(k,e,t)})},170:function(e,t,r){"use strict";e.exports=c;var n=r(646).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(403);function l(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);u.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush(function(t,r){h(e,t,r)})}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(782)(c,u),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,r){r(new i("_transform()"))},c.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,function(e){t(e)})}},337:function(e,t,n){"use strict";function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){q(t,e)}}e.exports=P,P.WritableState=O;var s,a,u={deprecate:n(769)},l=n(678),c=n(300).Buffer,f=r.g.Uint8Array||function(){};function h(e){return c.from(e)}function p(e){return c.isBuffer(e)||e instanceof f}var d=n(25),y=n(776).getHighWaterMark,g=n(646).q,m=g.ERR_INVALID_ARG_TYPE,b=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_MULTIPLE_CALLBACK,v=g.ERR_STREAM_CANNOT_PIPE,_=g.ERR_STREAM_DESTROYED,E=g.ERR_STREAM_NULL_VALUES,S=g.ERR_STREAM_WRITE_AFTER_END,T=g.ERR_UNKNOWN_ENCODING,I=d.errorOrDestroy;function A(){}function O(e,t,r){s=s||n(403),e=e||{},"boolean"!=typeof r&&(r=t instanceof s),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=y(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){D(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function P(e){var t=this instanceof(s=s||n(403));if(!t&&!a.call(P,this))return new P(e);this._writableState=new O(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function k(e,t){var r=new S;I(e,r),i.nextTick(t,r)}function x(e,t,r,n){var o;return null===r?o=new E:"string"==typeof r||t.objectMode||(o=new m("chunk",["string","Buffer"],r)),!o||(I(e,o),i.nextTick(n,o),!1)}function C(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,r)),t}function R(e,t,r,n,i,o){if(!r){var s=C(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else B(e,t,!1,a,n,i,o);return u}function B(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new _("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function U(e,t,r,n,o){--t.pendingcb,r?(i.nextTick(o,n),i.nextTick(K,e,t),e._writableState.errorEmitted=!0,I(e,n)):(o(n),e._writableState.errorEmitted=!0,I(e,n),K(e,t))}function N(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function D(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new w;if(N(r),t)U(e,r,n,t,o);else{var s=F(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||M(e,r),n?i.nextTick(L,e,r,s,o):L(e,r,s,o)}}function L(e,t,r,n){r||H(e,t),t.pendingcb--,n(),K(e,t)}function H(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function M(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=Array(t.bufferedRequestCount),i=t.corkedRequestsFree;i.entry=r;for(var s=0,a=!0;r;)n[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;n.allBuffers=a,B(e,t,!0,t.length,n,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,c=r.callback,f=t.objectMode?1:u.length;if(B(e,t,!1,f,u,l,c),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function F(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function j(e,t){e._final(function(r){t.pendingcb--,r&&I(e,r),t.prefinished=!0,e.emit("prefinish"),K(e,t)})}function V(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(j,e,t)))}function K(e,t){var r=F(t);if(r&&(V(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function W(e,t,r){t.ending=!0,K(e,t),r&&(t.finished?i.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function q(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}n(782)(P,l),O.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(O.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===P&&e&&e._writableState instanceof O}})):a=function(e){return e instanceof this},P.prototype.pipe=function(){I(this,new v)},P.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&p(e);return o&&!c.isBuffer(e)&&(e=h(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=A),n.ending?k(this,r):(o||x(this,n,e,r))&&(n.pendingcb++,i=R(this,n,o,e,t,r)),i},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var e=this._writableState;!e.corked||(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},P.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new T(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(e,t,r){r(new b("_write()"))},P.prototype._writev=null,P.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||W(this,n,r),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),P.prototype.destroy=d.destroy,P.prototype._undestroy=d.undestroy,P.prototype._destroy=function(e,t){t(e)}},871:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o,s=r(698),a=Symbol("lastResolve"),u=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),f=Symbol("lastPromise"),h=Symbol("handlePromise"),p=Symbol("stream");function d(e,t){return{value:e,done:t}}function y(e){var t=e[a];if(null!==t){var r=e[p].read();null!==r&&(e[f]=null,e[a]=null,e[u]=null,t(d(r,!1)))}}function g(e){i.nextTick(y,e)}function m(e,t){return function(r,n){e.then(function(){if(t[c]){r(d(void 0,!0));return}t[h](r,n)},n)}}var b=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((n(o={get stream(){return this[p]},next:function(){var e,t=this,r=this[l];if(null!==r)return Promise.reject(r);if(this[c])return Promise.resolve(d(void 0,!0));if(this[p].destroyed)return new Promise(function(e,r){i.nextTick(function(){t[l]?r(t[l]):e(d(void 0,!0))})});var n=this[f];if(n)e=new Promise(m(n,this));else{var o=this[p].read();if(null!==o)return Promise.resolve(d(o,!1));e=new Promise(this[h])}return this[f]=e,e}},Symbol.asyncIterator,function(){return this}),n(o,"return",function(){var e=this;return new Promise(function(t,r){e[p].destroy(null,function(e){if(e){r(e);return}t(d(void 0,!0))})})}),o),b),v=function(e){var t,r=Object.create(w,(n(t={},p,{value:e,writable:!0}),n(t,a,{value:null,writable:!0}),n(t,u,{value:null,writable:!0}),n(t,l,{value:null,writable:!0}),n(t,c,{value:e._readableState.endEmitted,writable:!0}),n(t,h,{value:function(e,t){var n=r[p].read();n?(r[f]=null,r[a]=null,r[u]=null,e(d(n,!1))):(r[a]=e,r[u]=t)},writable:!0}),t));return r[f]=null,s(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[u];null!==t&&(r[f]=null,r[a]=null,r[u]=null,t(e)),r[l]=e;return}var n=r[a];null!==n&&(r[f]=null,r[a]=null,r[u]=null,n(d(void 0,!0))),r[c]=!0}),e.on("readable",g.bind(null,r)),r};e.exports=v},379:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var l=r(300).Buffer,c=r(837).inspect,f=c&&c.custom||"inspect";function h(e,t,r){l.prototype.copy.call(e,t,r)}e.exports=function(){function e(){s(this,e),this.head=null,this.tail=null,this.length=0}return u(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t=l.allocUnsafe(e>>>0),r=this.head,n=0;r;)h(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:f,value:function(e,t){return c(this,i({},t,{depth:0,customInspect:!1}))}}]),e}()},25:function(e){"use strict";function t(e,t){var o=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(s,this,e)):i.nextTick(s,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?o._writableState?o._writableState.errorEmitted?i.nextTick(n,o):(o._writableState.errorEmitted=!0,i.nextTick(r,o,e)):i.nextTick(r,o,e):t?(i.nextTick(n,o),t(e)):i.nextTick(n,o)})),this}function r(e,t){s(e,t),n(e)}function n(e){(!e._writableState||e._writableState.emitClose)&&(!e._readableState||e._readableState.emitClose)&&e.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(e,t){e.emit("error",t)}function a(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}e.exports={destroy:t,undestroy:o,errorOrDestroy:a}},698:function(e,t,r){"use strict";var n=r(646).q.ERR_STREAM_PREMATURE_CLOSE;function i(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function o(){}function s(e){return e.setHeader&&"function"==typeof e.abort}function a(e,t,r){if("function"==typeof t)return a(e,null,t);t||(t={}),r=i(r||o);var u=t.readable||!1!==t.readable&&e.readable,l=t.writable||!1!==t.writable&&e.writable,c=function(){e.writable||h()},f=e._writableState&&e._writableState.finished,h=function(){l=!1,f=!0,u||r.call(e)},p=e._readableState&&e._readableState.endEmitted,d=function(){u=!1,p=!0,l||r.call(e)},y=function(t){r.call(e,t)},g=function(){var t;return u&&!p?(e._readableState&&e._readableState.ended||(t=new n),r.call(e,t)):l&&!f?(e._writableState&&e._writableState.ended||(t=new n),r.call(e,t)):void 0},m=function(){e.req.on("finish",h)};return s(e)?(e.on("complete",h),e.on("abort",g),e.req?m():e.on("request",m)):l&&!e._writableState&&(e.on("end",c),e.on("close",c)),e.on("end",d),e.on("finish",h),!1!==t.error&&e.on("error",y),e.on("close",g),function(){e.removeListener("complete",h),e.removeListener("abort",g),e.removeListener("request",m),e.req&&e.req.removeListener("finish",h),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",h),e.removeListener("end",d),e.removeListener("error",y),e.removeListener("close",g)}}e.exports=a},727:function(e,t,r){"use strict";function n(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(e){r(e);return}a.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,u,"next",e)}function u(e){n(s,i,o,a,u,"throw",e)}a(void 0)})}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(646).q.ERR_INVALID_ARG_TYPE;function l(e,t,r){if(t&&"function"==typeof t.next)n=t;else if(t&&t[Symbol.asyncIterator])n=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])n=t[Symbol.iterator]();else throw new u("iterable",["Iterable"],t);var n,o=new e(s({objectMode:!0},r)),a=!1;function l(){return c.apply(this,arguments)}function c(){return(c=i(function*(){try{var e=yield n.next(),t=e.value;e.done?o.push(null):o.push((yield t))?l():a=!1}catch(e){o.destroy(e)}})).apply(this,arguments)}return o._read=function(){a||(a=!0,l())},o}e.exports=l},442:function(e,t,r){"use strict";function n(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var i,o=r(646).q,s=o.ERR_MISSING_ARGS,a=o.ERR_STREAM_DESTROYED;function u(e){if(e)throw e}function l(e){return e.setHeader&&"function"==typeof e.abort}function c(e,t,o,s){s=n(s);var u=!1;e.on("close",function(){u=!0}),void 0===i&&(i=r(698)),i(e,{readable:t,writable:o},function(e){if(e)return s(e);u=!0,s()});var c=!1;return function(t){if(!u&&!c){if(c=!0,l(e))return e.abort();if("function"==typeof e.destroy)return e.destroy();s(t||new a("pipe"))}}}function f(e){e()}function h(e,t){return e.pipe(t)}function p(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():u}function d(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=p(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new s("streams");var o=r.map(function(t,n){var s=n<r.length-1;return c(t,s,n>0,function(t){e||(e=t),t&&o.forEach(f),s||(o.forEach(f),i(e))})});return r.reduce(h)}e.exports=d},776:function(e,t,r){"use strict";var n=r(646).q.ERR_INVALID_OPT_VALUE;function i(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function o(e,t,r,o){var s=i(t,o,r);if(null!=s){if(!(isFinite(s)&&Math.floor(s)===s)||s<0)throw new n(o?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}e.exports={getHighWaterMark:o}},678:function(e,t,r){e.exports=r(781)},55:function(e,t,r){var n=r(300),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},173:function(e,t,r){e.exports=i;var n=r(361).EventEmitter;function i(){n.call(this)}r(782)(i,n),i.Readable=r(709),i.Writable=r(337),i.Duplex=r(403),i.Transform=r(170),i.PassThrough=r(889),i.finished=r(698),i.pipeline=r(442),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",a),r.on("close",u));var s=!1;function a(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===n.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",u),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",l),e.on("error",l),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e}},704:function(e,t,r){"use strict";var n=r(55).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function s(e){var t=o(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw Error("Unknown encoding: "+e);return t||e}function a(e){var t;switch(this.encoding=s(e),this.encoding){case"utf16le":this.text=d,this.end=y,t=4;break;case"utf8":this.fillLast=f,t=4;break;case"base64":this.text=g,this.end=m,t=3;break;default:this.write=b,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function u(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function l(e,t,r){var n=t.length-1;if(n<r)return 0;var i=u(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=u(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=u(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function c(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,"�"}}function f(e){var t=this.lastTotal-this.lastNeed,r=c(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function h(e,t){var r=l(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function d(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function y(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function g(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function b(e){return e.toString(this.encoding)}function w(e){return e&&e.length?this.write(e):""}t.s=a,a.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},a.prototype.end=p,a.prototype.text=h,a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},769:function(e){function t(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}function n(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=t},300:function(e){"use strict";e.exports=r(48764)},361:function(e){"use strict";e.exports=r(17187)},781:function(e){"use strict";e.exports=r(17187).EventEmitter},837:function(e){"use strict";e.exports=r(89539)}},o={};function s(e){var r=o[e];if(void 0!==r)return r.exports;var n=o[e]={exports:{}},i=!0;try{t[e](n,n.exports,s),i=!1}finally{i&&delete o[e]}return n.exports}s.ab=n+"/";var a=s(173);e.exports=a}()},51951:function(module){var __dirname="/";!function(){var __webpack_modules__={950:function(__unused_webpack_module,exports){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return -1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,i=r.execScript;!n&&i&&(i.call(r,"null"),n=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var o=Object_keys(r),s=n.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(o,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return e&&forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}}};"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var __nested_webpack_exports__={};__webpack_modules__[950](0,__nested_webpack_exports__),module.exports=__nested_webpack_exports__}()},24244:function(e){"use strict";var t=function(e){return e!=e};e.exports=function(e,r){return 0===e&&0===r?1/e==1/r:!!(e===r||t(e)&&t(r))}},20609:function(e,t,r){"use strict";var n=r(4289),i=r(55559),o=r(24244),s=r(75624),a=r(52281),u=i(s(),Object);n(u,{getPolyfill:s,implementation:o,shim:a}),e.exports=u},75624:function(e,t,r){"use strict";var n=r(24244);e.exports=function(){return"function"==typeof Object.is?Object.is:n}},52281:function(e,t,r){"use strict";var n=r(75624),i=r(4289);e.exports=function(){var e=n();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},18987:function(e,t,r){"use strict";var n;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=r(21414),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),l=a.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{f(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),d=function(e){if("undefined"==typeof window||!p)return f(e);try{return f(e)}catch(e){return!1}};n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===o.call(e),n=s(e),a=t&&"[object String]"===o.call(e),f=[];if(!t&&!r&&!n)throw TypeError("Object.keys called on a non-object");var h=l&&r;if(a&&e.length>0&&!i.call(e,0))for(var p=0;p<e.length;++p)f.push(String(p));if(n&&e.length>0)for(var y=0;y<e.length;++y)f.push(String(y));else for(var g in e)!(h&&"prototype"===g)&&i.call(e,g)&&f.push(String(g));if(u)for(var m=d(e),b=0;b<c.length;++b)!(m&&"constructor"===c[b])&&i.call(e,c[b])&&f.push(c[b]);return f}}e.exports=n},82215:function(e,t,r){"use strict";var n=Array.prototype.slice,i=r(21414),o=Object.keys,s=o?function(e){return o(e)}:r(18987),a=Object.keys;s.shim=function(){return Object.keys?!function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)&&(Object.keys=function(e){return i(e)?a(n.call(e)):a(e)}):Object.keys=s,Object.keys||s},e.exports=s},21414:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},89908:function(e){"use strict";e.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},61798:function(e,t,r){"use strict";var n=r(34155),i=65536,o=4294967295;function s(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var a=r(89509).Buffer,u=r.g.crypto||r.g.msCrypto;function l(e,t){if(e>o)throw RangeError("requested too many random bytes");var r=a.allocUnsafe(e);if(e>0){if(e>i)for(var s=0;s<e;s+=i)u.getRandomValues(r.slice(s,s+i));else u.getRandomValues(r)}return"function"==typeof t?n.nextTick(function(){t(null,r)}):r}u&&u.getRandomValues?e.exports=l:e.exports=s},94281:function(e){"use strict";function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var r={};function n(e,n,i){function o(e,t,r){return"string"==typeof n?n:n(e,t,r)}i||(i=Error);var s=function(e){function r(t,r,n){return e.call(this,o(t,r,n))||this}return t(r,e),r}(i);s.prototype.name=i.name,s.prototype.code=e,r[e]=s}function i(e,t){if(!Array.isArray(e))return"of ".concat(t," ").concat(String(e));var r=e.length;return(e=e.map(function(e){return String(e)}),r>2)?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}function o(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function s(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function a(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}n("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(e,t,r){if("string"==typeof t&&o(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be",s(e," argument"))u="The ".concat(e," ").concat(n," ").concat(i(t,"type"));else{var n,u,l=a(e,".")?"property":"argument";u='The "'.concat(e,'" ').concat(l," ").concat(n," ").concat(i(t,"type"))}return u+". Received type ".concat(typeof r)},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=r},56753:function(e,t,r){"use strict";var n=r(34155),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=c;var o=r(79481),s=r(64229);r(35717)(c,o);for(var a=i(s.prototype),u=0;u<a.length;u++){var l=a[u];c.prototype[l]||(c.prototype[l]=s.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},82725:function(e,t,r){"use strict";e.exports=i;var n=r(74605);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(35717)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},79481:function(e,t,r){"use strict";var n,i,o,s,a,u=r(34155);e.exports=P,P.ReadableState=O,r(17187).EventEmitter;var l=function(e,t){return e.listeners(t).length},c=r(22503),f=r(48764).Buffer,h=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function p(e){return f.from(e)}function d(e){return f.isBuffer(e)||e instanceof h}var y=r(94616);i=y&&y.debuglog?y.debuglog("stream"):function(){};var g=r(57327),m=r(61195),b=r(82457).getHighWaterMark,w=r(94281).q,v=w.ERR_INVALID_ARG_TYPE,_=w.ERR_STREAM_PUSH_AFTER_EOF,E=w.ERR_METHOD_NOT_IMPLEMENTED,S=w.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(35717)(P,c);var T=m.errorOrDestroy,I=["error","close","destroy","pause","resume"];function A(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function O(e,t,i){n=n||r(56753),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=b(this,e,"readableHighWaterMark",i),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(o||(o=r(32553).StringDecoder),this.decoder=new o(e.encoding),this.encoding=e.encoding)}function P(e){if(n=n||r(56753),!(this instanceof P))return new P(e);var t=this instanceof n;this._readableState=new O(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function k(e,t,r,n,o){i("readableAddChunk",t);var s,a=e._readableState;if(null===t)a.reading=!1,N(e,a);else if(o||(s=C(a,t)),s)T(e,s);else if(a.objectMode||t&&t.length>0){if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===f.prototype||(t=p(t)),n)a.endEmitted?T(e,new S):x(e,a,t,!0);else if(a.ended)T(e,new _);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?x(e,a,t,!1):H(e,a)):x(e,a,t,!1)}}else n||(a.reading=!1,H(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function x(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&D(e)),H(e,t)}function C(e,t){var r;return d(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),P.prototype.destroy=m.destroy,P.prototype._undestroy=m.undestroy,P.prototype._destroy=function(e,t){t(e)},P.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=f.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},P.prototype.unshift=function(e){return k(this,e,null,!0,!1)},P.prototype.isPaused=function(){return!1===this._readableState.flowing},P.prototype.setEncoding=function(e){o||(o=r(32553).StringDecoder);var t=new o(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var R=1073741824;function B(e){return e>=R?e=R:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function U(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=B(e)),e<=t.length)?e:t.ended?t.length:(t.needReadable=!0,0)}function N(e,t){if(i("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?D(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,L(e)))}}function D(e){var t=e._readableState;i("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(i("emitReadable",t.flowing),t.emittedReadable=!0,u.nextTick(L,e))}function L(e){var t=e._readableState;i("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,q(e)}function H(e,t){t.readingMore||(t.readingMore=!0,u.nextTick(M,e,t))}function M(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(i("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function F(e){return function(){var t=e._readableState;i("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&l(e,"data")&&(t.flowing=!0,q(e))}}function j(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function V(e){i("readable nexttick read 0"),e.read(0)}function K(e,t){t.resumeScheduled||(t.resumeScheduled=!0,u.nextTick(W,e,t))}function W(e,t){i("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),q(e),t.flowing&&!t.reading&&e.read(0)}function q(e){var t=e._readableState;for(i("flow",t.flowing);t.flowing&&null!==e.read(););}function G(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function $(e){var t=e._readableState;i("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,u.nextTick(z,t,e))}function z(e,t){if(i("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function Y(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}P.prototype.read=function(e){i("read",e),e=parseInt(e,10);var t,r=this._readableState,n=e;if(0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return i("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?$(this):D(this),null;if(0===(e=U(e,r))&&r.ended)return 0===r.length&&$(this),null;var o=r.needReadable;return i("need readable",o),(0===r.length||r.length-e<r.highWaterMark)&&i("length less than watermark",o=!0),r.ended||r.reading?i("reading or ended",o=!1):o&&(i("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=U(n,r))),null===(t=e>0?G(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),n!==e&&r.ended&&$(this)),null!==t&&this.emit("data",t),t},P.prototype._read=function(e){T(this,new E("_read()"))},P.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,i("pipe count=%d opts=%j",n.pipesCount,t);var o=t&&!1===t.end||e===u.stdout||e===u.stderr?m:a;function s(e,t){i("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,h())}function a(){i("onend"),e.end()}n.endEmitted?u.nextTick(o):r.once("end",o),e.on("unpipe",s);var c=F(r);e.on("drain",c);var f=!1;function h(){i("cleanup"),e.removeListener("close",y),e.removeListener("finish",g),e.removeListener("drain",c),e.removeListener("error",d),e.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",p),f=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}function p(t){i("ondata");var o=e.write(t);i("dest.write",o),!1===o&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==Y(n.pipes,e))&&!f&&(i("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function d(t){i("onerror",t),m(),e.removeListener("error",d),0===l(e,"error")&&T(e,t)}function y(){e.removeListener("finish",g),m()}function g(){i("onfinish"),e.removeListener("close",y),m()}function m(){i("unpipe"),r.unpipe(e)}return r.on("data",p),A(e,"error",d),e.once("close",y),e.once("finish",g),e.emit("pipe",r),n.flowing||(i("pipe resume"),r.resume()),e},P.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=Y(t.pipes,e);return -1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},P.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"!==e||n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,i("on readable",n.length,n.reading),n.length?D(this):n.reading||u.nextTick(V,this)),r},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(e,t){var r=c.prototype.removeListener.call(this,e,t);return"readable"===e&&u.nextTick(j,this),r},P.prototype.removeAllListeners=function(e){var t=c.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&u.nextTick(j,this),t},P.prototype.resume=function(){var e=this._readableState;return e.flowing||(i("resume"),e.flowing=!e.readableListening,K(this,e)),e.paused=!1,this},P.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",function(){if(i("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(o){i("wrapped data"),r.decoder&&(o=r.decoder.write(o)),(!r.objectMode||null!=o)&&(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))}),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var s=0;s<I.length;s++)e.on(I[s],this.emit.bind(this,I[s]));return this._read=function(t){i("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(P.prototype[Symbol.asyncIterator]=function(){return void 0===s&&(s=r(45850)),s(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),P._fromList=G,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(P.from=function(e,t){return void 0===a&&(a=r(15167)),a(P,e,t)})},74605:function(e,t,r){"use strict";e.exports=c;var n=r(94281).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(56753);function l(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);u.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush(function(t,r){h(e,t,r)})}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(35717)(c,u),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,r){r(new i("_transform()"))},c.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,function(e){t(e)})}},64229:function(e,t,r){"use strict";var n,i,o=r(34155);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){W(t,e)}}e.exports=O,O.WritableState=A;var a={deprecate:r(94927)},u=r(22503),l=r(48764).Buffer,c=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function f(e){return l.from(e)}function h(e){return l.isBuffer(e)||e instanceof c}var p=r(61195),d=r(82457).getHighWaterMark,y=r(94281).q,g=y.ERR_INVALID_ARG_TYPE,m=y.ERR_METHOD_NOT_IMPLEMENTED,b=y.ERR_MULTIPLE_CALLBACK,w=y.ERR_STREAM_CANNOT_PIPE,v=y.ERR_STREAM_DESTROYED,_=y.ERR_STREAM_NULL_VALUES,E=y.ERR_STREAM_WRITE_AFTER_END,S=y.ERR_UNKNOWN_ENCODING,T=p.errorOrDestroy;function I(){}function A(e,t,i){n=n||r(56753),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){N(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function O(e){var t=this instanceof(n=n||r(56753));if(!t&&!i.call(O,this))return new O(e);this._writableState=new A(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function P(e,t){var r=new E;T(e,r),o.nextTick(t,r)}function k(e,t,r,n){var i;return null===r?i=new _:"string"==typeof r||t.objectMode||(i=new g("chunk",["string","Buffer"],r)),!i||(T(e,i),o.nextTick(n,i),!1)}function x(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r)),t}function C(e,t,r,n,i,o){if(!r){var s=x(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else R(e,t,!1,a,n,i,o);return u}function R(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function B(e,t,r,n,i){--t.pendingcb,r?(o.nextTick(i,n),o.nextTick(V,e,t),e._writableState.errorEmitted=!0,T(e,n)):(i(n),e._writableState.errorEmitted=!0,T(e,n),V(e,t))}function U(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function N(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new b;if(U(r),t)B(e,r,n,t,i);else{var s=M(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||H(e,r),n?o.nextTick(D,e,r,s,i):D(e,r,s,i)}}function D(e,t,r,n){r||L(e,t),t.pendingcb--,n(),V(e,t)}function L(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function H(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=Array(t.bufferedRequestCount),i=t.corkedRequestsFree;i.entry=r;for(var o=0,a=!0;r;)n[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;n.allBuffers=a,R(e,t,!0,t.length,n,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,c=r.callback,f=t.objectMode?1:u.length;if(R(e,t,!1,f,u,l,c),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function M(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function F(e,t){e._final(function(r){t.pendingcb--,r&&T(e,r),t.prefinished=!0,e.emit("prefinish"),V(e,t)})}function j(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,o.nextTick(F,e,t)))}function V(e,t){var r=M(t);if(r&&(j(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function K(e,t,r){t.ending=!0,V(e,t),r&&(t.finished?o.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function W(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}r(35717)(O,u),A.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(A.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===O&&e&&e._writableState instanceof A}})):i=function(e){return e instanceof this},O.prototype.pipe=function(){T(this,new w)},O.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&h(e);return o&&!l.isBuffer(e)&&(e=f(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=I),n.ending?P(this,r):(o||k(this,n,e,r))&&(n.pendingcb++,i=C(this,n,o,e,t,r)),i},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var e=this._writableState;!e.corked||(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||H(this,e))},O.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),O.prototype._write=function(e,t,r){r(new m("_write()"))},O.prototype._writev=null,O.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||K(this,n,r),this},Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),O.prototype.destroy=p.destroy,O.prototype._undestroy=p.undestroy,O.prototype._destroy=function(e,t){t(e)}},45850:function(e,t,r){"use strict";var n,i=r(34155);function o(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=a(e,"string");return"symbol"==typeof t?t:String(t)}function a(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var u=r(8610),l=Symbol("lastResolve"),c=Symbol("lastReject"),f=Symbol("error"),h=Symbol("ended"),p=Symbol("lastPromise"),d=Symbol("handlePromise"),y=Symbol("stream");function g(e,t){return{value:e,done:t}}function m(e){var t=e[l];if(null!==t){var r=e[y].read();null!==r&&(e[p]=null,e[l]=null,e[c]=null,t(g(r,!1)))}}function b(e){i.nextTick(m,e)}function w(e,t){return function(r,n){e.then(function(){if(t[h]){r(g(void 0,!0));return}t[d](r,n)},n)}}var v=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((o(n={get stream(){return this[y]},next:function(){var e,t=this,r=this[f];if(null!==r)return Promise.reject(r);if(this[h])return Promise.resolve(g(void 0,!0));if(this[y].destroyed)return new Promise(function(e,r){i.nextTick(function(){t[f]?r(t[f]):e(g(void 0,!0))})});var n=this[p];if(n)e=new Promise(w(n,this));else{var o=this[y].read();if(null!==o)return Promise.resolve(g(o,!1));e=new Promise(this[d])}return this[p]=e,e}},Symbol.asyncIterator,function(){return this}),o(n,"return",function(){var e=this;return new Promise(function(t,r){e[y].destroy(null,function(e){if(e){r(e);return}t(g(void 0,!0))})})}),n),v),E=function(e){var t,r=Object.create(_,(o(t={},y,{value:e,writable:!0}),o(t,l,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,f,{value:null,writable:!0}),o(t,h,{value:e._readableState.endEmitted,writable:!0}),o(t,d,{value:function(e,t){var n=r[y].read();n?(r[p]=null,r[l]=null,r[c]=null,e(g(n,!1))):(r[l]=e,r[c]=t)},writable:!0}),t));return r[p]=null,u(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[c];null!==t&&(r[p]=null,r[l]=null,r[c]=null,t(e)),r[f]=e;return}var n=r[l];null!==n&&(r[p]=null,r[l]=null,r[c]=null,n(g(void 0,!0))),r[h]=!0}),e.on("readable",b.bind(null,r)),r};e.exports=E},57327:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function u(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=c(e,"string");return"symbol"==typeof t?t:String(t)}function c(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var f=r(48764).Buffer,h=r(52361).inspect,p=h&&h.custom||"inspect";function d(e,t,r){f.prototype.copy.call(e,t,r)}e.exports=function(){function e(){s(this,e),this.head=null,this.tail=null,this.length=0}return u(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return f.alloc(0);for(var t=f.allocUnsafe(e>>>0),r=this.head,n=0;r;)d(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=f.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:p,value:function(e,t){return h(this,i(i({},t),{},{depth:0,customInspect:!1}))}}]),e}()},61195:function(e,t,r){"use strict";var n=r(34155);function i(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return i||a?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(u,this,e)):n.nextTick(u,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?r._writableState?r._writableState.errorEmitted?n.nextTick(s,r):(r._writableState.errorEmitted=!0,n.nextTick(o,r,e)):n.nextTick(o,r,e):t?(n.nextTick(s,r),t(e)):n.nextTick(s,r)})),this}function o(e,t){u(e,t),s(e)}function s(e){(!e._writableState||e._writableState.emitClose)&&(!e._readableState||e._readableState.emitClose)&&e.emit("close")}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function u(e,t){e.emit("error",t)}function l(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}e.exports={destroy:i,undestroy:a,errorOrDestroy:l}},8610:function(e,t,r){"use strict";var n=r(94281).q.ERR_STREAM_PREMATURE_CLOSE;function i(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function o(){}function s(e){return e.setHeader&&"function"==typeof e.abort}function a(e,t,r){if("function"==typeof t)return a(e,null,t);t||(t={}),r=i(r||o);var u=t.readable||!1!==t.readable&&e.readable,l=t.writable||!1!==t.writable&&e.writable,c=function(){e.writable||h()},f=e._writableState&&e._writableState.finished,h=function(){l=!1,f=!0,u||r.call(e)},p=e._readableState&&e._readableState.endEmitted,d=function(){u=!1,p=!0,l||r.call(e)},y=function(t){r.call(e,t)},g=function(){var t;return u&&!p?(e._readableState&&e._readableState.ended||(t=new n),r.call(e,t)):l&&!f?(e._writableState&&e._writableState.ended||(t=new n),r.call(e,t)):void 0},m=function(){e.req.on("finish",h)};return s(e)?(e.on("complete",h),e.on("abort",g),e.req?m():e.on("request",m)):l&&!e._writableState&&(e.on("end",c),e.on("close",c)),e.on("end",d),e.on("finish",h),!1!==t.error&&e.on("error",y),e.on("close",g),function(){e.removeListener("complete",h),e.removeListener("abort",g),e.removeListener("request",m),e.req&&e.req.removeListener("finish",h),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",h),e.removeListener("end",d),e.removeListener("error",y),e.removeListener("close",g)}}e.exports=a},15167:function(e){e.exports=function(){throw Error("Readable.from is not available in the browser")}},59946:function(e,t,r){"use strict";function n(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var i,o=r(94281).q,s=o.ERR_MISSING_ARGS,a=o.ERR_STREAM_DESTROYED;function u(e){if(e)throw e}function l(e){return e.setHeader&&"function"==typeof e.abort}function c(e,t,o,s){s=n(s);var u=!1;e.on("close",function(){u=!0}),void 0===i&&(i=r(8610)),i(e,{readable:t,writable:o},function(e){if(e)return s(e);u=!0,s()});var c=!1;return function(t){if(!u&&!c){if(c=!0,l(e))return e.abort();if("function"==typeof e.destroy)return e.destroy();s(t||new a("pipe"))}}}function f(e){e()}function h(e,t){return e.pipe(t)}function p(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():u}function d(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=p(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new s("streams");var o=r.map(function(t,n){var s=n<r.length-1;return c(t,s,n>0,function(t){e||(e=t),t&&o.forEach(f),s||(o.forEach(f),i(e))})});return r.reduce(h)}e.exports=d},82457:function(e,t,r){"use strict";var n=r(94281).q.ERR_INVALID_OPT_VALUE;function i(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function o(e,t,r,o){var s=i(t,o,r);if(null!=s){if(!(isFinite(s)&&Math.floor(s)===s)||s<0)throw new n(o?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}e.exports={getHighWaterMark:o}},22503:function(e,t,r){e.exports=r(17187).EventEmitter},88473:function(e,t,r){(t=e.exports=r(79481)).Stream=t,t.Readable=t,t.Writable=r(64229),t.Duplex=r(56753),t.Transform=r(74605),t.PassThrough=r(82725),t.finished=r(8610),t.pipeline=r(59946)},79785:function(e,t,r){"use strict";var n=r(48764).Buffer,i=r(35717),o=r(3349),s=Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],f=[0,1518500249,1859775393,2400959708,2840853838],h=[1352829926,1548603684,1836072691,2053994217,0];function p(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function d(e,t){return e<<t|e>>>32-t}function y(e,t,r,n,i,o,s,a){return d(e+(t^r^n)+o+s|0,a)+i|0}function g(e,t,r,n,i,o,s,a){return d(e+(t&r|~t&n)+o+s|0,a)+i|0}function m(e,t,r,n,i,o,s,a){return d(e+((t|~r)^n)+o+s|0,a)+i|0}function b(e,t,r,n,i,o,s,a){return d(e+(t&n|r&~n)+o+s|0,a)+i|0}function w(e,t,r,n,i,o,s,a){return d(e+(t^(r|~n))+o+s|0,a)+i|0}i(p,o),p.prototype._update=function(){for(var e,t,r=s,n=0;n<16;++n)r[n]=this._block.readInt32LE(4*n);for(var i=0|this._a,o=0|this._b,p=0|this._c,v=0|this._d,_=0|this._e,E=0|this._a,S=0|this._b,T=0|this._c,I=0|this._d,A=0|this._e,O=0;O<80;O+=1)O<16?(e=y(i,o,p,v,_,r[a[O]],f[0],l[O]),t=w(E,S,T,I,A,r[u[O]],h[0],c[O])):O<32?(e=g(i,o,p,v,_,r[a[O]],f[1],l[O]),t=b(E,S,T,I,A,r[u[O]],h[1],c[O])):O<48?(e=m(i,o,p,v,_,r[a[O]],f[2],l[O]),t=m(E,S,T,I,A,r[u[O]],h[2],c[O])):O<64?(e=b(i,o,p,v,_,r[a[O]],f[3],l[O]),t=g(E,S,T,I,A,r[u[O]],h[3],c[O])):(e=w(i,o,p,v,_,r[a[O]],f[4],l[O]),t=y(E,S,T,I,A,r[u[O]],h[4],c[O])),i=_,_=v,v=d(p,10),p=o,o=e,E=A,A=I,I=d(T,10),T=S,S=t;var P=this._b+p+I|0;this._b=this._c+v+A|0,this._c=this._d+_+E|0,this._d=this._e+i+S|0,this._e=this._a+o+T|0,this._a=P},p.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=p},79246:function(e,t,r){"use strict";var n=r(17379),i=r(98420),o=n("RegExp.prototype.exec"),s=r(14453);e.exports=function(e){if(!i(e))throw new s("`regex` must be a RegExp");return function(t){return null!==o(e,t)}}},17221:function(e,t,r){"use strict";e.exports=r(59119)(r(43441))},64435:function(e,t,r){"use strict";var n=r(48764).Buffer,i=Object.prototype.toString;t.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},t.isBoolean=function(e,t){if("[object Boolean]"!==i.call(e))throw TypeError(t)},t.isBuffer=function(e,t){if(!n.isBuffer(e))throw TypeError(t)},t.isFunction=function(e,t){if("[object Function]"!==i.call(e))throw TypeError(t)},t.isNumber=function(e,t){if("[object Number]"!==i.call(e))throw TypeError(t)},t.isObject=function(e,t){if("[object Object]"!==i.call(e))throw TypeError(t)},t.isBufferLength=function(e,t,r){if(e.length!==t)throw RangeError(r)},t.isBufferLength2=function(e,t,r,n){if(e.length!==t&&e.length!==r)throw RangeError(n)},t.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},t.isNumberInInterval=function(e,t,r,n){if(e<=t||e>=r)throw RangeError(n)}},8424:function(e,t,r){"use strict";var n=r(89509).Buffer,i=r(93027),o=n.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=n.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);t.privateKeyExport=function(e,t,r){var i=n.from(r?o:s);return e.copy(i,r?8:9),t.copy(i,r?181:214),i},t.privateKeyImport=function(e){var t=e.length,r=0;if(!(t<1)&&48===e[r]&&!(t<(r+=1)+1)&&128&e[r]){var n=127&e[r];if(r+=1,!(n<1)&&!(n>2)&&!(t<r+n)){var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);if(!(t<(r+=n)+i)){if(t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||(r+=3,t<r+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]))return;return e.slice(r+2,r+2+e[r+1])}}}},t.signatureExport=function(e){for(var t=n.concat([n.from([0]),e.r]),r=33,o=0;r>1&&0===t[o]&&!(128&t[o+1]);--r,++o);for(var s=n.concat([n.from([0]),e.s]),a=33,u=0;a>1&&0===s[u]&&!(128&s[u+1]);--a,++u);return i.encode(t.slice(o),s.slice(u))},t.signatureImport=function(e){var t=n.alloc(32,0),r=n.alloc(32,0);try{var o=i.decode(e);if(33===o.r.length&&0===o.r[0]&&(o.r=o.r.slice(1)),o.r.length>32)throw Error("R length is too long");if(33===o.s.length&&0===o.s[0]&&(o.s=o.s.slice(1)),o.s.length>32)throw Error("S length is too long")}catch(e){return}return o.r.copy(t,32-o.r.length),o.s.copy(r,32-o.s.length),{r:t,s:r}},t.signatureImportLax=function(e){var t=n.alloc(32,0),r=n.alloc(32,0),i=e.length,o=0;if(48!==e[o++])return;var s=e[o++];if((!(128&s)||!((o+=s-128)>i))&&2===e[o++]){var a=e[o++];if(128&a){if(o+(s=a-128)>i)return;for(;s>0&&0===e[o];o+=1,s-=1);for(a=0;s>0;o+=1,s-=1)a=(a<<8)+e[o]}if(!(a>i-o)){var u=o;if(o+=a,2===e[o++]){var l=e[o++];if(128&l){if(o+(s=l-128)>i)return;for(;s>0&&0===e[o];o+=1,s-=1);for(l=0;s>0;o+=1,s-=1)l=(l<<8)+e[o]}if(!(l>i-o)){var c=o;for(o+=l;a>0&&0===e[u];a-=1,u+=1);if(!(a>32)){var f=e.slice(u,u+a);for(f.copy(t,32-f.length);l>0&&0===e[c];l-=1,c+=1);if(!(l>32)){var h=e.slice(c,c+l);return h.copy(r,32-h.length),{r:t,s:r}}}}}}}}},43441:function(e,t,r){"use strict";var n=r(89509).Buffer,i=r(23482),o=r(13550),s=r(86266).ec,a=r(69610),u=new s("secp256k1"),l=u.curve;function c(e,t){var r=new o(t);if(r.cmp(l.p)>=0)return null;var n=(r=r.toRed(l.red)).redSqr().redIMul(r).redIAdd(l.b).redSqrt();3===e!==n.isOdd()&&(n=n.redNeg());let i=r.redSqr().redIMul(r);return n.redSqr().redISub(i.redIAdd(l.b)).isZero()?u.keyPair({pub:{x:r,y:n}}):null}function f(e,t,r){var n=new o(t),i=new o(r);if(n.cmp(l.p)>=0||i.cmp(l.p)>=0||(n=n.toRed(l.red),i=i.toRed(l.red),(6===e||7===e)&&i.isOdd()!==(7===e)))return null;var s=n.redSqr().redIMul(n);return i.redSqr().redISub(s.redIAdd(l.b)).isZero()?u.keyPair({pub:{x:n,y:i}}):null}function h(e){var t=e[0];switch(t){case 2:case 3:if(33!==e.length)return null;return c(t,e.slice(1,33));case 4:case 6:case 7:if(65!==e.length)return null;return f(t,e.slice(1,33),e.slice(33,65));default:return null}}t.privateKeyVerify=function(e){var t=new o(e);return 0>t.cmp(l.n)&&!t.isZero()},t.privateKeyExport=function(e,t){var r=new o(e);if(r.cmp(l.n)>=0||r.isZero())throw Error(a.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return n.from(u.keyFromPrivate(e).getPublic(t,!0))},t.privateKeyNegate=function(e){var t=new o(e);return t.isZero()?n.alloc(32):l.n.sub(t).umod(l.n).toArrayLike(n,"be",32)},t.privateKeyModInverse=function(e){var t=new o(e);if(t.cmp(l.n)>=0||t.isZero())throw Error(a.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(l.n).toArrayLike(n,"be",32)},t.privateKeyTweakAdd=function(e,t){var r=new o(t);if(r.cmp(l.n)>=0||(r.iadd(new o(e)),r.cmp(l.n)>=0&&r.isub(l.n),r.isZero()))throw Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toArrayLike(n,"be",32)},t.privateKeyTweakMul=function(e,t){var r=new o(t);if(r.cmp(l.n)>=0||r.isZero())throw Error(a.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return r.imul(new o(e)),r.cmp(l.n)&&(r=r.umod(l.n)),r.toArrayLike(n,"be",32)},t.publicKeyCreate=function(e,t){var r=new o(e);if(r.cmp(l.n)>=0||r.isZero())throw Error(a.EC_PUBLIC_KEY_CREATE_FAIL);return n.from(u.keyFromPrivate(e).getPublic(t,!0))},t.publicKeyConvert=function(e,t){var r=h(e);if(null===r)throw Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return n.from(r.getPublic(t,!0))},t.publicKeyVerify=function(e){return null!==h(e)},t.publicKeyTweakAdd=function(e,t,r){var i=h(e);if(null===i)throw Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new o(t)).cmp(l.n)>=0)throw Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var s=l.g.mul(t).add(i.pub);if(s.isInfinity())throw Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return n.from(s.encode(!0,r))},t.publicKeyTweakMul=function(e,t,r){var i=h(e);if(null===i)throw Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new o(t)).cmp(l.n)>=0||t.isZero())throw Error(a.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return n.from(i.pub.mul(t).encode(!0,r))},t.publicKeyCombine=function(e,t){for(var r=Array(e.length),i=0;i<e.length;++i)if(r[i]=h(e[i]),null===r[i])throw Error(a.EC_PUBLIC_KEY_PARSE_FAIL);for(var o=r[0].pub,s=1;s<r.length;++s)o=o.add(r[s].pub);if(o.isInfinity())throw Error(a.EC_PUBLIC_KEY_COMBINE_FAIL);return n.from(o.encode(!0,t))},t.signatureNormalize=function(e){var t=new o(e.slice(0,32)),r=new o(e.slice(32,64));if(t.cmp(l.n)>=0||r.cmp(l.n)>=0)throw Error(a.ECDSA_SIGNATURE_PARSE_FAIL);var i=n.from(e);return 1===r.cmp(u.nh)&&l.n.sub(r).toArrayLike(n,"be",32).copy(i,32),i},t.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(new o(t).cmp(l.n)>=0||new o(r).cmp(l.n)>=0)throw Error(a.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},t.signatureImport=function(e){var t=new o(e.r);t.cmp(l.n)>=0&&(t=new o(0));var r=new o(e.s);return r.cmp(l.n)>=0&&(r=new o(0)),n.concat([t.toArrayLike(n,"be",32),r.toArrayLike(n,"be",32)])},t.sign=function(e,t,r,i){if("function"==typeof r){var s=r;r=function(r){var u=s(e,t,null,i,r);if(!n.isBuffer(u)||32!==u.length)throw Error(a.ECDSA_SIGN_FAIL);return new o(u)}}var c=new o(t);if(c.cmp(l.n)>=0||c.isZero())throw Error(a.ECDSA_SIGN_FAIL);var f=u.sign(e,t,{canonical:!0,k:r,pers:i});return{signature:n.concat([f.r.toArrayLike(n,"be",32),f.s.toArrayLike(n,"be",32)]),recovery:f.recoveryParam}},t.verify=function(e,t,r){var n={r:t.slice(0,32),s:t.slice(32,64)},i=new o(n.r),s=new o(n.s);if(i.cmp(l.n)>=0||s.cmp(l.n)>=0)throw Error(a.ECDSA_SIGNATURE_PARSE_FAIL);if(1===s.cmp(u.nh)||i.isZero()||s.isZero())return!1;var c=h(r);if(null===c)throw Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return u.verify(e,n,{x:c.pub.x,y:c.pub.y})},t.recover=function(e,t,r,i){var s={r:t.slice(0,32),s:t.slice(32,64)},c=new o(s.r),f=new o(s.s);if(c.cmp(l.n)>=0||f.cmp(l.n)>=0)throw Error(a.ECDSA_SIGNATURE_PARSE_FAIL);try{if(c.isZero()||f.isZero())throw Error();var h=u.recoverPubKey(e,s,r);return n.from(h.encode(!0,i))}catch(e){throw Error(a.ECDSA_RECOVER_FAIL)}},t.ecdh=function(e,r){var n=t.ecdhUnsafe(e,r,!0);return i("sha256").update(n).digest()},t.ecdhUnsafe=function(e,t,r){var i=h(e);if(null===i)throw Error(a.EC_PUBLIC_KEY_PARSE_FAIL);var s=new o(t);if(s.cmp(l.n)>=0||s.isZero())throw Error(a.ECDH_FAIL);return n.from(i.pub.mul(s).encode(!0,r))}},59119:function(e,t,r){"use strict";var n=r(64435),i=r(8424),o=r(69610);function s(e,t){return void 0===e?t:(n.isBoolean(e,o.COMPRESSED_TYPE_INVALID),e)}e.exports=function(e){return{privateKeyVerify:function(t){return n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,r){n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),r=s(r,!0);var a=e.privateKeyExport(t,r);return i.privateKeyExport(t,a,r)},privateKeyImport:function(t){if(n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),(t=i.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw Error(o.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,r){return n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,o.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,o.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,r)},privateKeyTweakMul:function(t,r){return n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,o.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,o.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,r)},publicKeyCreate:function(t,r){return n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),r=s(r,!0),e.publicKeyCreate(t,r)},publicKeyConvert:function(t,r){return n.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),r=s(r,!0),e.publicKeyConvert(t,r)},publicKeyVerify:function(t){return n.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,r,i){return n.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,o.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,o.TWEAK_LENGTH_INVALID),i=s(i,!0),e.publicKeyTweakAdd(t,r,i)},publicKeyTweakMul:function(t,r,i){return n.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,o.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,o.TWEAK_LENGTH_INVALID),i=s(i,!0),e.publicKeyTweakMul(t,r,i)},publicKeyCombine:function(t,r){n.isArray(t,o.EC_PUBLIC_KEYS_TYPE_INVALID),n.isLengthGTZero(t,o.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var i=0;i<t.length;++i)n.isBuffer(t[i],o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t[i],33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID);return r=s(r,!0),e.publicKeyCombine(t,r)},signatureNormalize:function(t){return n.isBuffer(t,o.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,o.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){n.isBuffer(t,o.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,o.ECDSA_SIGNATURE_LENGTH_INVALID);var r=e.signatureExport(t);return i.signatureExport(r)},signatureImport:function(t){n.isBuffer(t,o.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,o.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImport(t);if(r)return e.signatureImport(r);throw Error(o.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){n.isBuffer(t,o.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,o.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImportLax(t);if(r)return e.signatureImport(r);throw Error(o.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,r,i){n.isBuffer(t,o.MSG32_TYPE_INVALID),n.isBufferLength(t,32,o.MSG32_LENGTH_INVALID),n.isBuffer(r,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,o.EC_PRIVATE_KEY_LENGTH_INVALID);var s=null,a=null;return void 0!==i&&(n.isObject(i,o.OPTIONS_TYPE_INVALID),void 0!==i.data&&(n.isBuffer(i.data,o.OPTIONS_DATA_TYPE_INVALID),n.isBufferLength(i.data,32,o.OPTIONS_DATA_LENGTH_INVALID),s=i.data),void 0!==i.noncefn&&(n.isFunction(i.noncefn,o.OPTIONS_NONCEFN_TYPE_INVALID),a=i.noncefn)),e.sign(t,r,a,s)},verify:function(t,r,i){return n.isBuffer(t,o.MSG32_TYPE_INVALID),n.isBufferLength(t,32,o.MSG32_LENGTH_INVALID),n.isBuffer(r,o.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,o.ECDSA_SIGNATURE_LENGTH_INVALID),n.isBuffer(i,o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(i,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,r,i)},recover:function(t,r,i,a){return n.isBuffer(t,o.MSG32_TYPE_INVALID),n.isBufferLength(t,32,o.MSG32_LENGTH_INVALID),n.isBuffer(r,o.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,o.ECDSA_SIGNATURE_LENGTH_INVALID),n.isNumber(i,o.RECOVERY_ID_TYPE_INVALID),n.isNumberInInterval(i,-1,4,o.RECOVERY_ID_VALUE_INVALID),a=s(a,!0),e.recover(t,r,i,a)},ecdh:function(t,r){return n.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,r)},ecdhUnsafe:function(t,r,i){return n.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),i=s(i,!0),e.ecdhUnsafe(t,r,i)}}}},67771:function(e,t,r){"use strict";var n=r(40210),i=r(12296),o=r(31044)(),s=r(27296),a=r(14453),u=n("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||u(t)!==t)throw new a("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,l=!0;if("length"in e&&s){var c=s(e,"length");c&&!c.configurable&&(n=!1),c&&!c.writable&&(l=!1)}return(n||l||!r)&&(o?i(e,"length",t,!0,!0):i(e,"length",t)),e}},24189:function(e,t,r){var n=r(89509).Buffer;function i(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}i.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,i=this._blockSize,o=e.length,s=this._len,a=0;a<o;){for(var u=s%i,l=Math.min(o-a,i-u),c=0;c<l;c++)r[u+c]=e[a+c];s+=l,a+=l,s%i==0&&this._update(r)}return this._len+=o,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},i.prototype._update=function(){throw Error("_update must be implemented by subclass")},e.exports=i},89072:function(e,t,r){var n=e.exports=function(e){var t=n[e=e.toLowerCase()];if(!t)throw Error(e+" is not supported (we accept pull requests)");return new t};n.sha=r(74448),n.sha1=r(18336),n.sha224=r(48432),n.sha256=r(67499),n.sha384=r(51686),n.sha512=r(87816)},74448:function(e,t,r){var n=r(35717),i=r(24189),o=r(89509).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=Array(80);function u(){this.init(),this._w=a,i.call(this,64,56)}function l(e){return e<<5|e>>>27}function c(e){return e<<30|e>>>2}function f(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,u=0;u<16;++u)t[u]=e.readInt32BE(4*u);for(;u<80;++u)t[u]=t[u-3]^t[u-8]^t[u-14]^t[u-16];for(var h=0;h<80;++h){var p=~~(h/20),d=l(r)+f(p,n,i,o)+a+t[h]+s[p]|0;a=o,o=i,i=c(n),n=r,r=d}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},u.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=u},18336:function(e,t,r){var n=r(35717),i=r(24189),o=r(89509).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=Array(80);function u(){this.init(),this._w=a,i.call(this,64,56)}function l(e){return e<<1|e>>>31}function c(e){return e<<5|e>>>27}function f(e){return e<<30|e>>>2}function h(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,u=0;u<16;++u)t[u]=e.readInt32BE(4*u);for(;u<80;++u)t[u]=l(t[u-3]^t[u-8]^t[u-14]^t[u-16]);for(var p=0;p<80;++p){var d=~~(p/20),y=c(r)+h(d,n,i,o)+a+t[p]+s[d]|0;a=o,o=i,i=f(n),n=r,r=y}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},u.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=u},48432:function(e,t,r){var n=r(35717),i=r(67499),o=r(24189),s=r(89509).Buffer,a=Array(64);function u(){this.init(),this._w=a,o.call(this,64,56)}n(u,i),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var e=s.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=u},67499:function(e,t,r){var n=r(35717),i=r(24189),o=r(89509).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=Array(64);function u(){this.init(),this._w=a,i.call(this,64,56)}function l(e,t,r){return r^e&(t^r)}function c(e,t,r){return e&t|r&(e|t)}function f(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function h(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function p(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function d(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}n(u,i),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,u=0|this._f,y=0|this._g,g=0|this._h,m=0;m<16;++m)t[m]=e.readInt32BE(4*m);for(;m<64;++m)t[m]=d(t[m-2])+t[m-7]+p(t[m-15])+t[m-16]|0;for(var b=0;b<64;++b){var w=g+h(a)+l(a,u,y)+s[b]+t[b]|0,v=f(r)+c(r,n,i)|0;g=y,y=u,u=a,a=o+w|0,o=i,i=n,n=r,r=w+v|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0,this._f=u+this._f|0,this._g=y+this._g|0,this._h=g+this._h|0},u.prototype._hash=function(){var e=o.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=u},51686:function(e,t,r){var n=r(35717),i=r(87816),o=r(24189),s=r(89509).Buffer,a=Array(160);function u(){this.init(),this._w=a,o.call(this,128,112)}n(u,i),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var e=s.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=u},87816:function(e,t,r){var n=r(35717),i=r(24189),o=r(89509).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=Array(160);function u(){this.init(),this._w=a,i.call(this,128,112)}function l(e,t,r){return r^e&(t^r)}function c(e,t,r){return e&t|r&(e|t)}function f(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function h(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function d(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function y(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function m(e,t){return e>>>0<t>>>0?1:0}n(u,i),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,a=0|this._eh,u=0|this._fh,b=0|this._gh,w=0|this._hh,v=0|this._al,_=0|this._bl,E=0|this._cl,S=0|this._dl,T=0|this._el,I=0|this._fl,A=0|this._gl,O=0|this._hl,P=0;P<32;P+=2)t[P]=e.readInt32BE(4*P),t[P+1]=e.readInt32BE(4*P+4);for(;P<160;P+=2){var k=t[P-30],x=t[P-30+1],C=p(k,x),R=d(x,k),B=y(k=t[P-4],x=t[P-4+1]),U=g(x,k),N=t[P-14],D=t[P-14+1],L=t[P-32],H=t[P-32+1],M=R+D|0,F=C+N+m(M,R)|0;F=(F=F+B+m(M=M+U|0,U)|0)+L+m(M=M+H|0,H)|0,t[P]=F,t[P+1]=M}for(var j=0;j<160;j+=2){F=t[j],M=t[j+1];var V=c(r,n,i),K=c(v,_,E),W=f(r,v),q=f(v,r),G=h(a,T),$=h(T,a),z=s[j],Y=s[j+1],X=l(a,u,b),J=l(T,I,A),Q=O+$|0,Z=w+G+m(Q,O)|0;Z=(Z=(Z=Z+X+m(Q=Q+J|0,J)|0)+z+m(Q=Q+Y|0,Y)|0)+F+m(Q=Q+M|0,M)|0;var ee=q+K|0,et=W+V+m(ee,q)|0;w=b,O=A,b=u,A=I,u=a,I=T,a=o+Z+m(T=S+Q|0,S)|0,o=i,S=E,i=n,E=_,n=r,_=v,r=Z+et+m(v=Q+ee|0,Q)|0}this._al=this._al+v|0,this._bl=this._bl+_|0,this._cl=this._cl+E|0,this._dl=this._dl+S|0,this._el=this._el+T|0,this._fl=this._fl+I|0,this._gl=this._gl+A|0,this._hl=this._hl+O|0,this._ah=this._ah+r+m(this._al,v)|0,this._bh=this._bh+n+m(this._bl,_)|0,this._ch=this._ch+i+m(this._cl,E)|0,this._dh=this._dh+o+m(this._dl,S)|0,this._eh=this._eh+a+m(this._el,T)|0,this._fh=this._fh+u+m(this._fl,I)|0,this._gh=this._gh+b+m(this._gl,A)|0,this._hh=this._hh+w+m(this._hl,O)|0},u.prototype._hash=function(){var e=o.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=u},32553:function(e,t,r){"use strict";var n=r(89509).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function s(e){var t=o(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw Error("Unknown encoding: "+e);return t||e}function a(e){var t;switch(this.encoding=s(e),this.encoding){case"utf16le":this.text=d,this.end=y,t=4;break;case"utf8":this.fillLast=f,t=4;break;case"base64":this.text=g,this.end=m,t=3;break;default:this.write=b,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function u(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function l(e,t,r){var n=t.length-1;if(n<r)return 0;var i=u(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=u(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=u(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function c(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,"�"}}function f(e){var t=this.lastTotal-this.lastNeed,r=c(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function h(e,t){var r=l(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function d(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function y(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function g(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function b(e){return e.toString(this.encoding)}function w(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},a.prototype.end=p,a.prototype.text=h,a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},96647:function(e,t,r){var n=r(30247);function i(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function o(e){return n.Nil(e)?"":i(e.constructor)}function s(e){return n.Function(e)?"":n.String(e)?JSON.stringify(e):e&&n.Object(e)?"":e}function a(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function u(e){return n.Function(e)?e.toJSON?e.toJSON():i(e):n.Array(e)?"Array":e&&n.Object(e)?"Object":void 0!==e?e:""}function l(e,t,r){var n=s(t);return"Expected "+u(e)+", got"+(""!==r?" "+r:"")+(""!==n?" "+n:"")}function c(e,t,r){r=r||o(t),this.message=l(e,t,r),a(this,c),this.__type=e,this.__value=t,this.__valueTypeName=r}function f(e,t,r,n,i){var o='" of type ';return"key"===t&&(o='" with key type '),l('property "'+u(r)+o+u(e),n,i)}function h(e,t,r,n,i){e?(i=i||o(n),this.message=f(e,r,t,n,i)):this.message='Unexpected property "'+t+'"',a(this,c),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}function p(e,t){return new c(e,{},t)}function d(e,t,r){return e instanceof h?(t=t+"."+e.__property,e=new h(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof c&&(e=new h(e.__type,t,r,e.__value,e.__valueTypeName)),a(e),e}c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,h.prototype=Object.create(Error.prototype),h.prototype.constructor=c,e.exports={TfTypeError:c,TfPropertyTypeError:h,tfCustomError:p,tfSubError:d,tfJSON:u,getValueTypeName:o}},74307:function(e,t,r){var n=r(48764).Buffer,i=r(30247),o=r(96647);function s(e){return n.isBuffer(e)}function a(e){return"string"==typeof e&&/^([0-9a-f]{2})+$/i.test(e)}function u(e,t){var r=e.toJSON();function n(n){if(!e(n))return!1;if(n.length===t)return!0;throw o.tfCustomError(r+"(Length: "+t+")",r+"(Length: "+n.length+")")}return n.toJSON=function(){return r},n}var l=u.bind(null,i.Array),c=u.bind(null,s),f=u.bind(null,a),h=u.bind(null,i.String),p=9007199254740991,d={ArrayN:l,Buffer:s,BufferN:c,Finite:function(e){return"number"==typeof e&&isFinite(e)},Hex:a,HexN:f,Int8:function(e){return e<<24>>24===e},Int16:function(e){return e<<16>>16===e},Int32:function(e){return(0|e)===e},Int53:function(e){return"number"==typeof e&&e>=-p&&e<=p&&Math.floor(e)===e},Range:function(e,t,r){function n(n,i){return r(n,i)&&n>e&&n<t}return r=r||i.Number,n.toJSON=function(){return`${r.toJSON()} between [${e}, ${t}]`},n},StringN:h,UInt8:function(e){return(255&e)===e},UInt16:function(e){return(65535&e)===e},UInt32:function(e){return e>>>0===e},UInt53:function(e){return"number"==typeof e&&e>=0&&e<=p&&Math.floor(e)===e}};for(var y in d)d[y].toJSON=(function(e){return e}).bind(null,y);e.exports=d},2401:function(e,t,r){var n=r(96647),i=r(30247),o=n.tfJSON,s=n.TfTypeError,a=n.TfPropertyTypeError,u=n.tfSubError,l=n.getValueTypeName,c={arrayOf:function(e,t){function r(r,n){return!(!i.Array(r)||i.Nil(r))&&(void 0===t.minLength||!(r.length<t.minLength))&&(void 0===t.maxLength||!(r.length>t.maxLength))&&(void 0===t.length||r.length===t.length)&&r.every(function(t,r){try{return h(e,t,n)}catch(e){throw u(e,r)}})}return e=f(e),t=t||{},r.toJSON=function(){var r="["+o(e)+"]";return void 0!==t.length?r+="{"+t.length+"}":(void 0!==t.minLength||void 0!==t.maxLength)&&(r+="{"+(void 0===t.minLength?0:t.minLength)+","+(void 0===t.maxLength?1/0:t.maxLength)+"}"),r},r},maybe:function e(t){function r(r,n){return i.Nil(r)||t(r,n,e)}return t=f(t),r.toJSON=function(){return"?"+o(t)},r},map:function(e,t){function r(r,n){if(!i.Object(r)||i.Nil(r))return!1;for(var o in r){try{t&&h(t,o,n)}catch(e){throw u(e,o,"key")}try{var s=r[o];h(e,s,n)}catch(e){throw u(e,o)}}return!0}return e=f(e),t&&(t=f(t)),t?r.toJSON=function(){return"{"+o(t)+": "+o(e)+"}"}:r.toJSON=function(){return"{"+o(e)+"}"},r},object:function(e){var t={};for(var r in e)t[r]=f(e[r]);function n(e,r){if(!i.Object(e)||i.Nil(e))return!1;try{for(n in t){var n,o=t[n],s=e[n];h(o,s,r)}}catch(e){throw u(e,n)}if(r){for(n in e)if(!t[n])throw new a(void 0,n)}return!0}return n.toJSON=function(){return o(t)},n},anyOf:function(){var e=[].slice.call(arguments).map(f);function t(t,r){return e.some(function(e){try{return h(e,t,r)}catch(e){return!1}})}return t.toJSON=function(){return e.map(o).join("|")},t},allOf:function(){var e=[].slice.call(arguments).map(f);function t(t,r){return e.every(function(e){try{return h(e,t,r)}catch(e){return!1}})}return t.toJSON=function(){return e.map(o).join(" & ")},t},quacksLike:function(e){function t(t){return e===l(t)}return t.toJSON=function(){return e},t},tuple:function(){var e=[].slice.call(arguments).map(f);function t(t,r){return!(i.Nil(t)||i.Nil(t.length))&&(!r||t.length===e.length)&&e.every(function(e,n){try{return h(e,t[n],r)}catch(e){throw u(e,n)}})}return t.toJSON=function(){return"("+e.map(o).join(", ")+")"},t},value:function(e){function t(t){return t===e}return t.toJSON=function(){return e},t}};function f(e){if(i.String(e))return"?"===e[0]?c.maybe(e.slice(1)):i[e]||c.quacksLike(e);if(e&&i.Object(e)){if(i.Array(e)){if(1!==e.length)throw TypeError("Expected compile() parameter of type Array of length 1");return c.arrayOf(e[0])}return c.object(e)}return i.Function(e)?e:c.value(e)}function h(e,t,r,n){if(i.Function(e)){if(e(t,r))return!0;throw new s(n||e,t)}return h(f(e),t,r)}for(var p in c.oneOf=c.anyOf,i)h[p]=i[p];for(p in c)h[p]=c[p];var d=r(74307);for(p in d)h[p]=d[p];h.compile=f,h.TfTypeError=s,h.TfPropertyTypeError=a,e.exports=h},30247:function(e){var t={Array:function(e){return null!=e&&e.constructor===Array},Boolean:function(e){return"boolean"==typeof e},Function:function(e){return"function"==typeof e},Nil:function(e){return null==e},Number:function(e){return"number"==typeof e},Object:function(e){return"object"==typeof e},String:function(e){return"string"==typeof e},"":function(){return!0}};for(var r in t.Null=t.Nil,t)t[r].toJSON=(function(e){return e}).bind(null,r);e.exports=t},94927:function(e,t,r){function n(e,t){if(i("noDeprecation"))return e;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}function i(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=n},20384:function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},55955:function(e,t,r){"use strict";var n=r(82584),i=r(48662),o=r(86430),s=r(85692);function a(e){return e.call.bind(e)}var u="undefined"!=typeof BigInt,l="undefined"!=typeof Symbol,c=a(Object.prototype.toString),f=a(Number.prototype.valueOf),h=a(String.prototype.valueOf),p=a(Boolean.prototype.valueOf);if(u)var d=a(BigInt.prototype.valueOf);if(l)var y=a(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function m(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch}function b(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):s(e)||j(e)}function w(e){return"Uint8Array"===o(e)}function v(e){return"Uint8ClampedArray"===o(e)}function _(e){return"Uint16Array"===o(e)}function E(e){return"Uint32Array"===o(e)}function S(e){return"Int8Array"===o(e)}function T(e){return"Int16Array"===o(e)}function I(e){return"Int32Array"===o(e)}function A(e){return"Float32Array"===o(e)}function O(e){return"Float64Array"===o(e)}function P(e){return"BigInt64Array"===o(e)}function k(e){return"BigUint64Array"===o(e)}function x(e){return"[object Map]"===c(e)}function C(e){return"undefined"!=typeof Map&&(x.working?x(e):e instanceof Map)}function R(e){return"[object Set]"===c(e)}function B(e){return"undefined"!=typeof Set&&(R.working?R(e):e instanceof Set)}function U(e){return"[object WeakMap]"===c(e)}function N(e){return"undefined"!=typeof WeakMap&&(U.working?U(e):e instanceof WeakMap)}function D(e){return"[object WeakSet]"===c(e)}function L(e){return D(e)}function H(e){return"[object ArrayBuffer]"===c(e)}function M(e){return"undefined"!=typeof ArrayBuffer&&(H.working?H(e):e instanceof ArrayBuffer)}function F(e){return"[object DataView]"===c(e)}function j(e){return"undefined"!=typeof DataView&&(F.working?F(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=i,t.isTypedArray=s,t.isPromise=m,t.isArrayBufferView=b,t.isUint8Array=w,t.isUint8ClampedArray=v,t.isUint16Array=_,t.isUint32Array=E,t.isInt8Array=S,t.isInt16Array=T,t.isInt32Array=I,t.isFloat32Array=A,t.isFloat64Array=O,t.isBigInt64Array=P,t.isBigUint64Array=k,x.working="undefined"!=typeof Map&&x(new Map),t.isMap=C,R.working="undefined"!=typeof Set&&R(new Set),t.isSet=B,U.working="undefined"!=typeof WeakMap&&U(new WeakMap),t.isWeakMap=N,D.working="undefined"!=typeof WeakSet&&D(new WeakSet),t.isWeakSet=L,H.working="undefined"!=typeof ArrayBuffer&&H(new ArrayBuffer),t.isArrayBuffer=M,F.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&F(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=j;var V="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function K(e){return"[object SharedArrayBuffer]"===c(e)}function W(e){return void 0!==V&&(void 0===K.working&&(K.working=K(new V)),K.working?K(e):e instanceof V)}function q(e){return"[object AsyncFunction]"===c(e)}function G(e){return"[object Map Iterator]"===c(e)}function $(e){return"[object Set Iterator]"===c(e)}function z(e){return"[object Generator]"===c(e)}function Y(e){return"[object WebAssembly.Module]"===c(e)}function X(e){return g(e,f)}function J(e){return g(e,h)}function Q(e){return g(e,p)}function Z(e){return u&&g(e,d)}function ee(e){return l&&g(e,y)}function et(e){return X(e)||J(e)||Q(e)||Z(e)||ee(e)}function er(e){return"undefined"!=typeof Uint8Array&&(M(e)||W(e))}t.isSharedArrayBuffer=W,t.isAsyncFunction=q,t.isMapIterator=G,t.isSetIterator=$,t.isGeneratorObject=z,t.isWebAssemblyCompiledModule=Y,t.isNumberObject=X,t.isStringObject=J,t.isBooleanObject=Q,t.isBigIntObject=Z,t.isSymbolObject=ee,t.isBoxedPrimitive=et,t.isAnyArrayBuffer=er,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw Error(e+" is not supported in userland")}})})},89539:function(e,t,r){var n=r(34155),i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!T(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(l(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,s=String(e).replace(o,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<i;a=n[++r])_(a)||!P(a)?s+=" "+a:s+=" "+l(a);return s},t.deprecate=function(e,r){if(void 0!==n&&!0===n.noDeprecation)return e;if(void 0===n)return function(){return t.deprecate(e,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(n.throwDeprecation)throw Error(r);n.traceDeprecation?console.trace(r):console.error(r),i=!0}return e.apply(this,arguments)}};var s={},a=/^$/;if(n.env.NODE_DEBUG){var u=n.env.NODE_DEBUG;a=RegExp("^"+(u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase())+"$","i")}function l(e,r){var n={seen:[],stylize:f};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(r)?n.showHidden=r:r&&t._extend(n,r),A(n.showHidden)&&(n.showHidden=!1),A(n.depth)&&(n.depth=2),A(n.colors)&&(n.colors=!1),A(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),p(n,e,n.depth)}function c(e,t){var r=l.styles[t];return r?"\x1b["+l.colors[r][0]+"m"+e+"\x1b["+l.colors[r][1]+"m":e}function f(e,t){return e}function h(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function p(e,r,n){if(e.customInspect&&r&&C(r.inspect)&&r.inspect!==t.inspect&&!(r.constructor&&r.constructor.prototype===r)){var i,o=r.inspect(n,e);return T(o)||(o=p(e,o,n)),o}var s=d(e,r);if(s)return s;var a=Object.keys(r),u=h(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),x(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return y(r);if(0===a.length){if(C(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(O(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(k(r))return e.stylize(Date.prototype.toString.call(r),"date");if(x(r))return y(r)}var c="",f=!1,v=["{","}"];return(w(r)&&(f=!0,v=["[","]"]),C(r)&&(c=" [Function"+(r.name?": "+r.name:"")+"]"),O(r)&&(c=" "+RegExp.prototype.toString.call(r)),k(r)&&(c=" "+Date.prototype.toUTCString.call(r)),x(r)&&(c=" "+y(r)),0!==a.length||f&&0!=r.length)?n<0?O(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),i=f?g(e,r,n,u,a):a.map(function(t){return m(e,r,n,u,t,f)}),e.seen.pop(),b(i,c,v)):v[0]+c+v[1]}function d(e,t){if(A(t))return e.stylize("undefined","undefined");if(T(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return S(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}function y(e){return"["+Error.prototype.toString.call(e)+"]"}function g(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)L(t,String(s))?o.push(m(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(m(e,t,r,n,i,!0))}),o}function m(e,t,r,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),L(n,i)||(s="["+i+"]"),!a&&(0>e.seen.indexOf(u.value)?(a=_(r)?p(e,u.value,null):p(e,u.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").slice(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),A(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function b(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function w(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function _(e){return null===e}function E(e){return null==e}function S(e){return"number"==typeof e}function T(e){return"string"==typeof e}function I(e){return"symbol"==typeof e}function A(e){return void 0===e}function O(e){return P(e)&&"[object RegExp]"===B(e)}function P(e){return"object"==typeof e&&null!==e}function k(e){return P(e)&&"[object Date]"===B(e)}function x(e){return P(e)&&("[object Error]"===B(e)||e instanceof Error)}function C(e){return"function"==typeof e}function R(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function B(e){return Object.prototype.toString.call(e)}function U(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(!s[e=e.toUpperCase()]){if(a.test(e)){var r=n.pid;s[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else s[e]=function(){}}return s[e]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(55955),t.isArray=w,t.isBoolean=v,t.isNull=_,t.isNullOrUndefined=E,t.isNumber=S,t.isString=T,t.isSymbol=I,t.isUndefined=A,t.isRegExp=O,t.types.isRegExp=O,t.isObject=P,t.isDate=k,t.types.isDate=k,t.isError=x,t.types.isNativeError=x,t.isFunction=C,t.isPrimitive=R,t.isBuffer=r(20384);var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var e=new Date,t=[U(e.getHours()),U(e.getMinutes()),U(e.getSeconds())].join(":");return[e.getDate(),N[e.getMonth()],t].join(" ")}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",D(),t.format.apply(t,arguments))},t.inherits=r(35717),t._extend=function(e,t){if(!t||!P(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var H="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function M(e,t){if(!e){var r=Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function F(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var i=t.pop();if("function"!=typeof i)throw TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,t).then(function(e){n.nextTick(s.bind(null,null,e))},function(e){n.nextTick(M.bind(null,e,s))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,i(e)),t}t.promisify=function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');if(H&&e[H]){var t=e[H];if("function"!=typeof t)throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,H,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(e,n){e?r(e):t(n)});try{e.apply(this,i)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),H&&Object.defineProperty(t,H,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=H,t.callbackify=F},57795:function(e,t,r){"use strict";var n=r(89509).Buffer,i=9007199254740991;function o(e){if(e<0||e>i||e%1!=0)throw RangeError("value out of range")}function s(e,t,r){if(o(e),t||(t=n.allocUnsafe(u(e))),!n.isBuffer(t))throw TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),s.bytes=1):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),s.bytes=3):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),s.bytes=5):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),s.bytes=9),t}function a(e,t){if(!n.isBuffer(e))throw TypeError("buffer must be a Buffer instance");t||(t=0);var r=e.readUInt8(t);if(r<253)return a.bytes=1,r;if(253===r)return a.bytes=3,e.readUInt16LE(t+1);if(254===r)return a.bytes=5,e.readUInt32LE(t+1);a.bytes=9;var i=e.readUInt32LE(t+1),s=4294967296*e.readUInt32LE(t+5)+i;return o(s),s}function u(e){return o(e),e<253?1:e<=65535?3:e<=4294967295?5:9}e.exports={encode:s,decode:a,encodingLength:u}},86430:function(e,t,r){"use strict";var n=r(94029),i=r(63083),o=r(55559),s=r(17379),a=r(27296),u=s("Object.prototype.toString"),l=r(96410)(),c="undefined"==typeof globalThis?r.g:globalThis,f=i(),h=s("String.prototype.slice"),p=Object.getPrototypeOf,d=s("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return -1},y={__proto__:null};l&&a&&p?n(f,function(e){var t=new c[e];if(Symbol.toStringTag in t){var r=p(t),n=a(r,Symbol.toStringTag);n||(n=a(p(r),Symbol.toStringTag)),y["$"+e]=o(n.get)}}):n(f,function(e){var t=new c[e],r=t.slice||t.set;r&&(y["$"+e]=o(r))});var g=function(e){var t=!1;return n(y,function(r,n){if(!t)try{"$"+r(e)===n&&(t=h(n,1))}catch(e){}}),t},m=function(e){var t=!1;return n(y,function(r,n){if(!t)try{r(e),t=h(n,1)}catch(e){}}),t};e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!l){var t=h(u(e),8,-1);return d(f,t)>-1?t:"Object"===t&&m(e)}return a?g(e):null}},37174:function(e,t,r){var n=r(48764).Buffer,i=r(58334);function o(e,t){if(void 0!==t&&e[0]!==t)throw Error("Invalid network version");if(33===e.length)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(34!==e.length)throw Error("Invalid WIF length");if(1!==e[33])throw Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function s(e,t,r){var i=new n(r?34:33);return i.writeUInt8(e,0),t.copy(i,1),r&&(i[33]=1),i}function a(e,t){return o(i.decode(e),t)}function u(e,t,r){return"number"==typeof e?i.encode(s(e,t,r)):i.encode(s(e.version,e.privateKey,e.compressed))}e.exports={decode:a,decodeRaw:o,encode:u,encodeRaw:s}},48961:function(e,t){"use strict";function r(e){if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=n.charCodeAt(0);if(255!==t[i])throw TypeError(n+" is ambiguous");t[i]=r}let r=e.length,n=e.charAt(0),i=Math.log(r)/Math.log(256),o=Math.log(256)/Math.log(r);function s(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;let o=0,s=0,a=0;for(;e[o]===n;)s++,o++;let u=(e.length-o)*i+1>>>0,l=new Uint8Array(u);for(;o<e.length;){let n=e.charCodeAt(o);if(n>255)return;let i=t[n];if(255===i)return;let s=0;for(let e=u-1;(0!==i||s<a)&&-1!==e;e--,s++)i+=r*l[e]>>>0,l[e]=i%256>>>0,i=i/256>>>0;if(0!==i)throw Error("Non-zero carry");a=s,o++}let c=u-a;for(;c!==u&&0===l[c];)c++;let f=new Uint8Array(s+(u-c)),h=s;for(;c!==u;)f[h++]=l[c++];return f}function a(e){let t=s(e);if(t)return t;throw Error("Non-base"+r+" character")}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,s=0,a=0,u=t.length;for(;a!==u&&0===t[a];)a++,i++;let l=(u-a)*o+1>>>0,c=new Uint8Array(l);for(;a!==u;){let e=t[a],n=0;for(let t=l-1;(0!==e||n<s)&&-1!==t;t--,n++)e+=256*c[t]>>>0,c[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw Error("Non-zero carry");s=n,a++}let f=l-s;for(;f!==l&&0===c[f];)f++;let h=n.repeat(i);for(;f<l;++f)h+=e.charAt(c[f]);return h},decodeUnsafe:s,decode:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},10315:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(95499),o=n(r(27801));function s(e){let t=e[0],r=i.psbtToKeyVals(t),n=e.slice(1);if(0===n.length)throw Error("Combine: Nothing to combine");let s=u(t);if(void 0===s)throw Error("Combine: Self missing transaction");let c=l(r.globalKeyVals),f=r.inputKeyVals.map(l),h=r.outputKeyVals.map(l);for(let e of n){let t=u(e);if(void 0===t||0!==o.compare(t.toBuffer(),s.toBuffer()))throw Error("Combine: One of the Psbts does not have the same transaction.");let n=i.psbtToKeyVals(e);l(n.globalKeyVals).forEach(a(c,r.globalKeyVals,n.globalKeyVals)),n.inputKeyVals.map(l).forEach((e,t)=>e.forEach(a(f[t],r.inputKeyVals[t],n.inputKeyVals[t]))),n.outputKeyVals.map(l).forEach((e,t)=>e.forEach(a(h[t],r.outputKeyVals[t],n.outputKeyVals[t])))}return i.psbtFromKeyVals(s,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}function a(e,t,r){return n=>{if(e.has(n))return;let i=r.filter(e=>o.toHex(e.key)===n)[0];t.push(i),e.add(n)}}function u(e){return e.globalMap.unsignedTx}function l(e){let t=new Set;return e.forEach(e=>{let r=o.toHex(e.key);if(t.has(r))throw Error("Combine: KeyValue Map keys should be unique");t.add(r)}),t}t.combine=s},20196:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(27801)),s=e=>[...Array(e).keys()];function a(e){if(e.key[0]!==i.GlobalTypes.GLOBAL_XPUB)throw Error("Decode Error: could not decode globalXpub with key 0x"+o.toHex(e.key));if(79!==e.key.length||![2,3].includes(e.key[46]))throw Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+o.toHex(e.key));if(e.value.length/4%1!=0)throw Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");let t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(let t of s(e.value.length/4-1)){let n=o.readUInt32(e.value,4*t+4,"LE"),i=!!(2147483648&n),s=2147483647&n;r.path+="/"+s.toString(10)+(i?"'":"")}return r}function u(e){let t=new Uint8Array([i.GlobalTypes.GLOBAL_XPUB]),r=o.concat([t,e.extendedPubkey]),n=e.path.split("/"),s=new Uint8Array(4*n.length);s.set(e.masterFingerprint,0);let a=4;return n.slice(1).forEach(e=>{let t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),o.writeUInt32(s,a,r,"LE"),a+=4}),{key:r,value:s}}function l(e){let t=e.extendedPubkey,r=e.masterFingerprint,n=e.path;return t instanceof Uint8Array&&78===t.length&&[2,3].indexOf(t[45])>-1&&r instanceof Uint8Array&&4===r.length&&"string"==typeof n&&!!n.match(/^m(\/\d+'?)*$/)}function c(e,t,r){let n=o.toHex(t.extendedPubkey);return!r.has(n)&&(r.add(n),0===e.filter(e=>o.compare(e.extendedPubkey,t.extendedPubkey)).length)}t.decode=a,t.encode=u,t.expected="{ masterFingerprint: Uint8Array; extendedPubkey: Uint8Array; path: string; }",t.check=l,t.canAddToArray=c},17681:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(62942);function i(e){return{key:new Uint8Array([n.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}t.encode=i},62221:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(20196)),s=n(r(17681)),a=n(r(73252)),u=n(r(52788)),l=n(r(71698)),c=n(r(59117)),f=n(r(64839)),h=n(r(90823)),p=n(r(56826)),d=n(r(78013)),y=n(r(89126)),g=n(r(23785)),m=n(r(32645)),b=n(r(28382)),w=n(r(33603)),v=n(r(90923)),_=n(r(984)),E=n(r(16451)),S=n(r(61271)),T=n(r(69990)),I={unsignedTx:s,globalXpub:o,checkPubkey:v.makeChecker([])};t.globals=I;let A={nonWitnessUtxo:l,partialSig:c,sighashType:h,finalScriptSig:a,finalScriptWitness:u,porCommitment:f,witnessUtxo:m,bip32Derivation:w.makeConverter(i.InputTypes.BIP32_DERIVATION),redeemScript:_.makeConverter(i.InputTypes.REDEEM_SCRIPT),witnessScript:T.makeConverter(i.InputTypes.WITNESS_SCRIPT),checkPubkey:v.makeChecker([i.InputTypes.PARTIAL_SIG,i.InputTypes.BIP32_DERIVATION]),tapKeySig:p,tapScriptSig:g,tapLeafScript:d,tapBip32Derivation:E.makeConverter(i.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:S.makeConverter(i.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:y};t.inputs=A;let O={bip32Derivation:w.makeConverter(i.OutputTypes.BIP32_DERIVATION),redeemScript:_.makeConverter(i.OutputTypes.REDEEM_SCRIPT),witnessScript:T.makeConverter(i.OutputTypes.WITNESS_SCRIPT),checkPubkey:v.makeChecker([i.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:E.makeConverter(i.OutputTypes.TAP_BIP32_DERIVATION),tapTree:b,tapInternalKey:S.makeConverter(i.OutputTypes.TAP_INTERNAL_KEY)};t.outputs=O},73252:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(27801));function s(e){if(e.key[0]!==i.InputTypes.FINAL_SCRIPTSIG)throw Error("Decode Error: could not decode finalScriptSig with key 0x"+o.toHex(e.key));return e.value}function a(e){return{key:new Uint8Array([i.InputTypes.FINAL_SCRIPTSIG]),value:e}}function u(e){return e instanceof Uint8Array}function l(e,t){return!!e&&!!t&&void 0===e.finalScriptSig}t.decode=s,t.encode=a,t.expected="Uint8Array",t.check=u,t.canAdd=l},52788:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(27801));function s(e){if(e.key[0]!==i.InputTypes.FINAL_SCRIPTWITNESS)throw Error("Decode Error: could not decode finalScriptWitness with key 0x"+o.toHex(e.key));return e.value}function a(e){return{key:new Uint8Array([i.InputTypes.FINAL_SCRIPTWITNESS]),value:e}}function u(e){return e instanceof Uint8Array}function l(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness}t.decode=s,t.encode=a,t.expected="Uint8Array",t.check=u,t.canAdd=l},71698:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(27801));function s(e){if(e.key[0]!==i.InputTypes.NON_WITNESS_UTXO)throw Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+o.toHex(e.key));return e.value}function a(e){return{key:new Uint8Array([i.InputTypes.NON_WITNESS_UTXO]),value:e}}function u(e){return e instanceof Uint8Array}function l(e,t){return!!e&&!!t&&void 0===e.nonWitnessUtxo}t.decode=s,t.encode=a,t.expected="Uint8Array",t.check=u,t.canAdd=l},59117:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(27801));function s(e){if(e.key[0]!==i.InputTypes.PARTIAL_SIG)throw Error("Decode Error: could not decode partialSig with key 0x"+o.toHex(e.key));if(!(34===e.key.length||66===e.key.length)||![2,3,4].includes(e.key[1]))throw Error("Decode Error: partialSig has invalid pubkey in key 0x"+o.toHex(e.key));return{pubkey:e.key.slice(1),signature:e.value}}function a(e){let t=new Uint8Array([i.InputTypes.PARTIAL_SIG]);return{key:o.concat([t,e.pubkey]),value:e.signature}}function u(e){return e.pubkey instanceof Uint8Array&&e.signature instanceof Uint8Array&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&l(e.signature)}function l(e){if(!(e instanceof Uint8Array)||e.length<9||48!==e[0]||e.length!==e[1]+3||2!==e[2])return!1;let t=e[3];if(t>33||t<1||2!==e[3+t+1])return!1;let r=e[3+t+2];return!(r>33)&&!(r<1)&&e.length===3+t+2+r+2}function c(e,t,r){let n=o.toHex(t.pubkey);return!r.has(n)&&(r.add(n),0===e.filter(e=>0===o.compare(e.pubkey,t.pubkey)).length)}t.decode=s,t.encode=a,t.expected="{ pubkey: Uint8Array; signature: Uint8Array; }",t.check=u,t.canAddToArray=c},64839:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(27801));function s(e){if(e.key[0]!==i.InputTypes.POR_COMMITMENT)throw Error("Decode Error: could not decode porCommitment with key 0x"+o.toHex(e.key));return o.toUtf8(e.value)}function a(e){return{key:new Uint8Array([i.InputTypes.POR_COMMITMENT]),value:o.fromUtf8(e)}}function u(e){return"string"==typeof e}function l(e,t){return!!e&&!!t&&void 0===e.porCommitment}t.decode=s,t.encode=a,t.expected="string",t.check=u,t.canAdd=l},90823:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(27801));function s(e){if(e.key[0]!==i.InputTypes.SIGHASH_TYPE)throw Error("Decode Error: could not decode sighashType with key 0x"+o.toHex(e.key));return Number(o.readUInt32(e.value,0,"LE"))}function a(e){let t=Uint8Array.from([i.InputTypes.SIGHASH_TYPE]),r=new Uint8Array(4);return o.writeUInt32(r,0,e,"LE"),{key:t,value:r}}function u(e){return"number"==typeof e}function l(e,t){return!!e&&!!t&&void 0===e.sighashType}t.decode=s,t.encode=a,t.expected="number",t.check=u,t.canAdd=l},56826:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(27801));function s(e){if(e.key[0]!==i.InputTypes.TAP_KEY_SIG||1!==e.key.length)throw Error("Decode Error: could not decode tapKeySig with key 0x"+o.toHex(e.key));if(!u(e.value))throw Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value}function a(e){return{key:Uint8Array.from([i.InputTypes.TAP_KEY_SIG]),value:e}}function u(e){return e instanceof Uint8Array&&(64===e.length||65===e.length)}function l(e,t){return!!e&&!!t&&void 0===e.tapKeySig}t.decode=s,t.encode=a,t.expected="Uint8Array",t.check=u,t.canAdd=l},78013:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(27801));function s(e){if(e.key[0]!==i.InputTypes.TAP_LEAF_SCRIPT)throw Error("Decode Error: could not decode tapLeafScript with key 0x"+o.toHex(e.key));if((e.key.length-2)%32!=0)throw Error("Decode Error: tapLeafScript has invalid control block in key 0x"+o.toHex(e.key));let t=e.value[e.value.length-1];if((254&e.key[1])!==t)throw Error("Decode Error: tapLeafScript bad leaf version in key 0x"+o.toHex(e.key));let r=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:r,leafVersion:t}}function a(e){let t=Uint8Array.from([i.InputTypes.TAP_LEAF_SCRIPT]),r=Uint8Array.from([e.leafVersion]);return{key:o.concat([t,e.controlBlock]),value:o.concat([e.script,r])}}function u(e){return e.controlBlock instanceof Uint8Array&&(e.controlBlock.length-1)%32==0&&(254&e.controlBlock[0])===e.leafVersion&&e.script instanceof Uint8Array}function l(e,t,r){let n=o.toHex(t.controlBlock);return!r.has(n)&&(r.add(n),0===e.filter(e=>0===o.compare(e.controlBlock,t.controlBlock)).length)}t.decode=s,t.encode=a,t.expected="{ controlBlock: Uint8Array; leafVersion: number, script: Uint8Array; }",t.check=u,t.canAddToArray=l},89126:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(27801));function s(e){if(e.key[0]!==i.InputTypes.TAP_MERKLE_ROOT||1!==e.key.length)throw Error("Decode Error: could not decode tapMerkleRoot with key 0x"+o.toHex(e.key));if(!u(e.value))throw Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value}function a(e){return{key:Uint8Array.from([i.InputTypes.TAP_MERKLE_ROOT]),value:e}}function u(e){return e instanceof Uint8Array&&32===e.length}function l(e,t){return!!e&&!!t&&void 0===e.tapMerkleRoot}t.decode=s,t.encode=a,t.expected="Uint8Array",t.check=u,t.canAdd=l},23785:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(27801));function s(e){if(e.key[0]!==i.InputTypes.TAP_SCRIPT_SIG)throw Error("Decode Error: could not decode tapScriptSig with key 0x"+o.toHex(e.key));if(65!==e.key.length)throw Error("Decode Error: tapScriptSig has invalid key 0x"+o.toHex(e.key));if(64!==e.value.length&&65!==e.value.length)throw Error("Decode Error: tapScriptSig has invalid signature in key 0x"+o.toHex(e.key));return{pubkey:e.key.slice(1,33),leafHash:e.key.slice(33),signature:e.value}}function a(e){let t=Uint8Array.from([i.InputTypes.TAP_SCRIPT_SIG]);return{key:o.concat([t,e.pubkey,e.leafHash]),value:e.signature}}function u(e){return e.pubkey instanceof Uint8Array&&e.leafHash instanceof Uint8Array&&e.signature instanceof Uint8Array&&32===e.pubkey.length&&32===e.leafHash.length&&(64===e.signature.length||65===e.signature.length)}function l(e,t,r){let n=o.toHex(t.pubkey)+o.toHex(t.leafHash);return!r.has(n)&&(r.add(n),0===e.filter(e=>0===o.compare(e.pubkey,t.pubkey)&&0===o.compare(e.leafHash,t.leafHash)).length)}t.decode=s,t.encode=a,t.expected="{ pubkey: Uint8Array; leafHash: Uint8Array; signature: Uint8Array; }",t.check=u,t.canAddToArray=l},32645:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(27801)),s=n(r(6885));function a(e){if(e.key[0]!==i.InputTypes.WITNESS_UTXO)throw Error("Decode Error: could not decode witnessUtxo with key 0x"+o.toHex(e.key));let t=o.readInt64(e.value,0,"LE"),r=8,{numberValue:n,bytes:a}=s.decode(e.value,r);r+=a;let u=e.value.slice(r);if(u.length!==n)throw Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:u,value:t}}function u(e){let{script:t,value:r}=e,n=s.encodingLength(t.length),a=new Uint8Array(8+n+t.length);return o.writeInt64(a,0,BigInt(r),"LE"),s.encode(t.length,a,8),a.set(t,8+n),{key:Uint8Array.from([i.InputTypes.WITNESS_UTXO]),value:a}}function l(e){return e.script instanceof Uint8Array&&"bigint"==typeof e.value}function c(e,t){return!!e&&!!t&&void 0===e.witnessUtxo}t.decode=a,t.encode=u,t.expected="{ script: Uint8Array; value: bigint; }",t.check=l,t.canAdd=c},28382:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(62942),o=n(r(6885)),s=n(r(27801));function a(e){if(e.key[0]!==i.OutputTypes.TAP_TREE||1!==e.key.length)throw Error("Decode Error: could not decode tapTree with key 0x"+s.toHex(e.key));let t=0,r=[];for(;t<e.value.length;){let n=e.value[t++],i=e.value[t++],{numberValue:s,bytes:a}=o.decode(e.value,t);t+=a,r.push({depth:n,leafVersion:i,script:e.value.slice(t,t+s)}),t+=s}return{leaves:r}}function u(e){let t=Uint8Array.from([i.OutputTypes.TAP_TREE]),r=[].concat(...e.leaves.map(e=>[Uint8Array.of(e.depth,e.leafVersion),o.encode(BigInt(e.script.length)).buffer,e.script]));return{key:t,value:s.concat(r)}}function l(e){return Array.isArray(e.leaves)&&e.leaves.every(e=>e.depth>=0&&e.depth<=128&&(254&e.leafVersion)===e.leafVersion&&e.script instanceof Uint8Array)}function c(e,t){return!!e&&!!t&&void 0===e.tapTree}t.decode=a,t.encode=u,t.expected="{ leaves: [{ depth: number; leafVersion: number, script: Uint8Array; }] }",t.check=l,t.canAdd=c},33603:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(27801)),o=e=>[...Array(e).keys()],s=e=>33===e.length&&[2,3].includes(e[0])||65===e.length&&4===e[0];function a(e,t=s){return{decode:function(r){if(r.key[0]!==e)throw Error("Decode Error: could not decode bip32Derivation with key 0x"+i.toHex(r.key));let n=r.key.slice(1);if(!t(n))throw Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+i.toHex(r.key));if(r.value.length/4%1!=0)throw Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");let s={masterFingerprint:r.value.slice(0,4),pubkey:n,path:"m"};for(let e of o(r.value.length/4-1)){let t=i.readUInt32(r.value,4*e+4,"LE"),n=!!(2147483648&t),o=2147483647&t;s.path+="/"+o.toString(10)+(n?"'":"")}return s},encode:function(t){let r=Uint8Array.from([e]),n=i.concat([r,t.pubkey]),o=t.path.split("/"),s=new Uint8Array(4*o.length);s.set(t.masterFingerprint,0);let a=4;return o.slice(1).forEach(e=>{let t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),i.writeUInt32(s,a,r,"LE"),a+=4}),{key:n,value:s}},check:function(e){return e.pubkey instanceof Uint8Array&&e.masterFingerprint instanceof Uint8Array&&"string"==typeof e.path&&t(e.pubkey)&&4===e.masterFingerprint.length},expected:"{ masterFingerprint: Uint8Array; pubkey: Uint8Array; path: string; }",canAddToArray:function(e,t,r){let n=i.toHex(t.pubkey);return!r.has(n)&&(r.add(n),0===e.filter(e=>0===i.compare(e.pubkey,t.pubkey)).length)}}}t.makeConverter=a},90923:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(27801));function o(e){return t;function t(t){let r;if(e.includes(t.key[0])&&(!(33===(r=t.key.slice(1)).length||65===r.length)||![2,3,4].includes(r[0])))throw Error("Format Error: invalid pubkey in key 0x"+i.toHex(t.key));return r}}t.makeChecker=o},984:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(27801));function o(e){return{decode:function(t){if(t.key[0]!==e)throw Error("Decode Error: could not decode redeemScript with key 0x"+i.toHex(t.key));return t.value},encode:function(t){return{key:Uint8Array.from([e]),value:t}},check:function(e){return e instanceof Uint8Array},expected:"Uint8Array",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}}t.makeConverter=o},16451:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(6885)),o=n(r(27801)),s=n(r(33603)),a=e=>32===e.length;function u(e){let t=s.makeConverter(e,a);return{decode:function(e){let{numberValue:r,bytes:n}=i.decode(e.value),o=t.decode({key:e.key,value:e.value.slice(n+32*Number(r))}),s=Array(Number(r));for(let t=0,i=n;t<r;t++,i+=32)s[t]=e.value.slice(i,i+32);return{...o,leafHashes:s}},encode:function(e){let r=t.encode(e),n=new Uint8Array(i.encodingLength(e.leafHashes.length));i.encode(e.leafHashes.length,n);let s=o.concat([n,...e.leafHashes,r.value]);return{...r,value:s}},check:function(e){return Array.isArray(e.leafHashes)&&e.leafHashes.every(e=>e instanceof Uint8Array&&32===e.length)&&t.check(e)},expected:"{ masterFingerprint: Uint8Array; pubkey: Uint8Array; path: string; leafHashes: Uint8Array[]; }",canAddToArray:t.canAddToArray}}t.makeConverter=u},61271:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(27801));function o(e){return{decode:function(t){if(t.key[0]!==e||1!==t.key.length)throw Error("Decode Error: could not decode tapInternalKey with key 0x"+i.toHex(t.key));if(32!==t.value.length)throw Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return t.value},encode:function(t){return{key:Uint8Array.from([e]),value:t}},check:function(e){return e instanceof Uint8Array&&32===e.length},expected:"Uint8Array",canAdd:function(e,t){return!!e&&!!t&&void 0===e.tapInternalKey}}}t.makeConverter=o},69990:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(27801));function o(e){return{decode:function(t){if(t.key[0]!==e)throw Error("Decode Error: could not decode witnessScript with key 0x"+i.toHex(t.key));return t.value},encode:function(t){return{key:Uint8Array.from([e]),value:t}},check:function(e){return e instanceof Uint8Array},expected:"Uint8Array",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}}t.makeConverter=o},63521:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(6885)),o=n(r(27801));function s(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}function a(e){let t=e.map(u);return t.push(Uint8Array.from([0])),o.concat(t)}function u(e){let t=e.key.length,r=e.value.length,n=i.encodingLength(t),o=i.encodingLength(r),s=new Uint8Array(n+t+o+r);return i.encode(t,s,0),s.set(e.key,n),i.encode(r,s,n+t),s.set(e.value,n+t+o),s}t.range=e=>[...Array(e).keys()],t.reverseBuffer=s,t.keyValsToBuffer=a,t.keyValToBuffer=u},44597:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(62221)),o=r(63521),s=n(r(6885)),a=n(r(27801)),u=r(62942);function l(e,t){let r=0;function n(){let{numberValue:t,bytes:n}=s.decode(e,r);r+=n;let i=e.slice(r,r+Number(t));return r+=Number(t),i}function i(){let t=a.readUInt8(e,r);return r+=1,t}function l(){return{key:n(),value:n()}}function c(){if(r>=e.length)throw Error("Format Error: Unexpected End of PSBT");let t=0===a.readUInt8(e,r);return t&&r++,t}if(1886610036!==function(){let t=a.readUInt32(e,r,"BE");return r+=4,t}())throw Error("Format Error: Invalid Magic Number");if(255!==i())throw Error("Format Error: Magic Number must be followed by 0xff separator");let h=[],p={};for(;!c();){let e=l(),t=a.toHex(e.key);if(p[t])throw Error("Format Error: Keys must be unique for global keymap: key "+t);p[t]=1,h.push(e)}let d=h.filter(e=>e.key[0]===u.GlobalTypes.UNSIGNED_TX);if(1!==d.length)throw Error("Format Error: Only one UNSIGNED_TX allowed");let y=t(d[0].value),{inputCount:g,outputCount:m}=y.getInputOutputCounts(),b=[],w=[];for(let e of o.range(g)){let t={},r=[];for(;!c();){let n=l(),i=a.toHex(n.key);if(t[i])throw Error("Format Error: Keys must be unique for each input: input index "+e+" key "+i);t[i]=1,r.push(n)}b.push(r)}for(let e of o.range(m)){let t={},r=[];for(;!c();){let n=l(),i=a.toHex(n.key);if(t[i])throw Error("Format Error: Keys must be unique for each output: output index "+e+" key "+i);t[i]=1,r.push(n)}w.push(r)}return f(y,{globalMapKeyVals:h,inputKeyVals:b,outputKeyVals:w})}function c(e,t,r){if(a.compare(t,Uint8Array.from([r])))throw Error(`Format Error: Invalid ${e} key: ${a.toHex(t)}`)}function f(e,{globalMapKeyVals:t,inputKeyVals:r,outputKeyVals:n}){let s={unsignedTx:e},a=0;for(let e of t)switch(e.key[0]){case u.GlobalTypes.UNSIGNED_TX:if(c("global",e.key,u.GlobalTypes.UNSIGNED_TX),a>0)throw Error("Format Error: GlobalMap has multiple UNSIGNED_TX");a++;break;case u.GlobalTypes.GLOBAL_XPUB:void 0===s.globalXpub&&(s.globalXpub=[]),s.globalXpub.push(i.globals.globalXpub.decode(e));break;default:s.unknownKeyVals||(s.unknownKeyVals=[]),s.unknownKeyVals.push(e)}let l=r.length,f=n.length,h=[],p=[];for(let e of o.range(l)){let t={};for(let n of r[e])switch(i.inputs.checkPubkey(n),n.key[0]){case u.InputTypes.NON_WITNESS_UTXO:if(c("input",n.key,u.InputTypes.NON_WITNESS_UTXO),void 0!==t.nonWitnessUtxo)throw Error("Format Error: Input has multiple NON_WITNESS_UTXO");t.nonWitnessUtxo=i.inputs.nonWitnessUtxo.decode(n);break;case u.InputTypes.WITNESS_UTXO:if(c("input",n.key,u.InputTypes.WITNESS_UTXO),void 0!==t.witnessUtxo)throw Error("Format Error: Input has multiple WITNESS_UTXO");t.witnessUtxo=i.inputs.witnessUtxo.decode(n);break;case u.InputTypes.PARTIAL_SIG:void 0===t.partialSig&&(t.partialSig=[]),t.partialSig.push(i.inputs.partialSig.decode(n));break;case u.InputTypes.SIGHASH_TYPE:if(c("input",n.key,u.InputTypes.SIGHASH_TYPE),void 0!==t.sighashType)throw Error("Format Error: Input has multiple SIGHASH_TYPE");t.sighashType=i.inputs.sighashType.decode(n);break;case u.InputTypes.REDEEM_SCRIPT:if(c("input",n.key,u.InputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw Error("Format Error: Input has multiple REDEEM_SCRIPT");t.redeemScript=i.inputs.redeemScript.decode(n);break;case u.InputTypes.WITNESS_SCRIPT:if(c("input",n.key,u.InputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw Error("Format Error: Input has multiple WITNESS_SCRIPT");t.witnessScript=i.inputs.witnessScript.decode(n);break;case u.InputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(i.inputs.bip32Derivation.decode(n));break;case u.InputTypes.FINAL_SCRIPTSIG:c("input",n.key,u.InputTypes.FINAL_SCRIPTSIG),t.finalScriptSig=i.inputs.finalScriptSig.decode(n);break;case u.InputTypes.FINAL_SCRIPTWITNESS:c("input",n.key,u.InputTypes.FINAL_SCRIPTWITNESS),t.finalScriptWitness=i.inputs.finalScriptWitness.decode(n);break;case u.InputTypes.POR_COMMITMENT:c("input",n.key,u.InputTypes.POR_COMMITMENT),t.porCommitment=i.inputs.porCommitment.decode(n);break;case u.InputTypes.TAP_KEY_SIG:c("input",n.key,u.InputTypes.TAP_KEY_SIG),t.tapKeySig=i.inputs.tapKeySig.decode(n);break;case u.InputTypes.TAP_SCRIPT_SIG:void 0===t.tapScriptSig&&(t.tapScriptSig=[]),t.tapScriptSig.push(i.inputs.tapScriptSig.decode(n));break;case u.InputTypes.TAP_LEAF_SCRIPT:void 0===t.tapLeafScript&&(t.tapLeafScript=[]),t.tapLeafScript.push(i.inputs.tapLeafScript.decode(n));break;case u.InputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(i.inputs.tapBip32Derivation.decode(n));break;case u.InputTypes.TAP_INTERNAL_KEY:c("input",n.key,u.InputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=i.inputs.tapInternalKey.decode(n);break;case u.InputTypes.TAP_MERKLE_ROOT:c("input",n.key,u.InputTypes.TAP_MERKLE_ROOT),t.tapMerkleRoot=i.inputs.tapMerkleRoot.decode(n);break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(n)}h.push(t)}for(let e of o.range(f)){let t={};for(let r of n[e])switch(i.outputs.checkPubkey(r),r.key[0]){case u.OutputTypes.REDEEM_SCRIPT:if(c("output",r.key,u.OutputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw Error("Format Error: Output has multiple REDEEM_SCRIPT");t.redeemScript=i.outputs.redeemScript.decode(r);break;case u.OutputTypes.WITNESS_SCRIPT:if(c("output",r.key,u.OutputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw Error("Format Error: Output has multiple WITNESS_SCRIPT");t.witnessScript=i.outputs.witnessScript.decode(r);break;case u.OutputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(i.outputs.bip32Derivation.decode(r));break;case u.OutputTypes.TAP_INTERNAL_KEY:c("output",r.key,u.OutputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=i.outputs.tapInternalKey.decode(r);break;case u.OutputTypes.TAP_TREE:c("output",r.key,u.OutputTypes.TAP_TREE),t.tapTree=i.outputs.tapTree.decode(r);break;case u.OutputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(i.outputs.tapBip32Derivation.decode(r));break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(r)}p.push(t)}return{globalMap:s,inputs:h,outputs:p}}t.psbtFromBuffer=l,t.checkKeyBuffer=c,t.psbtFromKeyVals=f},95499:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(44597)),n(r(18254))},18254:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(62221)),o=r(63521),s=n(r(27801));function a({globalMap:e,inputs:t,outputs:r}){let{globalKeyVals:n,inputKeyVals:i,outputKeyVals:a}=c({globalMap:e,inputs:t,outputs:r}),u=o.keyValsToBuffer(n),l=e=>0===e.length?[Uint8Array.from([0])]:e.map(o.keyValsToBuffer),f=l(i),h=l(a),p=new Uint8Array(5);return p.set([112,115,98,116,255],0),s.concat([p,u].concat(f,h))}t.psbtToBuffer=a;let u=(e,t)=>s.compare(e.key,t.key);function l(e,t){let r=new Set,n=Object.entries(e).reduce((e,[n,i])=>{if("unknownKeyVals"===n)return e;let o=t[n];if(void 0===o)return e;let a=(Array.isArray(i)?i:[i]).map(o.encode);return a.map(e=>s.toHex(e.key)).forEach(e=>{if(r.has(e))throw Error("Serialize Error: Duplicate key: "+e);r.add(e)}),e.concat(a)},[]),i=e.unknownKeyVals?e.unknownKeyVals.filter(e=>!r.has(s.toHex(e.key))):[];return n.concat(i).sort(u)}function c({globalMap:e,inputs:t,outputs:r}){return{globalKeyVals:l(e,i.globals),inputKeyVals:t.map(e=>l(e,i.inputs)),outputKeyVals:r.map(e=>l(e,i.outputs))}}t.psbtToKeyVals=c},81654:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=r(10315),o=r(95499),s=r(62942),a=r(95230),u=n(r(27801));class l{constructor(e){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}static fromBase64(e,t){let r=u.fromBase64(e);return this.fromBuffer(r,t)}static fromHex(e,t){let r=u.fromHex(e);return this.fromBuffer(r,t)}static fromBuffer(e,t){let r=o.psbtFromBuffer(e,t),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}toBase64(){let e=this.toBuffer();return u.toBase64(e)}toHex(){let e=this.toBuffer();return u.toHex(e)}toBuffer(){return o.psbtToBuffer(this)}updateGlobal(e){return a.updateGlobal(e,this.globalMap),this}updateInput(e,t){let r=a.checkForInput(this.inputs,e);return a.updateInput(t,r),this}updateOutput(e,t){let r=a.checkForOutput(this.outputs,e);return a.updateOutput(t,r),this}addUnknownKeyValToGlobal(e){return a.checkHasKey(e,this.globalMap.unknownKeyVals,a.getEnumLength(s.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}addUnknownKeyValToInput(e,t){let r=a.checkForInput(this.inputs,e);return a.checkHasKey(t,r.unknownKeyVals,a.getEnumLength(s.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addUnknownKeyValToOutput(e,t){let r=a.checkForOutput(this.outputs,e);return a.checkHasKey(t,r.unknownKeyVals,a.getEnumLength(s.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addInput(e){this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});let t=e.unknownKeyVals||[],r=this.inputs.length-1;if(!Array.isArray(t))throw Error("unknownKeyVals must be an Array");return t.forEach(e=>this.addUnknownKeyValToInput(r,e)),a.addInputAttributes(this.inputs,e),this}addOutput(e){this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});let t=e.unknownKeyVals||[],r=this.outputs.length-1;if(!Array.isArray(t))throw Error("unknownKeyVals must be an Array");return t.forEach(e=>this.addUnknownKeyValToOutput(r,e)),a.addOutputAttributes(this.outputs,e),this}clearFinalizedInput(e){let t=a.checkForInput(this.inputs,e);for(let r of(a.inputCheckUncleanFinalized(e,t),Object.keys(t)))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(r)||delete t[r];return this}combine(...e){return Object.assign(this,i.combine([this].concat(e))),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}}t.Psbt=l;var c=r(95230);t.checkForInput=c.checkForInput,t.checkForOutput=c.checkForOutput},62942:function(e,t){"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.UNSIGNED_TX=0]="UNSIGNED_TX",e[e.GLOBAL_XPUB=1]="GLOBAL_XPUB"}(r=t.GlobalTypes||(t.GlobalTypes={})),t.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],function(e){e[e.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",e[e.WITNESS_UTXO=1]="WITNESS_UTXO",e[e.PARTIAL_SIG=2]="PARTIAL_SIG",e[e.SIGHASH_TYPE=3]="SIGHASH_TYPE",e[e.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=6]="BIP32_DERIVATION",e[e.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",e[e.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",e[e.POR_COMMITMENT=9]="POR_COMMITMENT",e[e.TAP_KEY_SIG=19]="TAP_KEY_SIG",e[e.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",e[e.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",e[e.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",e[e.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"}(n=t.InputTypes||(t.InputTypes={})),t.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"],function(e){e[e.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=2]="BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",e[e.TAP_TREE=6]="TAP_TREE",e[e.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"}(i=t.OutputTypes||(t.OutputTypes={})),t.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]},95230:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(62221)),o=n(r(27801));function s(e,t){let r=e[t];if(void 0===r)throw Error(`No input #${t}`);return r}function a(e,t){let r=e[t];if(void 0===r)throw Error(`No output #${t}`);return r}function u(e,t,r){if(e.key[0]<r)throw Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&0!==t.filter(t=>0===o.compare(t.key,e.key)).length)throw Error(`Duplicate Key: ${o.toHex(e.key)}`)}function l(e){let t=0;return Object.keys(e).forEach(e=>{Number(isNaN(Number(e)))&&t++}),t}function c(e,t){let r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){let e=!!t.redeemScript,n=!!t.witnessScript,i=!e||!!t.finalScriptSig,o=!n||!!t.finalScriptWitness,s=!!t.finalScriptSig||!!t.finalScriptWitness;r=i&&o&&s}if(!1===r)throw Error(`Input #${e} has too much or too little data to clean`)}function f(e,t,r,n){throw Error(`Data for ${e} key ${t} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function h(e){return(t,r)=>{for(let n of Object.keys(t)){let o=t[n],{canAdd:s,canAddToArray:a,check:u,expected:l}=i[e+"s"][n]||{},c=!!a;if(u){if(c){if(!Array.isArray(o)||r[n]&&!Array.isArray(r[n]))throw Error(`Key type ${n} must be an array`);o.every(u)||f(e,n,l,o);let t=r[n]||[],i=new Set;if(!o.every(e=>a(t,e,i)))throw Error("Can not add duplicate data to array");r[n]=t.concat(o)}else{if(u(o)||f(e,n,l,o),!s(r,o))throw Error(`Can not add duplicate data to ${e}`);r[n]=o}}}}}function p(e,r){let n=e.length-1,i=s(e,n);t.updateInput(r,i)}function d(e,r){let n=e.length-1,i=a(e,n);t.updateOutput(r,i)}function y(e,t){if(!(t instanceof Uint8Array)||t.length<4)throw Error("Set Version: Invalid Transaction");return o.writeUInt32(t,0,e,"LE"),t}function g(e,t){if(!(t instanceof Uint8Array)||t.length<4)throw Error("Set Locktime: Invalid Transaction");return o.writeUInt32(t,t.length-4,e,"LE"),t}t.checkForInput=s,t.checkForOutput=a,t.checkHasKey=u,t.getEnumLength=l,t.inputCheckUncleanFinalized=c,t.updateGlobal=h("global"),t.updateInput=h("input"),t.updateOutput=h("output"),t.addInputAttributes=p,t.addOutputAttributes=d,t.defaultVersionSetter=y,t.defaultLocktimeSetter=g},4164:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fromBase58Check=E,t.fromBech32=S,t.toBase58Check=T,t.toBech32=I,t.fromOutputScript=A,t.toOutputScript=O;let a=o(r(72161)),u=o(r(93049)),l=o(r(61928)),c=r(59390),f=r(27715),h=s(r(69838)),p=o(r(27801)),d=o(r(89253)),y=40,g=2,m=16,b=2,w=80,v="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function _(e,t){let r=e.slice(2);if(r.length<g||r.length>y)throw TypeError("Invalid program length for segwit address");let n=e[0]-w;if(n<b||n>m)throw TypeError("Invalid version for segwit address");if(e[1]!==r.length)throw TypeError("Invalid script for segwit address");return console.warn(v),I(r,n,t.bech32)}function E(e){let t=h.default.decode(e);if(t.length<21)throw TypeError(e+" is too short");if(t.length>21)throw TypeError(e+" is too long");return{version:p.readUInt8(t,0),hash:t.slice(1)}}function S(e){let t,r;try{t=f.bech32.decode(e)}catch(e){}if(t){if(0!==(r=t.words[0]))throw TypeError(e+" uses wrong encoding")}else if(0===(r=(t=f.bech32m.decode(e)).words[0]))throw TypeError(e+" uses wrong encoding");let n=f.bech32.fromWords(t.words.slice(1));return{version:r,prefix:t.prefix,data:Uint8Array.from(n)}}function T(e,t){d.parse(d.tuple([c.Hash160bitSchema,c.UInt8Schema]),[e,t]);let r=new Uint8Array(21);return p.writeUInt8(r,0,t),r.set(e,1),h.default.encode(r)}function I(e,t,r){let n=f.bech32.toWords(e);return n.unshift(t),0===t?f.bech32.encode(r,n):f.bech32m.encode(r,n)}function A(e,t){t=t||a.bitcoin;try{return u.p2pkh({output:e,network:t}).address}catch(e){}try{return u.p2sh({output:e,network:t}).address}catch(e){}try{return u.p2wpkh({output:e,network:t}).address}catch(e){}try{return u.p2wsh({output:e,network:t}).address}catch(e){}try{return u.p2tr({output:e,network:t}).address}catch(e){}try{return _(e,t)}catch(e){}throw Error(l.toASM(e)+" has no matching Address")}function O(e,t){let r,n;t=t||a.bitcoin;try{r=E(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return u.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return u.p2sh({hash:r.hash}).output}else{try{n=S(e)}catch(e){}if(n){if(n.prefix!==t.bech32)throw Error(e+" has an invalid prefix");if(0===n.version){if(20===n.data.length)return u.p2wpkh({hash:n.data}).output;if(32===n.data.length)return u.p2wsh({hash:n.data}).output}else if(1===n.version){if(32===n.data.length)return u.p2tr({pubkey:n.data}).output}else if(n.version>=b&&n.version<=m&&n.data.length>=g&&n.data.length<=y)return console.warn(v),l.compile([n.version+w,n.data])}}throw Error(e+" has no matching Script")}},86397:function(e,t){"use strict";function r(e){if(e.length<8||e.length>72||48!==e[0]||e[1]!==e.length-2||2!==e[2])return!1;let t=e[3];if(0===t||5+t>=e.length||2!==e[4+t])return!1;let r=e[5+t];return 0!==r&&6+t+r===e.length&&!(128&e[4])&&(!(t>1)||0!==e[4]||!!(128&e[5]))&&!(128&e[t+6])&&(!(r>1)||0!==e[t+6]||!!(128&e[t+7]))}function n(e){if(e.length<8)throw Error("DER sequence length is too short");if(e.length>72)throw Error("DER sequence length is too long");if(48!==e[0])throw Error("Expected DER sequence");if(e[1]!==e.length-2)throw Error("DER sequence length is invalid");if(2!==e[2])throw Error("Expected DER integer");let t=e[3];if(0===t)throw Error("R length is zero");if(5+t>=e.length)throw Error("R length is too long");if(2!==e[4+t])throw Error("Expected DER integer (2)");let r=e[5+t];if(0===r)throw Error("S length is zero");if(6+t+r!==e.length)throw Error("S length is invalid");if(128&e[4])throw Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw Error("R value excessively padded");if(128&e[t+6])throw Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}}function i(e,t){let r=e.length,n=t.length;if(0===r)throw Error("R length is zero");if(0===n)throw Error("S length is zero");if(r>33)throw Error("R length is too long");if(n>33)throw Error("S length is too long");if(128&e[0])throw Error("R value is negative");if(128&t[0])throw Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw Error("R value excessively padded");if(n>1&&0===t[0]&&!(128&t[1]))throw Error("S value excessively padded");let i=new Uint8Array(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,i.set(e,4),i[4+r]=2,i[5+r]=t.length,i.set(t,6+r),i}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,t.decode=n,t.encode=i},19561:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;let s=r(98186),a=o(r(2487)),u=r(22001),l=r(70478),c=o(r(89253)),f=o(r(27801)),h=TypeError("Cannot compute merkle root for zero transactions"),p=TypeError("Cannot compute witness commit for non-segwit block");class d{static fromBuffer(e){if(e.length<80)throw Error("Buffer too small (< 80 bytes)");let t=new s.BufferReader(e),r=new d;if(r.version=t.readInt32(),r.prevHash=t.readSlice(32),r.merkleRoot=t.readSlice(32),r.timestamp=t.readUInt32(),r.bits=t.readUInt32(),r.nonce=t.readUInt32(),80===e.length)return r;let n=()=>{let e=l.Transaction.fromBuffer(t.buffer.slice(t.offset),!0);return t.offset+=e.byteLength(),e},i=t.readVarInt();r.transactions=[];for(let e=0;e<i;++e){let e=n();r.transactions.push(e)}let o=r.getWitnessCommit();return o&&(r.witnessCommit=o),r}static fromHex(e){return d.fromBuffer(f.fromHex(e))}static calculateTarget(e){let t=((4278190080&e)>>24)-3,r=8388607&e,n=new Uint8Array(32);return n[29-t]=r>>16&255,n[30-t]=r>>8&255,n[31-t]=255&r,n}static calculateMerkleRoot(e,t){if(c.parse(c.array(c.object({getHash:c.function()})),e),0===e.length)throw h;if(t&&!y(e))throw p;let r=e.map(e=>e.getHash(t)),n=(0,u.fastMerkleRoot)(r,a.hash256);return t?a.hash256(f.concat([n,e[0].ins[0].witness[0]])):n}version=1;prevHash=void 0;merkleRoot=void 0;timestamp=0;witnessCommit=void 0;bits=0;nonce=0;transactions=void 0;getWitnessCommit(){if(!y(this.transactions))return null;let e=this.transactions[0].outs.filter(e=>0===f.compare(e.script.slice(0,6),Uint8Array.from([106,36,170,33,169,237]))).map(e=>e.script.slice(6,38));if(0===e.length)return null;let t=e[e.length-1];return t instanceof Uint8Array&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof Uint8Array&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return g(this.transactions)}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(e,t=!0){return e||!this.transactions?80:80+s.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((e,r)=>e+r.byteLength(t),0)}getHash(){return a.hash256(this.toBuffer(!0))}getId(){return f.toHex((0,s.reverseBuffer)(this.getHash()))}getUTCDate(){let e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){let t=new Uint8Array(this.byteLength(e)),r=new s.BufferWriter(t);if(r.writeInt32(this.version),r.writeSlice(this.prevHash),r.writeSlice(this.merkleRoot),r.writeUInt32(this.timestamp),r.writeUInt32(this.bits),r.writeUInt32(this.nonce),e||!this.transactions)return t;let{bytes:n}=s.varuint.encode(this.transactions.length,t,r.offset);return r.offset+=n,this.transactions.forEach(e=>{let n=e.byteLength();e.toBuffer(t,r.offset),r.offset+=n}),t}toHex(e){return f.toHex(this.toBuffer(e))}checkTxRoots(){let e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit())}checkProofOfWork(){let e=(0,s.reverseBuffer)(this.getHash()),t=d.calculateTarget(this.bits);return 0>=f.compare(e,t)}__checkMerkleRoot(){if(!this.transactions)throw h;let e=d.calculateMerkleRoot(this.transactions);return 0===f.compare(this.merkleRoot,e)}__checkWitnessCommit(){if(!this.transactions)throw h;if(!this.hasWitnessCommit())throw p;let e=d.calculateMerkleRoot(this.transactions,!0);return 0===f.compare(this.witnessCommit,e)}}function y(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}function g(e){return e instanceof Array&&e.some(e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some(e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0))}t.Block=d},98186:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=t.BufferWriter=t.varuint=void 0,t.reverseBuffer=h,t.cloneBuffer=p;let s=o(r(59390)),a=o(r(6885));t.varuint=a;let u=o(r(89253)),l=o(r(27801)),c=9007199254740991;function f(e,t){if("number"!=typeof e&&"bigint"!=typeof e)throw Error("cannot write a non-number as a number");if(e<0&&e<BigInt(0))throw Error("specified a negative value for writing an unsigned value");if(e>t&&e>BigInt(t))throw Error("RangeError: value out of range");if(Math.floor(Number(e))!==Number(e))throw Error("value has a fractional component")}function h(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}function p(e){let t=new Uint8Array(e.length);return t.set(e),t}class d{buffer;offset;static withCapacity(e){return new d(new Uint8Array(e))}constructor(e,t=0){this.buffer=e,this.offset=t,u.parse(u.tuple([s.BufferSchema,s.UInt32Schema]),[e,t])}writeUInt8(e){this.offset=l.writeUInt8(this.buffer,this.offset,e)}writeInt32(e){this.offset=l.writeInt32(this.buffer,this.offset,e,"LE")}writeInt64(e){this.offset=l.writeInt64(this.buffer,this.offset,BigInt(e),"LE")}writeUInt32(e){this.offset=l.writeUInt32(this.buffer,this.offset,e,"LE")}writeUInt64(e){this.offset=l.writeUInt64(this.buffer,this.offset,BigInt(e),"LE")}writeVarInt(e){let{bytes:t}=a.encode(e,this.buffer,this.offset);this.offset+=t}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw Error("Cannot write slice out of bounds");this.buffer.set(e,this.offset),this.offset+=e.length}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach(e=>this.writeVarSlice(e))}end(){if(this.buffer.length===this.offset)return this.buffer;throw Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}}t.BufferWriter=d;class y{buffer;offset;constructor(e,t=0){this.buffer=e,this.offset=t,u.parse(u.tuple([s.BufferSchema,s.UInt32Schema]),[e,t])}readUInt8(){let e=l.readUInt8(this.buffer,this.offset);return this.offset++,e}readInt32(){let e=l.readInt32(this.buffer,this.offset,"LE");return this.offset+=4,e}readUInt32(){let e=l.readUInt32(this.buffer,this.offset,"LE");return this.offset+=4,e}readInt64(){let e=l.readInt64(this.buffer,this.offset,"LE");return this.offset+=8,e}readVarInt(){let{bigintValue:e,bytes:t}=a.decode(this.buffer,this.offset);return this.offset+=t,e}readSlice(e){f(e,c);let t=Number(e);if(this.buffer.length<this.offset+t)throw Error("Cannot read slice out of bounds");let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let e=this.readVarInt(),t=[];for(let r=0;r<e;r++)t.push(this.readVarSlice());return t}}t.BufferReader=y},2487:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TAGGED_HASH_PREFIXES=t.TAGS=void 0,t.hash160=l,t.hash256=c,t.taggedHash=f;let s=r(70830),a=r(23061),u=o(r(27801));function l(e){return(0,s.ripemd160)((0,a.sha256)(e))}function c(e){return(0,a.sha256)((0,a.sha256)(e))}function f(e,r){return(0,a.sha256)(u.concat([t.TAGGED_HASH_PREFIXES[e],r]))}t.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],t.TAGGED_HASH_PREFIXES={"BIP0340/challenge":Uint8Array.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":Uint8Array.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":Uint8Array.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:Uint8Array.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:Uint8Array.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:Uint8Array.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:Uint8Array.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":Uint8Array.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":Uint8Array.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])}},31812:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.initEccLib=u,t.getEccLib=l;let s=o(r(27801)),a={};function u(e){e?e!==a.eccLib&&(f(e),a.eccLib=e):a.eccLib=e}function l(){if(!a.eccLib)throw Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return a.eccLib}let c=e=>s.fromHex(e);function f(e){h("function"==typeof e.isXOnlyPoint),h(e.isXOnlyPoint(c("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),h(e.isXOnlyPoint(c("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),h(e.isXOnlyPoint(c("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),h(e.isXOnlyPoint(c("0000000000000000000000000000000000000000000000000000000000000001"))),h(!e.isXOnlyPoint(c("0000000000000000000000000000000000000000000000000000000000000000"))),h(!e.isXOnlyPoint(c("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),h("function"==typeof e.xOnlyPointAddTweak),p.forEach(t=>{let r=e.xOnlyPointAddTweak(c(t.pubkey),c(t.tweak));null===t.result?h(null===r):(h(null!==r),h(r.parity===t.parity),h(0===s.compare(r.xOnlyPubkey,c(t.result))))})}function h(e){if(!e)throw Error("ecc library invalid")}let p=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]},50103:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.initEccLib=t.Transaction=t.opcodes=t.Psbt=t.Block=t.script=t.payments=t.networks=t.crypto=t.address=void 0;let s=o(r(4164));t.address=s;let a=o(r(2487));t.crypto=a;let u=o(r(72161));t.networks=u;let l=o(r(93049));t.payments=l;let c=o(r(61928));t.script=c;var f=r(19561);Object.defineProperty(t,"Block",{enumerable:!0,get:function(){return f.Block}});var h=r(75260);Object.defineProperty(t,"Psbt",{enumerable:!0,get:function(){return h.Psbt}});var p=r(25738);Object.defineProperty(t,"opcodes",{enumerable:!0,get:function(){return p.OPS}});var d=r(70478);Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return d.Transaction}});var y=r(31812);Object.defineProperty(t,"initEccLib",{enumerable:!0,get:function(){return y.initEccLib}})},22001:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.fastMerkleRoot=a;let s=o(r(27801));function a(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");let r=e.length,n=e.concat();for(;r>1;){let e=0;for(let i=0;i<r;i+=2,++e){let o=n[i],a=i+1===r?o:n[i+1],u=s.concat([o,a]);n[e]=t(u)}r=e}return n[0]}},72161:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testnet=t.regtest=t.bitcoin=void 0,t.bitcoin={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},25738:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REVERSE_OPS=t.OPS=void 0;let r={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};t.OPS=r;let n={};for(let e of(t.REVERSE_OPS=n,Object.keys(r)))n[r[e]]=e},30420:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_TAPTREE_DEPTH=t.LEAF_VERSION_TAPSCRIPT=void 0,t.rootHashFromPath=h,t.toHashTree=p,t.findScriptPath=d,t.tapleafHash=y,t.tapTweakHash=g,t.tweakKey=m;let s=r(31812),a=o(r(2487)),u=r(98186),l=r(59390),c=o(r(27801));t.LEAF_VERSION_TAPSCRIPT=192,t.MAX_TAPTREE_DEPTH=128;let f=e=>"left"in e&&"right"in e;function h(e,t){if(e.length<33)throw TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);let r=(e.length-33)/32,n=t;for(let t=0;t<r;t++){let r=e.slice(33+32*t,65+32*t);n=0>c.compare(n,r)?b(n,r):b(r,n)}return n}function p(e){if((0,l.isTapleaf)(e))return{hash:y(e)};let t=[p(e[0]),p(e[1])];t.sort((e,t)=>c.compare(e.hash,t.hash));let[r,n]=t;return{hash:b(r.hash,n.hash),left:r,right:n}}function d(e,t){if(f(e)){let r=d(e.left,t);if(void 0!==r)return[...r,e.right.hash];let n=d(e.right,t);if(void 0!==n)return[...n,e.left.hash]}else if(0===c.compare(e.hash,t))return[]}function y(e){let r=e.version||t.LEAF_VERSION_TAPSCRIPT;return a.taggedHash("TapLeaf",c.concat([Uint8Array.from([r]),w(e.output)]))}function g(e,t){return a.taggedHash("TapTweak",c.concat(t?[e,t]:[e]))}function m(e,t){if(!(e instanceof Uint8Array)||32!==e.length||t&&32!==t.length)return null;let r=g(e,t),n=(0,s.getEccLib)().xOnlyPointAddTweak(e,r);return n&&null!==n.xOnlyPubkey?{parity:n.parity,x:Uint8Array.from(n.xOnlyPubkey)}:null}function b(e,t){return a.taggedHash("TapBranch",c.concat([e,t]))}function w(e){let t=new Uint8Array(u.varuint.encodingLength(e.length));return u.varuint.encode(e.length,t),c.concat([t,e])}},34541:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2data=h;let s=r(72161),a=o(r(61928)),u=r(59390),l=o(r(37810)),c=o(r(89253)),f=a.OPS;function h(e,t){if(!e.data&&!e.output)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),c.parse(c.partial(c.object({network:c.object({}),output:u.BufferSchema,data:c.array(u.BufferSchema)})),e);let r={name:"embed",network:e.network||s.bitcoin};if(l.prop(r,"output",()=>{if(e.data)return a.compile([f.OP_RETURN].concat(e.data))}),l.prop(r,"data",()=>{if(e.output)return a.decompile(e.output).slice(1)}),t.validate&&e.output){let t=a.decompile(e.output);if(t[0]!==f.OP_RETURN||!t.slice(1).every(e=>c.is(u.BufferSchema,e)))throw TypeError("Output is invalid");if(e.data&&!(0,u.stacksEqual)(e.data,r.data))throw TypeError("Data mismatch")}return Object.assign(r,e)}},93049:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=t.p2wsh=t.p2wpkh=t.p2sh=t.p2pkh=t.p2pk=t.p2ms=t.embed=void 0;let n=r(34541);Object.defineProperty(t,"embed",{enumerable:!0,get:function(){return n.p2data}});let i=r(33825);Object.defineProperty(t,"p2ms",{enumerable:!0,get:function(){return i.p2ms}});let o=r(77722);Object.defineProperty(t,"p2pk",{enumerable:!0,get:function(){return o.p2pk}});let s=r(49288);Object.defineProperty(t,"p2pkh",{enumerable:!0,get:function(){return s.p2pkh}});let a=r(547);Object.defineProperty(t,"p2sh",{enumerable:!0,get:function(){return a.p2sh}});let u=r(71161);Object.defineProperty(t,"p2wpkh",{enumerable:!0,get:function(){return u.p2wpkh}});let l=r(94894);Object.defineProperty(t,"p2wsh",{enumerable:!0,get:function(){return l.p2wsh}});let c=r(74671);Object.defineProperty(t,"p2tr",{enumerable:!0,get:function(){return c.p2tr}})},37810:function(e,t){"use strict";function r(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let e=r.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})}function n(e){let t;return()=>void 0!==t?t:t=e()}Object.defineProperty(t,"__esModule",{value:!0}),t.prop=r,t.value=n},33825:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2ms=p;let s=r(72161),a=o(r(61928)),u=r(59390),l=o(r(37810)),c=o(r(89253)),f=a.OPS,h=f.OP_RESERVED;function p(e,t){if(!e.input&&!e.output&&!(e.pubkeys&&void 0!==e.m)&&!e.signatures)throw TypeError("Not enough data");function r(e){return a.isCanonicalScriptSignature(e)||(t.allowIncomplete&&e===f.OP_0)!==void 0}t=Object.assign({validate:!0},t||{}),c.parse(c.partial(c.object({network:c.object({}),m:c.number(),n:c.number(),output:u.BufferSchema,pubkeys:c.array(c.custom(u.isPoint),"Received invalid pubkey"),signatures:c.array(c.custom(r),"Expected signature to be of type isAcceptableSignature"),input:u.BufferSchema})),e);let n={network:e.network||s.bitcoin},i=[],o=!1;function p(e){o||(o=!0,i=a.decompile(e),n.m=i[0]-h,n.n=i[i.length-2]-h,n.pubkeys=i.slice(1,-2))}if(l.prop(n,"output",()=>{if(e.m&&n.n&&e.pubkeys)return a.compile([].concat(h+e.m,e.pubkeys,h+n.n,f.OP_CHECKMULTISIG))}),l.prop(n,"m",()=>{if(n.output)return p(n.output),n.m}),l.prop(n,"n",()=>{if(n.pubkeys)return n.pubkeys.length}),l.prop(n,"pubkeys",()=>{if(e.output)return p(e.output),n.pubkeys}),l.prop(n,"signatures",()=>{if(e.input)return a.decompile(e.input).slice(1)}),l.prop(n,"input",()=>{if(e.signatures)return a.compile([f.OP_0].concat(e.signatures))}),l.prop(n,"witness",()=>{if(n.input)return[]}),l.prop(n,"name",()=>{if(n.m&&n.n)return`p2ms(${n.m} of ${n.n})`}),t.validate){if(e.output){if(p(e.output),c.parse(c.number(),i[0],{message:"Output is invalid"}),c.parse(c.number(),i[i.length-2],{message:"Output is invalid"}),i[i.length-1]!==f.OP_CHECKMULTISIG||n.m<=0||n.n>16||n.m>n.n||n.n!==i.length-3||!n.pubkeys.every(e=>(0,u.isPoint)(e)))throw TypeError("Output is invalid");if(void 0!==e.m&&e.m!==n.m)throw TypeError("m mismatch");if(void 0!==e.n&&e.n!==n.n)throw TypeError("n mismatch");if(e.pubkeys&&!(0,u.stacksEqual)(e.pubkeys,n.pubkeys))throw TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw TypeError("Pubkey count mismatch");if(n.n=e.pubkeys.length,n.n<n.m)throw TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<n.m)throw TypeError("Not enough signatures provided");if(e.signatures.length>n.m)throw TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==f.OP_0)throw TypeError("Input is invalid");if(0===n.signatures.length||!n.signatures.every(r))throw TypeError("Input has invalid signature(s)");if(e.signatures&&!(0,u.stacksEqual)(e.signatures,n.signatures))throw TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw TypeError("Signature count mismatch")}}return Object.assign(n,e)}},77722:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2pk=p;let s=r(72161),a=o(r(61928)),u=r(59390),l=o(r(37810)),c=o(r(27801)),f=o(r(89253)),h=a.OPS;function p(e,t){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),f.parse(f.partial(f.object({network:f.object({}),output:u.BufferSchema,pubkey:f.custom(u.isPoint,"invalid pubkey"),signature:f.custom(a.isCanonicalScriptSignature,"Expected signature to be of type isCanonicalScriptSignature"),input:u.BufferSchema})),e);let r=l.value(()=>a.decompile(e.input)),n={name:"p2pk",network:e.network||s.bitcoin};if(l.prop(n,"output",()=>{if(e.pubkey)return a.compile([e.pubkey,h.OP_CHECKSIG])}),l.prop(n,"pubkey",()=>{if(e.output)return e.output.slice(1,-1)}),l.prop(n,"signature",()=>{if(e.input)return r()[0]}),l.prop(n,"input",()=>{if(e.signature)return a.compile([e.signature])}),l.prop(n,"witness",()=>{if(n.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==h.OP_CHECKSIG)throw TypeError("Output is invalid");if(!(0,u.isPoint)(n.pubkey))throw TypeError("Output pubkey is invalid");if(e.pubkey&&0!==c.compare(e.pubkey,n.pubkey))throw TypeError("Pubkey mismatch")}if(e.signature&&e.input&&0!==c.compare(e.input,n.input))throw TypeError("Signature mismatch");if(e.input){if(1!==r().length)throw TypeError("Input is invalid");if(!a.isCanonicalScriptSignature(n.signature))throw TypeError("Input has invalid signature")}}return Object.assign(n,e)}},49288:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.p2pkh=g;let a=o(r(2487)),u=r(72161),l=o(r(61928)),c=r(59390),f=o(r(37810)),h=s(r(69838)),p=o(r(27801)),d=o(r(89253)),y=l.OPS;function g(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.input)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),d.parse(d.partial(d.object({network:d.object({}),address:d.string(),hash:c.Hash160bitSchema,output:(0,c.NBufferSchemaFactory)(25),pubkey:d.custom(c.isPoint),signature:d.custom(l.isCanonicalScriptSignature),input:c.BufferSchema})),e);let r=f.value(()=>{let t=h.default.decode(e.address);return{version:p.readUInt8(t,0),hash:t.slice(1)}}),n=f.value(()=>l.decompile(e.input)),i=e.network||u.bitcoin,o={name:"p2pkh",network:i};if(f.prop(o,"address",()=>{if(!o.hash)return;let e=new Uint8Array(21);return p.writeUInt8(e,0,i.pubKeyHash),e.set(o.hash,1),h.default.encode(e)}),f.prop(o,"hash",()=>e.output?e.output.slice(3,23):e.address?r().hash:e.pubkey||o.pubkey?a.hash160(e.pubkey||o.pubkey):void 0),f.prop(o,"output",()=>{if(o.hash)return l.compile([y.OP_DUP,y.OP_HASH160,o.hash,y.OP_EQUALVERIFY,y.OP_CHECKSIG])}),f.prop(o,"pubkey",()=>{if(e.input)return n()[1]}),f.prop(o,"signature",()=>{if(e.input)return n()[0]}),f.prop(o,"input",()=>{if(e.pubkey&&e.signature)return l.compile([e.signature,e.pubkey])}),f.prop(o,"witness",()=>{if(o.input)return[]}),t.validate){let t=Uint8Array.from([]);if(e.address){if(r().version!==i.pubKeyHash)throw TypeError("Invalid version or Network mismatch");if(20!==r().hash.length)throw TypeError("Invalid address");t=r().hash}if(e.hash){if(t.length>0&&0!==p.compare(t,e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==y.OP_DUP||e.output[1]!==y.OP_HASH160||20!==e.output[2]||e.output[23]!==y.OP_EQUALVERIFY||e.output[24]!==y.OP_CHECKSIG)throw TypeError("Output is invalid");let r=e.output.slice(3,23);if(t.length>0&&0!==p.compare(t,r))throw TypeError("Hash mismatch");t=r}if(e.pubkey){let r=a.hash160(e.pubkey);if(t.length>0&&0!==p.compare(t,r))throw TypeError("Hash mismatch");t=r}if(e.input){let r=n();if(2!==r.length)throw TypeError("Input is invalid");if(!l.isCanonicalScriptSignature(r[0]))throw TypeError("Input has invalid signature");if(!(0,c.isPoint)(r[1]))throw TypeError("Input has invalid pubkey");if(e.signature&&0!==p.compare(e.signature,r[0]))throw TypeError("Signature mismatch");if(e.pubkey&&0!==p.compare(e.pubkey,r[1]))throw TypeError("Pubkey mismatch");let i=a.hash160(r[1]);if(t.length>0&&0!==p.compare(t,i))throw TypeError("Hash mismatch")}}return Object.assign(o,e)}},547:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.p2sh=g;let a=o(r(2487)),u=r(72161),l=o(r(61928)),c=r(59390),f=o(r(37810)),h=s(r(69838)),p=o(r(27801)),d=o(r(89253)),y=l.OPS;function g(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.input)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),d.parse(d.partial(d.object({network:d.object({}),address:d.string(),hash:(0,c.NBufferSchemaFactory)(20),output:(0,c.NBufferSchemaFactory)(23),redeem:d.partial(d.object({network:d.object({}),output:c.BufferSchema,input:c.BufferSchema,witness:d.array(c.BufferSchema)})),input:c.BufferSchema,witness:d.array(c.BufferSchema)})),e);let r=e.network;r||(r=e.redeem&&e.redeem.network||u.bitcoin);let n={network:r},i=f.value(()=>{let t=h.default.decode(e.address);return{version:p.readUInt8(t,0),hash:t.slice(1)}}),o=f.value(()=>l.decompile(e.input)),s=f.value(()=>{let t=o(),n=t[t.length-1];return{network:r,output:n===y.OP_FALSE?Uint8Array.from([]):n,input:l.compile(t.slice(0,-1)),witness:e.witness||[]}});if(f.prop(n,"address",()=>{if(!n.hash)return;let e=new Uint8Array(21);return p.writeUInt8(e,0,n.network.scriptHash),e.set(n.hash,1),h.default.encode(e)}),f.prop(n,"hash",()=>e.output?e.output.slice(2,22):e.address?i().hash:n.redeem&&n.redeem.output?a.hash160(n.redeem.output):void 0),f.prop(n,"output",()=>{if(n.hash)return l.compile([y.OP_HASH160,n.hash,y.OP_EQUAL])}),f.prop(n,"redeem",()=>{if(e.input)return s()}),f.prop(n,"input",()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return l.compile([].concat(l.decompile(e.redeem.input),e.redeem.output))}),f.prop(n,"witness",()=>n.redeem&&n.redeem.witness?n.redeem.witness:n.input?[]:void 0),f.prop(n,"name",()=>{let e=["p2sh"];return void 0!==n.redeem&&void 0!==n.redeem.name&&e.push(n.redeem.name),e.join("-")}),t.validate){let t=Uint8Array.from([]);if(e.address){if(i().version!==r.scriptHash)throw TypeError("Invalid version or Network mismatch");if(20!==i().hash.length)throw TypeError("Invalid address");t=i().hash}if(e.hash){if(t.length>0&&0!==p.compare(t,e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==y.OP_HASH160||20!==e.output[1]||e.output[22]!==y.OP_EQUAL)throw TypeError("Output is invalid");let r=e.output.slice(2,22);if(t.length>0&&0!==p.compare(t,r))throw TypeError("Hash mismatch");t=r}let n=e=>{if(e.output){let r=l.decompile(e.output);if(!r||r.length<1)throw TypeError("Redeem.output too short");if(e.output.byteLength>520)throw TypeError("Redeem.output unspendable if larger than 520 bytes");if(l.countNonPushOnlyOPs(r)>201)throw TypeError("Redeem.output unspendable with more than 201 non-push ops");let n=a.hash160(e.output);if(t.length>0&&0!==p.compare(t,n))throw TypeError("Hash mismatch");t=n}if(e.input){let t=e.input.length>0,r=e.witness&&e.witness.length>0;if(!t&&!r)throw TypeError("Empty input");if(t&&r)throw TypeError("Input and witness provided");if(t){let t=l.decompile(e.input);if(!l.isPushOnly(t))throw TypeError("Non push-only scriptSig")}}};if(e.input){let e=o();if(!e||e.length<1)throw TypeError("Input too short");if(!(s().output instanceof Uint8Array))throw TypeError("Input is invalid");n(s())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==r)throw TypeError("Network mismatch");if(e.input){let t=s();if(e.redeem.output&&0!==p.compare(e.redeem.output,t.output))throw TypeError("Redeem.output mismatch");if(e.redeem.input&&0!==p.compare(e.redeem.input,t.input))throw TypeError("Redeem.input mismatch")}n(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!(0,c.stacksEqual)(e.redeem.witness,e.witness))throw TypeError("Witness and redeem.witness mismatch")}return Object.assign(n,e)}},74671:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=w;let s=r(72161),a=o(r(61928)),u=r(59390),l=r(31812),c=r(30420),f=o(r(37810)),h=r(27715),p=r(4164),d=o(r(27801)),y=o(r(89253)),g=a.OPS,m=1,b=80;function w(e,t){if(!e.address&&!e.output&&!e.pubkey&&!e.internalPubkey&&!(e.witness&&e.witness.length>1))throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),y.parse(y.partial(y.object({address:y.string(),input:(0,u.NBufferSchemaFactory)(0),network:y.object({}),output:(0,u.NBufferSchemaFactory)(34),internalPubkey:(0,u.NBufferSchemaFactory)(32),hash:(0,u.NBufferSchemaFactory)(32),pubkey:(0,u.NBufferSchemaFactory)(32),signature:y.union([(0,u.NBufferSchemaFactory)(64),(0,u.NBufferSchemaFactory)(65)]),witness:y.array(u.BufferSchema),scriptTree:y.custom(u.isTaptree,"Taptree is not of type isTaptree"),redeem:y.partial(y.object({output:u.BufferSchema,redeemVersion:y.number(),witness:y.array(u.BufferSchema)})),redeemVersion:y.number()})),e);let r=f.value(()=>(0,p.fromBech32)(e.address)),n=f.value(()=>{if(e.witness&&e.witness.length)return e.witness.length>=2&&e.witness[e.witness.length-1][0]===b?e.witness.slice(0,-1):e.witness.slice()}),i=f.value(()=>e.scriptTree?(0,c.toHashTree)(e.scriptTree):e.hash?{hash:e.hash}:void 0),o=e.network||s.bitcoin,w={name:"p2tr",network:o};if(f.prop(w,"address",()=>{if(!w.pubkey)return;let e=h.bech32m.toWords(w.pubkey);return e.unshift(m),h.bech32m.encode(o.bech32,e)}),f.prop(w,"hash",()=>{let e=i();if(e)return e.hash;let t=n();if(t&&t.length>1){let e=t[t.length-1],r=e[0]&u.TAPLEAF_VERSION_MASK,n=t[t.length-2],i=(0,c.tapleafHash)({output:n,version:r});return(0,c.rootHashFromPath)(e,i)}return null}),f.prop(w,"output",()=>{if(w.pubkey)return a.compile([g.OP_1,w.pubkey])}),f.prop(w,"redeemVersion",()=>e.redeemVersion?e.redeemVersion:e.redeem&&void 0!==e.redeem.redeemVersion&&null!==e.redeem.redeemVersion?e.redeem.redeemVersion:c.LEAF_VERSION_TAPSCRIPT),f.prop(w,"redeem",()=>{let e=n();if(e&&!(e.length<2))return{output:e[e.length-2],witness:e.slice(0,-2),redeemVersion:e[e.length-1][0]&u.TAPLEAF_VERSION_MASK}}),f.prop(w,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return r().data;if(w.internalPubkey){let e=(0,c.tweakKey)(w.internalPubkey,w.hash);if(e)return e.x}}),f.prop(w,"internalPubkey",()=>{if(e.internalPubkey)return e.internalPubkey;let t=n();if(t&&t.length>1)return t[t.length-1].slice(1,33)}),f.prop(w,"signature",()=>{if(e.signature)return e.signature;let t=n();if(t&&1===t.length)return t[0]}),f.prop(w,"witness",()=>{if(e.witness)return e.witness;let t=i();if(t&&e.redeem&&e.redeem.output&&e.internalPubkey){let r=(0,c.tapleafHash)({output:e.redeem.output,version:w.redeemVersion}),n=(0,c.findScriptPath)(t,r);if(!n)return;let i=(0,c.tweakKey)(e.internalPubkey,t.hash);if(!i)return;let o=d.concat([Uint8Array.from([w.redeemVersion|i.parity]),e.internalPubkey].concat(n));return[e.redeem.output,o]}if(e.signature)return[e.signature]}),t.validate){let t=Uint8Array.from([]);if(e.address){if(o&&o.bech32!==r().prefix)throw TypeError("Invalid prefix or Network mismatch");if(r().version!==m)throw TypeError("Invalid address version");if(32!==r().data.length)throw TypeError("Invalid address data");t=r().data}if(e.pubkey){if(t.length>0&&0!==d.compare(t,e.pubkey))throw TypeError("Pubkey mismatch");t=e.pubkey}if(e.output){if(34!==e.output.length||e.output[0]!==g.OP_1||32!==e.output[1])throw TypeError("Output is invalid");if(t.length>0&&0!==d.compare(t,e.output.slice(2)))throw TypeError("Pubkey mismatch");t=e.output.slice(2)}if(e.internalPubkey){let r=(0,c.tweakKey)(e.internalPubkey,w.hash);if(t.length>0&&0!==d.compare(t,r.x))throw TypeError("Pubkey mismatch");t=r.x}if(t&&t.length&&!(0,l.getEccLib)().isXOnlyPoint(t))throw TypeError("Invalid pubkey for p2tr");let s=i();if(e.hash&&s&&0!==d.compare(e.hash,s.hash))throw TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&s){let t=(0,c.tapleafHash)({output:e.redeem.output,version:w.redeemVersion});if(!(0,c.findScriptPath)(s,t))throw TypeError("Redeem script not in tree")}let f=n();if(e.redeem&&w.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==w.redeem.redeemVersion)throw TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(0===a.decompile(e.redeem.output).length)throw TypeError("Redeem.output is invalid");if(w.redeem.output&&0!==d.compare(e.redeem.output,w.redeem.output))throw TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&w.redeem.witness&&!(0,u.stacksEqual)(e.redeem.witness,w.redeem.witness))throw TypeError("Redeem.witness and witness mismatch")}if(f&&f.length){if(1===f.length){if(e.signature&&0!==d.compare(e.signature,f[0]))throw TypeError("Signature mismatch")}else{let r=f[f.length-1];if(r.length<33)throw TypeError(`The control-block length is too small. Got ${r.length}, expected min 33.`);if((r.length-33)%32!=0)throw TypeError(`The control-block length of ${r.length} is incorrect!`);let n=(r.length-33)/32;if(n>128)throw TypeError(`The script path is too long. Got ${n}, expected max 128.`);let i=r.slice(1,33);if(e.internalPubkey&&0!==d.compare(e.internalPubkey,i))throw TypeError("Internal pubkey mismatch");if(!(0,l.getEccLib)().isXOnlyPoint(i))throw TypeError("Invalid internalPubkey for p2tr witness");let o=r[0]&u.TAPLEAF_VERSION_MASK,s=f[f.length-2],a=(0,c.tapleafHash)({output:s,version:o}),h=(0,c.rootHashFromPath)(r,a),p=(0,c.tweakKey)(i,h);if(!p)throw TypeError("Invalid outputKey for p2tr witness");if(t.length&&0!==d.compare(t,p.x))throw TypeError("Pubkey mismatch for p2tr witness");if(p.parity!==(1&r[0]))throw Error("Incorrect parity")}}}return Object.assign(w,e)}},71161:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2wpkh=g;let s=o(r(2487)),a=r(72161),u=o(r(61928)),l=r(59390),c=o(r(37810)),f=r(27715),h=o(r(27801)),p=o(r(89253)),d=u.OPS,y=new Uint8Array(0);function g(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.witness)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),p.parse(p.partial(p.object({address:p.string(),hash:(0,l.NBufferSchemaFactory)(20),input:(0,l.NBufferSchemaFactory)(0),network:p.object({}),output:(0,l.NBufferSchemaFactory)(22),pubkey:p.custom(l.isPoint,"Not a valid pubkey"),signature:p.custom(u.isCanonicalScriptSignature),witness:p.array(l.BufferSchema)})),e);let r=c.value(()=>{let t=f.bech32.decode(e.address),r=t.words.shift(),n=f.bech32.fromWords(t.words);return{version:r,prefix:t.prefix,data:Uint8Array.from(n)}}),n=e.network||a.bitcoin,i={name:"p2wpkh",network:n};if(c.prop(i,"address",()=>{if(!i.hash)return;let e=f.bech32.toWords(i.hash);return e.unshift(0),f.bech32.encode(n.bech32,e)}),c.prop(i,"hash",()=>e.output?e.output.slice(2,22):e.address?r().data:e.pubkey||i.pubkey?s.hash160(e.pubkey||i.pubkey):void 0),c.prop(i,"output",()=>{if(i.hash)return u.compile([d.OP_0,i.hash])}),c.prop(i,"pubkey",()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0),c.prop(i,"signature",()=>{if(e.witness)return e.witness[0]}),c.prop(i,"input",()=>{if(i.witness)return y}),c.prop(i,"witness",()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]}),t.validate){let t=Uint8Array.from([]);if(e.address){if(n&&n.bech32!==r().prefix)throw TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw TypeError("Invalid address version");if(20!==r().data.length)throw TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&0!==h.compare(t,e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==d.OP_0||20!==e.output[1])throw TypeError("Output is invalid");if(t.length>0&&0!==h.compare(t,e.output.slice(2)))throw TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){let r=s.hash160(e.pubkey);if(t.length>0&&0!==h.compare(t,r))throw TypeError("Hash mismatch");if(t=r,!(0,l.isPoint)(e.pubkey)||33!==e.pubkey.length)throw TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw TypeError("Witness is invalid");if(!u.isCanonicalScriptSignature(e.witness[0]))throw TypeError("Witness has invalid signature");if(!(0,l.isPoint)(e.witness[1])||33!==e.witness[1].length)throw TypeError("Witness has invalid pubkey");if(e.signature&&0!==h.compare(e.signature,e.witness[0]))throw TypeError("Signature mismatch");if(e.pubkey&&0!==h.compare(e.pubkey,e.witness[1]))throw TypeError("Pubkey mismatch");let r=s.hash160(e.witness[1]);if(t.length>0&&0!==h.compare(t,r))throw TypeError("Hash mismatch")}}return Object.assign(i,e)}},94894:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2wsh=m;let s=r(23061),a=r(72161),u=o(r(61928)),l=r(59390),c=o(r(37810)),f=r(27715),h=o(r(27801)),p=o(r(89253)),d=u.OPS,y=new Uint8Array(0);function g(e){return!!(e instanceof Uint8Array&&65===e.length&&4===e[0]&&(0,l.isPoint)(e))}function m(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.witness)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),p.parse((0,l.NullablePartial)({network:p.object({}),address:p.string(),hash:l.Buffer256bitSchema,output:(0,l.NBufferSchemaFactory)(34),redeem:(0,l.NullablePartial)({input:l.BufferSchema,network:p.object({}),output:l.BufferSchema,witness:p.array(l.BufferSchema)}),input:(0,l.NBufferSchemaFactory)(0),witness:p.array(l.BufferSchema)}),e);let r=c.value(()=>{let t=f.bech32.decode(e.address),r=t.words.shift(),n=f.bech32.fromWords(t.words);return{version:r,prefix:t.prefix,data:Uint8Array.from(n)}}),n=c.value(()=>u.decompile(e.redeem.input)),i=e.network;i||(i=e.redeem&&e.redeem.network||a.bitcoin);let o={network:i};if(c.prop(o,"address",()=>{if(!o.hash)return;let e=f.bech32.toWords(o.hash);return e.unshift(0),f.bech32.encode(i.bech32,e)}),c.prop(o,"hash",()=>e.output?e.output.slice(2):e.address?r().data:o.redeem&&o.redeem.output?(0,s.sha256)(o.redeem.output):void 0),c.prop(o,"output",()=>{if(o.hash)return u.compile([d.OP_0,o.hash])}),c.prop(o,"redeem",()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:y,witness:e.witness.slice(0,-1)}}),c.prop(o,"input",()=>{if(o.witness)return y}),c.prop(o,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){let t=u.toStack(n());return o.redeem=Object.assign({witness:t},e.redeem),o.redeem.input=y,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),c.prop(o,"name",()=>{let e=["p2wsh"];return void 0!==o.redeem&&void 0!==o.redeem.name&&e.push(o.redeem.name),e.join("-")}),t.validate){let t=Uint8Array.from([]);if(e.address){if(r().prefix!==i.bech32)throw TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw TypeError("Invalid address version");if(32!==r().data.length)throw TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&0!==h.compare(t,e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==d.OP_0||32!==e.output[1])throw TypeError("Output is invalid");let r=e.output.slice(2);if(t.length>0&&0!==h.compare(t,r))throw TypeError("Hash mismatch");t=r}if(e.redeem){if(e.redeem.network&&e.redeem.network!==i)throw TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw TypeError("Ambiguous witness source");if(e.redeem.output){let r=u.decompile(e.redeem.output);if(!r||r.length<1)throw TypeError("Redeem.output is invalid");if(e.redeem.output.byteLength>3600)throw TypeError("Redeem.output unspendable if larger than 3600 bytes");if(u.countNonPushOnlyOPs(r)>201)throw TypeError("Redeem.output unspendable with more than 201 non-push ops");let n=(0,s.sha256)(e.redeem.output);if(t.length>0&&0!==h.compare(t,n))throw TypeError("Hash mismatch");t=n}if(e.redeem.input&&!u.isPushOnly(n()))throw TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!(0,l.stacksEqual)(e.witness,e.redeem.witness))throw TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&n().some(g)||e.redeem.output&&(u.decompile(e.redeem.output)||[]).some(g))throw TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){let t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&0!==h.compare(e.redeem.output,t))throw TypeError("Witness and redeem.output mismatch");if(e.witness.some(g)||(u.decompile(t)||[]).some(g))throw TypeError("Witness contains uncompressed pubkey")}}return Object.assign(o,e)}},75260:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Psbt=void 0;let s=r(81654),a=o(r(6885)),u=r(81654),l=r(4164),c=r(98186),f=r(72161),h=o(r(93049)),p=r(30420),d=o(r(61928)),y=r(70478),g=r(98471),m=r(59972),b=o(r(27801)),w={network:f.bitcoin,maximumFeeRate:5e3};class v{data;static fromBase64(e,t={}){let r=b.fromBase64(e);return this.fromBuffer(r,t)}static fromHex(e,t={}){let r=b.fromHex(e);return this.fromBuffer(r,t)}static fromBuffer(e,t={}){let r=new v(t,s.Psbt.fromBuffer(e,_));return U(r.__CACHE.__TX,r.__CACHE),r}__CACHE;opts;constructor(e={},t=new s.Psbt(new E)){this.data=t,this.opts=Object.assign({},w,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);let r=(e,t,r,n)=>Object.defineProperty(e,t,{enumerable:r,writable:n});r(this,"__CACHE",!1,!0),r(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map(e=>({hash:(0,c.cloneBuffer)(e.hash),index:e.index,sequence:e.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(e=>{let t;try{t=(0,l.fromOutputScript)(e.script,this.opts.network)}catch(e){}return{script:(0,c.cloneBuffer)(e.script),value:e.value,address:t}})}combine(...e){return this.data.combine(...e.map(e=>e.data)),this}clone(){let e=v.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){P(e),this.opts.maximumFeeRate=e}setVersion(e){P(e),x(this.data.inputs,"setVersion");let t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){P(e),x(this.data.inputs,"setLocktime");let t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){P(t),x(this.data.inputs,"setInputSequence");let r=this.__CACHE;if(r.__TX.ins.length<=e)throw Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach(e=>this.addInput(e)),this}addInput(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,g.checkTaprootInputFields)(e,e,"addInput"),x(this.data.inputs,"addInput"),e.witnessScript&&ed(e.witnessScript);let t=this.__CACHE;this.data.addInput(e);let r=t.__TX.ins[t.__TX.ins.length-1];N(t,r);let n=this.data.inputs.length-1,i=this.data.inputs[n];return i.nonWitnessUtxo&&et(this.__CACHE,i,n),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach(e=>this.addOutput(e)),this}addOutput(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");x(this.data.inputs,"addOutput");let{address:t}=e;if("string"==typeof t){let{network:r}=this.opts,n=(0,l.toOutputScript)(t,r);e=Object.assign({},e,{script:n})}(0,g.checkTaprootOutputFields)(e,e,"addOutput");let r=this.__CACHE;return this.data.addOutput(e),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(A))throw Error("Not finalized");let t=this.__CACHE;if(e||k(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;let r=t.__TX.clone();return er(this.data.inputs,r,t,!0),r}getFeeRate(){return M("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return M("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,u.checkForInput)(this.data.inputs,0),eg(this.data.inputs.length).forEach(e=>this.finalizeInput(e)),this}finalizeInput(e,t){let r=(0,u.checkForInput)(this.data.inputs,e);return(0,g.isTaprootInput)(r)?this._finalizeTaprootInput(e,r,void 0,t):this._finalizeInput(e,r,t)}finalizeTaprootInput(e,t,r=g.tapScriptFinalizer){let n=(0,u.checkForInput)(this.data.inputs,e);if((0,g.isTaprootInput)(n))return this._finalizeTaprootInput(e,n,t,r);throw Error(`Cannot finalize input #${e}. Not Taproot.`)}_finalizeInput(e,t,r=F){let{script:n,isP2SH:i,isP2WSH:o,isSegwit:s}=X(e,t,this.__CACHE);if(!n)throw Error(`No script found for input #${e}`);C(t);let{finalScriptSig:a,finalScriptWitness:u}=r(e,t,n,s,i,o);if(a&&this.data.updateInput(e,{finalScriptSig:a}),u&&this.data.updateInput(e,{finalScriptWitness:u}),!a&&!u)throw Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}_finalizeTaprootInput(e,t,r,n=g.tapScriptFinalizer){if(!t.witnessUtxo)throw Error(`Cannot finalize input #${e}. Missing withness utxo.`);if(t.tapKeySig){let r=h.p2tr({output:t.witnessUtxo.script,signature:t.tapKeySig}),n=(0,m.witnessStackToScriptWitness)(r.witness);this.data.updateInput(e,{finalScriptWitness:n})}else{let{finalScriptWitness:i}=n(e,t,r);this.data.updateInput(e,{finalScriptWitness:i})}return this.data.clearFinalizedInput(e),this}getInputType(e){let t=(0,u.checkForInput)(this.data.inputs,e),r=ep(ei(e,t,this.__CACHE),e,"input",t.redeemScript||eu(t.finalScriptSig),t.witnessScript||el(t.finalScriptWitness));return("raw"===r.type?"":r.type+"-")+ey(r.meaningfulScript)}inputHasPubkey(e,t){return es(t,(0,u.checkForInput)(this.data.inputs,e),e,this.__CACHE)}inputHasHDKey(e,t){let r=(0,u.checkForInput)(this.data.inputs,e),n=O(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}outputHasPubkey(e,t){return ea(t,(0,u.checkForOutput)(this.data.outputs,e),e,this.__CACHE)}outputHasHDKey(e,t){let r=(0,u.checkForOutput)(this.data.outputs,e),n=O(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}validateSignaturesOfAllInputs(e){return(0,u.checkForInput)(this.data.inputs,0),eg(this.data.inputs.length).map(t=>this.validateSignaturesOfInput(t,e)).reduce((e,t)=>!0===t&&e,!0)}validateSignaturesOfInput(e,t,r){let n=this.data.inputs[e];return(0,g.isTaprootInput)(n)?this.validateSignaturesOfTaprootInput(e,t,r):this._validateSignaturesOfInput(e,t,r)}_validateSignaturesOfInput(e,t,r){let n,i,o;let s=this.data.inputs[e],a=(s||{}).partialSig;if(!s||!a||a.length<1)throw Error("No signatures to validate");if("function"!=typeof t)throw Error("Need validator function to validate signatures");let u=r?a.filter(e=>0===b.compare(e.pubkey,r)):a;if(u.length<1)throw Error("No signatures for this pubkey");let l=[];for(let r of u){let a=d.signature.decode(r.signature),{hash:u,script:c}=o!==a.hashType?K(e,Object.assign({},s,{sighashType:a.hashType}),this.__CACHE,!0):{hash:n,script:i};o=a.hashType,n=u,i=c,R(r.pubkey,c,"verify"),l.push(t(r.pubkey,u,a.signature))}return l.every(e=>!0===e)}validateSignaturesOfTaprootInput(e,t,r){let n=this.data.inputs[e],i=(n||{}).tapKeySig,o=(n||{}).tapScriptSig;if(!n&&!i&&!(o&&!o.length))throw Error("No signatures to validate");if("function"!=typeof t)throw Error("Need validator function to validate signatures");let s=(r=r&&(0,g.toXOnly)(r))?$(e,n,this.data.inputs,r,this.__CACHE):W(e,n,this.data.inputs,this.__CACHE);if(!s.length)throw Error("No signatures for this pubkey");let a=s.find(e=>!e.leafHash),u=0;if(i&&a){if(!t(a.pubkey,a.hash,G(i)))return!1;u++}if(o)for(let e of o){let r=s.find(t=>0===b.compare(t.pubkey,e.pubkey));if(r){if(!t(e.pubkey,r.hash,G(e.signature)))return!1;u++}}return u>0}signAllInputsHD(e,t=[y.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw Error("Need HDSigner to sign input");let r=[];for(let n of eg(this.data.inputs.length))try{this.signInputHD(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every(e=>!1===e))throw Error("No inputs were signed");return this}signAllInputsHDAsync(e,t=[y.Transaction.SIGHASH_ALL]){return new Promise((r,n)=>{if(!e||!e.publicKey||!e.fingerprint)return n(Error("Need HDSigner to sign input"));let i=[],o=[];for(let r of eg(this.data.inputs.length))o.push(this.signInputHDAsync(r,e,t).then(()=>{i.push(!0)},()=>{i.push(!1)}));return Promise.all(o).then(()=>{if(i.every(e=>!1===e))return n(Error("No inputs were signed"));r()})})}signInputHD(e,t,r=[y.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw Error("Need HDSigner to sign input");return J(e,this.data.inputs,t).forEach(t=>this.signInput(e,t,r)),this}signInputHDAsync(e,t,r=[y.Transaction.SIGHASH_ALL]){return new Promise((n,i)=>t&&t.publicKey&&t.fingerprint?Promise.all(J(e,this.data.inputs,t).map(t=>this.signInputAsync(e,t,r))).then(()=>{n()}).catch(i):i(Error("Need HDSigner to sign input")))}signAllInputs(e,t){if(!e||!e.publicKey)throw Error("Need Signer to sign input");let r=[];for(let n of eg(this.data.inputs.length))try{this.signInput(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every(e=>!1===e))throw Error("No inputs were signed");return this}signAllInputsAsync(e,t){return new Promise((r,n)=>{if(!e||!e.publicKey)return n(Error("Need Signer to sign input"));let i=[],o=[];for(let[r]of this.data.inputs.entries())o.push(this.signInputAsync(r,e,t).then(()=>{i.push(!0)},()=>{i.push(!1)}));return Promise.all(o).then(()=>{if(i.every(e=>!1===e))return n(Error("No inputs were signed"));r()})})}signInput(e,t,r){if(!t||!t.publicKey)throw Error("Need Signer to sign input");let n=(0,u.checkForInput)(this.data.inputs,e);return(0,g.isTaprootInput)(n)?this._signTaprootInput(e,n,t,void 0,r):this._signInput(e,t,r)}signTaprootInput(e,t,r,n){if(!t||!t.publicKey)throw Error("Need Signer to sign input");let i=(0,u.checkForInput)(this.data.inputs,e);if((0,g.isTaprootInput)(i))return this._signTaprootInput(e,i,t,r,n);throw Error(`Input #${e} is not of type Taproot.`)}_signInput(e,t,r=[y.Transaction.SIGHASH_ALL]){let{hash:n,sighashType:i}=V(this.data.inputs,e,t.publicKey,this.__CACHE,r),o=[{pubkey:t.publicKey,signature:d.signature.encode(t.sign(n),i)}];return this.data.updateInput(e,{partialSig:o}),this}_signTaprootInput(e,t,r,n,i=[y.Transaction.SIGHASH_DEFAULT]){let o=this.checkTaprootHashesForSig(e,t,r,n,i),s=o.filter(e=>!e.leafHash).map(e=>(0,g.serializeTaprootSignature)(r.signSchnorr(e.hash),t.sighashType))[0],a=o.filter(e=>!!e.leafHash).map(e=>({pubkey:(0,g.toXOnly)(r.publicKey),signature:(0,g.serializeTaprootSignature)(r.signSchnorr(e.hash),t.sighashType),leafHash:e.leafHash}));return s&&this.data.updateInput(e,{tapKeySig:s}),a.length&&this.data.updateInput(e,{tapScriptSig:a}),this}signInputAsync(e,t,r){return Promise.resolve().then(()=>{if(!t||!t.publicKey)throw Error("Need Signer to sign input");let n=(0,u.checkForInput)(this.data.inputs,e);return(0,g.isTaprootInput)(n)?this._signTaprootInputAsync(e,n,t,void 0,r):this._signInputAsync(e,t,r)})}signTaprootInputAsync(e,t,r,n){return Promise.resolve().then(()=>{if(!t||!t.publicKey)throw Error("Need Signer to sign input");let i=(0,u.checkForInput)(this.data.inputs,e);if((0,g.isTaprootInput)(i))return this._signTaprootInputAsync(e,i,t,r,n);throw Error(`Input #${e} is not of type Taproot.`)})}_signInputAsync(e,t,r=[y.Transaction.SIGHASH_ALL]){let{hash:n,sighashType:i}=V(this.data.inputs,e,t.publicKey,this.__CACHE,r);return Promise.resolve(t.sign(n)).then(r=>{let n=[{pubkey:t.publicKey,signature:d.signature.encode(r,i)}];this.data.updateInput(e,{partialSig:n})})}async _signTaprootInputAsync(e,t,r,n,i=[y.Transaction.SIGHASH_DEFAULT]){let o=this.checkTaprootHashesForSig(e,t,r,n,i),s=[],a=o.filter(e=>!e.leafHash)[0];if(a){let e=Promise.resolve(r.signSchnorr(a.hash)).then(e=>({tapKeySig:(0,g.serializeTaprootSignature)(e,t.sighashType)}));s.push(e)}let u=o.filter(e=>!!e.leafHash);if(u.length){let e=u.map(e=>Promise.resolve(r.signSchnorr(e.hash)).then(n=>({tapScriptSig:[{pubkey:(0,g.toXOnly)(r.publicKey),signature:(0,g.serializeTaprootSignature)(n,t.sighashType),leafHash:e.leafHash}]})));s.push(...e)}return Promise.all(s).then(t=>{t.forEach(t=>this.data.updateInput(e,t))})}checkTaprootHashesForSig(e,t,r,n,i){if("function"!=typeof r.signSchnorr)throw Error(`Need Schnorr Signer to sign taproot input #${e}.`);let o=$(e,t,this.data.inputs,r.publicKey,this.__CACHE,n,i);if(!o||!o.length)throw Error(`Can not sign for input #${e} with the key ${b.toHex(r.publicKey)}`);return o}toBuffer(){return T(this.__CACHE),this.data.toBuffer()}toHex(){return T(this.__CACHE),this.data.toHex()}toBase64(){return T(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return t.witnessScript&&ed(t.witnessScript),(0,g.checkTaprootInputFields)(this.data.inputs[e],t,"updateInput"),this.data.updateInput(e,t),t.nonWitnessUtxo&&et(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){let r=this.data.outputs[e];return(0,g.checkTaprootOutputFields)(r,t,"updateOutput"),this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}}t.Psbt=v;let _=e=>new E(e);class E{tx;constructor(e=Uint8Array.from([2,0,0,0,0,0,0,0,0,0])){this.tx=y.Transaction.fromBuffer(e),B(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(void 0===e.hash||void 0===e.index||!(e.hash instanceof Uint8Array)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw Error("Error adding input.");let t="string"==typeof e.hash?(0,c.reverseBuffer)(b.fromHex(e.hash)):e.hash;this.tx.addInput(t,e.index,e.sequence)}addOutput(e){if(void 0===e.script||void 0===e.value||!(e.script instanceof Uint8Array)||"bigint"!=typeof e.value)throw Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}}function S(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return I(1,e.partialSig);case"multisig":let n=h.p2ms({output:t});return I(n.m,e.partialSig,n.pubkeys);default:return!1}}function T(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw Error("Not BIP174 compliant, can not export")}function I(e,t,r){let n;if(!t)return!1;if((n=r?r.map(e=>{let r=ec(e);return t.find(e=>0===b.compare(e.pubkey,r))}).filter(e=>!!e):t).length>e)throw Error("Too many signatures");return n.length===e}function A(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function O(e){return t=>!(b.compare(e.fingerprint,t.masterFingerprint)||b.compare(e.derivePath(t.path).publicKey,t.pubkey))}function P(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw Error("Invalid 32 bit integer")}function k(e,t,r){let n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=n*i;if(n>=r.maximumFeeRate)throw Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}function x(e,t){e.forEach(e=>{if((0,g.isTaprootInput)(e)?(0,g.checkTaprootInputForSigs)(e,t):(0,m.checkInputForSig)(e,t))throw Error("Can not modify transaction, signatures exist.")})}function C(e){if(!e.sighashType||!e.partialSig)return;let{partialSig:t,sighashType:r}=e;t.forEach(e=>{let{hashType:t}=d.signature.decode(e.signature);if(r!==t)throw Error("Signature sighash does not match input sighash type")})}function R(e,t,r){if(!(0,m.pubkeyInScript)(e,t))throw Error(`Can not ${r} for this input with the key ${b.toHex(e)}`)}function B(e){if(!e.ins.every(e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length))throw Error("Format Error: Transaction ScriptSigs are not empty")}function U(e,t){e.ins.forEach(e=>{N(t,e)})}function N(e,t){let r=b.toHex((0,c.reverseBuffer)(Uint8Array.from(t.hash)))+":"+t.index;if(e.__TX_IN_CACHE[r])throw Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function D(e,t){return(r,n,i,o)=>{let s=e({redeem:{output:i}}).output;if(b.compare(n,s))throw Error(`${t} for ${o} #${r} doesn't match the scriptPubKey in the prevout`)}}let L=D(h.p2sh,"Redeem script"),H=D(h.p2wsh,"Witness script");function M(e,t,r,n){let i;if(!r.every(A))throw Error(`PSBT must be finalized to calculate ${t}`);if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;let o=!0;return(n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,o=!1):i=n.__TX.clone(),er(r,i,n,o),"__FEE_RATE"===e)?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function F(e,t,r,n,i,o){let s=ey(r);if(!S(t,r,s))throw Error(`Can not finalize input #${e}`);return j(r,s,t.partialSig,n,i,o)}function j(e,t,r,n,i,o){let s,a;let u=Y(e,t,r),l=o?h.p2wsh({redeem:u}):null,c=i?h.p2sh({redeem:l||u}):null;return n?(a=l?(0,m.witnessStackToScriptWitness)(l.witness):(0,m.witnessStackToScriptWitness)(u.witness),c&&(s=c.input)):s=c?c.input:u.input,{finalScriptSig:s,finalScriptWitness:a}}function V(e,t,r,n,i){let o=(0,u.checkForInput)(e,t),{hash:s,sighashType:a,script:l}=K(t,o,n,!1,i);return R(r,l,"sign"),{hash:s,sighashType:a}}function K(e,t,r,n,i){let o,s;let a=r.__TX,u=t.sighashType||y.Transaction.SIGHASH_ALL;if(z(u,i),t.nonWitnessUtxo){let n=en(r,t,e),i=a.ins[e].hash,o=n.getHash();if(0!==b.compare(i,o))throw Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);let u=a.ins[e].index;s=n.outs[u]}else if(t.witnessUtxo)s=t.witnessUtxo;else throw Error("Need a Utxo input item for signing");let{meaningfulScript:l,type:c}=ep(s.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(c)>=0)o=a.hashForWitnessV0(e,l,s.value,u);else if((0,m.isP2WPKH)(l)){let t=h.p2pkh({hash:l.slice(2)}).output;o=a.hashForWitnessV0(e,t,s.value,u)}else{if(void 0===t.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw Error(`Input #${e} has witnessUtxo but non-segwit script: ${b.toHex(l)}`);n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecessor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),o=a.hashForSignature(e,l,u)}return{script:l,sighashType:u,hash:o}}function W(e,t,r,n){let i=[];if(t.tapInternalKey){let r=q(e,t,n);r&&i.push(r)}if(t.tapScriptSig){let e=t.tapScriptSig.map(e=>e.pubkey);i.push(...e)}return i.map(i=>$(e,t,r,i,n)).flat()}function q(e,t,r){let{script:n}=eo(e,t,r);return(0,m.isP2TR)(n)?n.subarray(2,34):null}function G(e){return 64===e.length?e:e.subarray(0,64)}function $(e,t,r,n,i,o,s){let a=i.__TX,u=t.sighashType||y.Transaction.SIGHASH_DEFAULT;z(u,s);let l=r.map((e,t)=>eo(t,e,i)),c=l.map(e=>e.script),f=l.map(e=>e.value),h=[];if(t.tapInternalKey&&!o){let r=q(e,t,i)||Uint8Array.from([]);if(0===b.compare((0,g.toXOnly)(n),r)){let t=a.hashForWitnessV1(e,c,f,u);h.push({pubkey:n,hash:t})}}let d=(t.tapLeafScript||[]).filter(e=>(0,m.pubkeyInScript)(n,e.script)).map(e=>Object.assign({hash:(0,p.tapleafHash)({output:e.script,version:e.leafVersion})},e)).filter(e=>!o||0===b.compare(o,e.hash)).map(t=>({pubkey:n,hash:a.hashForWitnessV1(e,c,f,u,t.hash),leafHash:t.hash}));return h.concat(d)}function z(e,t){if(t&&0>t.indexOf(e)){let t=ee(e);throw Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${t}`)}}function Y(e,t,r){let n;switch(t){case"multisig":let i=Q(e,r);n=h.p2ms({output:e,signatures:i});break;case"pubkey":n=h.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=h.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=h.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature})}return n}function X(e,t,r){let n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){let o=en(r,t,e),s=n.ins[e].index;i.script=o.outs[s].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||(0,m.isP2WPKH)(i.script))&&(i.isSegwit=!0),i}function J(e,t,r){let n=(0,u.checkForInput)(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw Error("Need bip32Derivation to sign with HD");let i=n.bip32Derivation.map(e=>0===b.compare(e.masterFingerprint,r.fingerprint)?e:void 0).filter(e=>!!e);if(0===i.length)throw Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(e=>{let t=r.derivePath(e.path);if(0!==b.compare(e.pubkey,t.publicKey))throw Error("pubkey did not match bip32Derivation");return t})}function Q(e,t){return h.p2ms({output:e}).pubkeys.map(e=>(t.filter(t=>0===b.compare(t.pubkey,e))[0]||{}).signature).filter(e=>!!e)}function Z(e){let t=0;function r(r){return t+=r,e.slice(t-r,t)}function n(){let r=a.decode(e,t);return t+=a.encodingLength(r.bigintValue),r.numberValue}function i(){return r(n())}return function(){let e=n(),t=[];for(let r=0;r<e;r++)t.push(i());return t}()}function ee(e){let t=e&y.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case y.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case y.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case y.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}function et(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;let n=y.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;let i=e,o=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){let e=i.__NON_WITNESS_UTXO_BUF_CACHE[o],t=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(void 0!==e)return e;{let e=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e,e}},set(e){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e}})}function er(e,t,r,n){let i=0n;e.forEach((e,o)=>{if(n&&e.finalScriptSig&&(t.ins[o].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[o].witness=Z(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){let n=en(r,e,o),s=t.ins[o].index,a=n.outs[s];i+=a.value}});let o=t.outs.reduce((e,t)=>e+t.value,0n),s=i-o;if(s<0)throw Error("Outputs are spending more than Inputs");let a=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(Number(s/BigInt(a)))}function en(e,t,r){let n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||et(e,t,r),n[r]}function ei(e,t,r){let{script:n}=eo(e,t,r);return n}function eo(e,t,r){if(void 0!==t.witnessUtxo)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(void 0!==t.nonWitnessUtxo){let n=en(r,t,e).outs[r.__TX.ins[e].index];return{script:n.script,value:n.value}}throw Error("Can't find pubkey in input without Utxo data")}function es(e,t,r,n){let{meaningfulScript:i}=ep(ei(r,t,n),r,"input",t.redeemScript,t.witnessScript);return(0,m.pubkeyInScript)(e,i)}function ea(e,t,r,n){let{meaningfulScript:i}=ep(n.__TX.outs[r].script,r,"output",t.redeemScript,t.witnessScript);return(0,m.pubkeyInScript)(e,i)}function eu(e){if(!e)return;let t=d.decompile(e);if(!t)return;let r=t[t.length-1];if(!(!(r instanceof Uint8Array)||ef(r)||eh(r))&&d.decompile(r))return r}function el(e){if(!e)return;let t=Z(e),r=t[t.length-1];if(!ef(r)&&d.decompile(r))return r}function ec(e){if(65===e.length){let t=1&e[64],r=e.slice(0,33);return r[0]=2|t,r}return e.slice()}function ef(e){return 33===e.length&&d.isCanonicalPubKey(e)}function eh(e){return d.isCanonicalScriptSignature(e)}function ep(e,t,r,n,i){let o;let s=(0,m.isP2SHScript)(e),a=s&&n&&(0,m.isP2WSHScript)(n),u=(0,m.isP2WSHScript)(e);if(s&&void 0===n)throw Error("scriptPubkey is P2SH but redeemScript missing");if((u||a)&&void 0===i)throw Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");return a?(o=i,L(t,e,n,r),H(t,n,i,r),ed(o)):u?(o=i,H(t,e,i,r),ed(o)):s?(o=n,L(t,e,n,r)):o=e,{meaningfulScript:o,type:a?"p2sh-p2wsh":s?"p2sh":u?"p2wsh":"raw"}}function ed(e){if((0,m.isP2WPKH)(e)||(0,m.isP2SHScript)(e))throw Error("P2WPKH or P2SH can not be contained within P2WSH")}function ey(e){return(0,m.isP2WPKH)(e)?"witnesspubkeyhash":(0,m.isP2PKH)(e)?"pubkeyhash":(0,m.isP2MS)(e)?"multisig":(0,m.isP2PK)(e)?"pubkey":"nonstandard"}function eg(e){return[...Array(e).keys()]}},98471:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.toXOnly=void 0,t.tapScriptFinalizer=d,t.serializeTaprootSignature=y,t.isTaprootInput=g,t.isTaprootOutput=m,t.checkTaprootInputFields=b,t.checkTaprootOutputFields=w,t.tweakInternalPubKey=E,t.tapTreeToList=S,t.tapTreeFromList=T,t.checkTaprootInputForSigs=I;let s=r(59390),a=r(70478),u=r(59972),l=r(30420),c=r(93049),f=o(r(27801)),h=r(59972),p=e=>32===e.length?e:e.slice(1,33);function d(e,t,r){let n=H(t,e,r);try{let e=D(t,n).concat(n.script).concat(n.controlBlock);return{finalScriptWitness:(0,u.witnessStackToScriptWitness)(e)}}catch(t){throw Error(`Can not finalize taproot input #${e}: ${t}`)}}function y(e,t){let r=t?Uint8Array.from([t]):Uint8Array.from([]);return f.concat([e,r])}function g(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,u.isP2TR)(e.witnessUtxo.script))}function m(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,u.isP2TR)(t))}function b(e,t,r){R(e,t,r),U(e,t,r)}function w(e,t,r){B(e,t,r),v(e,t)}function v(e,t){if(!t.tapTree&&!t.tapInternalKey)return;let r=t.tapInternalKey||e.tapInternalKey,n=t.tapTree||e.tapTree;if(r){let{script:t}=e,i=_(r,n);if(t&&0!==f.compare(i,t))throw Error("Error adding output. Script or address mismatch.")}}function _(e,t){let r=t&&T(t.leaves),{output:n}=(0,c.p2tr)({internalPubkey:e,scriptTree:r});return n}function E(e,t){let r=t.tapInternalKey,n=r&&(0,l.tweakKey)(r,t.tapMerkleRoot);if(!n)throw Error(`Cannot tweak tap internal key for input #${e}. Public key: ${r&&f.toHex(r)}`);return n.x}function S(e){if(!(0,s.isTaptree)(e))throw Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return k(e)}function T(e=[]){return 1===e.length&&0===e[0].depth?{output:e[0].script,version:e[0].leafVersion}:x(e)}function I(e,t){return O(e).some(e=>(0,h.signatureBlocksAction)(e,A,t))}function A(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||a.Transaction.SIGHASH_DEFAULT}}function O(e){let t=[];if(e.tapKeySig&&t.push(e.tapKeySig),e.tapScriptSig&&t.push(...e.tapScriptSig.map(e=>e.signature)),!t.length){let r=P(e.finalScriptWitness);r&&t.push(r)}return t}function P(e){if(!e)return;let t=e.slice(2);if(64===t.length||65===t.length)return t}function k(e,t=[],r=0){if(r>l.MAX_TAPTREE_DEPTH)throw Error("Max taptree depth exceeded.");return e?((0,s.isTapleaf)(e)?t.push({depth:r,leafVersion:e.version||l.LEAF_VERSION_TAPSCRIPT,script:e.output}):(e[0]&&k(e[0],t,r+1),e[1]&&k(e[1],t,r+1)),t):[]}function x(e){let t;for(let r of e)if(!(t=C(r,t)))throw Error("No room left to insert tapleaf in tree");return t}function C(e,t,r=0){if(r>l.MAX_TAPTREE_DEPTH)throw Error("Max taptree depth exceeded.");if(e.depth===r)return t?void 0:{output:e.script,version:e.leafVersion};if((0,s.isTapleaf)(t))return;let n=C(e,t&&t[0],r+1);if(n)return[n,t&&t[1]];let i=C(e,t&&t[1],r+1);if(i)return[t&&t[0],i]}function R(e,t,r){let n=g(e)&&F(t),i=F(e)&&g(t),o=e===t&&g(t)&&F(t);if(n||i||o)throw Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function B(e,t,r){let n=m(e)&&F(t),i=F(e)&&m(t),o=e===t&&m(t)&&F(t);if(n||i||o)throw Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function U(e,t,r){if(t.tapMerkleRoot){let n=(t.tapLeafScript||[]).every(e=>N(e,t.tapMerkleRoot)),i=(e.tapLeafScript||[]).every(e=>N(e,t.tapMerkleRoot));if(!n||!i)throw Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot&&!(t.tapLeafScript||[]).every(t=>N(t,e.tapMerkleRoot)))throw Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}function N(e,t){if(!t)return!0;let r=(0,l.tapleafHash)({output:e.script,version:e.leafVersion}),n=(0,l.rootHashFromPath)(e.controlBlock,r);return 0===f.compare(n,t)}function D(e,t){let r=(0,l.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter(e=>0===f.compare(e.leafHash,r)).map(e=>L(t.script,e)).sort((e,t)=>t.positionInScript-e.positionInScript).map(e=>e.signature)}function L(e,t){return Object.assign({positionInScript:(0,u.pubkeyPositionInScript)(t.pubkey,e)},t)}function H(e,t,r){if(!e.tapScriptSig||!e.tapScriptSig.length)throw Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);let n=(e.tapLeafScript||[]).sort((e,t)=>e.controlBlock.length-t.controlBlock.length).find(t=>M(t,e.tapScriptSig,r));if(!n)throw Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return n}function M(e,t,r){let n=(0,l.tapleafHash)({output:e.script,version:e.leafVersion});return(!r||0===f.compare(n,r))&&void 0!==t.find(e=>0===f.compare(e.leafHash,n))}function F(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}t.toXOnly=p},59972:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isP2TR=t.isP2SHScript=t.isP2WSHScript=t.isP2WPKH=t.isP2PKH=t.isP2PK=t.isP2MS=void 0,t.witnessStackToScriptWitness=p,t.pubkeyPositionInScript=d,t.pubkeyInScript=y,t.checkInputForSig=g,t.signatureBlocksAction=m;let s=o(r(6885)),a=o(r(61928)),u=r(70478),l=r(2487),c=o(r(93049)),f=o(r(27801));function h(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}function p(e){let t=new Uint8Array(0);function r(e){t=f.concat([t,e])}function n(e){let r=t.length,n=s.encodingLength(e);t=f.concat([t,new Uint8Array(n)]),s.encode(e,t,r)}function i(e){n(e.length),r(e)}return function(e){n(e.length),e.forEach(i)}(e),t}function d(e,t){let r=(0,l.hash160)(e),n=e.slice(1,33),i=a.decompile(t);if(null===i)throw Error("Unknown script error");return i.findIndex(t=>"number"!=typeof t&&(0===f.compare(e,t)||0===f.compare(r,t)||0===f.compare(n,t)))}function y(e,t){return -1!==d(e,t)}function g(e,t){return b(e).some(e=>m(e,a.signature.decode,t))}function m(e,t,r){let{hashType:n}=t(e),i=[];switch(n&u.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&n){case u.Transaction.SIGHASH_ALL:break;case u.Transaction.SIGHASH_SINGLE:case u.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}return -1===i.indexOf(r)}function b(e){let t=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=w(e)}else t=e.partialSig;return t.map(e=>e.signature)}function w(e){let t=e.finalScriptSig&&a.decompile(e.finalScriptSig)||[],r=e.finalScriptWitness&&a.decompile(e.finalScriptWitness)||[];return t.concat(r).filter(e=>e instanceof Uint8Array&&a.isCanonicalScriptSignature(e)).map(e=>({signature:e}))}t.isP2MS=h(c.p2ms),t.isP2PK=h(c.p2pk),t.isP2PKH=h(c.p2pkh),t.isP2WPKH=h(c.p2wpkh),t.isP2WSHScript=h(c.p2wsh),t.isP2SHScript=h(c.p2sh),t.isP2TR=h(c.p2tr)},60592:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.encodingLength=u,t.encode=l,t.decode=c;let s=r(25738),a=o(r(27801));function u(e){return e<s.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}function l(e,t,r){let n=u(t);return 1===n?a.writeUInt8(e,r,t):2===n?(a.writeUInt8(e,r,s.OPS.OP_PUSHDATA1),a.writeUInt8(e,r+1,t)):3===n?(a.writeUInt8(e,r,s.OPS.OP_PUSHDATA2),a.writeUInt16(e,r+1,t,"LE")):(a.writeUInt8(e,r,s.OPS.OP_PUSHDATA4),a.writeUInt32(e,r+1,t,"LE")),n}function c(e,t){let r,n;let i=a.readUInt8(e,t);if(i<s.OPS.OP_PUSHDATA1)r=i,n=1;else if(i===s.OPS.OP_PUSHDATA1){if(t+2>e.length)return null;r=a.readUInt8(e,t+1),n=2}else if(i===s.OPS.OP_PUSHDATA2){if(t+3>e.length)return null;r=a.readUInt16(e,t+1,"LE"),n=3}else{if(t+5>e.length)return null;if(i!==s.OPS.OP_PUSHDATA4)throw Error("Unexpected opcode");r=a.readUInt32(e,t+1,"LE"),n=5}return{opcode:i,number:r,size:n}}},61928:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.signature=t.number=t.OPS=void 0,t.isPushOnly=b,t.countNonPushOnlyOPs=w,t.compile=T,t.decompile=I,t.toASM=A,t.fromASM=O,t.toStack=P,t.isCanonicalPubKey=k,t.isDefinedHashType=x,t.isCanonicalScriptSignature=C;let s=o(r(86397)),a=r(25738);Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return a.OPS}});let u=o(r(60592)),l=o(r(4253)),c=o(r(64735)),f=o(r(59390)),h=o(r(27801)),p=o(r(89253)),d=a.OPS.OP_RESERVED,y=p.array(p.union([p.instance(Uint8Array),p.number()]));function g(e){return p.is(p.number(),e)&&(e===a.OPS.OP_0||e>=a.OPS.OP_1&&e<=a.OPS.OP_16||e===a.OPS.OP_1NEGATE)}function m(e){return p.is(f.BufferSchema,e)||g(e)}function b(e){return p.is(p.pipe(p.any(),p.everyItem(m)),e)}function w(e){return e.length-e.filter(m).length}function v(e){if(0===e.length)return a.OPS.OP_0;if(1===e.length){if(e[0]>=1&&e[0]<=16)return d+e[0];if(129===e[0])return a.OPS.OP_1NEGATE}}function _(e){return e instanceof Uint8Array}function E(e){return p.is(y,e)}function S(e){return e instanceof Uint8Array}function T(e){if(_(e))return e;p.parse(y,e);let t=new Uint8Array(e.reduce((e,t)=>S(t)?1===t.length&&void 0!==v(t)?e+1:e+u.encodingLength(t.length)+t.length:e+1,0)),r=0;if(e.forEach(e=>{if(S(e)){let n=v(e);if(void 0!==n){h.writeUInt8(t,r,n),r+=1;return}r+=u.encode(t,e.length,r),t.set(e,r),r+=e.length}else h.writeUInt8(t,r,e),r+=1}),r!==t.length)throw Error("Could not decode chunks");return t}function I(e){if(E(e))return e;p.parse(f.BufferSchema,e);let t=[],r=0;for(;r<e.length;){let n=e[r];if(n>a.OPS.OP_0&&n<=a.OPS.OP_PUSHDATA4){let n=u.decode(e,r);if(null===n||(r+=n.size)+n.number>e.length)return null;let i=e.slice(r,r+n.number);r+=n.number;let o=v(i);void 0!==o?t.push(o):t.push(i)}else t.push(n),r+=1}return t}function A(e){if(_(e)&&(e=I(e)),!e)throw Error("Could not convert invalid chunks to ASM");return e.map(e=>{if(S(e)){let t=v(e);if(void 0===t)return h.toHex(e);e=t}return a.REVERSE_OPS[e]}).join(" ")}function O(e){return p.parse(p.string(),e),T(e.split(" ").map(e=>void 0!==a.OPS[e]?a.OPS[e]:(p.parse(f.HexSchema,e),h.fromHex(e))))}function P(e){return e=I(e),p.parse(p.custom(b),e),e.map(e=>S(e)?e:e===a.OPS.OP_0?new Uint8Array(0):l.encode(e-d))}function k(e){return f.isPoint(e)}function x(e){let t=-129&e;return t>0&&t<4}function C(e){return!!(e instanceof Uint8Array&&x(e[e.length-1]))&&s.check(e.slice(0,-1))}t.number=l,t.signature=c},4253:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.decode=a,t.encode=l;let s=o(r(27801));function a(e,t,r){t=t||4,r=void 0===r||r;let n=e.length;if(0===n)return 0;if(n>t)throw TypeError("Script number overflow");if(r&&(127&e[n-1])==0&&(n<=1||(128&e[n-2])==0))throw Error("Non-minimally encoded script number");if(5===n){let t=s.readUInt32(e,0,"LE"),r=s.readUInt8(e,4);return 128&r?-((-129&r)*4294967296+t):4294967296*r+t}let i=0;for(let t=0;t<n;++t)i|=e[t]<<8*t;return 128&e[n-1]?-(i&~(128<<8*(n-1))):i}function u(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}function l(e){let t=Math.abs(e),r=u(t),n=new Uint8Array(r),i=e<0;for(let e=0;e<r;++e)s.writeUInt8(n,e,255&t),t>>=8;return 128&n[r-1]?s.writeUInt8(n,r-1,i?128:0):i&&(n[r-1]|=128),n}},64735:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.decode=d,t.encode=y;let s=o(r(86397)),a=r(61928),u=o(r(89253)),l=o(r(27801)),c=r(59390),f=new Uint8Array(1);function h(e){let t=0;for(;0===e[t];)++t;return t===e.length?f:128&(e=e.slice(t))[0]?l.concat([f,e]):e}function p(e){0===e[0]&&(e=e.slice(1));let t=new Uint8Array(32),r=Math.max(0,32-e.length);return t.set(e,r),t}function d(e){let t=l.readUInt8(e,e.length-1);if(!(0,a.isDefinedHashType)(t))throw Error("Invalid hashType "+t);let r=s.decode(e.subarray(0,-1)),n=p(r.r),i=p(r.s);return{signature:l.concat([n,i]),hashType:t}}function y(e,t){if(u.parse(u.object({signature:(0,c.NBufferSchemaFactory)(64),hashType:c.UInt8Schema}),{signature:e,hashType:t}),!(0,a.isDefinedHashType)(t))throw Error("Invalid hashType "+t);let r=new Uint8Array(1);l.writeUInt8(r,0,t);let n=h(e.slice(0,32)),i=h(e.slice(32,64));return l.concat([s.encode(n,i),r])}},70478:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;let s=r(98186),a=o(r(2487)),u=r(23061),l=o(r(61928)),c=r(61928),f=o(r(59390)),h=o(r(27801)),p=o(r(89253));function d(e){let t=e.length;return s.varuint.encodingLength(t)+t}function y(e){let t=e.length;return s.varuint.encodingLength(t)+e.reduce((e,t)=>e+d(t),0)}let g=new Uint8Array(0),m=[],b=h.fromHex("0000000000000000000000000000000000000000000000000000000000000000"),w=h.fromHex("0000000000000000000000000000000000000000000000000000000000000001"),v={script:g,valueBuffer:h.fromHex("ffffffffffffffff")};function _(e){return void 0!==e.value}class E{static DEFAULT_SEQUENCE=4294967295;static SIGHASH_DEFAULT=0;static SIGHASH_ALL=1;static SIGHASH_NONE=2;static SIGHASH_SINGLE=3;static SIGHASH_ANYONECANPAY=128;static SIGHASH_OUTPUT_MASK=3;static SIGHASH_INPUT_MASK=128;static ADVANCED_TRANSACTION_MARKER=0;static ADVANCED_TRANSACTION_FLAG=1;static fromBuffer(e,t){let r=new s.BufferReader(e),n=new E;n.version=r.readInt32();let i=r.readUInt8(),o=r.readUInt8(),a=!1;i===E.ADVANCED_TRANSACTION_MARKER&&o===E.ADVANCED_TRANSACTION_FLAG?a=!0:r.offset-=2;let u=r.readVarInt();for(let e=0;e<u;++e)n.ins.push({hash:r.readSlice(32),index:r.readUInt32(),script:r.readVarSlice(),sequence:r.readUInt32(),witness:m});let l=r.readVarInt();for(let e=0;e<l;++e)n.outs.push({value:r.readInt64(),script:r.readVarSlice()});if(a){for(let e=0;e<u;++e)n.ins[e].witness=r.readVector();if(!n.hasWitnesses())throw Error("Transaction has superfluous witness data")}if(n.locktime=r.readUInt32(),t)return n;if(r.offset!==e.length)throw Error("Transaction has unexpected data");return n}static fromHex(e){return E.fromBuffer(h.fromHex(e),!1)}static isCoinbaseHash(e){p.parse(f.Hash256bitSchema,e);for(let t=0;t<32;++t)if(0!==e[t])return!1;return!0}version=1;locktime=0;ins=[];outs=[];isCoinbase(){return 1===this.ins.length&&E.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,r,n){return p.parse(p.tuple([f.Hash256bitSchema,f.UInt32Schema,p.nullable(p.optional(f.UInt32Schema)),p.nullable(p.optional(f.BufferSchema))]),[e,t,r,n]),null==r&&(r=E.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||g,sequence:r,witness:m})-1}addOutput(e,t){return p.parse(p.tuple([f.BufferSchema,f.SatoshiSchema]),[e,t]),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some(e=>0!==e.witness.length)}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){let t=e&&this.hasWitnesses();return(t?10:8)+s.varuint.encodingLength(this.ins.length)+s.varuint.encodingLength(this.outs.length)+this.ins.reduce((e,t)=>e+40+d(t.script),0)+this.outs.reduce((e,t)=>e+8+d(t.script),0)+(t?this.ins.reduce((e,t)=>e+y(t.witness),0):0)}clone(){let e=new E;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map(e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness})),e.outs=this.outs.map(e=>({script:e.script,value:e.value})),e}hashForSignature(e,t,r){if(p.parse(p.tuple([f.UInt32Schema,f.BufferSchema,p.number()]),[e,t,r]),e>=this.ins.length)return w;let n=l.compile(l.decompile(t).filter(e=>e!==c.OPS.OP_CODESEPARATOR)),i=this.clone();if((31&r)===E.SIGHASH_NONE)i.outs=[],i.ins.forEach((t,r)=>{r!==e&&(t.sequence=0)});else if((31&r)===E.SIGHASH_SINGLE){if(e>=this.outs.length)return w;i.outs.length=e+1;for(let t=0;t<e;t++)i.outs[t]=v;i.ins.forEach((t,r)=>{r!==e&&(t.sequence=0)})}r&E.SIGHASH_ANYONECANPAY?(i.ins=[i.ins[e]],i.ins[0].script=n):(i.ins.forEach(e=>{e.script=g}),i.ins[e].script=n);let o=new Uint8Array(i.byteLength(!1)+4);return h.writeInt32(o,o.length-4,r,"LE"),i.__toBuffer(o,0,!1),a.hash256(o)}hashForWitnessV1(e,t,r,n,i,o){if(p.parse(p.tuple([f.UInt32Schema,p.array(f.BufferSchema),p.array(f.SatoshiSchema),f.UInt32Schema]),[e,t,r,n]),r.length!==this.ins.length||t.length!==this.ins.length)throw Error("Must supply prevout script and value for all inputs");let l=n===E.SIGHASH_DEFAULT?E.SIGHASH_ALL:n&E.SIGHASH_OUTPUT_MASK,c=(n&E.SIGHASH_INPUT_MASK)===E.SIGHASH_ANYONECANPAY,y=l===E.SIGHASH_NONE,m=l===E.SIGHASH_SINGLE,b=g,w=g,v=g,_=g,S=g;if(!c){let e=s.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(t=>{e.writeSlice(t.hash),e.writeUInt32(t.index)}),b=(0,u.sha256)(e.end()),e=s.BufferWriter.withCapacity(8*this.ins.length),r.forEach(t=>e.writeInt64(t)),w=(0,u.sha256)(e.end()),e=s.BufferWriter.withCapacity(t.map(d).reduce((e,t)=>e+t)),t.forEach(t=>e.writeVarSlice(t)),v=(0,u.sha256)(e.end()),e=s.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(t=>e.writeUInt32(t.sequence)),_=(0,u.sha256)(e.end())}if(y||m){if(m&&e<this.outs.length){let t=this.outs[e],r=s.BufferWriter.withCapacity(8+d(t.script));r.writeInt64(t.value),r.writeVarSlice(t.script),S=(0,u.sha256)(r.end())}}else{if(!this.outs.length)throw Error("Add outputs to the transaction before signing.");let e=this.outs.map(e=>8+d(e.script)).reduce((e,t)=>e+t),t=s.BufferWriter.withCapacity(e);this.outs.forEach(e=>{t.writeInt64(e.value),t.writeVarSlice(e.script)}),S=(0,u.sha256)(t.end())}let T=(i?2:0)+(o?1:0),I=174-(c?49:0)-(y?32:0)+(o?32:0)+(i?37:0),A=s.BufferWriter.withCapacity(I);if(A.writeUInt8(n),A.writeInt32(this.version),A.writeUInt32(this.locktime),A.writeSlice(b),A.writeSlice(w),A.writeSlice(v),A.writeSlice(_),y||m||A.writeSlice(S),A.writeUInt8(T),c){let n=this.ins[e];A.writeSlice(n.hash),A.writeUInt32(n.index),A.writeInt64(r[e]),A.writeVarSlice(t[e]),A.writeUInt32(n.sequence)}else A.writeUInt32(e);if(o){let e=s.BufferWriter.withCapacity(d(o));e.writeVarSlice(o),A.writeSlice((0,u.sha256)(e.end()))}return m&&A.writeSlice(S),i&&(A.writeSlice(i),A.writeUInt8(0),A.writeUInt32(4294967295)),a.taggedHash("TapSighash",h.concat([Uint8Array.from([0]),A.end()]))}hashForWitnessV0(e,t,r,n){let i;p.parse(p.tuple([f.UInt32Schema,f.BufferSchema,f.SatoshiSchema,f.UInt32Schema]),[e,t,r,n]);let o=Uint8Array.from([]),u=b,l=b,c=b;if(n&E.SIGHASH_ANYONECANPAY||(o=new Uint8Array(36*this.ins.length),i=new s.BufferWriter(o,0),this.ins.forEach(e=>{i.writeSlice(e.hash),i.writeUInt32(e.index)}),l=a.hash256(o)),n&E.SIGHASH_ANYONECANPAY||(31&n)===E.SIGHASH_SINGLE||(31&n)===E.SIGHASH_NONE||(o=new Uint8Array(4*this.ins.length),i=new s.BufferWriter(o,0),this.ins.forEach(e=>{i.writeUInt32(e.sequence)}),c=a.hash256(o)),(31&n)!==E.SIGHASH_SINGLE&&(31&n)!==E.SIGHASH_NONE)o=new Uint8Array(this.outs.reduce((e,t)=>e+8+d(t.script),0)),i=new s.BufferWriter(o,0),this.outs.forEach(e=>{i.writeInt64(e.value),i.writeVarSlice(e.script)}),u=a.hash256(o);else if((31&n)===E.SIGHASH_SINGLE&&e<this.outs.length){let t=this.outs[e];o=new Uint8Array(8+d(t.script)),(i=new s.BufferWriter(o,0)).writeInt64(t.value),i.writeVarSlice(t.script),u=a.hash256(o)}o=new Uint8Array(156+d(t)),i=new s.BufferWriter(o,0);let h=this.ins[e];return i.writeInt32(this.version),i.writeSlice(l),i.writeSlice(c),i.writeSlice(h.hash),i.writeUInt32(h.index),i.writeVarSlice(t),i.writeInt64(r),i.writeUInt32(h.sequence),i.writeSlice(u),i.writeUInt32(this.locktime),i.writeUInt32(n),a.hash256(o)}getHash(e){return e&&this.isCoinbase()?new Uint8Array(32):a.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return h.toHex((0,s.reverseBuffer)(this.getHash(!1)))}toBuffer(e,t){return this.__toBuffer(e,t,!0)}toHex(){return h.toHex(this.toBuffer(void 0,void 0))}setInputScript(e,t){p.parse(p.tuple([p.number(),f.BufferSchema]),[e,t]),this.ins[e].script=t}setWitness(e,t){p.parse(p.tuple([p.number(),p.array(f.BufferSchema)]),[e,t]),this.ins[e].witness=t}__toBuffer(e,t,r=!1){e||(e=new Uint8Array(this.byteLength(r)));let n=new s.BufferWriter(e,t||0);n.writeInt32(this.version);let i=r&&this.hasWitnesses();return(i&&(n.writeUInt8(E.ADVANCED_TRANSACTION_MARKER),n.writeUInt8(E.ADVANCED_TRANSACTION_FLAG)),n.writeVarInt(this.ins.length),this.ins.forEach(e=>{n.writeSlice(e.hash),n.writeUInt32(e.index),n.writeVarSlice(e.script),n.writeUInt32(e.sequence)}),n.writeVarInt(this.outs.length),this.outs.forEach(e=>{_(e)?n.writeInt64(e.value):n.writeSlice(e.valueBuffer),n.writeVarSlice(e.script)}),i&&this.ins.forEach(e=>{n.writeVector(e.witness)}),n.writeUInt32(this.locktime),void 0!==t)?e.slice(t,n.offset):e}}t.Transaction=E},59390:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NullablePartial=t.SatoshiSchema=t.UInt32Schema=t.UInt8Schema=t.HexSchema=t.BufferSchema=t.Hash256bitSchema=t.Hash160bitSchema=t.Buffer256bitSchema=t.TAPLEAF_VERSION_MASK=t.NBufferSchemaFactory=void 0,t.stacksEqual=f,t.isPoint=h,t.isTapleaf=p,t.isTaptree=d;let s=o(r(27801)),a=o(r(89253)),u=new Uint8Array(32),l=s.fromHex("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),c=e=>a.pipe(a.instance(Uint8Array),a.length(e));function f(e,t){return e.length===t.length&&e.every((e,r)=>0===s.compare(e,t[r]))}function h(e){if(!(e instanceof Uint8Array)||e.length<33)return!1;let t=e[0],r=e.slice(1,33);if(0===s.compare(u,r)||s.compare(r,l)>=0)return!1;if((2===t||3===t)&&33===e.length)return!0;let n=e.slice(33);return!(0===s.compare(u,n)||s.compare(n,l)>=0)&&4===t&&65===e.length}function p(e){return!!(e&&"output"in e&&e.output instanceof Uint8Array)&&(void 0===e.version||(e.version&t.TAPLEAF_VERSION_MASK)===e.version)}function d(e){return Array.isArray(e)?2===e.length&&e.every(e=>d(e)):p(e)}t.NBufferSchemaFactory=c,t.TAPLEAF_VERSION_MASK=254,t.Buffer256bitSchema=(0,t.NBufferSchemaFactory)(32),t.Hash160bitSchema=(0,t.NBufferSchemaFactory)(20),t.Hash256bitSchema=(0,t.NBufferSchemaFactory)(32),t.BufferSchema=a.instance(Uint8Array),t.HexSchema=a.pipe(a.string(),a.regex(/^([0-9a-f]{2})+$/i)),t.UInt8Schema=a.pipe(a.number(),a.integer(),a.minValue(0),a.maxValue(255)),t.UInt32Schema=a.pipe(a.number(),a.integer(),a.minValue(0),a.maxValue(4294967295)),t.SatoshiSchema=a.pipe(a.bigint(),a.minValue(0n),a.maxValue(0x7fffffffffffffffn));let y=e=>a.object(Object.entries(e).reduce((e,t)=>({...e,[t[0]]:a.nullish(t[1])}),{}));t.NullablePartial=y},70226:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(48961)),o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t.default=(0,i.default)(o)},7651:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(r(70226));function o(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var r=Uint8Array.from(t),n=e(r),o=new Uint8Array(r.length+4);return o.set(r,0),o.set(n.subarray(0,4),r.length),i.default.encode(o)},decode:function(e){var r=t(i.default.decode(e));if(null==r)throw Error("Invalid checksum");return r},decodeUnsafe:function(e){var r=i.default.decodeUnsafe(e);if(null!=r)return t(r)}}}},69838:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(23061),o=n(r(7651));function s(e){return(0,i.sha256)((0,i.sha256)(e))}t.default=(0,o.default)(s)},89253:function(e){"use strict";var t,r,n,i,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,u=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of a(t))u.call(e,i)||i===r||o(e,i,{get:()=>t[i],enumerable:!(n=s(t,i))||n.enumerable});return e},c=e=>l(o({},"__esModule",{value:!0}),e),f={};function h(){return{kind:"transformation",type:"await",reference:h,async:!0,_run:async e=>(e.value=await e.value,e)}}((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(f,{BASE64_REGEX:()=>p,BIC_REGEX:()=>d,CUID2_REGEX:()=>y,DECIMAL_REGEX:()=>g,EMAIL_REGEX:()=>m,EMOJI_REGEX:()=>b,HEXADECIMAL_REGEX:()=>w,HEX_COLOR_REGEX:()=>v,IMEI_REGEX:()=>_,IPV4_REGEX:()=>E,IPV6_REGEX:()=>S,IP_REGEX:()=>T,ISO_DATE_REGEX:()=>I,ISO_DATE_TIME_REGEX:()=>A,ISO_TIMESTAMP_REGEX:()=>k,ISO_TIME_REGEX:()=>O,ISO_TIME_SECOND_REGEX:()=>P,ISO_WEEK_REGEX:()=>x,MAC48_REGEX:()=>C,MAC64_REGEX:()=>R,MAC_REGEX:()=>B,OCTAL_REGEX:()=>U,ULID_REGEX:()=>N,UUID_REGEX:()=>D,ValiError:()=>es,_addIssue:()=>X,_isLuhnAlgo:()=>Q,_isValidObjectKey:()=>Z,_joinExpects:()=>ee,_stringify:()=>Y,any:()=>tq,array:()=>tG,arrayAsync:()=>t$,awaitAsync:()=>h,base64:()=>ea,bic:()=>eu,bigint:()=>tz,blob:()=>tY,boolean:()=>tX,brand:()=>el,bytes:()=>ec,check:()=>ef,checkAsync:()=>eh,checkItems:()=>ep,config:()=>tR,creditCard:()=>em,cuid2:()=>eb,custom:()=>tJ,customAsync:()=>tQ,date:()=>tZ,decimal:()=>ew,deleteGlobalConfig:()=>M,deleteGlobalMessage:()=>V,deleteSchemaMessage:()=>q,deleteSpecificMessage:()=>z,description:()=>ev,email:()=>e_,emoji:()=>eE,empty:()=>eS,endsWith:()=>eT,entriesFromList:()=>et,enum:()=>t0,enum_:()=>t0,everyItem:()=>eI,excludes:()=>eA,fallback:()=>tU,fallbackAsync:()=>tN,file:()=>t1,filterItems:()=>eO,findItem:()=>eP,finite:()=>ek,flatten:()=>tD,forward:()=>tL,forwardAsync:()=>tH,function:()=>t2,function_:()=>t2,getDefault:()=>tM,getDefaults:()=>tF,getDefaultsAsync:()=>tj,getDotPath:()=>er,getFallback:()=>tB,getFallbacks:()=>tV,getFallbacksAsync:()=>tK,getGlobalConfig:()=>H,getGlobalMessage:()=>j,getSchemaMessage:()=>W,getSpecificMessage:()=>$,hash:()=>eC,hexColor:()=>eB,hexadecimal:()=>eR,imei:()=>eU,includes:()=>eN,instance:()=>t3,integer:()=>eD,intersect:()=>t5,intersectAsync:()=>t8,ip:()=>eL,ipv4:()=>eH,ipv6:()=>eM,is:()=>tW,isOfKind:()=>en,isOfType:()=>ei,isValiError:()=>eo,isoDate:()=>eF,isoDateTime:()=>ej,isoTime:()=>eV,isoTimeSecond:()=>eK,isoTimestamp:()=>eW,isoWeek:()=>eq,keyof:()=>rJ,lazy:()=>t6,lazyAsync:()=>t7,length:()=>eG,literal:()=>t9,looseObject:()=>re,looseObjectAsync:()=>rt,looseTuple:()=>rr,looseTupleAsync:()=>rn,mac:()=>e$,mac48:()=>ez,mac64:()=>eY,map:()=>ri,mapAsync:()=>ro,mapItems:()=>eX,maxBytes:()=>eJ,maxLength:()=>eQ,maxSize:()=>eZ,maxValue:()=>e0,mimeType:()=>e1,minBytes:()=>e2,minLength:()=>e3,minSize:()=>e4,minValue:()=>e5,multipleOf:()=>e8,nan:()=>rs,never:()=>ra,nonEmpty:()=>e6,nonNullable:()=>ru,nonNullableAsync:()=>rl,nonNullish:()=>rc,nonNullishAsync:()=>rf,nonOptional:()=>rh,nonOptionalAsync:()=>rp,normalize:()=>e7,notBytes:()=>e9,notLength:()=>te,notSize:()=>tt,notValue:()=>tr,null:()=>rd,null_:()=>rd,nullable:()=>ry,nullableAsync:()=>rg,nullish:()=>rm,nullishAsync:()=>rb,number:()=>rw,object:()=>rv,objectAsync:()=>r_,objectWithRest:()=>rE,objectWithRestAsync:()=>rS,octal:()=>tn,omit:()=>rQ,optional:()=>rT,optionalAsync:()=>rI,parse:()=>rZ,parseAsync:()=>r0,parser:()=>r1,parserAsync:()=>r2,partial:()=>r3,partialAsync:()=>r4,partialCheck:()=>to,partialCheckAsync:()=>ts,pick:()=>r5,picklist:()=>rA,pipe:()=>r8,pipeAsync:()=>r6,promise:()=>rO,rawCheck:()=>ta,rawCheckAsync:()=>tu,rawTransform:()=>tl,rawTransformAsync:()=>tc,readonly:()=>tf,record:()=>rP,recordAsync:()=>rk,reduceItems:()=>th,regex:()=>tp,required:()=>r7,requiredAsync:()=>r9,safeInteger:()=>td,safeParse:()=>ne,safeParseAsync:()=>nt,safeParser:()=>nr,safeParserAsync:()=>nn,set:()=>rx,setAsync:()=>rC,setGlobalConfig:()=>L,setGlobalMessage:()=>F,setSchemaMessage:()=>K,setSpecificMessage:()=>G,size:()=>ty,someItem:()=>tg,sortItems:()=>tm,startsWith:()=>tb,strictObject:()=>rR,strictObjectAsync:()=>rB,strictTuple:()=>rU,strictTupleAsync:()=>rN,string:()=>rD,symbol:()=>rL,toLowerCase:()=>tw,toMaxValue:()=>tv,toMinValue:()=>t_,toUpperCase:()=>tE,transform:()=>tS,transformAsync:()=>tT,trim:()=>tI,trimEnd:()=>tA,trimStart:()=>tO,tuple:()=>rH,tupleAsync:()=>rM,tupleWithRest:()=>rF,tupleWithRestAsync:()=>rj,ulid:()=>tP,undefined:()=>rV,undefined_:()=>rV,union:()=>rW,unionAsync:()=>rq,unknown:()=>rG,unwrap:()=>ni,url:()=>tk,uuid:()=>tx,value:()=>tC,variant:()=>rz,variantAsync:()=>rY,void:()=>rX,void_:()=>rX}),e.exports=c(f);var p=/^(?:[\da-z+/]{4})*(?:[\da-z+/]{2}==|[\da-z+/]{3}=)?$/iu,d=/^[A-Z]{6}(?!00)[\dA-Z]{2}(?:[\dA-Z]{3})?$/u,y=/^[a-z][\da-z]*$/u,g=/^\d+$/u,m=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu,b=/^(?:[\u{1F1E6}-\u{1F1FF}]{2}|\u{1F3F4}[\u{E0061}-\u{E007A}]{2}[\u{E0030}-\u{E0039}\u{E0061}-\u{E007A}]{1,3}\u{E007F}|(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation})(?:\u200D(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation}))*)+$/u,w=/^(?:0[hx])?[\da-f]+$/iu,v=/^#(?:[\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/iu,_=/^\d{15}$|^\d{2}-\d{6}-\d{6}-\d$/u,E=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$/u,S=/^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,T=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$|^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,I=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])$/u,A=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])T(?:0\d|1\d|2[0-3]):[0-5]\d$/u,O=/^(?:0\d|1\d|2[0-3]):[0-5]\d$/u,P=/^(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}$/u,k=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])T(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}(?:\.\d{1,9})?(?:Z|[+-](?:0\d|1\d|2[0-3])(?::?[0-5]\d)?)$/u,x=/^\d{4}-W(?:0[1-9]|[1-4]\d|5[0-3])$/u,C=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$/iu,R=/^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,B=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$|^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,U=/^(?:0o)?[0-7]+$/iu,N=/^[\da-hjkmnp-tv-z]{26}$/iu,D=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function L(e){t={...t,...e}}function H(e){return{lang:e?.lang??t?.lang,message:e?.message,abortEarly:e?.abortEarly??t?.abortEarly,abortPipeEarly:e?.abortPipeEarly??t?.abortPipeEarly}}function M(){t=void 0}function F(e,t){r||(r=new Map),r.set(t,e)}function j(e){return r?.get(e)}function V(e){r?.delete(e)}function K(e,t){n||(n=new Map),n.set(t,e)}function W(e){return n?.get(e)}function q(e){n?.delete(e)}function G(e,t,r){i||(i=new Map),i.get(e)||i.set(e,new Map),i.get(e).set(r,t)}function $(e,t){return i?.get(e)?.get(t)}function z(e,t){i?.get(e)?.delete(t)}function Y(e){let t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function X(e,t,r,n,i){let o=i&&"input"in i?i.input:r.value,s=i?.expected??e.expects??null,a=i?.received??Y(o),u={kind:e.kind,type:e.type,input:o,expected:s,received:a,message:`Invalid ${t}: ${s?`Expected ${s} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},l="schema"===e.kind,c=i?.message??e.message??$(e.reference,u.lang)??(l?W(u.lang):null)??n.message??j(u.lang);c&&(u.message="function"==typeof c?c(u):c),l&&(r.typed=!1),r.issues?r.issues.push(u):r.issues=[u]}var J=/\D/gu;function Q(e){let t=e.replace(J,""),r=t.length,n=1,i=0;for(;r;){let e=+t[--r];n^=1,i+=n?[0,2,4,6,8,1,3,5,7,9][e]:e}return i%10==0}function Z(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function ee(e,t){let r=[...new Set(e)];return r.length>1?`(${r.join(` ${t} `)})`:r[0]??"never"}function et(e,t){let r={};for(let n of e)r[n]=t;return r}function er(e){if(e.path){let t="";for(let r of e.path){if("string"!=typeof r.key&&"number"!=typeof r.key)return null;t?t+=`.${r.key}`:t+=r.key}return t}return null}function en(e,t){return t.kind===e}function ei(e,t){return t.type===e}function eo(e){return e instanceof es}var es=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function ea(e){return{kind:"validation",type:"base64",reference:ea,async:!1,expects:null,requirement:p,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"Base64",e,t),e}}}function eu(e){return{kind:"validation",type:"bic",reference:eu,async:!1,expects:null,requirement:d,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"BIC",e,t),e}}}function el(e){return{kind:"transformation",type:"brand",reference:el,async:!1,name:e,_run:e=>e}}function ec(e,t){return{kind:"validation",type:"bytes",reference:ec,async:!1,expects:`${e}`,requirement:e,message:t,_run(e,t){if(e.typed){let r=new TextEncoder().encode(e.value).length;r!==this.requirement&&X(this,"bytes",e,t,{received:`${r}`})}return e}}}function ef(e,t){return{kind:"validation",type:"check",reference:ef,async:!1,expects:null,requirement:e,message:t,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"input",e,t),e}}}function eh(e,t){return{kind:"validation",type:"check",reference:eh,async:!0,expects:null,requirement:e,message:t,async _run(e,t){return e.typed&&!await this.requirement(e.value)&&X(this,"input",e,t),e}}}function ep(e,t){return{kind:"validation",type:"check_items",reference:ep,async:!1,expects:null,requirement:e,message:t,_run(e,t){if(e.typed)for(let r=0;r<e.value.length;r++){let n=e.value[r];this.requirement(n,r,e.value)||X(this,"item",e,t,{input:n,path:[{type:"array",origin:"value",input:e.value,key:r,value:n}]})}return e}}}var ed=/^(?:\d{14,19}|\d{4}(?: \d{3,6}){2,4}|\d{4}(?:-\d{3,6}){2,4})$/u,ey=/[- ]/gu,eg=[/^3[47]\d{13}$/u,/^3(?:0[0-5]|[68]\d)\d{11,13}$/u,/^6(?:011|5\d{2})\d{12,15}$/u,/^(?:2131|1800|35\d{3})\d{11}$/u,/^5[1-5]\d{2}|(?:222\d|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}$/u,/^(?:6[27]\d{14,17}|81\d{14,17})$/u,/^4\d{12}(?:\d{3,6})?$/u];function em(e){return{kind:"validation",type:"credit_card",reference:em,async:!1,expects:null,requirement(e){let t;return ed.test(e)&&(t=e.replace(ey,""))&&eg.some(e=>e.test(t))&&Q(t)},message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"credit card",e,t),e}}}function eb(e){return{kind:"validation",type:"cuid2",reference:eb,async:!1,expects:null,requirement:y,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"Cuid2",e,t),e}}}function ew(e){return{kind:"validation",type:"decimal",reference:ew,async:!1,expects:null,requirement:g,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"decimal",e,t),e}}}function ev(e){return{kind:"metadata",type:"description",reference:ev,description:e}}function e_(e){return{kind:"validation",type:"email",reference:e_,expects:null,async:!1,requirement:m,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"email",e,t),e}}}function eE(e){return{kind:"validation",type:"emoji",reference:eE,async:!1,expects:null,requirement:b,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"emoji",e,t),e}}}function eS(e){return{kind:"validation",type:"empty",reference:eS,async:!1,expects:"0",message:e,_run(e,t){return e.typed&&e.value.length>0&&X(this,"length",e,t,{received:`${e.value.length}`}),e}}}function eT(e,t){return{kind:"validation",type:"ends_with",reference:eT,async:!1,expects:`"${e}"`,requirement:e,message:t,_run(e,t){return e.typed&&!e.value.endsWith(this.requirement)&&X(this,"end",e,t,{received:`"${e.value.slice(-this.requirement.length)}"`}),e}}}function eI(e,t){return{kind:"validation",type:"every_item",reference:eI,async:!1,expects:null,requirement:e,message:t,_run(e,t){return e.typed&&!e.value.every(this.requirement)&&X(this,"item",e,t),e}}}function eA(e,t){let r=Y(e);return{kind:"validation",type:"excludes",reference:eA,async:!1,expects:`!${r}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.includes(this.requirement)&&X(this,"content",e,t,{received:r}),e}}}function eO(e){return{kind:"transformation",type:"filter_items",reference:eO,async:!1,operation:e,_run(e){return e.value=e.value.filter(this.operation),e}}}function eP(e){return{kind:"transformation",type:"find_item",reference:eP,async:!1,operation:e,_run(e){return e.value=e.value.find(this.operation),e}}}function ek(e){return{kind:"validation",type:"finite",reference:ek,async:!1,expects:null,requirement:Number.isFinite,message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"finite",e,t),e}}}var ex={md4:32,md5:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8,adler32:8};function eC(e,t){return{kind:"validation",type:"hash",reference:eC,expects:null,async:!1,requirement:RegExp(e.map(e=>`^[a-f0-9]{${ex[e]}}$`).join("|"),"iu"),message:t,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"hash",e,t),e}}}function eR(e){return{kind:"validation",type:"hexadecimal",reference:eR,async:!1,expects:null,requirement:w,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"hexadecimal",e,t),e}}}function eB(e){return{kind:"validation",type:"hex_color",reference:eB,async:!1,expects:null,requirement:v,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"hex color",e,t),e}}}function eU(e){return{kind:"validation",type:"imei",reference:eU,async:!1,expects:null,requirement:e=>_.test(e)&&Q(e),message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"IMEI",e,t),e}}}function eN(e,t){let r=Y(e);return{kind:"validation",type:"includes",reference:eN,async:!1,expects:r,requirement:e,message:t,_run(e,t){return e.typed&&!e.value.includes(this.requirement)&&X(this,"content",e,t,{received:`!${r}`}),e}}}function eD(e){return{kind:"validation",type:"integer",reference:eD,async:!1,expects:null,requirement:Number.isInteger,message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"integer",e,t),e}}}function eL(e){return{kind:"validation",type:"ip",reference:eL,async:!1,expects:null,requirement:T,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"IP",e,t),e}}}function eH(e){return{kind:"validation",type:"ipv4",reference:eH,async:!1,expects:null,requirement:E,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"IPv4",e,t),e}}}function eM(e){return{kind:"validation",type:"ipv6",reference:eM,async:!1,expects:null,requirement:S,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"IPv6",e,t),e}}}function eF(e){return{kind:"validation",type:"iso_date",reference:eF,async:!1,expects:null,requirement:I,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"date",e,t),e}}}function ej(e){return{kind:"validation",type:"iso_date_time",reference:ej,async:!1,expects:null,requirement:A,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"date-time",e,t),e}}}function eV(e){return{kind:"validation",type:"iso_time",reference:eV,async:!1,expects:null,requirement:O,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"time",e,t),e}}}function eK(e){return{kind:"validation",type:"iso_time_second",reference:eK,async:!1,expects:null,requirement:P,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"time-second",e,t),e}}}function eW(e){return{kind:"validation",type:"iso_timestamp",reference:eW,async:!1,expects:null,requirement:k,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"timestamp",e,t),e}}}function eq(e){return{kind:"validation",type:"iso_week",reference:eq,async:!1,expects:null,requirement:x,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"week",e,t),e}}}function eG(e,t){return{kind:"validation",type:"length",reference:eG,async:!1,expects:`${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.length!==this.requirement&&X(this,"length",e,t,{received:`${e.value.length}`}),e}}}function e$(e){return{kind:"validation",type:"mac",reference:e$,async:!1,expects:null,requirement:B,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"MAC",e,t),e}}}function ez(e){return{kind:"validation",type:"mac48",reference:ez,async:!1,expects:null,requirement:C,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"48-bit MAC",e,t),e}}}function eY(e){return{kind:"validation",type:"mac64",reference:eY,async:!1,expects:null,requirement:R,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"64-bit MAC",e,t),e}}}function eX(e){return{kind:"transformation",type:"map_items",reference:eX,async:!1,operation:e,_run(e){return e.value=e.value.map(this.operation),e}}}function eJ(e,t){return{kind:"validation",type:"max_bytes",reference:eJ,async:!1,expects:`<=${e}`,requirement:e,message:t,_run(e,t){if(e.typed){let r=new TextEncoder().encode(e.value).length;r>this.requirement&&X(this,"bytes",e,t,{received:`${r}`})}return e}}}function eQ(e,t){return{kind:"validation",type:"max_length",reference:eQ,async:!1,expects:`<=${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.length>this.requirement&&X(this,"length",e,t,{received:`${e.value.length}`}),e}}}function eZ(e,t){return{kind:"validation",type:"max_size",reference:eZ,async:!1,expects:`<=${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.size>this.requirement&&X(this,"size",e,t,{received:`${e.value.size}`}),e}}}function e0(e,t){return{kind:"validation",type:"max_value",reference:e0,async:!1,expects:`<=${e instanceof Date?e.toJSON():Y(e)}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value>this.requirement&&X(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():Y(e.value)}),e}}}function e1(e,t){return{kind:"validation",type:"mime_type",reference:e1,async:!1,expects:ee(e.map(e=>`"${e}"`),"|"),requirement:e,message:t,_run(e,t){return e.typed&&!this.requirement.includes(e.value.type)&&X(this,"MIME type",e,t,{received:`"${e.value.type}"`}),e}}}function e2(e,t){return{kind:"validation",type:"min_bytes",reference:e2,async:!1,expects:`>=${e}`,requirement:e,message:t,_run(e,t){if(e.typed){let r=new TextEncoder().encode(e.value).length;r<this.requirement&&X(this,"bytes",e,t,{received:`${r}`})}return e}}}function e3(e,t){return{kind:"validation",type:"min_length",reference:e3,async:!1,expects:`>=${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.length<this.requirement&&X(this,"length",e,t,{received:`${e.value.length}`}),e}}}function e4(e,t){return{kind:"validation",type:"min_size",reference:e4,async:!1,expects:`>=${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.size<this.requirement&&X(this,"size",e,t,{received:`${e.value.size}`}),e}}}function e5(e,t){return{kind:"validation",type:"min_value",reference:e5,async:!1,expects:`>=${e instanceof Date?e.toJSON():Y(e)}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value<this.requirement&&X(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():Y(e.value)}),e}}}function e8(e,t){return{kind:"validation",type:"multiple_of",reference:e8,async:!1,expects:`%${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value%this.requirement!=0&&X(this,"multiple",e,t),e}}}function e6(e){return{kind:"validation",type:"non_empty",reference:e6,async:!1,expects:"!0",message:e,_run(e,t){return e.typed&&0===e.value.length&&X(this,"length",e,t,{received:"0"}),e}}}function e7(e){return{kind:"transformation",type:"normalize",reference:e7,async:!1,form:e,_run(e){return e.value=e.value.normalize(this.form),e}}}function e9(e,t){return{kind:"validation",type:"not_bytes",reference:e9,async:!1,expects:`!${e}`,requirement:e,message:t,_run(e,t){if(e.typed){let r=new TextEncoder().encode(e.value).length;r===this.requirement&&X(this,"bytes",e,t,{received:`${r}`})}return e}}}function te(e,t){return{kind:"validation",type:"not_length",reference:te,async:!1,expects:`!${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.length===this.requirement&&X(this,"length",e,t,{received:`${e.value.length}`}),e}}}function tt(e,t){return{kind:"validation",type:"not_size",reference:tt,async:!1,expects:`!${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.size===this.requirement&&X(this,"size",e,t,{received:`${e.value.size}`}),e}}}function tr(e,t){return{kind:"validation",type:"not_value",reference:tr,async:!1,expects:e instanceof Date?`!${e.toJSON()}`:`!${Y(e)}`,requirement:e,message:t,_run(e,t){return e.typed&&this.requirement<=e.value&&this.requirement>=e.value&&X(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():Y(e.value)}),e}}}function tn(e){return{kind:"validation",type:"octal",reference:tn,async:!1,expects:null,requirement:U,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"octal",e,t),e}}}function ti(e,t){if(e.issues)for(let r of t)for(let t of e.issues){let e=!1,n=Math.min(r.length,t.path?.length??0);for(let i=0;i<n;i++)if(r[i]!==t.path[i].key){e=!0;break}if(!e)return!1}return!0}function to(e,t,r){return{kind:"validation",type:"partial_check",reference:to,async:!1,expects:null,requirement:t,message:r,_run(t,r){return ti(t,e)&&!this.requirement(t.value)&&X(this,"input",t,r),t}}}function ts(e,t,r){return{kind:"validation",type:"partial_check",reference:ts,async:!0,expects:null,requirement:t,message:r,async _run(t,r){return ti(t,e)&&!await this.requirement(t.value)&&X(this,"input",t,r),t}}}function ta(e){return{kind:"validation",type:"raw_check",reference:ta,async:!1,expects:null,_run(t,r){return e({dataset:t,config:r,addIssue:e=>X(this,e?.label??"input",t,r,e)}),t}}}function tu(e){return{kind:"validation",type:"raw_check",reference:tu,async:!0,expects:null,async _run(t,r){return await e({dataset:t,config:r,addIssue:e=>X(this,e?.label??"input",t,r,e)}),t}}}function tl(e){return{kind:"transformation",type:"raw_transform",reference:tl,async:!1,_run(t,r){let n=e({dataset:t,config:r,addIssue:e=>X(this,e?.label??"input",t,r,e),NEVER:null});return t.issues?t.typed=!1:t.value=n,t}}}function tc(e){return{kind:"transformation",type:"raw_transform",reference:tc,async:!0,async _run(t,r){let n=await e({dataset:t,config:r,addIssue:e=>X(this,e?.label??"input",t,r,e),NEVER:null});return t.issues?t.typed=!1:t.value=n,t}}}function tf(){return{kind:"transformation",type:"readonly",reference:tf,async:!1,_run:e=>e}}function th(e,t){return{kind:"transformation",type:"reduce_items",reference:th,async:!1,operation:e,initial:t,_run(e){return e.value=e.value.reduce(this.operation,this.initial),e}}}function tp(e,t){return{kind:"validation",type:"regex",reference:tp,async:!1,expects:`${e}`,requirement:e,message:t,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"format",e,t),e}}}function td(e){return{kind:"validation",type:"safe_integer",reference:td,async:!1,expects:null,requirement:Number.isSafeInteger,message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"safe integer",e,t),e}}}function ty(e,t){return{kind:"validation",type:"size",reference:ty,async:!1,expects:`${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.size!==this.requirement&&X(this,"size",e,t,{received:`${e.value.size}`}),e}}}function tg(e,t){return{kind:"validation",type:"some_item",reference:tg,async:!1,expects:null,requirement:e,message:t,_run(e,t){return e.typed&&!e.value.some(this.requirement)&&X(this,"item",e,t),e}}}function tm(e){return{kind:"transformation",type:"sort_items",reference:tm,async:!1,operation:e,_run(e){return e.value=e.value.sort(this.operation),e}}}function tb(e,t){return{kind:"validation",type:"starts_with",reference:tb,async:!1,expects:`"${e}"`,requirement:e,message:t,_run(e,t){return e.typed&&!e.value.startsWith(this.requirement)&&X(this,"start",e,t,{received:`"${e.value.slice(0,this.requirement.length)}"`}),e}}}function tw(){return{kind:"transformation",type:"to_lower_case",reference:tw,async:!1,_run:e=>(e.value=e.value.toLowerCase(),e)}}function tv(e){return{kind:"transformation",type:"to_max_value",reference:tv,async:!1,requirement:e,_run(e){return e.value=e.value>this.requirement?this.requirement:e.value,e}}}function t_(e){return{kind:"transformation",type:"to_min_value",reference:t_,async:!1,requirement:e,_run(e){return e.value=e.value<this.requirement?this.requirement:e.value,e}}}function tE(){return{kind:"transformation",type:"to_upper_case",reference:tE,async:!1,_run:e=>(e.value=e.value.toUpperCase(),e)}}function tS(e){return{kind:"transformation",type:"transform",reference:tS,async:!1,operation:e,_run(e){return e.value=this.operation(e.value),e}}}function tT(e){return{kind:"transformation",type:"transform",reference:tT,async:!0,operation:e,async _run(e){return e.value=await this.operation(e.value),e}}}function tI(){return{kind:"transformation",type:"trim",reference:tI,async:!1,_run:e=>(e.value=e.value.trim(),e)}}function tA(){return{kind:"transformation",type:"trim_end",reference:tA,async:!1,_run:e=>(e.value=e.value.trimEnd(),e)}}function tO(){return{kind:"transformation",type:"trim_start",reference:tO,async:!1,_run:e=>(e.value=e.value.trimStart(),e)}}function tP(e){return{kind:"validation",type:"ulid",reference:tP,async:!1,expects:null,requirement:N,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"ULID",e,t),e}}}function tk(e){return{kind:"validation",type:"url",reference:tk,async:!1,expects:null,requirement(e){try{return new URL(e),!0}catch{return!1}},message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"URL",e,t),e}}}function tx(e){return{kind:"validation",type:"uuid",reference:tx,async:!1,expects:null,requirement:D,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"UUID",e,t),e}}}function tC(e,t){return{kind:"validation",type:"value",reference:tC,async:!1,expects:e instanceof Date?e.toJSON():Y(e),requirement:e,message:t,_run(e,t){return e.typed&&!(this.requirement<=e.value&&this.requirement>=e.value)&&X(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():Y(e.value)}),e}}}function tR(e,t){return{...e,_run:(r,n)=>e._run(r,{...n,...t})}}function tB(e,t,r){return"function"==typeof e.fallback?e.fallback(t,r):e.fallback}function tU(e,t){return{...e,fallback:t,_run(t,r){let n=e._run(t,r);return n.issues?{typed:!0,value:tB(this,n,r)}:n}}}function tN(e,t){return{...e,fallback:t,async:!0,async _run(t,r){let n=await e._run(t,r);return n.issues?{typed:!0,value:await tB(this,n,r)}:n}}}function tD(e){let t={};for(let r of e)if(r.path){let e=er(r);e?(t.nested||(t.nested={}),t.nested[e]?t.nested[e].push(r.message):t.nested[e]=[r.message]):t.other?t.other.push(r.message):t.other=[r.message]}else t.root?t.root.push(r.message):t.root=[r.message];return t}function tL(e,t){return{...e,_run(r,n){let i=r.issues&&[...r.issues];if(e._run(r,n),r.issues){for(let e of r.issues)if(!i?.includes(e)){let n=r.value;for(let r of t){let t=n[r],i={type:"unknown",origin:"value",input:n,key:r,value:t};if(e.path?e.path.push(i):e.path=[i],!t)break;n=t}}}return r}}}function tH(e,t){return{...e,async:!0,async _run(r,n){let i=r.issues&&[...r.issues];if(await e._run(r,n),r.issues){for(let e of r.issues)if(!i?.includes(e)){let n=r.value;for(let r of t){let t=n[r],i={type:"unknown",origin:"value",input:n,key:r,value:t};if(e.path?e.path.push(i):e.path=[i],!t)break;n=t}}}return r}}}function tM(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}function tF(e){if("entries"in e){let t={};for(let r in e.entries)t[r]=tF(e.entries[r]);return t}return"items"in e?e.items.map(tF):tM(e)}async function tj(e){return"entries"in e?Object.fromEntries(await Promise.all(Object.entries(e.entries).map(async([e,t])=>[e,await tj(t)]))):"items"in e?Promise.all(e.items.map(tj)):tM(e)}function tV(e){if("entries"in e){let t={};for(let r in e.entries)t[r]=tV(e.entries[r]);return t}return"items"in e?e.items.map(tV):tB(e)}async function tK(e){return"entries"in e?Object.fromEntries(await Promise.all(Object.entries(e.entries).map(async([e,t])=>[e,await tK(t)]))):"items"in e?Promise.all(e.items.map(tK)):tB(e)}function tW(e,t){return!e._run({typed:!1,value:t},{abortEarly:!0}).issues}function tq(){return{kind:"schema",type:"any",reference:tq,expects:"any",async:!1,_run:e=>(e.typed=!0,e)}}function tG(e,t){return{kind:"schema",type:"array",reference:tG,expects:"Array",async:!1,item:e,message:t,_run(e,t){let r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<r.length;n++){let i=r[n],o=this.item._run({typed:!1,value:i},t);if(o.issues){let s={type:"array",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else X(this,"type",e,t);return e}}}function t$(e,t){return{kind:"schema",type:"array",reference:t$,expects:"Array",async:!0,item:e,message:t,async _run(e,t){let r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];let n=await Promise.all(r.map(e=>this.item._run({typed:!1,value:e},t)));for(let i=0;i<n.length;i++){let o=n[i];if(o.issues){let n={type:"array",origin:"value",input:r,key:i,value:r[i]};for(let t of o.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else X(this,"type",e,t);return e}}}function tz(e){return{kind:"schema",type:"bigint",reference:tz,expects:"bigint",async:!1,message:e,_run(e,t){return"bigint"==typeof e.value?e.typed=!0:X(this,"type",e,t),e}}}function tY(e){return{kind:"schema",type:"blob",reference:tY,expects:"Blob",async:!1,message:e,_run(e,t){return e.value instanceof Blob?e.typed=!0:X(this,"type",e,t),e}}}function tX(e){return{kind:"schema",type:"boolean",reference:tX,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:X(this,"type",e,t),e}}}function tJ(e,t){return{kind:"schema",type:"custom",reference:tJ,expects:"unknown",async:!1,check:e,message:t,_run(e,t){return this.check(e.value)?e.typed=!0:X(this,"type",e,t),e}}}function tQ(e,t){return{kind:"schema",type:"custom",reference:tQ,expects:"unknown",async:!0,check:e,message:t,async _run(e,t){return await this.check(e.value)?e.typed=!0:X(this,"type",e,t),e}}}function tZ(e){return{kind:"schema",type:"date",reference:tZ,expects:"Date",async:!1,message:e,_run(e,t){return e.value instanceof Date?isNaN(e.value)?X(this,"type",e,t,{received:'"Invalid Date"'}):e.typed=!0:X(this,"type",e,t),e}}}function t0(e,t){let r=Object.entries(e).filter(([e])=>isNaN(+e)).map(([,e])=>e);return{kind:"schema",type:"enum",reference:t0,expects:ee(r.map(Y),"|"),async:!1,enum:e,options:r,message:t,_run(e,t){return this.options.includes(e.value)?e.typed=!0:X(this,"type",e,t),e}}}function t1(e){return{kind:"schema",type:"file",reference:t1,expects:"File",async:!1,message:e,_run(e,t){return e.value instanceof File?e.typed=!0:X(this,"type",e,t),e}}}function t2(e){return{kind:"schema",type:"function",reference:t2,expects:"Function",async:!1,message:e,_run(e,t){return"function"==typeof e.value?e.typed=!0:X(this,"type",e,t),e}}}function t3(e,t){return{kind:"schema",type:"instance",reference:t3,expects:e.name,async:!1,class:e,message:t,_run(e,t){return e.value instanceof this.class?e.typed=!0:X(this,"type",e,t),e}}}function t4(e,t){if(typeof e==typeof t){if(e===t||e instanceof Date&&t instanceof Date&&+e==+t)return{value:e};if(e&&t&&e.constructor===Object&&t.constructor===Object){for(let r in t)if(r in e){let n=t4(e[r],t[r]);if(n.issue)return n;e[r]=n.value}else e[r]=t[r];return{value:e}}if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length){for(let r=0;r<e.length;r++){let n=t4(e[r],t[r]);if(n.issue)return n;e[r]=n.value}return{value:e}}}return{issue:!0}}function t5(e,t){return{kind:"schema",type:"intersect",reference:t5,expects:ee(e.map(e=>e.expects),"&"),async:!1,options:e,message:t,_run(e,t){if(this.options.length){let r;let n=e.value;for(let i of(e.typed=!0,this.options)){let o=i._run({typed:!1,value:n},t);if(o.issues&&(e.issues?e.issues.push(...o.issues):e.issues=o.issues,t.abortEarly)){e.typed=!1;break}o.typed||(e.typed=!1),e.typed&&(r?r.push(o.value):r=[o.value])}if(e.typed){e.value=r[0];for(let n=1;n<r.length;n++){let i=t4(e.value,r[n]);if(i.issue){X(this,"type",e,t,{received:"unknown"});break}e.value=i.value}}}else X(this,"type",e,t);return e}}}function t8(e,t){return{kind:"schema",type:"intersect",reference:t8,expects:ee(e.map(e=>e.expects),"&"),async:!0,options:e,message:t,async _run(e,t){if(this.options.length){let r;let n=e.value;for(let i of(e.typed=!0,await Promise.all(this.options.map(e=>e._run({typed:!1,value:n},t))))){if(i.issues&&(e.issues?e.issues.push(...i.issues):e.issues=i.issues,t.abortEarly)){e.typed=!1;break}i.typed||(e.typed=!1),e.typed&&(r?r.push(i.value):r=[i.value])}if(e.typed){e.value=r[0];for(let n=1;n<r.length;n++){let i=t4(e.value,r[n]);if(i.issue){X(this,"type",e,t,{received:"unknown"});break}e.value=i.value}}}else X(this,"type",e,t);return e}}}function t6(e){return{kind:"schema",type:"lazy",reference:t6,expects:"unknown",async:!1,getter:e,_run(e,t){return this.getter(e.value)._run(e,t)}}}function t7(e){return{kind:"schema",type:"lazy",reference:t7,expects:"unknown",async:!0,getter:e,async _run(e,t){return(await this.getter(e.value))._run(e,t)}}}function t9(e,t){return{kind:"schema",type:"literal",reference:t9,expects:Y(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:X(this,"type",e,t),e}}}function re(e,t){return{kind:"schema",type:"loose_object",reference:re,expects:"Object",async:!1,entries:e,message:t,_run(e,t){let r=e.value;if(r&&"object"==typeof r){for(let n in e.typed=!0,e.value={},this.entries){let i=r[n],o=this.entries[n]._run({typed:!1,value:i},t);if(o.issues){let s={type:"object",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||n in r)&&(e.value[n]=o.value)}if(!e.issues||!t.abortEarly)for(let t in r)!Z(r,t)||t in this.entries||(e.value[t]=r[t])}else X(this,"type",e,t);return e}}}function rt(e,t){return{kind:"schema",type:"loose_object",reference:rt,expects:"Object",async:!0,entries:e,message:t,async _run(e,t){let r=e.value;if(r&&"object"==typeof r){for(let[n,i,o]of(e.typed=!0,e.value={},await Promise.all(Object.entries(this.entries).map(async([e,n])=>{let i=r[e];return[e,i,await n._run({typed:!1,value:i},t)]})))){if(o.issues){let s={type:"object",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||n in r)&&(e.value[n]=o.value)}if(!e.issues||!t.abortEarly)for(let t in r)!Z(r,t)||t in this.entries||(e.value[t]=r[t])}else X(this,"type",e,t);return e}}}function rr(e,t){return{kind:"schema",type:"loose_tuple",reference:rr,expects:"Array",async:!1,items:e,message:t,_run(e,t){let r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<this.items.length;n++){let i=r[n],o=this.items[n]._run({typed:!1,value:i},t);if(o.issues){let s={type:"array",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}if(!e.issues||!t.abortEarly)for(let t=this.items.length;t<r.length;t++)e.value.push(r[t])}else X(this,"type",e,t);return e}}}function rn(e,t){return{kind:"schema",type:"loose_tuple",reference:rn,expects:"Array",async:!0,items:e,message:t,async _run(e,t){let r=e.value;if(Array.isArray(r)){for(let[n,i,o]of(e.typed=!0,e.value=[],await Promise.all(this.items.map(async(e,n)=>{let i=r[n];return[n,i,await e._run({typed:!1,value:i},t)]})))){if(o.issues){let s={type:"array",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}if(!e.issues||!t.abortEarly)for(let t=this.items.length;t<r.length;t++)e.value.push(r[t])}else X(this,"type",e,t);return e}}}function ri(e,t,r){return{kind:"schema",type:"map",reference:ri,expects:"Map",async:!1,key:e,value:t,message:r,_run(e,t){let r=e.value;if(r instanceof Map)for(let[n,i]of(e.typed=!0,e.value=new Map,r)){let o=this.key._run({typed:!1,value:n},t);if(o.issues){let s={type:"map",origin:"key",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}let s=this.value._run({typed:!1,value:i},t);if(s.issues){let o={type:"map",origin:"value",input:r,key:n,value:i};for(let t of s.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}o.typed&&s.typed||(e.typed=!1),e.value.set(o.value,s.value)}else X(this,"type",e,t);return e}}}function ro(e,t,r){return{kind:"schema",type:"map",reference:ro,expects:"Map",async:!0,key:e,value:t,message:r,async _run(e,t){let r=e.value;if(r instanceof Map)for(let[n,i,o,s]of(e.typed=!0,e.value=new Map,await Promise.all([...r].map(([e,r])=>Promise.all([e,r,this.key._run({typed:!1,value:e},t),this.value._run({typed:!1,value:r},t)]))))){if(o.issues){let s={type:"map",origin:"key",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}if(s.issues){let o={type:"map",origin:"value",input:r,key:n,value:i};for(let t of s.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}o.typed&&s.typed||(e.typed=!1),e.value.set(o.value,s.value)}else X(this,"type",e,t);return e}}}function rs(e){return{kind:"schema",type:"nan",reference:rs,expects:"NaN",async:!1,message:e,_run(e,t){return Number.isNaN(e.value)?e.typed=!0:X(this,"type",e,t),e}}}function ra(e){return{kind:"schema",type:"never",reference:ra,expects:"never",async:!1,message:e,_run(e,t){return X(this,"type",e,t),e}}}function ru(e,t){return{kind:"schema",type:"non_nullable",reference:ru,expects:"!null",async:!1,wrapped:e,message:t,_run(e,t){return null===e.value?(X(this,"type",e,t),e):this.wrapped._run(e,t)}}}function rl(e,t){return{kind:"schema",type:"non_nullable",reference:rl,expects:"!null",async:!0,wrapped:e,message:t,async _run(e,t){return null===e.value?(X(this,"type",e,t),e):this.wrapped._run(e,t)}}}function rc(e,t){return{kind:"schema",type:"non_nullish",reference:rc,expects:"(!null & !undefined)",async:!1,wrapped:e,message:t,_run(e,t){return null===e.value||void 0===e.value?(X(this,"type",e,t),e):this.wrapped._run(e,t)}}}function rf(e,t){return{kind:"schema",type:"non_nullish",reference:rf,expects:"(!null & !undefined)",async:!0,wrapped:e,message:t,async _run(e,t){return null===e.value||void 0===e.value?(X(this,"type",e,t),e):this.wrapped._run(e,t)}}}function rh(e,t){return{kind:"schema",type:"non_optional",reference:rh,expects:"!undefined",async:!1,wrapped:e,message:t,_run(e,t){return void 0===e.value?(X(this,"type",e,t),e):this.wrapped._run(e,t)}}}function rp(e,t){return{kind:"schema",type:"non_optional",reference:rp,expects:"!undefined",async:!0,wrapped:e,message:t,async _run(e,t){return void 0===e.value?(X(this,"type",e,t),e):this.wrapped._run(e,t)}}}function rd(e){return{kind:"schema",type:"null",reference:rd,expects:"null",async:!1,message:e,_run(e,t){return null===e.value?e.typed=!0:X(this,"type",e,t),e}}}function ry(e,...t){let r={kind:"schema",type:"nullable",reference:ry,expects:`(${e.expects} | null)`,async:!1,wrapped:e,_run(e,t){return null===e.value&&("default"in this&&(e.value=tM(this,e,t)),null===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function rg(e,...t){let r={kind:"schema",type:"nullable",reference:rg,expects:`(${e.expects} | null)`,async:!0,wrapped:e,async _run(e,t){return null===e.value&&("default"in this&&(e.value=await tM(this,e,t)),null===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function rm(e,...t){let r={kind:"schema",type:"nullish",reference:rm,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,_run(e,t){return(null===e.value||void 0===e.value)&&("default"in this&&(e.value=tM(this,e,t)),null===e.value||void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function rb(e,...t){let r={kind:"schema",type:"nullish",reference:rb,expects:`(${e.expects} | null | undefined)`,async:!0,wrapped:e,async _run(e,t){return(null===e.value||void 0===e.value)&&("default"in this&&(e.value=await tM(this,e,t)),null===e.value||void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function rw(e){return{kind:"schema",type:"number",reference:rw,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?X(this,"type",e,t):e.typed=!0,e}}}function rv(e,t){return{kind:"schema",type:"object",reference:rv,expects:"Object",async:!1,entries:e,message:t,_run(e,t){let r=e.value;if(r&&"object"==typeof r)for(let n in e.typed=!0,e.value={},this.entries){let i=r[n],o=this.entries[n]._run({typed:!1,value:i},t);if(o.issues){let s={type:"object",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||n in r)&&(e.value[n]=o.value)}else X(this,"type",e,t);return e}}}function r_(e,t){return{kind:"schema",type:"object",reference:r_,expects:"Object",async:!0,entries:e,message:t,async _run(e,t){let r=e.value;if(r&&"object"==typeof r)for(let[n,i,o]of(e.typed=!0,e.value={},await Promise.all(Object.entries(this.entries).map(async([e,n])=>{let i=r[e];return[e,i,await n._run({typed:!1,value:i},t)]})))){if(o.issues){let s={type:"object",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||n in r)&&(e.value[n]=o.value)}else X(this,"type",e,t);return e}}}function rE(e,t,r){return{kind:"schema",type:"object_with_rest",reference:rE,expects:"Object",async:!1,entries:e,rest:t,message:r,_run(e,t){let r=e.value;if(r&&"object"==typeof r){for(let n in e.typed=!0,e.value={},this.entries){let i=r[n],o=this.entries[n]._run({typed:!1,value:i},t);if(o.issues){let s={type:"object",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||n in r)&&(e.value[n]=o.value)}if(!e.issues||!t.abortEarly){for(let n in r)if(Z(r,n)&&!(n in this.entries)){let i=r[n],o=this.rest._run({typed:!1,value:i},t);if(o.issues){let s={type:"object",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[n]=o.value}}}else X(this,"type",e,t);return e}}}function rS(e,t,r){return{kind:"schema",type:"object_with_rest",reference:rS,expects:"Object",async:!0,entries:e,rest:t,message:r,async _run(e,t){let r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};let[n,i]=await Promise.all([Promise.all(Object.entries(this.entries).map(async([e,n])=>{let i=r[e];return[e,i,await n._run({typed:!1,value:i},t)]})),Promise.all(Object.entries(r).filter(([e])=>Z(r,e)&&!(e in this.entries)).map(async([e,r])=>[e,r,await this.rest._run({typed:!1,value:r},t)]))]);for(let[i,o,s]of n){if(s.issues){let n={type:"object",origin:"value",input:r,key:i,value:o};for(let t of s.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),(void 0!==s.value||i in r)&&(e.value[i]=s.value)}if(!e.issues||!t.abortEarly)for(let[n,o,s]of i){if(s.issues){let i={type:"object",origin:"value",input:r,key:n,value:o};for(let t of s.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value[n]=s.value}}else X(this,"type",e,t);return e}}}function rT(e,...t){let r={kind:"schema",type:"optional",reference:rT,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=tM(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function rI(e,...t){let r={kind:"schema",type:"optional",reference:rI,expects:`(${e.expects} | undefined)`,async:!0,wrapped:e,async _run(e,t){return void 0===e.value&&("default"in this&&(e.value=await tM(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function rA(e,t){return{kind:"schema",type:"picklist",reference:rA,expects:ee(e.map(Y),"|"),async:!1,options:e,message:t,_run(e,t){return this.options.includes(e.value)?e.typed=!0:X(this,"type",e,t),e}}}function rO(e){return{kind:"schema",type:"promise",reference:rO,expects:"Promise",async:!1,message:e,_run(e,t){return e.value instanceof Promise?e.typed=!0:X(this,"type",e,t),e}}}function rP(e,t,r){return{kind:"schema",type:"record",reference:rP,expects:"Object",async:!1,key:e,value:t,message:r,_run(e,t){let r=e.value;if(r&&"object"==typeof r){for(let n in e.typed=!0,e.value={},r)if(Z(r,n)){let i=r[n],o=this.key._run({typed:!1,value:n},t);if(o.issues){let s={type:"object",origin:"key",input:r,key:n,value:i};for(let t of o.issues)t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}let s=this.value._run({typed:!1,value:i},t);if(s.issues){let o={type:"object",origin:"value",input:r,key:n,value:i};for(let t of s.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}o.typed&&s.typed||(e.typed=!1),o.typed&&(e.value[o.value]=s.value)}}else X(this,"type",e,t);return e}}}function rk(e,t,r){return{kind:"schema",type:"record",reference:rk,expects:"Object",async:!0,key:e,value:t,message:r,async _run(e,t){let r=e.value;if(r&&"object"==typeof r)for(let[n,i,o,s]of(e.typed=!0,e.value={},await Promise.all(Object.entries(r).filter(([e])=>Z(r,e)).map(([e,r])=>Promise.all([e,r,this.key._run({typed:!1,value:e},t),this.value._run({typed:!1,value:r},t)]))))){if(o.issues){let s={type:"object",origin:"key",input:r,key:n,value:i};for(let t of o.issues)t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}if(s.issues){let o={type:"object",origin:"value",input:r,key:n,value:i};for(let t of s.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}o.typed&&s.typed||(e.typed=!1),o.typed&&(e.value[o.value]=s.value)}else X(this,"type",e,t);return e}}}function rx(e,t){return{kind:"schema",type:"set",reference:rx,expects:"Set",async:!1,value:e,message:t,_run(e,t){let r=e.value;if(r instanceof Set)for(let n of(e.typed=!0,e.value=new Set,r)){let i=this.value._run({typed:!1,value:n},t);if(i.issues){let o={type:"set",origin:"value",input:r,key:null,value:n};for(let t of i.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),e.value.add(i.value)}else X(this,"type",e,t);return e}}}function rC(e,t){return{kind:"schema",type:"set",reference:rC,expects:"Set",async:!0,value:e,message:t,async _run(e,t){let r=e.value;if(r instanceof Set)for(let[n,i]of(e.typed=!0,e.value=new Set,await Promise.all([...r].map(async e=>[e,await this.value._run({typed:!1,value:e},t)])))){if(i.issues){let o={type:"set",origin:"value",input:r,key:null,value:n};for(let t of i.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),e.value.add(i.value)}else X(this,"type",e,t);return e}}}function rR(e,t){return{kind:"schema",type:"strict_object",reference:rR,expects:"Object",async:!1,entries:e,message:t,_run(e,t){let r=e.value;if(r&&"object"==typeof r){for(let n in e.typed=!0,e.value={},this.entries){let i=r[n],o=this.entries[n]._run({typed:!1,value:i},t);if(o.issues){let s={type:"object",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||n in r)&&(e.value[n]=o.value)}if(!e.issues||!t.abortEarly){for(let n in r)if(!(n in this.entries)){let i=r[n];X(this,"type",e,t,{input:i,expected:"never",path:[{type:"object",origin:"value",input:r,key:n,value:i}]});break}}}else X(this,"type",e,t);return e}}}function rB(e,t){return{kind:"schema",type:"strict_object",reference:rB,expects:"Object",async:!0,entries:e,message:t,async _run(e,t){let r=e.value;if(r&&"object"==typeof r){for(let[n,i,o]of(e.typed=!0,e.value={},await Promise.all(Object.entries(this.entries).map(async([e,n])=>{let i=r[e];return[e,i,await n._run({typed:!1,value:i},t)]})))){if(o.issues){let s={type:"object",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||n in r)&&(e.value[n]=o.value)}if(!e.issues||!t.abortEarly){for(let n in r)if(!(n in this.entries)){let i=r[n];X(this,"type",e,t,{input:i,expected:"never",path:[{type:"object",origin:"value",input:r,key:n,value:i}]});break}}}else X(this,"type",e,t);return e}}}function rU(e,t){return{kind:"schema",type:"strict_tuple",reference:rU,expects:"Array",async:!1,items:e,message:t,_run(t,r){let n=t.value;if(Array.isArray(n)){t.typed=!0,t.value=[];for(let e=0;e<this.items.length;e++){let i=n[e],o=this.items[e]._run({typed:!1,value:i},r);if(o.issues){let s={type:"array",origin:"value",input:n,key:e,value:i};for(let e of o.issues)e.path?e.path.unshift(s):e.path=[s],t.issues?.push(e);if(t.issues||(t.issues=o.issues),r.abortEarly){t.typed=!1;break}}o.typed||(t.typed=!1),t.value.push(o.value)}if(!(t.issues&&r.abortEarly)&&this.items.length<n.length){let i=n[e.length];X(this,"type",t,r,{input:i,expected:"never",path:[{type:"array",origin:"value",input:n,key:this.items.length,value:i}]})}}else X(this,"type",t,r);return t}}}function rN(e,t){return{kind:"schema",type:"strict_tuple",reference:rN,expects:"Array",async:!0,items:e,message:t,async _run(t,r){let n=t.value;if(Array.isArray(n)){for(let[e,i,o]of(t.typed=!0,t.value=[],await Promise.all(this.items.map(async(e,t)=>{let i=n[t];return[t,i,await e._run({typed:!1,value:i},r)]})))){if(o.issues){let s={type:"array",origin:"value",input:n,key:e,value:i};for(let e of o.issues)e.path?e.path.unshift(s):e.path=[s],t.issues?.push(e);if(t.issues||(t.issues=o.issues),r.abortEarly){t.typed=!1;break}}o.typed||(t.typed=!1),t.value.push(o.value)}if(!(t.issues&&r.abortEarly)&&this.items.length<n.length){let i=n[e.length];X(this,"type",t,r,{input:i,expected:"never",path:[{type:"array",origin:"value",input:n,key:this.items.length,value:i}]})}}else X(this,"type",t,r);return t}}}function rD(e){return{kind:"schema",type:"string",reference:rD,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:X(this,"type",e,t),e}}}function rL(e){return{kind:"schema",type:"symbol",reference:rL,expects:"symbol",async:!1,message:e,_run(e,t){return"symbol"==typeof e.value?e.typed=!0:X(this,"type",e,t),e}}}function rH(e,t){return{kind:"schema",type:"tuple",reference:rH,expects:"Array",async:!1,items:e,message:t,_run(e,t){let r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<this.items.length;n++){let i=r[n],o=this.items[n]._run({typed:!1,value:i},t);if(o.issues){let s={type:"array",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else X(this,"type",e,t);return e}}}function rM(e,t){return{kind:"schema",type:"tuple",reference:rM,expects:"Array",async:!0,items:e,message:t,async _run(e,t){let r=e.value;if(Array.isArray(r))for(let[n,i,o]of(e.typed=!0,e.value=[],await Promise.all(this.items.map(async(e,n)=>{let i=r[n];return[n,i,await e._run({typed:!1,value:i},t)]})))){if(o.issues){let s={type:"array",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}else X(this,"type",e,t);return e}}}function rF(e,t,r){return{kind:"schema",type:"tuple_with_rest",reference:rF,expects:"Array",async:!1,items:e,rest:t,message:r,_run(e,t){let r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<this.items.length;n++){let i=r[n],o=this.items[n]._run({typed:!1,value:i},t);if(o.issues){let s={type:"array",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}if(!e.issues||!t.abortEarly)for(let n=this.items.length;n<r.length;n++){let i=r[n],o=this.rest._run({typed:!1,value:i},t);if(o.issues){let s={type:"array",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else X(this,"type",e,t);return e}}}function rj(e,t,r){return{kind:"schema",type:"tuple_with_rest",reference:rj,expects:"Array",async:!0,items:e,rest:t,message:r,async _run(e,t){let r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];let[n,i]=await Promise.all([Promise.all(this.items.map(async(e,n)=>{let i=r[n];return[n,i,await e._run({typed:!1,value:i},t)]})),Promise.all(r.slice(this.items.length).map(async(e,r)=>[r+this.items.length,e,await this.rest._run({typed:!1,value:e},t)]))]);for(let[i,o,s]of n){if(s.issues){let n={type:"array",origin:"value",input:r,key:i,value:o};for(let t of s.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}if(!e.issues||!t.abortEarly)for(let[n,o,s]of i){if(s.issues){let i={type:"array",origin:"value",input:r,key:n,value:o};for(let t of s.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}}else X(this,"type",e,t);return e}}}function rV(e){return{kind:"schema",type:"undefined",reference:rV,expects:"undefined",async:!1,message:e,_run(e,t){return void 0===e.value?e.typed=!0:X(this,"type",e,t),e}}}function rK(e){let t;if(e)for(let r of e)t?t.push(...r.issues):t=r.issues;return t}function rW(e,t){return{kind:"schema",type:"union",reference:rW,expects:ee(e.map(e=>e.expects),"|"),async:!1,options:e,message:t,_run(e,t){let r,n,i;for(let o of this.options){let s=o._run({typed:!1,value:e.value},t);if(s.typed){if(s.issues)n?n.push(s):n=[s];else{r=s;break}}else i?i.push(s):i=[s]}if(r)return r;if(n){if(1===n.length)return n[0];X(this,"type",e,t,{issues:rK(n)}),e.typed=!0}else{if(i?.length===1)return i[0];X(this,"type",e,t,{issues:rK(i)})}return e}}}function rq(e,t){return{kind:"schema",type:"union",reference:rq,expects:ee(e.map(e=>e.expects),"|"),async:!0,options:e,message:t,async _run(e,t){let r,n,i;for(let o of this.options){let s=await o._run({typed:!1,value:e.value},t);if(s.typed){if(s.issues)n?n.push(s):n=[s];else{r=s;break}}else i?i.push(s):i=[s]}if(r)return r;if(n){if(1===n.length)return n[0];X(this,"type",e,t,{issues:rK(n)}),e.typed=!0}else{if(i?.length===1)return i[0];X(this,"type",e,t,{issues:rK(i)})}return e}}}function rG(){return{kind:"schema",type:"unknown",reference:rG,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}function r$(e,t,r=[]){for(let n of t)"variant"===n.type?r$(e,n.options,r):r.push(n.entries[e].expects);return r}function rz(e,t,r){let n;return{kind:"schema",type:"variant",reference:rz,expects:"Object",async:!1,key:e,options:t,message:r,_run(e,t){let r=e.value;if(r&&"object"==typeof r){let i=r[this.key];if(this.key in r){let e;for(let n of this.options)if("variant"===n.type||!n.entries[this.key]._run({typed:!1,value:i},t).issues){let i=n._run({typed:!1,value:r},t);if(!i.issues)return i;e&&(e.typed||!i.typed)||(e=i)}if(e)return e}n||(n=ee(r$(this.key,this.options),"|")),X(this,"type",e,t,{input:i,expected:n,path:[{type:"object",origin:"value",input:r,key:this.key,value:i}]})}else X(this,"type",e,t);return e}}}function rY(e,t,r){let n;return{kind:"schema",type:"variant",reference:rY,expects:"Object",async:!0,key:e,options:t,message:r,async _run(e,t){let r=e.value;if(r&&"object"==typeof r){let i=r[this.key];if(this.key in r){let e;for(let n of this.options)if("variant"===n.type||!(await n.entries[this.key]._run({typed:!1,value:i},t)).issues){let i=await n._run({typed:!1,value:r},t);if(!i.issues)return i;e&&(e.typed||!i.typed)||(e=i)}if(e)return e}n||(n=ee(r$(this.key,this.options),"|")),X(this,"type",e,t,{input:i,expected:n,path:[{type:"object",origin:"value",input:r,key:this.key,value:i}]})}else X(this,"type",e,t);return e}}}function rX(e){return{kind:"schema",type:"void",reference:rX,expects:"void",async:!1,message:e,_run(e,t){return void 0===e.value?e.typed=!0:X(this,"type",e,t),e}}}function rJ(e,t){return rA(Object.keys(e.entries),t)}function rQ(e,t){let r={...e.entries};for(let e of t)delete r[e];return{...e,entries:r}}function rZ(e,t,r){let n=e._run({typed:!1,value:t},H(r));if(n.issues)throw new es(n.issues);return n.value}async function r0(e,t,r){let n=await e._run({typed:!1,value:t},H(r));if(n.issues)throw new es(n.issues);return n.value}function r1(e,t){let r=r=>rZ(e,r,t);return r.schema=e,r.config=t,r}function r2(e,t){let r=r=>r0(e,r,t);return r.schema=e,r.config=t,r}function r3(e,t){let r={};for(let n in e.entries)r[n]=!t||t.includes(n)?rT(e.entries[n]):e.entries[n];return{...e,entries:r}}function r4(e,t){let r={};for(let n in e.entries)r[n]=!t||t.includes(n)?rI(e.entries[n]):e.entries[n];return{...e,entries:r}}function r5(e,t){let r={};for(let n of t)r[n]=e.entries[n];return{...e,entries:r}}function r8(...e){return{...e[0],pipe:e,_run(t,r){for(let n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=n._run(t,r))}return t}}}function r6(...e){return{...e[0],pipe:e,async:!0,async _run(t,r){for(let n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=await n._run(t,r))}return t}}}function r7(e,t,r){let n=Array.isArray(t)?t:void 0,i=Array.isArray(t)?r:t,o={};for(let t in e.entries)o[t]=!n||n.includes(t)?rh(e.entries[t],i):e.entries[t];return{...e,entries:o}}function r9(e,t,r){let n=Array.isArray(t)?t:void 0,i=Array.isArray(t)?r:t,o={};for(let t in e.entries)o[t]=!n||n.includes(t)?rp(e.entries[t],i):e.entries[t];return{...e,entries:o}}function ne(e,t,r){let n=e._run({typed:!1,value:t},H(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}async function nt(e,t,r){let n=await e._run({typed:!1,value:t},H(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}function nr(e,t){let r=r=>ne(e,r,t);return r.schema=e,r.config=t,r}function nn(e,t){let r=r=>nt(e,r,t);return r.schema=e,r.config=t,r}function ni(e){return e.wrapped}},6885:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.encode=c,t.decode=f,t.encodingLength=h;let s=o(r(6713)),a=e=>{if(e<0||e>0xffffffffffffffffn)throw RangeError("value out of range")};function u(e){if(e<0||e>Number.MAX_SAFE_INTEGER||e%1!=0)throw RangeError("value out of range")}function l(e){"number"==typeof e?u(e):a(e)}function c(e,t,r){l(e),void 0===r&&(r=0),void 0===t&&(t=new Uint8Array(h(e)));let n=0;return e<253?(t.set([Number(e)],r),n=1):e<=65535?(t.set([253],r),s.writeUInt16(t,r+1,Number(e),"LE"),n=3):e<=4294967295?(t.set([254],r),s.writeUInt32(t,r+1,Number(e),"LE"),n=5):(t.set([255],r),s.writeUInt64(t,r+1,BigInt(e),"LE"),n=9),{buffer:t,bytes:n}}function f(e,t){void 0===t&&(t=0);let r=e.at(t);if(void 0===r)throw Error("buffer too small");if(r<253)return{numberValue:r,bigintValue:BigInt(r),bytes:1};if(253===r){let r=s.readUInt16(e,t+1,"LE");return{numberValue:r,bigintValue:BigInt(r),bytes:3}}if(254===r){let r=s.readUInt32(e,t+1,"LE");return{numberValue:r,bigintValue:BigInt(r),bytes:5}}{let r=s.readUInt64(e,t+1,"LE");return{numberValue:r<=Number.MAX_SAFE_INTEGER?Number(r):null,bigintValue:r,bytes:9}}}function h(e){return l(e),e<253?1:e<=65535?3:e<=4294967295?5:9}},63083:function(e,t,r){"use strict";var n=r(89908),i="undefined"==typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof i[n[t]]&&(e[e.length]=n[t]);return e}},97218:function(e,t,r){"use strict";let n,i,o,s,a;var u=r(34155),l=r(48764).Buffer;function c(e,t){return function(){return e.apply(t,arguments)}}let{toString:f}=Object.prototype,{getPrototypeOf:h}=Object,{iterator:p,toStringTag:d}=Symbol,y=(n=Object.create(null),e=>{let t=f.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())}),g=e=>(e=e.toLowerCase(),t=>y(t)===e),m=e=>t=>typeof t===e,{isArray:b}=Array,w=m("undefined");function v(e){return null!==e&&!w(e)&&null!==e.constructor&&!w(e.constructor)&&T(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}let _=g("ArrayBuffer");function E(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&_(e.buffer)}let S=m("string"),T=m("function"),I=m("number"),A=e=>null!==e&&"object"==typeof e,O=e=>!0===e||!1===e,P=e=>{if("object"!==y(e))return!1;let t=h(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(d in e)&&!(p in e)},k=e=>{if(!A(e)||v(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},x=g("Date"),C=g("File"),R=g("Blob"),B=g("FileList"),U=e=>A(e)&&T(e.pipe),N=e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||T(e.append)&&("formdata"===(t=y(e))||"object"===t&&T(e.toString)&&"[object FormData]"===e.toString()))},D=g("URLSearchParams"),[L,H,M,F]=["ReadableStream","Request","Response","Headers"].map(g),j=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function V(e,t,{allOwnKeys:r=!1}={}){let n,i;if(null!=e){if("object"!=typeof e&&(e=[e]),b(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{let i;if(v(e))return;let o=r?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;for(n=0;n<s;n++)i=o[n],t.call(null,e[i],i,e)}}}function K(e,t){let r;if(v(e))return null;t=t.toLowerCase();let n=Object.keys(e),i=n.length;for(;i-- >0;)if(t===(r=n[i]).toLowerCase())return r;return null}let W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:r.g,q=e=>!w(e)&&e!==W;function G(){let{caseless:e}=q(this)&&this||{},t={},r=(r,n)=>{let i=e&&K(t,n)||n;P(t[i])&&P(r)?t[i]=G(t[i],r):P(r)?t[i]=G({},r):b(r)?t[i]=r.slice():t[i]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&V(arguments[e],r);return t}let $=(e,t,r,{allOwnKeys:n}={})=>(V(t,(t,n)=>{r&&T(t)?e[n]=c(t,r):e[n]=t},{allOwnKeys:n}),e),z=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),Y=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},X=(e,t,r,n)=>{let i,o,s;let a={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)s=i[o],(!n||n(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=!1!==r&&h(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},J=(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return -1!==n&&n===r},Q=e=>{if(!e)return null;if(b(e))return e;let t=e.length;if(!I(t))return null;let r=Array(t);for(;t-- >0;)r[t]=e[t];return r},Z=(i="undefined"!=typeof Uint8Array&&h(Uint8Array),e=>i&&e instanceof i),ee=(e,t)=>{let r;let n=(e&&e[p]).call(e);for(;(r=n.next())&&!r.done;){let n=r.value;t.call(e,n[0],n[1])}},et=(e,t)=>{let r;let n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},er=g("HTMLFormElement"),en=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),ei=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),eo=g("RegExp"),es=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};V(r,(r,i)=>{let o;!1!==(o=t(r,i,e))&&(n[i]=o||r)}),Object.defineProperties(e,n)},ea=e=>{es(e,(t,r)=>{if(T(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;if(T(e[r])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},eu=(e,t)=>{let r={};return(e=>{e.forEach(e=>{r[e]=!0})})(b(e)?e:String(e).split(t)),r},el=()=>{},ec=(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t;function ef(e){return!!(e&&T(e.append)&&"FormData"===e[d]&&e[p])}let eh=e=>{let t=Array(10),r=(e,n)=>{if(A(e)){if(t.indexOf(e)>=0)return;if(v(e))return e;if(!("toJSON"in e)){t[n]=e;let i=b(e)?[]:{};return V(e,(e,t)=>{let o=r(e,n+1);w(o)||(i[t]=o)}),t[n]=void 0,i}}return e};return r(e,0)},ep=g("AsyncFunction"),ed=e=>e&&(A(e)||T(e))&&T(e.then)&&T(e.catch),ey=((e,t)=>{let r,n;return e?setImmediate:t?(r=`axios@${Math.random()}`,n=[],W.addEventListener("message",({source:e,data:t})=>{e===W&&t===r&&n.length&&n.shift()()},!1),e=>{n.push(e),W.postMessage(r,"*")}):e=>setTimeout(e)})("function"==typeof setImmediate,T(W.postMessage)),eg="undefined"!=typeof queueMicrotask?queueMicrotask.bind(W):void 0!==u&&u.nextTick||ey,em=e=>null!=e&&T(e[p]);var eb={isArray:b,isArrayBuffer:_,isBuffer:v,isFormData:N,isArrayBufferView:E,isString:S,isNumber:I,isBoolean:O,isObject:A,isPlainObject:P,isEmptyObject:k,isReadableStream:L,isRequest:H,isResponse:M,isHeaders:F,isUndefined:w,isDate:x,isFile:C,isBlob:R,isRegExp:eo,isFunction:T,isStream:U,isURLSearchParams:D,isTypedArray:Z,isFileList:B,forEach:V,merge:G,extend:$,trim:j,stripBOM:z,inherits:Y,toFlatObject:X,kindOf:y,kindOfTest:g,endsWith:J,toArray:Q,forEachEntry:ee,matchAll:et,isHTMLForm:er,hasOwnProperty:ei,hasOwnProp:ei,reduceDescriptors:es,freezeMethods:ea,toObjectSet:eu,toCamelCase:en,noop:el,toFiniteNumber:ec,findKey:K,global:W,isContextDefined:q,isSpecCompliantForm:ef,toJSONObject:eh,isAsyncFn:ep,isThenable:ed,setImmediate:ey,asap:eg,isIterable:em};function ew(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}eb.inherits(ew,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:eb.toJSONObject(this.config),code:this.code,status:this.status}}});let ev=ew.prototype,e_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{e_[e]={value:e}}),Object.defineProperties(ew,e_),Object.defineProperty(ev,"isAxiosError",{value:!0}),ew.from=(e,t,r,n,i,o)=>{let s=Object.create(ev);return eb.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),ew.call(s,e.message,t,r,n,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};var eE=null;function eS(e){return eb.isPlainObject(e)||eb.isArray(e)}function eT(e){return eb.endsWith(e,"[]")?e.slice(0,-2):e}function eI(e,t,r){return e?e.concat(t).map(function(e,t){return e=eT(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}function eA(e){return eb.isArray(e)&&!e.some(eS)}let eO=eb.toFlatObject(eb,{},null,function(e){return/^is[A-Z]/.test(e)});function eP(e,t,r){if(!eb.isObject(e))throw TypeError("target must be an object");t=t||new FormData;let n=(r=eb.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!eb.isUndefined(t[e])})).metaTokens,i=r.visitor||c,o=r.dots,s=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&eb.isSpecCompliantForm(t);if(!eb.isFunction(i))throw TypeError("visitor must be a function");function u(e){if(null===e)return"";if(eb.isDate(e))return e.toISOString();if(eb.isBoolean(e))return e.toString();if(!a&&eb.isBlob(e))throw new ew("Blob is not supported. Use a Buffer instead.");return eb.isArrayBuffer(e)||eb.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):l.from(e):e}function c(e,r,i){let a=e;if(e&&!i&&"object"==typeof e){if(eb.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(eb.isArray(e)&&eA(e)||(eb.isFileList(e)||eb.endsWith(r,"[]"))&&(a=eb.toArray(e)))return r=eT(r),a.forEach(function(e,n){eb.isUndefined(e)||null===e||t.append(!0===s?eI([r],n,o):null===s?r:r+"[]",u(e))}),!1}return!!eS(e)||(t.append(eI(i,r,o),u(e)),!1)}let f=[],h=Object.assign(eO,{defaultVisitor:c,convertValue:u,isVisitable:eS});function p(e,r){if(!eb.isUndefined(e)){if(-1!==f.indexOf(e))throw Error("Circular reference detected in "+r.join("."));f.push(e),eb.forEach(e,function(e,n){!0===(!(eb.isUndefined(e)||null===e)&&i.call(t,e,eb.isString(n)?n.trim():n,r,h))&&p(e,r?r.concat(n):[n])}),f.pop()}}if(!eb.isObject(e))throw TypeError("data must be an object");return p(e),t}function ek(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function ex(e,t){this._pairs=[],e&&eP(e,this,t)}let eC=ex.prototype;function eR(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function eB(e,t,r){let n;if(!t)return e;let i=r&&r.encode||eR;eb.isFunction(r)&&(r={serialize:r});let o=r&&r.serialize;if(n=o?o(t,r):eb.isURLSearchParams(t)?t.toString():new ex(t,r).toString(i)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}eC.append=function(e,t){this._pairs.push([e,t])},eC.toString=function(e){let t=e?function(t){return e.call(this,t,ek)}:ek;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class eU{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){eb.forEach(this.handlers,function(t){null!==t&&e(t)})}}var eN=eU,eD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eL={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:ex,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};let eH="undefined"!=typeof window&&"undefined"!=typeof document,eM="object"==typeof navigator&&navigator||void 0,eF=eH&&(!eM||0>["ReactNative","NativeScript","NS"].indexOf(eM.product)),ej="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,eV=eH&&window.location.href||"http://localhost";var eK={...Object.freeze({__proto__:null,hasBrowserEnv:eH,hasStandardBrowserWebWorkerEnv:ej,hasStandardBrowserEnv:eF,navigator:eM,origin:eV}),...eL};function eW(e,t){return eP(e,new eK.classes.URLSearchParams,{visitor:function(e,t,r,n){return eK.isNode&&eb.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}function eq(e){return eb.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}function eG(e){let t,r;let n={},i=Object.keys(e),o=i.length;for(t=0;t<o;t++)n[r=i[t]]=e[r];return n}function e$(e){function t(e,r,n,i){let o=e[i++];if("__proto__"===o)return!0;let s=Number.isFinite(+o),a=i>=e.length;return(o=!o&&eb.isArray(n)?n.length:o,a)?eb.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r:(n[o]&&eb.isObject(n[o])||(n[o]=[]),t(e,r,n[o],i)&&eb.isArray(n[o])&&(n[o]=eG(n[o]))),!s}if(eb.isFormData(e)&&eb.isFunction(e.entries)){let r={};return eb.forEachEntry(e,(e,n)=>{t(eq(e),n,r,0)}),r}return null}function ez(e,t,r){if(eb.isString(e))try{return(t||JSON.parse)(e),eb.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}let eY={transitional:eD,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let r;let n=t.getContentType()||"",i=n.indexOf("application/json")>-1,o=eb.isObject(e);if(o&&eb.isHTMLForm(e)&&(e=new FormData(e)),eb.isFormData(e))return i?JSON.stringify(e$(e)):e;if(eb.isArrayBuffer(e)||eb.isBuffer(e)||eb.isStream(e)||eb.isFile(e)||eb.isBlob(e)||eb.isReadableStream(e))return e;if(eb.isArrayBufferView(e))return e.buffer;if(eb.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return eW(e,this.formSerializer).toString();if((r=eb.isFileList(e))||n.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return eP(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),ez(e)):e}],transformResponse:[function(e){let t=this.transitional||eY.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(eb.isResponse(e)||eb.isReadableStream(e))return e;if(e&&eb.isString(e)&&(r&&!this.responseType||n)){let r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw ew.from(e,ew.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:eK.classes.FormData,Blob:eK.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};eb.forEach(["delete","get","head","post","put","patch"],e=>{eY.headers[e]={}});var eX=eY;let eJ=eb.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var eQ=e=>{let t,r,n;let i={};return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),t=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!t||i[t]&&eJ[t]||("set-cookie"===t?i[t]?i[t].push(r):i[t]=[r]:i[t]=i[t]?i[t]+", "+r:r)}),i};let eZ=Symbol("internals");function e0(e){return e&&String(e).trim().toLowerCase()}function e1(e){return!1===e||null==e?e:eb.isArray(e)?e.map(e1):String(e)}function e2(e){let t;let r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=n.exec(e);)r[t[1]]=t[2];return r}let e3=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function e4(e,t,r,n,i){if(eb.isFunction(n))return n.call(this,t,r);if(i&&(t=r),eb.isString(t)){if(eb.isString(n))return -1!==t.indexOf(n);if(eb.isRegExp(n))return n.test(t)}}function e5(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function e8(e,t){let r=eb.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,i){return this[n].call(this,t,e,r,i)},configurable:!0})})}class e6{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function i(e,t,r){let i=e0(t);if(!i)throw Error("header name must be a non-empty string");let o=eb.findKey(n,i);o&&void 0!==n[o]&&!0!==r&&(void 0!==r||!1===n[o])||(n[o||t]=e1(e))}let o=(e,t)=>eb.forEach(e,(e,r)=>i(e,r,t));if(eb.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(eb.isString(e)&&(e=e.trim())&&!e3(e))o(eQ(e),t);else if(eb.isObject(e)&&eb.isIterable(e)){let r={},n,i;for(let t of e){if(!eb.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[i=t[0]]=(n=r[i])?eb.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(r,t)}else null!=e&&i(t,e,r);return this}get(e,t){if(e=e0(e)){let r=eb.findKey(this,e);if(r){let e=this[r];if(!t)return e;if(!0===t)return e2(e);if(eb.isFunction(t))return t.call(this,e,r);if(eb.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=e0(e)){let r=eb.findKey(this,e);return!!(r&&void 0!==this[r]&&(!t||e4(this,this[r],r,t)))}return!1}delete(e,t){let r=this,n=!1;function i(e){if(e=e0(e)){let i=eb.findKey(r,e);i&&(!t||e4(r,r[i],i,t))&&(delete r[i],n=!0)}}return eb.isArray(e)?e.forEach(i):i(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let i=t[r];(!e||e4(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){let t=this,r={};return eb.forEach(this,(n,i)=>{let o=eb.findKey(r,i);if(o){t[o]=e1(n),delete t[i];return}let s=e?e5(i):String(i).trim();s!==i&&delete t[i],t[s]=e1(n),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return eb.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&eb.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){let t=(this[eZ]=this[eZ]={accessors:{}}).accessors,r=this.prototype;function n(e){let n=e0(e);t[n]||(e8(r,e),t[n]=!0)}return eb.isArray(e)?e.forEach(n):n(e),this}}e6.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),eb.reduceDescriptors(e6.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),eb.freezeMethods(e6);var e7=e6;function e9(e,t){let r=this||eX,n=t||r,i=e7.from(n.headers),o=n.data;return eb.forEach(e,function(e){o=e.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function te(e){return!!(e&&e.__CANCEL__)}function tt(e,t,r){ew.call(this,null==e?"canceled":e,ew.ERR_CANCELED,t,r),this.name="CanceledError"}function tr(e,t,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new ew("Request failed with status code "+r.status,[ew.ERR_BAD_REQUEST,ew.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function tn(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ti(e,t){let r;let n=Array(e=e||10),i=Array(e),o=0,s=0;return t=void 0!==t?t:1e3,function(a){let u=Date.now(),l=i[s];r||(r=u),n[o]=a,i[o]=u;let c=s,f=0;for(;c!==o;)f+=n[c++],c%=e;if((o=(o+1)%e)===s&&(s=(s+1)%e),u-r<t)return;let h=l&&u-l;return h?Math.round(1e3*f/h):void 0}}function to(e,t){let r,n,i=0,o=1e3/t,s=(t,o=Date.now())=>{i=o,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{let t=Date.now(),a=t-i;a>=o?s(e,t):(r=e,n||(n=setTimeout(()=>{n=null,s(r)},o-a)))},()=>r&&s(r)]}eb.inherits(tt,ew,{__CANCEL__:!0});let ts=(e,t,r=3)=>{let n=0,i=ti(50,250);return to(r=>{let o=r.loaded,s=r.lengthComputable?r.total:void 0,a=o-n,u=i(a),l=o<=s;n=o,e({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:u||void 0,estimated:u&&s&&l?(s-o)/u:void 0,event:r,lengthComputable:null!=s,[t?"download":"upload"]:!0})},r)},ta=(e,t)=>{let r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},tu=e=>(...t)=>eb.asap(()=>e(...t));var tl=eK.hasStandardBrowserEnv?(o=new URL(eK.origin),s=eK.navigator&&/(msie|trident)/i.test(eK.navigator.userAgent),e=>(e=new URL(e,eK.origin),o.protocol===e.protocol&&o.host===e.host&&(s||o.port===e.port))):()=>!0,tc=eK.hasStandardBrowserEnv?{write(e,t,r,n,i,o){let s=[e+"="+encodeURIComponent(t)];eb.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),eb.isString(n)&&s.push("path="+n),eb.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){let t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function tf(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function th(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function tp(e,t,r){let n=!tf(t);return e&&(n||!1==r)?th(e,t):t}let td=e=>e instanceof e7?{...e}:e;function ty(e,t){t=t||{};let r={};function n(e,t,r,n){return eb.isPlainObject(e)&&eb.isPlainObject(t)?eb.merge.call({caseless:n},e,t):eb.isPlainObject(t)?eb.merge({},t):eb.isArray(t)?t.slice():t}function i(e,t,r,i){return eb.isUndefined(t)?eb.isUndefined(e)?void 0:n(void 0,e,r,i):n(e,t,r,i)}function o(e,t){if(!eb.isUndefined(t))return n(void 0,t)}function s(e,t){return eb.isUndefined(t)?eb.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,i,o){return o in t?n(r,i):o in e?n(void 0,r):void 0}let u={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,r)=>i(td(e),td(t),r,!0)};return eb.forEach(Object.keys({...e,...t}),function(n){let o=u[n]||i,s=o(e[n],t[n],n);eb.isUndefined(s)&&o!==a||(r[n]=s)}),r}var tg=e=>{let t;let r=ty({},e),{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:u}=r;if(r.headers=a=e7.from(a),r.url=eB(tp(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),eb.isFormData(n)){if(eK.hasStandardBrowserEnv||eK.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(t=a.getContentType())){let[e,...r]=t?t.split(";").map(e=>e.trim()).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...r].join("; "))}}if(eK.hasStandardBrowserEnv&&(i&&eb.isFunction(i)&&(i=i(r)),i||!1!==i&&tl(r.url))){let e=o&&s&&tc.read(s);e&&a.set(o,e)}return r},tm="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){let n,i,o,s,a;let u=tg(e),l=u.data,c=e7.from(u.headers).normalize(),{responseType:f,onUploadProgress:h,onDownloadProgress:p}=u;function d(){s&&s(),a&&a(),u.cancelToken&&u.cancelToken.unsubscribe(n),u.signal&&u.signal.removeEventListener("abort",n)}let y=new XMLHttpRequest;function g(){if(!y)return;let n=e7.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders());tr(function(e){t(e),d()},function(e){r(e),d()},{data:f&&"text"!==f&&"json"!==f?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:n,config:e,request:y}),y=null}y.open(u.method.toUpperCase(),u.url,!0),y.timeout=u.timeout,"onloadend"in y?y.onloadend=g:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(g)},y.onabort=function(){y&&(r(new ew("Request aborted",ew.ECONNABORTED,e,y)),y=null)},y.onerror=function(){r(new ew("Network Error",ew.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let t=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",n=u.transitional||eD;u.timeoutErrorMessage&&(t=u.timeoutErrorMessage),r(new ew(t,n.clarifyTimeoutError?ew.ETIMEDOUT:ew.ECONNABORTED,e,y)),y=null},void 0===l&&c.setContentType(null),"setRequestHeader"in y&&eb.forEach(c.toJSON(),function(e,t){y.setRequestHeader(t,e)}),eb.isUndefined(u.withCredentials)||(y.withCredentials=!!u.withCredentials),f&&"json"!==f&&(y.responseType=u.responseType),p&&([o,a]=ts(p,!0),y.addEventListener("progress",o)),h&&y.upload&&([i,s]=ts(h),y.upload.addEventListener("progress",i),y.upload.addEventListener("loadend",s)),(u.cancelToken||u.signal)&&(n=t=>{y&&(r(!t||t.type?new tt(null,e,y):t),y.abort(),y=null)},u.cancelToken&&u.cancelToken.subscribe(n),u.signal&&(u.signal.aborted?n():u.signal.addEventListener("abort",n)));let m=tn(u.url);if(m&&-1===eK.protocols.indexOf(m)){r(new ew("Unsupported protocol "+m+":",ew.ERR_BAD_REQUEST,e));return}y.send(l||null)})},tb=(e,t)=>{let{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController,i=function(e){if(!r){r=!0,s();let t=e instanceof Error?e:this.reason;n.abort(t instanceof ew?t:new tt(t instanceof Error?t.message:t))}},o=t&&setTimeout(()=>{o=null,i(new ew(`timeout ${t} of ms exceeded`,ew.ETIMEDOUT))},t),s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));let{signal:a}=n;return a.unsubscribe=()=>eb.asap(s),a}};let tw=function*(e,t){let r,n=e.byteLength;if(!t||n<t){yield e;return}let i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},tv=async function*(e,t){for await(let r of t_(e))yield*tw(r,t)},t_=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},tE=(e,t,r,n)=>{let i;let o=tv(e,t),s=0,a=e=>{!i&&(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{let{done:t,value:n}=await o.next();if(t){a(),e.close();return}let i=n.byteLength;if(r){let e=s+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw a(e),e}},cancel:e=>(a(e),o.return())},{highWaterMark:2})},tS="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,tT=tS&&"function"==typeof ReadableStream,tI=tS&&("function"==typeof TextEncoder?(a=new TextEncoder,e=>a.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer())),tA=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},tO=tT&&tA(()=>{let e=!1,t=new Request(eK.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),tP=65536,tk=tT&&tA(()=>eb.isReadableStream(new Response("").body)),tx={stream:tk&&(e=>e.body)};tS&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{tx[t]||(tx[t]=eb.isFunction(e[t])?e=>e[t]():(e,r)=>{throw new ew(`Response type '${t}' is not supported`,ew.ERR_NOT_SUPPORT,r)})})})(new Response);let tC=async e=>{if(null==e)return 0;if(eb.isBlob(e))return e.size;if(eb.isSpecCompliantForm(e)){let t=new Request(eK.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return eb.isArrayBufferView(e)||eb.isArrayBuffer(e)?e.byteLength:(eb.isURLSearchParams(e)&&(e+=""),eb.isString(e))?(await tI(e)).byteLength:void 0},tR=async(e,t)=>{let r=eb.toFiniteNumber(e.getContentLength());return null==r?tC(t):r},tB={http:eE,xhr:tm,fetch:tS&&(async e=>{let t,r,{url:n,method:i,data:o,signal:s,cancelToken:a,timeout:u,onDownloadProgress:l,onUploadProgress:c,responseType:f,headers:h,withCredentials:p="same-origin",fetchOptions:d}=tg(e);f=f?(f+"").toLowerCase():"text";let y=tb([s,a&&a.toAbortSignal()],u),g=y&&y.unsubscribe&&(()=>{y.unsubscribe()});try{if(c&&tO&&"get"!==i&&"head"!==i&&0!==(r=await tR(h,o))){let e,t=new Request(n,{method:"POST",body:o,duplex:"half"});if(eb.isFormData(o)&&(e=t.headers.get("content-type"))&&h.setContentType(e),t.body){let[e,n]=ta(r,ts(tu(c)));o=tE(t.body,tP,e,n)}}eb.isString(p)||(p=p?"include":"omit");let s="credentials"in Request.prototype;t=new Request(n,{...d,signal:y,method:i.toUpperCase(),headers:h.normalize().toJSON(),body:o,duplex:"half",credentials:s?p:void 0});let a=await fetch(t,d),u=tk&&("stream"===f||"response"===f);if(tk&&(l||u&&g)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=a[t]});let t=eb.toFiniteNumber(a.headers.get("content-length")),[r,n]=l&&ta(t,ts(tu(l),!0))||[];a=new Response(tE(a.body,tP,r,()=>{n&&n(),g&&g()}),e)}f=f||"text";let m=await tx[eb.findKey(tx,f)||"text"](a,e);return!u&&g&&g(),await new Promise((r,n)=>{tr(r,n,{data:m,headers:e7.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:t})})}catch(r){if(g&&g(),r&&"TypeError"===r.name&&/Load failed|fetch/i.test(r.message))throw Object.assign(new ew("Network Error",ew.ERR_NETWORK,e,t),{cause:r.cause||r});throw ew.from(r,r&&r.code,e,t)}})};eb.forEach(tB,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let tU=e=>`- ${e}`,tN=e=>eb.isFunction(e)||null===e||!1===e;var tD=e=>{let t,r;let{length:n}=e=eb.isArray(e)?e:[e],i={};for(let o=0;o<n;o++){let n;if(r=t=e[o],!tN(t)&&void 0===(r=tB[(n=String(t)).toLowerCase()]))throw new ew(`Unknown adapter '${n}'`);if(r)break;i[n||"#"+o]=r}if(!r){let e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new ew("There is no suitable adapter to dispatch the request "+(n?e.length>1?"since :\n"+e.map(tU).join("\n"):" "+tU(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function tL(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tt(null,e)}function tH(e){return tL(e),e.headers=e7.from(e.headers),e.data=e9.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),tD(e.adapter||eX.adapter)(e).then(function(t){return tL(e),t.data=e9.call(e,e.transformResponse,t),t.headers=e7.from(t.headers),t},function(t){return!te(t)&&(tL(e),t&&t.response&&(t.response.data=e9.call(e,e.transformResponse,t.response),t.response.headers=e7.from(t.response.headers))),Promise.reject(t)})}let tM="1.11.0",tF={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{tF[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});let tj={};tF.transitional=function(e,t,r){function n(e,t){return"[Axios v"+tM+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,o)=>{if(!1===e)throw new ew(n(i," has been removed"+(t?" in "+t:"")),ew.ERR_DEPRECATED);return t&&!tj[i]&&(tj[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,o)}},tF.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};var tV={assertOptions:function(e,t,r){if("object"!=typeof e)throw new ew("options must be an object",ew.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),i=n.length;for(;i-- >0;){let o=n[i],s=t[o];if(s){let t=e[o],r=void 0===t||s(t,o,e);if(!0!==r)throw new ew("option "+o+" must be "+r,ew.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new ew("Unknown option "+o,ew.ERR_BAD_OPTION)}},validators:tF};let tK=tV.validators;class tW{constructor(e){this.defaults=e||{},this.interceptors={request:new eN,response:new eN}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){let r,n;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:i,paramsSerializer:o,headers:s}=t=ty(this.defaults,t);void 0!==i&&tV.assertOptions(i,{silentJSONParsing:tK.transitional(tK.boolean),forcedJSONParsing:tK.transitional(tK.boolean),clarifyTimeoutError:tK.transitional(tK.boolean)},!1),null!=o&&(eb.isFunction(o)?t.paramsSerializer={serialize:o}:tV.assertOptions(o,{encode:tK.function,serialize:tK.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),tV.assertOptions(t,{baseUrl:tK.spelling("baseURL"),withXsrfToken:tK.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&eb.merge(s.common,s[t.method]);s&&eb.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=e7.concat(a,s);let u=[],l=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(l=l&&e.synchronous,u.unshift(e.fulfilled,e.rejected))});let c=[];this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let f=0;if(!l){let e=[tH.bind(this),void 0];for(e.unshift(...u),e.push(...c),n=e.length,r=Promise.resolve(t);f<n;)r=r.then(e[f++],e[f++]);return r}n=u.length;let h=t;for(f=0;f<n;){let e=u[f++],t=u[f++];try{h=e(h)}catch(e){t.call(this,e);break}}try{r=tH.call(this,h)}catch(e){return Promise.reject(e)}for(f=0,n=c.length;f<n;)r=r.then(c[f++],c[f++]);return r}getUri(e){return eB(tp((e=ty(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}eb.forEach(["delete","get","head","options"],function(e){tW.prototype[e]=function(t,r){return this.request(ty(r||{},{method:e,url:t,data:(r||{}).data}))}}),eb.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,i){return this.request(ty(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}tW.prototype[e]=t(),tW.prototype[e+"Form"]=t(!0)});var tq=tW;class tG{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});let r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;let n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,i){r.reason||(r.reason=new tt(e,n,i),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new tG(function(t){e=t}),cancel:e}}}var t$=tG;function tz(e){return function(t){return e.apply(null,t)}}function tY(e){return eb.isObject(e)&&!0===e.isAxiosError}let tX={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tX).forEach(([e,t])=>{tX[t]=e});var tJ=tX;function tQ(e){let t=new tq(e),r=c(tq.prototype.request,t);return eb.extend(r,tq.prototype,t,{allOwnKeys:!0}),eb.extend(r,t,null,{allOwnKeys:!0}),r.create=function(t){return tQ(ty(e,t))},r}let tZ=tQ(eX);tZ.Axios=tq,tZ.CanceledError=tt,tZ.CancelToken=t$,tZ.isCancel=te,tZ.VERSION=tM,tZ.toFormData=eP,tZ.AxiosError=ew,tZ.Cancel=tZ.CanceledError,tZ.all=function(e){return Promise.all(e)},tZ.spread=tz,tZ.isAxiosError=tY,tZ.mergeConfig=ty,tZ.AxiosHeaders=e7,tZ.formToJSON=e=>e$(eb.isHTMLForm(e)?new FormData(e):e),tZ.getAdapter=tD,tZ.HttpStatusCode=tJ,tZ.default=tZ,e.exports=tZ},27801:function(e,t,r){"use strict";r.r(t),r.d(t,{compare:function(){return m},concat:function(){return c},fromBase64:function(){return g},fromHex:function(){return d},fromUtf8:function(){return l},readInt16:function(){return C},readInt32:function(){return R},readInt64:function(){return B},readInt8:function(){return x},readUInt16:function(){return S},readUInt32:function(){return T},readUInt64:function(){return I},readUInt8:function(){return E},toBase64:function(){return y},toHex:function(){return f},toUtf8:function(){return u},writeInt16:function(){return O},writeInt32:function(){return P},writeInt64:function(){return k},writeInt8:function(){return A},writeUInt16:function(){return w},writeUInt32:function(){return v},writeUInt64:function(){return _},writeUInt8:function(){return b}});let n="0123456789abcdefABCDEF",i=n.split("").map(e=>e.codePointAt(0)),o=Array(256).fill(!0).map((e,t)=>{let r=String.fromCodePoint(t),i=n.indexOf(r);return i<0?void 0:i<16?i:i-6}),s=new TextEncoder,a=new TextDecoder;function u(e){return a.decode(e)}function l(e){return s.encode(e)}function c(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function f(e){let t=e||new Uint8Array;return t.length>512?p(t):h(t)}function h(e){let t="";for(let r=0;r<e.length;++r)t+=n[o[i[e[r]>>4]]]+n[o[i[15&e[r]]]];return t}function p(e){let t=new Uint8Array(2*e.length);for(let r=0;r<e.length;++r)t[2*r]=i[e[r]>>4],t[2*r+1]=i[15&e[r]];return a.decode(t)}function d(e){let t;let r=s.encode(e||""),n=new Uint8Array(Math.floor(r.length/2));for(t=0;t<n.length;t++){let e=o[r[2*t]],i=o[r[2*t+1]];if(void 0===e||void 0===i)break;n[t]=e<<4|i}return t===n.length?n:n.slice(0,t)}function y(e){return btoa(String.fromCharCode(...e))}function g(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function m(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return e.length===t.length?0:e.length>t.length?1:-1}function b(e,t,r){if(t+1>e.length)throw Error("Offset is outside the bounds of Uint8Array");if(r>255)throw Error(`The value of "value" is out of range. It must be >= 0 and <= 255. Received ${r}`);return e[t]=r,t+1}function w(e,t,r,n){if(t+2>e.length)throw Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>65535)throw Error(`The value of "value" is out of range. It must be >= 0 and <= 65535. Received ${r}`);return"LE"===n?(e[t]=255&r,e[t+1]=r>>8&255):(e[t]=r>>8&255,e[t+1]=255&r),t+2}function v(e,t,r,n){if(t+4>e.length)throw Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>4294967295)throw Error(`The value of "value" is out of range. It must be >= 0 and <= 4294967295. Received ${r}`);return"LE"===n?(e[t]=255&r,e[t+1]=r>>8&255,e[t+2]=r>>16&255,e[t+3]=r>>24&255):(e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r),t+4}function _(e,t,r,n){if(t+8>e.length)throw Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>0xffffffffffffffffn)throw Error(`The value of "value" is out of range. It must be >= 0 and <= ${0xffffffffffffffffn}. Received ${r}`);return"LE"===n?(e[t]=Number(255n&r),e[t+1]=Number(r>>8n&255n),e[t+2]=Number(r>>16n&255n),e[t+3]=Number(r>>24n&255n),e[t+4]=Number(r>>32n&255n),e[t+5]=Number(r>>40n&255n),e[t+6]=Number(r>>48n&255n),e[t+7]=Number(r>>56n&255n)):(e[t]=Number(r>>56n&255n),e[t+1]=Number(r>>48n&255n),e[t+2]=Number(r>>40n&255n),e[t+3]=Number(r>>32n&255n),e[t+4]=Number(r>>24n&255n),e[t+5]=Number(r>>16n&255n),e[t+6]=Number(r>>8n&255n),e[t+7]=Number(255n&r)),t+8}function E(e,t){if(t+1>e.length)throw Error("Offset is outside the bounds of Uint8Array");return e[t]}function S(e,t,r){if(t+2>e.length)throw Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=0;return((r=0+e[t+1])<<8)+e[t]}{let r=0;return((r=0+e[t])<<8)+e[t+1]}}function T(e,t,r){if(t+4>e.length)throw Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=0;return((r=((r=((r=0+e[t+3]>>>0)<<8)+e[t+2]>>>0)<<8)+e[t+1]>>>0)<<8)+e[t]>>>0}{let r=0;return((r=((r=((r=0+e[t]>>>0)<<8)+e[t+1]>>>0)<<8)+e[t+2]>>>0)<<8)+e[t+3]>>>0}}function I(e,t,r){if(t+8>e.length)throw Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=0n;return((r=((r=((r=((r=((r=((r=((r=(r<<8n)+BigInt(e[t+7]))<<8n)+BigInt(e[t+6]))<<8n)+BigInt(e[t+5]))<<8n)+BigInt(e[t+4]))<<8n)+BigInt(e[t+3]))<<8n)+BigInt(e[t+2]))<<8n)+BigInt(e[t+1]))<<8n)+BigInt(e[t])}{let r=0n;return((r=((r=((r=((r=((r=((r=((r=(r<<8n)+BigInt(e[t]))<<8n)+BigInt(e[t+1]))<<8n)+BigInt(e[t+2]))<<8n)+BigInt(e[t+3]))<<8n)+BigInt(e[t+4]))<<8n)+BigInt(e[t+5]))<<8n)+BigInt(e[t+6]))<<8n)+BigInt(e[t+7])}}function A(e,t,r){if(t+1>e.length)throw Error("Offset is outside the bounds of Uint8Array");if(r>127||r<-128)throw Error(`The value of "value" is out of range. It must be >= -128 and <= 127. Received ${r}`);return e[t]=r,t+1}function O(e,t,r,n){if(t+2>e.length)throw Error("Offset is outside the bounds of Uint8Array");if(r>32767||r<-32768)throw Error(`The value of "value" is out of range. It must be >= -32768 and <= 32767. Received ${r}`);return"LE"===(n=n.toUpperCase())?(e[t]=255&r,e[t+1]=r>>8&255):(e[t]=r>>8&255,e[t+1]=255&r),t+2}function P(e,t,r,n){if(t+4>e.length)throw Error("Offset is outside the bounds of Uint8Array");if(r>2147483647||r<-2147483648)throw Error(`The value of "value" is out of range. It must be >= -2147483648 and <= 2147483647. Received ${r}`);return"LE"===(n=n.toUpperCase())?(e[t]=255&r,e[t+1]=r>>8&255,e[t+2]=r>>16&255,e[t+3]=r>>24&255):(e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r),t+4}function k(e,t,r,n){if(t+8>e.length)throw Error("Offset is outside the bounds of Uint8Array");if(r>0x7fffffffffffffffn||r<-0x8000000000000000n)throw Error(`The value of "value" is out of range. It must be >= ${-0x8000000000000000n} and <= ${0x7fffffffffffffffn}. Received ${r}`);return"LE"===(n=n.toUpperCase())?(e[t]=Number(255n&r),e[t+1]=Number(r>>8n&255n),e[t+2]=Number(r>>16n&255n),e[t+3]=Number(r>>24n&255n),e[t+4]=Number(r>>32n&255n),e[t+5]=Number(r>>40n&255n),e[t+6]=Number(r>>48n&255n),e[t+7]=Number(r>>56n&255n)):(e[t]=Number(r>>56n&255n),e[t+1]=Number(r>>48n&255n),e[t+2]=Number(r>>40n&255n),e[t+3]=Number(r>>32n&255n),e[t+4]=Number(r>>24n&255n),e[t+5]=Number(r>>16n&255n),e[t+6]=Number(r>>8n&255n),e[t+7]=Number(255n&r)),t+8}function x(e,t){if(t+1>e.length)throw Error("Offset is outside the bounds of Uint8Array");let r=e[t];return r<=127?r:r-256}function C(e,t,r){if(t+2>e.length)throw Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=e[t]+(e[t+1]<<8);return e[t+1]<=127?r:r-65536}{let r=(e[t]<<8)+e[t+1];return e[t]<=127?r:r-65536}}function R(e,t,r){if(t+4>e.length)throw Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24>>>0);return e[t+3]<=127?r:r-4294967296}{let r=(e[t]<<24>>>0)+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];return e[t]<=127?r:r-4294967296}}function B(e,t,r){if(t+8>e.length)throw Error("Offset is outside the bounds of Uint8Array");r=r.toUpperCase();let n=0n;if("LE"===r)return n=((n=((n=((n=((n=((n=((n=((n=(n<<8n)+BigInt(e[t+7]))<<8n)+BigInt(e[t+6]))<<8n)+BigInt(e[t+5]))<<8n)+BigInt(e[t+4]))<<8n)+BigInt(e[t+3]))<<8n)+BigInt(e[t+2]))<<8n)+BigInt(e[t+1]))<<8n)+BigInt(e[t]),e[t+7]<=127?n:n-0x10000000000000000n;{let r=0n;return r=((r=((r=((r=((r=((r=((r=((r=(r<<8n)+BigInt(e[t]))<<8n)+BigInt(e[t+1]))<<8n)+BigInt(e[t+2]))<<8n)+BigInt(e[t+3]))<<8n)+BigInt(e[t+4]))<<8n)+BigInt(e[t+5]))<<8n)+BigInt(e[t+6]))<<8n)+BigInt(e[t+7]),e[t]<=127?r:r-0x10000000000000000n}}},6713:function(e,t,r){"use strict";r.r(t),r.d(t,{compare:function(){return m},concat:function(){return c},fromBase64:function(){return g},fromHex:function(){return d},fromUtf8:function(){return l},readUInt16:function(){return S},readUInt32:function(){return T},readUInt64:function(){return I},readUInt8:function(){return E},toBase64:function(){return y},toHex:function(){return f},toUtf8:function(){return u},writeUInt16:function(){return w},writeUInt32:function(){return v},writeUInt64:function(){return _},writeUInt8:function(){return b}});let n="0123456789abcdefABCDEF",i=n.split("").map(e=>e.codePointAt(0)),o=Array(256).fill(!0).map((e,t)=>{let r=String.fromCodePoint(t),i=n.indexOf(r);return i<0?void 0:i<16?i:i-6}),s=new TextEncoder,a=new TextDecoder;function u(e){return a.decode(e)}function l(e){return s.encode(e)}function c(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function f(e){let t=e||new Uint8Array;return t.length>512?p(t):h(t)}function h(e){let t="";for(let r=0;r<e.length;++r)t+=n[o[i[e[r]>>4]]]+n[o[i[15&e[r]]]];return t}function p(e){let t=new Uint8Array(2*e.length);for(let r=0;r<e.length;++r)t[2*r]=i[e[r]>>4],t[2*r+1]=i[15&e[r]];return a.decode(t)}function d(e){let t;let r=s.encode(e||""),n=new Uint8Array(Math.floor(r.length/2));for(t=0;t<n.length;t++){let e=o[r[2*t]],i=o[r[2*t+1]];if(void 0===e||void 0===i)break;n[t]=e<<4|i}return t===n.length?n:n.slice(0,t)}function y(e){return btoa(String.fromCharCode(...e))}function g(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function m(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return e.length===t.length?0:e.length>t.length?1:-1}function b(e,t,r){if(t+1>e.length)throw Error("Offset is outside the bounds of Uint8Array");if(r>255)throw Error(`The value of "value" is out of range. It must be >= 0 and <= 255. Received ${r}`);e[t]=r}function w(e,t,r,n){if(t+2>e.length)throw Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>65535)throw Error(`The value of "value" is out of range. It must be >= 0 and <= 65535. Received ${r}`);"LE"===n?(e[t]=255&r,e[t+1]=r>>8&255):(e[t]=r>>8&255,e[t+1]=255&r)}function v(e,t,r,n){if(t+4>e.length)throw Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>4294967295)throw Error(`The value of "value" is out of range. It must be >= 0 and <= 4294967295. Received ${r}`);"LE"===n?(e[t]=255&r,e[t+1]=r>>8&255,e[t+2]=r>>16&255,e[t+3]=r>>24&255):(e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r)}function _(e,t,r,n){if(t+8>e.length)throw Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>0xffffffffffffffffn)throw Error(`The value of "value" is out of range. It must be >= 0 and <= ${0xffffffffffffffffn}. Received ${r}`);"LE"===n?(e[t]=Number(255n&r),e[t+1]=Number(r>>8n&255n),e[t+2]=Number(r>>16n&255n),e[t+3]=Number(r>>24n&255n),e[t+4]=Number(r>>32n&255n),e[t+5]=Number(r>>40n&255n),e[t+6]=Number(r>>48n&255n),e[t+7]=Number(r>>56n&255n)):(e[t]=Number(r>>56n&255n),e[t+1]=Number(r>>48n&255n),e[t+2]=Number(r>>40n&255n),e[t+3]=Number(r>>32n&255n),e[t+4]=Number(r>>24n&255n),e[t+5]=Number(r>>16n&255n),e[t+6]=Number(r>>8n&255n),e[t+7]=Number(255n&r))}function E(e,t){if(t+1>e.length)throw Error("Offset is outside the bounds of Uint8Array");return e[t]}function S(e,t,r){if(t+2>e.length)throw Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=0;return((r=0+e[t+1])<<8)+e[t]}{let r=0;return((r=0+e[t])<<8)+e[t+1]}}function T(e,t,r){if(t+4>e.length)throw Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=0;return((r=((r=((r=0+e[t+3]>>>0)<<8)+e[t+2]>>>0)<<8)+e[t+1]>>>0)<<8)+e[t]>>>0}{let r=0;return((r=((r=((r=0+e[t]>>>0)<<8)+e[t+1]>>>0)<<8)+e[t+2]>>>0)<<8)+e[t+3]>>>0}}function I(e,t,r){if(t+8>e.length)throw Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=0n;return((r=((r=((r=((r=((r=((r=((r=(r<<8n)+BigInt(e[t+7]))<<8n)+BigInt(e[t+6]))<<8n)+BigInt(e[t+5]))<<8n)+BigInt(e[t+4]))<<8n)+BigInt(e[t+3]))<<8n)+BigInt(e[t+2]))<<8n)+BigInt(e[t+1]))<<8n)+BigInt(e[t])}{let r=0n;return((r=((r=((r=((r=((r=((r=((r=(r<<8n)+BigInt(e[t]))<<8n)+BigInt(e[t+1]))<<8n)+BigInt(e[t+2]))<<8n)+BigInt(e[t+3]))<<8n)+BigInt(e[t+4]))<<8n)+BigInt(e[t+5]))<<8n)+BigInt(e[t+6]))<<8n)+BigInt(e[t+7])}}},47410:function(e,t,r){"use strict";function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function o(e){if("function"!=typeof e)throw Error("function expected");return!0}function s(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function a(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function u(e){if(!Array.isArray(e))throw Error("array expected")}function l(e,t){if(!i(!0,t))throw Error(`${e}: array of strings expected`)}function c(e,t){if(!i(!1,t))throw Error(`${e}: array of numbers expected`)}function f(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function h(e){let t="string"==typeof e?e.split(""):e,r=t.length;l("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(u(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(u(t),t.map(t=>{s("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function p(e=""){return s("join",e),{encode:t=>(l("join.decode",t),t.join(e)),decode:t=>(s("join.decode",t),t.split(e))}}function d(e,t="="){return a(e),s("padding",t),{encode(r){for(l("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){l("padding.decode",r);let n=r.length;if(n*e%8)throw Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function y(e){return o(e),{encode:e=>e,decode:t=>e(t)}}r.d(t,{$v:function(){return S},US:function(){return _}});let g=(e,t)=>0===t?e:g(t,e%t),m=(e,t)=>e+(t-g(e,t)),b=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function w(e,t,r,n){if(u(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(m(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${m(t,r)}`);let i=0,o=0,s=b[t],l=b[r]-1,c=[];for(let n of e){if(a(n),n>=s)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,o+t>32)throw Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)c.push((i>>o-r&l)>>>0);let e=b[o];if(void 0===e)throw Error("invalid carry");i&=e-1}if(i=i<<r-o&l,!n&&o>=t)throw Error("Excess padding");if(!n&&i>0)throw Error(`Non-zero padding: ${i}`);return n&&o>0&&c.push(i>>>0),c}function v(e,t=!1){if(a(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(m(8,e)>32||m(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw Error("radix2.encode input should be Uint8Array");return w(Array.from(r),8,e,!t)},decode:r=>(c("radix2.decode",r),Uint8Array.from(w(r,e,8,t)))}}let _=f(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),d(6),p("")),E=[996825010,642813549,513874426,1027748829,705979059],S=f(v(4),h("0123456789abcdef"),p(""),y(e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}))},59969:function(e,t,r){"use strict";r.d(t,{AA:function(){return E},Fg:function(){return C},Sq:function(){return R},Vi:function(){return T},kL:function(){return L},my:function(){return S},n1:function(){return v}});var n=r(50750),i=r(32398),o=r(78185),s=r(53921),a=r(79541),u=r(57635);let l={encode(e){if(2===e.length&&1===e[0]&&a._t(e[1])&&"4e73"===n.$v.encode(e[1]))return{type:"p2a",script:s.Xf.encode(e)}},decode:e=>{if("p2a"===e.type)return[1,n.$v.decode("4e73")]}};function c(e,t){try{return a.dG(e,t),!0}catch(e){return!1}}let f={encode(e){if(2===e.length&&a._t(e[0])&&c(e[0],a.MI.ecdsa)&&"CHECKSIG"===e[1])return{type:"pk",pubkey:e[0]}},decode:e=>"pk"===e.type?[e.pubkey,"CHECKSIG"]:void 0},h={encode(e){if(5===e.length&&"DUP"===e[0]&&"HASH160"===e[1]&&a._t(e[2])&&"EQUALVERIFY"===e[3]&&"CHECKSIG"===e[4])return{type:"pkh",hash:e[2]}},decode:e=>"pkh"===e.type?["DUP","HASH160",e.hash,"EQUALVERIFY","CHECKSIG"]:void 0},p={encode(e){if(3===e.length&&"HASH160"===e[0]&&a._t(e[1])&&"EQUAL"===e[2])return{type:"sh",hash:e[1]}},decode:e=>"sh"===e.type?["HASH160",e.hash,"EQUAL"]:void 0},d={encode(e){if(2===e.length&&0===e[0]&&a._t(e[1])&&32===e[1].length)return{type:"wsh",hash:e[1]}},decode:e=>"wsh"===e.type?[0,e.hash]:void 0},y={encode(e){if(2===e.length&&0===e[0]&&a._t(e[1])&&20===e[1].length)return{type:"wpkh",hash:e[1]}},decode:e=>"wpkh"===e.type?[0,e.hash]:void 0},g={encode(e){let t=e.length-1;if("CHECKMULTISIG"!==e[t])return;let r=e[0],n=e[t-1];if("number"!=typeof r||"number"!=typeof n)return;let i=e.slice(1,-2);if(n===i.length){for(let e of i)if(!a._t(e))return;return{type:"ms",m:r,pubkeys:i}}},decode:e=>"ms"===e.type?[e.m,...e.pubkeys,e.pubkeys.length,"CHECKMULTISIG"]:void 0},m={encode(e){if(2===e.length&&1===e[0]&&a._t(e[1]))return{type:"tr",pubkey:e[1]}},decode:e=>"tr"===e.type?[1,e.pubkey]:void 0},b=[l,f,h,p,d,y,g,m,{encode(e){let t=e.length-1;if("CHECKSIG"!==e[t])return;let r=[];for(let n=0;n<t;n++){let i=e[n];if(1&n){if("CHECKSIGVERIFY"!==i||n===t-1)return;continue}if(!a._t(i))return;r.push(i)}return{type:"tr_ns",pubkeys:r}},decode:e=>{if("tr_ns"!==e.type)return;let t=[];for(let r=0;r<e.pubkeys.length-1;r++)t.push(e.pubkeys[r],"CHECKSIGVERIFY");return t.push(e.pubkeys[e.pubkeys.length-1],"CHECKSIG"),t}},{encode(e){let t=e.length-1;if("NUMEQUAL"!==e[t]||"CHECKSIG"!==e[1])return;let r=[],n=(0,s.zI)(e[t-1]);if("number"==typeof n){for(let n=0;n<t-1;n++){let t=e[n];if(1&n){if(t!==(1===n?"CHECKSIG":"CHECKSIGADD"))throw Error("OutScript.encode/tr_ms: wrong element");continue}if(!a._t(t))throw Error("OutScript.encode/tr_ms: wrong key element");r.push(t)}return{type:"tr_ms",pubkeys:r,m:n}}},decode:e=>{if("tr_ms"!==e.type)return;let t=[e.pubkeys[0],"CHECKSIG"];for(let r=1;r<e.pubkeys.length;r++)t.push(e.pubkeys[r],"CHECKSIGADD");return t.push(e.m,"NUMEQUAL"),t}},{encode:e=>({type:"unknown",script:s.Xf.encode(e)}),decode:e=>"unknown"===e.type?s.Xf.decode(e.script):void 0}],w=i.nn(s.Xf,i.AQ.match(b)),v=i.Gu(w,e=>{if("pk"===e.type&&!c(e.pubkey,a.MI.ecdsa))throw Error("OutScript/pk: wrong key");if(("pkh"===e.type||"sh"===e.type||"wpkh"===e.type)&&(!a._t(e.hash)||20!==e.hash.length))throw Error(`OutScript/${e.type}: wrong hash`);if("wsh"===e.type&&(!a._t(e.hash)||32!==e.hash.length))throw Error("OutScript/wsh: wrong hash");if("tr"===e.type&&(!a._t(e.pubkey)||!c(e.pubkey,a.MI.schnorr)))throw Error("OutScript/tr: wrong taproot public key");if(("ms"===e.type||"tr_ns"===e.type||"tr_ms"===e.type)&&!Array.isArray(e.pubkeys))throw Error("OutScript/multisig: wrong pubkeys array");if("ms"===e.type){let t=e.pubkeys.length;for(let t of e.pubkeys)if(!c(t,a.MI.ecdsa))throw Error("OutScript/multisig: wrong pubkey");if(e.m<=0||t>16||e.m>t)throw Error("OutScript/multisig: invalid params")}if("tr_ns"===e.type||"tr_ms"===e.type){for(let t of e.pubkeys)if(!c(t,a.MI.schnorr))throw Error(`OutScript/${e.type}: wrong pubkey`)}if("tr_ms"===e.type){let t=e.pubkeys.length;if(e.m<=0||t>999||e.m>t)throw Error("OutScript/tr_ms: invalid params")}return e});function _(e,t){if(!a.Wd(e.hash,u.JQ(t)))throw Error("checkScript: wsh wrong witnessScript hash");let r=v.decode(t);if("tr"===r.type||"tr_ns"===r.type||"tr_ms"===r.type)throw Error(`checkScript: P2${r.type} cannot be wrapped in P2SH`);if("wpkh"===r.type||"sh"===r.type)throw Error(`checkScript: P2${r.type} cannot be wrapped in P2WSH`)}function E(e,t,r){if(e){let n=v.decode(e);if("tr_ns"===n.type||"tr_ms"===n.type||"ms"===n.type||"pk"==n.type)throw Error(`checkScript: non-wrapped ${n.type}`);if("sh"===n.type&&t){if(!a.Wd(n.hash,a.M9(t)))throw Error("checkScript: sh wrong redeemScript hash");let e=v.decode(t);if("tr"===e.type||"tr_ns"===e.type||"tr_ms"===e.type)throw Error(`checkScript: P2${e.type} cannot be wrapped in P2SH`);if("sh"===e.type)throw Error("checkScript: P2SH cannot be wrapped in P2SH")}"wsh"===n.type&&r&&_(n,r)}if(t){let e=v.decode(t);"wsh"===e.type&&r&&_(e,r)}}let S=(e,t=a.IB)=>{let r=e.script;if(!a._t(r))throw Error(`Wrong script: ${typeof e.script}, expected Uint8Array`);let n=a.M9(r);E(v.encode({type:"sh",hash:n}),r,e.witnessScript);let i={type:"sh",redeemScript:r,script:v.encode({type:"sh",hash:n}),address:L(t).encode({type:"sh",hash:n})};return e.witnessScript&&(i.witnessScript=e.witnessScript),i},T=(e,t=a.IB)=>{if(!c(e,a.MI.ecdsa))throw Error("P2WPKH: invalid publicKey");if(65===e.length)throw Error("P2WPKH: uncompressed public key");let r=a.M9(e);return{type:"wpkh",script:v.encode({type:"wpkh",hash:r}),address:L(t).encode({type:"wpkh",hash:r})}};function I(e,t,r=!1,n){let o=v.decode(e);if("unknown"===o.type){if(n){let t=i.nn(s.Xf,i.AQ.match(n)).decode(e);if(void 0!==t){if("string"!=typeof t.type||!t.type.startsWith("tr_"))throw Error(`P2TR: invalid custom type=${t.type}`);return}}if(r)return}if(!["tr_ns","tr_ms"].includes(o.type))throw Error(`P2TR: invalid leaf script=${o.type}`);let u=o;if(!r&&u.pubkeys)for(let e of u.pubkeys){if(a.Wd(e,a.PK))throw Error("Unspendable taproot key in leaf script");if(a.Wd(e,t))throw Error("Using P2TR with leaf script with same key as internal key is not supported")}}function A(e){let t=Array.from(e);for(;t.length>=2;){t.sort((e,t)=>(t.weight||1)-(e.weight||1));let e=t.pop(),r=t.pop(),n=(r?.weight||1)+(e?.weight||1);t.push({weight:n,childs:[r?.childs||r,e?.childs||e]})}let r=t[0];return r?.childs||r}function O(e,t=[]){if(!e)throw Error("taprootAddPath: empty tree");if("leaf"===e.type)return{...e,path:t};if("branch"!==e.type)throw Error(`taprootAddPath: wrong type=${e}`);return{...e,path:t,left:O(e.left,[e.right.hash,...t]),right:O(e.right,[e.left.hash,...t])}}function P(e){if(!e)throw Error("taprootAddPath: empty tree");if("leaf"===e.type)return[e];if("branch"!==e.type)throw Error(`taprootWalkTree: wrong type=${e}`);return[...P(e.left),...P(e.right)]}function k(e,t,r=!1,o){if(!e)throw Error("taprootHashTree: empty tree");if(Array.isArray(e)&&1===e.length&&(e=e[0]),!Array.isArray(e)){let{leafVersion:s,script:u}=e;if(e.tapLeafScript||e.tapMerkleRoot&&!a.Wd(e.tapMerkleRoot,i.E_))throw Error("P2TR: tapRoot leafScript cannot have tree");let l="string"==typeof u?n.$v.decode(u):u;if(!a._t(l))throw Error(`checkScript: wrong script type=${l}`);return I(l,t,r,o),{type:"leaf",version:s,script:l,hash:C(l,s)}}if(2!==e.length&&(e=A(e)),2!==e.length)throw Error("hashTree: non binary tree!");let s=k(e[0],t,r,o),u=k(e[1],t,r,o),[l,c]=[s.hash,u.hash];return -1===a.uz(c,l)&&([l,c]=[c,l]),{type:"branch",left:s,right:u,hash:a.bl("TapBranch",l,c)}}let x=192,C=(e,t=x)=>a.bl("TapLeaf",new Uint8Array([t]),s.S2.encode(e));function R(e,t,r=a.IB,s=!1,u){let l,f;if(!e&&!t)throw Error("p2tr: should have pubKey or scriptTree (or both)");let h="string"==typeof e?n.$v.decode(e):e||a.PK;if(!c(h,a.MI.schnorr))throw Error("p2tr: non-schnorr pubkey");let p=t?O(k(t,h,s,u)):void 0,d=p?p.hash:void 0,[y,g]=a.C_(h,d||i.E_);p&&(l=P(p).map(e=>({...e,controlBlock:o.LL.encode({version:(e.version||x)+g,internalKey:h,merklePath:e.path})}))),l&&(f=l.map(e=>[o.LL.decode(e.controlBlock),a.eV(e.script,new Uint8Array([e.version||x]))]));let m={type:"tr",script:v.encode({type:"tr",pubkey:y}),address:L(r).encode({type:"tr",pubkey:y}),tweakedPubkey:y,tapInternalKey:h};return l&&(m.leaves=l),f&&(m.tapLeafScript=f),d&&(m.tapMerkleRoot=d),m}let B=(0,n.Xd)(u.JQ);function U(e,t){if(t.length<2||t.length>40)throw Error("Witness: invalid length");if(e>16)throw Error("Witness: invalid version");if(0===e&&!(20===t.length||32===t.length))throw Error("Witness: invalid length for version")}function N(e,t,r=a.IB){U(e,t);let i=0===e?n.gW:n.iE;return i.encode(r.bech32,[e].concat(i.toWords(t)))}function D(e,t){return B.encode(a.eV(Uint8Array.from(t),e))}function L(e=a.IB){return{encode(t){let{type:r}=t;if("wpkh"===r||"wsh"===r)return N(0,t.hash,e);if("tr"===r)return N(1,t.pubkey,e);if("pkh"===r)return D(t.hash,[e.pubKeyHash]);if("sh"===r)return D(t.hash,[e.scriptHash]);throw Error(`Unknown address type=${r}`)},decode(t){if(t.length<14||t.length>74)throw Error("Invalid address length");if(e.bech32&&t.toLowerCase().startsWith(`${e.bech32}1`)){let r;try{if(r=n.gW.decode(t),0!==r.words[0])throw Error(`bech32: wrong version=${r.words[0]}`)}catch(e){if(0===(r=n.iE.decode(t)).words[0])throw Error(`bech32m: wrong version=${r.words[0]}`)}if(r.prefix!==e.bech32)throw Error(`wrong bech32 prefix=${r.prefix}`);let[i,...o]=r.words,s=n.gW.fromWords(o);if(U(i,s),0===i&&32===s.length)return{type:"wsh",hash:s};if(0===i&&20===s.length)return{type:"wpkh",hash:s};if(1===i&&32===s.length)return{type:"tr",pubkey:s};throw Error("Unknown witness program")}let r=B.decode(t);if(21!==r.length)throw Error("Invalid base58 address");if(r[0]===e.pubKeyHash)return{type:"pkh",hash:r.slice(1)};if(r[0]===e.scriptHash)return{type:"sh",hash:r.slice(1)};throw Error(`Invalid address prefix=${r[0]}`)}}}},78185:function(e,t,r){"use strict";r.d(t,{BG:function(){return C},Jy:function(){return H},LL:function(){return g},OB:function(){return M},P_:function(){return I},Q9:function(){return D},Tt:function(){return T},cP:function(){return F},cy:function(){return S},fH:function(){return A},o:function(){return x},qp:function(){return E},xv:function(){return _}});var n=r(50750),i=r(32398),o=r(53921),s=r(94327),a=r(79541);let u=i.Gu(i.aI(null),e=>(0,a.dG)(e,a.MI.ecdsa)),l=i.Gu(i.aI(32),e=>(0,a.dG)(e,a.MI.schnorr)),c=i.Gu(i.aI(null),e=>{if(64!==e.length&&65!==e.length)throw Error("Schnorr signature should be 64 or 65 bytes long");return e}),f=i.n_({fingerprint:i.lt,path:i.IX(null,i.Fy)}),h=i.n_({hashes:i.IX(o.y1,i.aI(32)),der:f}),p=i.aI(78),d=i.n_({pubKey:l,leafHash:i.aI(32)}),y=i.n_({version:i.U8,internalKey:i.aI(32),merklePath:i.IX(null,i.aI(32))}),g=i.Gu(y,e=>{if(e.merklePath.length>128)throw Error("TaprootControlBlock: merklePath should be of length 0..128 (inclusive)");return e}),m=i.IX(null,i.n_({depth:i.U8,version:i.U8,script:o.S2})),b=i.aI(null),w=i.aI(20),v=i.aI(32),_={unsignedTx:[0,!1,o.IV,[0],[0],!1],xpub:[1,p,f,[],[0,2],!1],txVersion:[2,!1,i.Fy,[2],[2],!1],fallbackLocktime:[3,!1,i.Fy,[],[2],!1],inputCount:[4,!1,o.y1,[2],[2],!1],outputCount:[5,!1,o.y1,[2],[2],!1],txModifiable:[6,!1,i.U8,[],[2],!1],version:[251,!1,i.Fy,[],[0,2],!1],proprietary:[252,b,b,[],[0,2],!1]},E={nonWitnessUtxo:[0,!1,o.cS,[],[0,2],!1],witnessUtxo:[1,!1,o.Jm,[],[0,2],!1],partialSig:[2,u,b,[],[0,2],!1],sighashType:[3,!1,i.Fy,[],[0,2],!1],redeemScript:[4,!1,b,[],[0,2],!1],witnessScript:[5,!1,b,[],[0,2],!1],bip32Derivation:[6,u,f,[],[0,2],!1],finalScriptSig:[7,!1,b,[],[0,2],!1],finalScriptWitness:[8,!1,o.FF,[],[0,2],!1],porCommitment:[9,!1,b,[],[0,2],!1],ripemd160:[10,w,b,[],[0,2],!1],sha256:[11,v,b,[],[0,2],!1],hash160:[12,w,b,[],[0,2],!1],hash256:[13,v,b,[],[0,2],!1],txid:[14,!1,v,[2],[2],!0],index:[15,!1,i.Fy,[2],[2],!0],sequence:[16,!1,i.Fy,[],[2],!0],requiredTimeLocktime:[17,!1,i.Fy,[],[2],!1],requiredHeightLocktime:[18,!1,i.Fy,[],[2],!1],tapKeySig:[19,!1,c,[],[0,2],!1],tapScriptSig:[20,d,c,[],[0,2],!1],tapLeafScript:[21,g,b,[],[0,2],!1],tapBip32Derivation:[22,v,h,[],[0,2],!1],tapInternalKey:[23,!1,l,[],[0,2],!1],tapMerkleRoot:[24,!1,v,[],[0,2],!1],proprietary:[252,b,b,[],[0,2],!1]},S=["txid","sequence","index","witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknown"],T=["partialSig","finalScriptSig","finalScriptWitness","tapKeySig","tapScriptSig"],I={redeemScript:[0,!1,b,[],[0,2],!1],witnessScript:[1,!1,b,[],[0,2],!1],bip32Derivation:[2,u,f,[],[0,2],!1],amount:[3,!1,i.Ko,[2],[2],!0],script:[4,!1,b,[2],[2],!0],tapInternalKey:[5,!1,l,[],[0,2],!1],tapTree:[6,!1,m,[],[0,2],!1],tapBip32Derivation:[7,l,h,[],[0,2],!1],proprietary:[252,b,b,[],[0,2],!1]},A=[],O=i.IX(i.QV,i.n_({key:i.O4(o.y1,i.n_({type:o.y1,key:i.aI(null)})),value:i.aI(o.y1)}));function P(e){let[t,r,n,i,o,s]=e;return{type:t,kc:r,vc:n,reqInc:i,allowInc:o,silentIgnore:s}}function k(e){let t={};for(let r in e){let[n,i,o]=e[r];t[n]=[r,i,o]}return i.re({encodeStream:(t,r)=>{let n=[];for(let t in e){let o=r[t];if(void 0===o)continue;let[s,u,l]=e[t];if(u){let e=o.map(([e,t])=>[u.encode(e),l.encode(t)]);for(let[t,r]of(e.sort((e,t)=>(0,a.uz)(e[0],t[0])),e))n.push({key:{key:t,type:s},value:r})}else n.push({key:{type:s,key:i.E_},value:l.encode(o)})}if(r.unknown)for(let[e,t]of(r.unknown.sort((e,t)=>(0,a.uz)(e[0].key,t[0].key)),r.unknown))n.push({key:e,value:t});O.encodeStream(t,n)},decodeStream:e=>{let r=O.decodeStream(e),i={},o={};for(let e of r){let r="unknown",s=e.key.key,a=e.value;if(t[e.key.type]){let[u,l,c]=t[e.key.type];if(r=u,!l&&s.length)throw Error(`PSBT: Non-empty key for ${r} (key=${n.$v.encode(s)} value=${n.$v.encode(a)}`);if(s=l?l.decode(s):void 0,a=c.decode(a),!l){if(i[r])throw Error(`PSBT: Same keys: ${r} (key=${s} value=${a})`);i[r]=a,o[r]=!0;continue}}else s={type:e.key.type,key:e.key.key};if(o[r])throw Error(`PSBT: Key type with empty key and no key=${r} val=${a}`);i[r]||(i[r]=[]),i[r].push([s,a])}return i}})}i.n_({type:o.y1,key:i.aI(null)});let x=i.Gu(k(E),e=>{if(e.finalScriptWitness&&!e.finalScriptWitness.length)throw Error("validateInput: empty finalScriptWitness");if(e.partialSig&&!e.partialSig.length)throw Error("Empty partialSig");if(e.partialSig)for(let[t]of e.partialSig)(0,a.dG)(t,a.MI.ecdsa);if(e.bip32Derivation)for(let[t]of e.bip32Derivation)(0,a.dG)(t,a.MI.ecdsa);if(void 0!==e.requiredTimeLocktime&&e.requiredTimeLocktime<5e8)throw Error(`validateInput: wrong timeLocktime=${e.requiredTimeLocktime}`);if(void 0!==e.requiredHeightLocktime&&(e.requiredHeightLocktime<=0||e.requiredHeightLocktime>=5e8))throw Error(`validateInput: wrong heighLocktime=${e.requiredHeightLocktime}`);if(e.nonWitnessUtxo&&void 0!==e.index){let t=e.nonWitnessUtxo.outputs.length-1;if(e.index>t)throw Error(`validateInput: index(${e.index}) not in nonWitnessUtxo`);let r=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!(0,a.Wd)(e.witnessUtxo.script,r.script)||e.witnessUtxo.amount!==r.amount))throw Error("validateInput: witnessUtxo different from nonWitnessUtxo")}if(e.tapLeafScript)for(let[t,r]of e.tapLeafScript){if((254&t.version)!==r[r.length-1])throw Error("validateInput: tapLeafScript version mimatch");if(1&r[r.length-1])throw Error("validateInput: tapLeafScript version has parity bit!")}if(e.nonWitnessUtxo&&void 0!==e.index&&e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw Error("nonWitnessUtxo: incorect output index");let t=s.YW.fromRaw(o.cS.encode(e.nonWitnessUtxo),{allowUnknownOutputs:!0,disableScriptCheck:!0,allowUnknownInputs:!0}),r=n.$v.encode(e.txid);if(t.isFinal&&t.id!==r)throw Error(`nonWitnessUtxo: wrong txid, exp=${r} got=${t.id}`)}return e}),C=i.Gu(k(I),e=>{if(e.bip32Derivation)for(let[t]of e.bip32Derivation)(0,a.dG)(t,a.MI.ecdsa);return e}),R=i.Gu(k(_),e=>{if(0===(e.version||0)){if(!e.unsignedTx)throw Error("PSBTv0: missing unsignedTx");for(let t of e.unsignedTx.inputs)if(t.finalScriptSig&&t.finalScriptSig.length)throw Error("PSBTv0: input scriptSig found in unsignedTx")}return e}),B=i.n_({magic:i.mg(i.Z_(new Uint8Array([255])),"psbt"),global:R,inputs:i.IX("global/unsignedTx/inputs/length",x),outputs:i.IX(null,C)}),U=i.n_({magic:i.mg(i.Z_(new Uint8Array([255])),"psbt"),global:R,inputs:i.IX("global/inputCount",x),outputs:i.IX("global/outputCount",C)});function N(e,t,r){for(let n in r){if("unknown"===n||!t[n])continue;let{allowInc:r}=P(t[n]);if(!r.includes(e))throw Error(`PSBTv${e}: field ${n} is not allowed`)}for(let n in t){let{reqInc:i}=P(t[n]);if(i.includes(e)&&void 0===r[n])throw Error(`PSBTv${e}: missing required field ${n}`)}}function D(e,t,r){let n={};for(let i in r){let o=i;if("unknown"!==o){if(!t[o])continue;let{allowInc:r,silentIgnore:n}=P(t[o]);if(!r.includes(e)){if(n)continue;throw Error(`Failed to serialize in PSBTv${e}: ${o} but versions allows inclusion=${r}`)}}n[o]=r[o]}return n}function L(e){let t=e&&e.global&&e.global.version||0;for(let r of(N(t,_,e.global),e.inputs))N(t,E,r);for(let r of e.outputs)N(t,I,r);let r=t?e.global.inputCount:e.global.unsignedTx.inputs.length;if(e.inputs.length<r)throw Error("Not enough inputs");let n=e.inputs.slice(r);if(n.length>1||n.length&&Object.keys(n[0]).length)throw Error(`Unexpected inputs left in tx=${n}`);let i=t?e.global.outputCount:e.global.unsignedTx.outputs.length;if(e.outputs.length<i)throw Error("Not outputs inputs");let o=e.outputs.slice(i);if(o.length>1||o.length&&Object.keys(o[0]).length)throw Error(`Unexpected outputs left in tx=${o}`);return e}function H(e,t,r,i){let o={...r,...t};for(let s in e){let u=s,[l,c,f]=e[u],h=i&&!i.includes(s);if(void 0===t[s]&&s in t){if(h)throw Error(`Cannot remove signed field=${s}`);delete o[s]}else if(c){let e=r&&r[s]?r[s]:[],i=t[u];if(i){if(!Array.isArray(i))throw Error(`keyMap(${s}): KV pairs should be [k, v][]`);i=i.map(e=>{if(2!==e.length)throw Error(`keyMap(${s}): KV pairs should be [k, v][]`);return["string"==typeof e[0]?c.decode(n.$v.decode(e[0])):e[0],"string"==typeof e[1]?f.decode(n.$v.decode(e[1])):e[1]]});let t={},r=(e,r,i)=>{if(void 0===t[e]){t[e]=[r,i];return}let o=n.$v.encode(f.encode(t[e][1])),s=n.$v.encode(f.encode(i));if(o!==s)throw Error(`keyMap(${u}): same key=${e} oldVal=${o} newVal=${s}`)};for(let[t,i]of e)r(n.$v.encode(c.encode(t)),t,i);for(let[e,o]of i){let i=n.$v.encode(c.encode(e));if(void 0===o){if(h)throw Error(`Cannot remove signed field=${u}/${e}`);delete t[i]}else r(i,e,o)}o[u]=Object.values(t)}}else if("string"==typeof o[s])o[s]=f.decode(n.$v.decode(o[s]));else if(h&&s in t&&r&&void 0!==r[s]&&!(0,a.Wd)(f.encode(t[s]),f.encode(r[s])))throw Error(`Cannot change signed field=${s}`)}for(let t in o)e[t]||delete o[t];return o}i.n_({magic:i.mg(i.Z_(new Uint8Array([255])),"psbt"),items:i.IX(null,i.nn(i.IX(i.QV,i.bc([i.$v(o.y1),i.aI(o.Pd)])),i.AQ.dict()))});let M=i.Gu(B,L),F=i.Gu(U,L)},53921:function(e,t,r){"use strict";r.d(t,{FF:function(){return p},IV:function(){return v},Jm:function(){return g},Pd:function(){return c},S2:function(){return h},Xf:function(){return u},cS:function(){return w},y1:function(){return f},zI:function(){return a}});var n,i=r(32398),o=r(79541);function s(e=6,t=!1){return i.re({encodeStream:(e,t)=>{if(0n===t)return;let r=t<0,n=BigInt(t),i=[];for(let e=r?-n:n;e;e>>=8n)i.push(Number(255n&e));i[i.length-1]>=128?i.push(r?128:0):r&&(i[i.length-1]|=128),e.bytes(new Uint8Array(i))},decodeStream:r=>{let n=r.leftBytes;if(n>e)throw Error(`ScriptNum: number (${n}) bigger than limit=${e}`);if(0===n)return 0n;if(t){let e=r.bytes(n,!0);if((127&e[e.length-1])==0&&(n<=1||(128&e[e.length-2])==0))throw Error("Non-minimally encoded ScriptNum")}let i=0,o=0n;for(let e=0;e<n;++e)o|=BigInt(i=r.byte())<<8n*BigInt(e);return i>=128&&(o&=2n**BigInt(8*n)-1n>>1n,o=-o),o}})}function a(e,t=4,r=!0){if("number"==typeof e)return e;if((0,o._t)(e))try{let n=s(t,r).decode(e);if(n>Number.MAX_SAFE_INTEGER)return;return Number(n)}catch(e){}}!function(e){e[e.OP_0=0]="OP_0",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e["1NEGATE"]=79]="1NEGATE",e[e.RESERVED=80]="RESERVED",e[e.OP_1=81]="OP_1",e[e.OP_2=82]="OP_2",e[e.OP_3=83]="OP_3",e[e.OP_4=84]="OP_4",e[e.OP_5=85]="OP_5",e[e.OP_6=86]="OP_6",e[e.OP_7=87]="OP_7",e[e.OP_8=88]="OP_8",e[e.OP_9=89]="OP_9",e[e.OP_10=90]="OP_10",e[e.OP_11=91]="OP_11",e[e.OP_12=92]="OP_12",e[e.OP_13=93]="OP_13",e[e.OP_14=94]="OP_14",e[e.OP_15=95]="OP_15",e[e.OP_16=96]="OP_16",e[e.NOP=97]="NOP",e[e.VER=98]="VER",e[e.IF=99]="IF",e[e.NOTIF=100]="NOTIF",e[e.VERIF=101]="VERIF",e[e.VERNOTIF=102]="VERNOTIF",e[e.ELSE=103]="ELSE",e[e.ENDIF=104]="ENDIF",e[e.VERIFY=105]="VERIFY",e[e.RETURN=106]="RETURN",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e["2DROP"]=109]="2DROP",e[e["2DUP"]=110]="2DUP",e[e["3DUP"]=111]="3DUP",e[e["2OVER"]=112]="2OVER",e[e["2ROT"]=113]="2ROT",e[e["2SWAP"]=114]="2SWAP",e[e.IFDUP=115]="IFDUP",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.EQUALVERIFY=136]="EQUALVERIFY",e[e.RESERVED1=137]="RESERVED1",e[e.RESERVED2=138]="RESERVED2",e[e["1ADD"]=139]="1ADD",e[e["1SUB"]=140]="1SUB",e[e["2MUL"]=141]="2MUL",e[e["2DIV"]=142]="2DIV",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e["0NOTEQUAL"]=146]="0NOTEQUAL",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.LSHIFT=152]="LSHIFT",e[e.RSHIFT=153]="RSHIFT",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMEQUALVERIFY=157]="NUMEQUALVERIFY",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LESSTHAN=159]="LESSTHAN",e[e.GREATERTHAN=160]="GREATERTHAN",e[e.LESSTHANOREQUAL=161]="LESSTHANOREQUAL",e[e.GREATERTHANOREQUAL=162]="GREATERTHANOREQUAL",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.RIPEMD160=166]="RIPEMD160",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CODESEPARATOR=171]="CODESEPARATOR",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKSIGVERIFY=173]="CHECKSIGVERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.CHECKMULTISIGVERIFY=175]="CHECKMULTISIGVERIFY",e[e.NOP1=176]="NOP1",e[e.CHECKLOCKTIMEVERIFY=177]="CHECKLOCKTIMEVERIFY",e[e.CHECKSEQUENCEVERIFY=178]="CHECKSEQUENCEVERIFY",e[e.NOP4=179]="NOP4",e[e.NOP5=180]="NOP5",e[e.NOP6=181]="NOP6",e[e.NOP7=182]="NOP7",e[e.NOP8=183]="NOP8",e[e.NOP9=184]="NOP9",e[e.NOP10=185]="NOP10",e[e.CHECKSIGADD=186]="CHECKSIGADD",e[e.INVALID=255]="INVALID"}(n||(n={}));let u=i.re({encodeStream:(e,t)=>{for(let r of t){if("string"==typeof r){if(void 0===n[r])throw Error(`Unknown opcode=${r}`);e.byte(n[r]);continue}if("number"==typeof r){if(0===r){e.byte(0);continue}if(1<=r&&r<=16){e.byte(n.OP_1-1+r);continue}}if("number"==typeof r&&(r=s().encode(BigInt(r))),!(0,o._t)(r))throw Error(`Wrong Script OP=${r} (${typeof r})`);let t=r.length;t<n.PUSHDATA1?e.byte(t):t<=255?(e.byte(n.PUSHDATA1),e.byte(t)):t<=65535?(e.byte(n.PUSHDATA2),e.bytes(i.Ps.encode(t))):(e.byte(n.PUSHDATA4),e.bytes(i.Fy.encode(t))),e.bytes(r)}},decodeStream:e=>{let t=[];for(;!e.isEnd();){let r=e.byte();if(n.OP_0<r&&r<=n.PUSHDATA4){let o;if(r<n.PUSHDATA1)o=r;else if(r===n.PUSHDATA1)o=i.U8.decodeStream(e);else if(r===n.PUSHDATA2)o=i.Ps.decodeStream(e);else if(r===n.PUSHDATA4)o=i.Fy.decodeStream(e);else throw Error("Should be not possible");t.push(e.bytes(o))}else if(0===r)t.push(0);else if(n.OP_1<=r&&r<=n.OP_16)t.push(r-(n.OP_1-1));else{let e=n[r];if(void 0===e)throw Error(`Unknown opcode=${r.toString(16)}`);t.push(e)}}return t}}),l={253:[253,2,253n,65535n],254:[254,4,65536n,4294967295n],255:[255,8,4294967296n,0xffffffffffffffffn]},c=i.re({encodeStream:(e,t)=>{if("number"==typeof t&&(t=BigInt(t)),0n<=t&&t<=252n)return e.byte(Number(t));for(let[r,n,i,o]of Object.values(l))if(!(i>t)&&!(t>o)){e.byte(r);for(let r=0;r<n;r++)e.byte(Number(t>>8n*BigInt(r)&255n));return}throw e.err(`VarInt too big: ${t}`)},decodeStream:e=>{let t=e.byte();if(t<=252)return BigInt(t);let[r,n,i]=l[t],o=0n;for(let t=0;t<n;t++)o|=BigInt(e.byte())<<8n*BigInt(t);if(o<i)throw e.err(`Wrong CompactSize(${8*n})`);return o}}),f=i.nn(c,i.AQ.numberBigint),h=i.aI(c),p=i.IX(f,h),d=e=>i.IX(c,e),y=i.n_({txid:i.aI(32,!0),index:i.Fy,finalScriptSig:h,sequence:i.Fy}),g=i.n_({amount:i.Tq,script:h}),m=i.n_({version:i.WS,segwitFlag:i.Cc(new Uint8Array([0,1])),inputs:d(y),outputs:d(g),witnesses:i.K("segwitFlag",i.IX("inputs/length",p)),lockTime:i.Fy});function b(e){if(e.segwitFlag&&e.witnesses&&!e.witnesses.length)throw Error("Segwit flag with empty witnesses array");return e}let w=i.Gu(m,b),v=i.n_({version:i.WS,inputs:d(y),outputs:d(g),lockTime:i.Fy})},94327:function(e,t,r){"use strict";r.d(t,{WE:function(){return _},cm:function(){return i},JL:function(){return n},YW:function(){return R},EV:function(){return U}});var n,i,o=r(50750),s=r(32398),a=r(59969),u=r(78185),l=r(53921),c=r(79541),f=r(57635);function h(e){if(e.nonWitnessUtxo){if(void 0===e.index)throw Error("Unknown input index");return e.nonWitnessUtxo.outputs[e.index]}if(e.witnessUtxo)return e.witnessUtxo;throw Error("Cannot find previous output info")}function p(e,t,r,n=!1){let i,{nonWitnessUtxo:s,txid:f}=e;"string"==typeof s&&(s=o.$v.decode(s)),(0,c._t)(s)&&(s=l.cS.decode(s)),"nonWitnessUtxo"in e||void 0!==s||(s=t?.nonWitnessUtxo),"string"==typeof f&&(f=o.$v.decode(f)),void 0===f&&(f=t?.txid);let h={...t,...e,nonWitnessUtxo:s,txid:f};return"nonWitnessUtxo"in e||void 0!==h.nonWitnessUtxo||delete h.nonWitnessUtxo,void 0===h.sequence&&(h.sequence=_),null===h.tapMerkleRoot&&delete h.tapMerkleRoot,h=u.Jy(u.qp,h,t,r),u.o.encode(h),h.nonWitnessUtxo&&void 0!==h.index?i=h.nonWitnessUtxo.outputs[h.index]:h.witnessUtxo&&(i=h.witnessUtxo),i&&!n&&(0,a.AA)(i&&i.script,h.redeemScript,h.witnessScript),h}function d(e,t=!1){let r="legacy",i=n.ALL,o=h(e),s=a.n1.decode(o.script),u=s.type,l=s,c=[s];if("tr"===s.type)return i=n.DEFAULT,{txType:"taproot",type:"tr",last:s,lastScript:o.script,defaultSighash:i,sighash:e.sighashType||i};{if(("wpkh"===s.type||"wsh"===s.type)&&(r="segwit"),"sh"===s.type){if(!e.redeemScript)throw Error("inputType: sh without redeemScript");let t=a.n1.decode(e.redeemScript);("wpkh"===t.type||"wsh"===t.type)&&(r="segwit"),c.push(t),l=t,u+=`-${t.type}`}if("wsh"===l.type){if(!e.witnessScript)throw Error("inputType: wsh without witnessScript");let t=a.n1.decode(e.witnessScript);"wsh"===t.type&&(r="segwit"),c.push(t),l=t,u+=`-${t.type}`}let n=c[c.length-1];if("sh"===n.type||"wsh"===n.type)throw Error("inputType: sh/wsh cannot be terminal type");let o=a.n1.encode(n),f={type:u,txType:r,last:n,lastScript:o,defaultSighash:i,sighash:e.sighashType||i};if("legacy"===r&&!t&&!e.nonWitnessUtxo)throw Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return f}}let y=e=>Math.ceil(e/4),g=new Uint8Array(32),m={amount:0xffffffffffffffffn,script:s.E_},b=8,w=2,v=0,_=4294967295;s.AQ.decimal(b);let E=(e,t)=>void 0===e?t:e;function S(e){if(Array.isArray(e))return e.map(e=>S(e));if((0,c._t)(e))return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e)||null===e)return e;if("object"==typeof e)return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,S(t)]));throw Error(`cloneDeep: unknown type=${e} (${typeof e})`)}function T(e,t,r,n=s.E_){return(0,c.Wd)(r,t)&&(e=c.Xn(e,n),t=c.fm(e)),{privKey:e,pubKey:t}}function I(e){if(void 0===e.script||void 0===e.amount)throw Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}function A(e){if(void 0===e.txid||void 0===e.index)throw Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:E(e.sequence,_),finalScriptSig:E(e.finalScriptSig,s.E_)}}function O(e){for(let t in e){let r=t;u.cy.includes(r)||delete e[r]}}!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY"}(n||(n={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY"}(i||(i={}));let P=s.n_({txid:s.aI(32,!0),index:s.Fy});function k(e){if("number"!=typeof e||"string"!=typeof i[e])throw Error(`Invalid SigHash=${e}`);return e}function x(e){let t=31&e;return{isAny:!!(e&n.ANYONECANPAY),isNone:t===n.NONE,isSingle:t===n.SINGLE}}function C(e){if(void 0!==e&&"[object Object]"!==({}).toString.call(e))throw Error(`Wrong object type for transaction options: ${e}`);let t={...e,version:E(e.version,w),lockTime:E(e.lockTime,0),PSBTVersion:E(e.PSBTVersion,0)};if(void 0!==t.allowUnknowInput&&(e.allowUnknownInputs=t.allowUnknowInput),void 0!==t.allowUnknowOutput&&(e.allowUnknownOutputs=t.allowUnknowOutput),![-1,0,1,2,3].includes(t.version))throw Error(`Unknown version: ${t.version}`);if("number"!=typeof t.lockTime)throw Error("Transaction lock time should be number");if(s.Fy.encode(t.lockTime),0!==t.PSBTVersion&&2!==t.PSBTVersion)throw Error(`Unknown PSBT version ${t.PSBTVersion}`);for(let e of["allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){let r=t[e];if(void 0!==r&&"boolean"!=typeof r)throw Error(`Transation options wrong type: ${e}=${r} (${typeof r})`)}if(void 0!==t.customScripts){let e=t.customScripts;if(!Array.isArray(e))throw Error(`wrong custom scripts type (expected array): customScripts=${e} (${typeof e})`);for(let t of e)if("function"!=typeof t.encode||"function"!=typeof t.decode||void 0!==t.finalizeTaproot&&"function"!=typeof t.finalizeTaproot)throw Error(`wrong script=${t} (${typeof t})`)}return Object.freeze(t)}class R{constructor(e={}){this.global={},this.inputs=[],this.outputs=[];let t=this.opts=C(e);t.lockTime!==v&&(this.global.fallbackLocktime=t.lockTime),this.global.txVersion=t.version}static fromRaw(e,t={}){let r=l.cS.decode(e),n=new R({...t,version:r.version,lockTime:r.lockTime});for(let e of r.outputs)n.addOutput(e);if(n.outputs=r.outputs,n.inputs=r.inputs,r.witnesses)for(let e=0;e<r.witnesses.length;e++)n.inputs[e].finalScriptWitness=r.witnesses[e];return n}static fromPSBT(e,t={}){let r;try{r=u.OB.decode(e)}catch(t){try{r=u.cP.decode(e)}catch(e){throw t}}let n=r.global.version||0;if(0!==n&&2!==n)throw Error(`Wrong PSBT version=${n}`);let i=r.global.unsignedTx,o=0===n?i?.version:r.global.txVersion,a=0===n?i?.lockTime:r.global.fallbackLocktime,l=new R({...t,version:o,lockTime:a,PSBTVersion:n}),c=0===n?i?.inputs.length:r.global.inputCount;l.inputs=r.inputs.slice(0,c).map((e,t)=>({finalScriptSig:s.E_,...r.global.unsignedTx?.inputs[t],...e}));let f=0===n?i?.outputs.length:r.global.outputCount;return l.outputs=r.outputs.slice(0,f).map((e,t)=>({...e,...r.global.unsignedTx?.outputs[t]})),l.global={...r.global,txVersion:o},a!==v&&(l.global.fallbackLocktime=a),l}toPSBT(e=this.opts.PSBTVersion){if(0!==e&&2!==e)throw Error(`Wrong PSBT version=${e}`);let t=this.inputs.map(t=>u.Q9(e,u.qp,t));for(let e of t)e.partialSig&&!e.partialSig.length&&delete e.partialSig,e.finalScriptSig&&!e.finalScriptSig.length&&delete e.finalScriptSig,e.finalScriptWitness&&!e.finalScriptWitness.length&&delete e.finalScriptWitness;let r=this.outputs.map(t=>u.Q9(e,u.P_,t)),n={...this.global};return 0===e?(n.unsignedTx=l.IV.decode(l.IV.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(A).map(e=>({...e,finalScriptSig:s.E_})),outputs:this.outputs.map(I)})),delete n.fallbackLocktime,delete n.txVersion):(n.version=e,n.txVersion=this.version,n.inputCount=this.inputs.length,n.outputCount=this.outputs.length,n.fallbackLocktime&&n.fallbackLocktime===v&&delete n.fallbackLocktime),this.opts.bip174jsCompat&&(t.length||t.push({}),r.length||r.push({})),(0===e?u.OB:u.cP).encode({global:n,inputs:t,outputs:r})}get lockTime(){let e=v,t=0,r=v,n=0;for(let i of this.inputs)i.requiredHeightLocktime&&(e=Math.max(e,i.requiredHeightLocktime),t++),i.requiredTimeLocktime&&(r=Math.max(r,i.requiredTimeLocktime),n++);return t&&t>=n?e:r!==v?r:this.global.fallbackLocktime||v}get version(){if(void 0===this.global.txVersion)throw Error("No global.txVersion");return this.global.txVersion}inputStatus(e){this.checkInputIdx(e);let t=this.inputs[e];return t.finalScriptSig&&t.finalScriptSig.length||t.finalScriptWitness&&t.finalScriptWitness.length?"finalized":t.tapKeySig||t.tapScriptSig&&t.tapScriptSig.length||t.partialSig&&t.partialSig.length?"signed":"unsigned"}inputSighash(e){this.checkInputIdx(e);let t=this.inputs[e].sighashType,r=void 0===t?n.DEFAULT:t,i=r===n.DEFAULT?n.ALL:3&r;return{sigInputs:r&n.ANYONECANPAY,sigOutputs:i}}signStatus(){let e=!0,t=!0,r=[],i=[];for(let o=0;o<this.inputs.length;o++){if("unsigned"===this.inputStatus(o))continue;let{sigInputs:s,sigOutputs:a}=this.inputSighash(o);if(s===n.ANYONECANPAY?r.push(o):e=!1,a===n.ALL)t=!1;else if(a===n.SINGLE)i.push(o);else if(a===n.NONE);else throw Error(`Wrong signature hash output type: ${a}`)}return{addInput:e,addOutput:t,inputs:r,outputs:i}}get isFinal(){for(let e=0;e<this.inputs.length;e++)if("finalized"!==this.inputStatus(e))return!1;return!0}get hasWitnesses(){let e=!1;for(let t of this.inputs)t.finalScriptWitness&&t.finalScriptWitness.length&&(e=!0);return e}get weight(){if(!this.isFinal)throw Error("Transaction is not finalized");let e=32,t=this.outputs.map(I);for(let r of(e+=4*l.y1.encode(this.outputs.length).length,t))e+=32+4*l.S2.encode(r.script).length;for(let t of(this.hasWitnesses&&(e+=2),e+=4*l.y1.encode(this.inputs.length).length,this.inputs))e+=160+4*l.S2.encode(t.finalScriptSig||s.E_).length,this.hasWitnesses&&t.finalScriptWitness&&(e+=l.FF.encode(t.finalScriptWitness).length);return e}get vsize(){return y(this.weight)}toBytes(e=!1,t=!1){return l.cS.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(A).map(t=>({...t,finalScriptSig:e&&t.finalScriptSig||s.E_})),outputs:this.outputs.map(I),witnesses:this.inputs.map(e=>e.finalScriptWitness||[]),segwitFlag:t&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return o.$v.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw Error("Transaction is not finalized");return o.$v.encode(c.R2(this.toBytes(!0)))}get id(){if(!this.isFinal)throw Error("Transaction is not finalized");return o.$v.encode(c.R2(this.toBytes(!0)).reverse())}checkInputIdx(e){if(!Number.isSafeInteger(e)||0>e||e>=this.inputs.length)throw Error(`Wrong input index=${e}`)}getInput(e){return this.checkInputIdx(e),S(this.inputs[e])}get inputsLength(){return this.inputs.length}addInput(e,t=!1){if(!t&&!this.signStatus().addInput)throw Error("Tx has signed inputs, cannot add new one");return this.inputs.push(p(e,void 0,void 0,this.opts.disableScriptCheck)),this.inputs.length-1}updateInput(e,t,r=!1){let n;if(this.checkInputIdx(e),!r){let t=this.signStatus();(!t.addInput||t.inputs.includes(e))&&(n=u.Tt)}this.inputs[e]=p(t,this.inputs[e],n,this.opts.disableScriptCheck)}checkOutputIdx(e){if(!Number.isSafeInteger(e)||0>e||e>=this.outputs.length)throw Error(`Wrong output index=${e}`)}getOutput(e){return this.checkOutputIdx(e),S(this.outputs[e])}getOutputAddress(e,t=c.IB){let r=this.getOutput(e);if(r.script)return(0,a.kL)(t).encode(a.n1.decode(r.script))}get outputsLength(){return this.outputs.length}normalizeOutput(e,t,r){let{amount:n,script:i}=e;if(void 0===n&&(n=t?.amount),"bigint"!=typeof n)throw Error(`Wrong amount type, should be of type bigint in sats, but got ${n} of type ${typeof n}`);"string"==typeof i&&(i=o.$v.decode(i)),void 0===i&&(i=t?.script);let s={...t,...e,amount:n,script:i};if(void 0===s.amount&&delete s.amount,s=u.Jy(u.P_,s,t,r),u.BG.encode(s),s.script&&!this.opts.allowUnknownOutputs&&"unknown"===a.n1.decode(s.script).type)throw Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownOutputs=true, if you sure");return this.opts.disableScriptCheck||(0,a.AA)(s.script,s.redeemScript,s.witnessScript),s}addOutput(e,t=!1){if(!t&&!this.signStatus().addOutput)throw Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(e)),this.outputs.length-1}updateOutput(e,t,r=!1){let n;if(this.checkOutputIdx(e),!r){let t=this.signStatus();(!t.addOutput||t.outputs.includes(e))&&(n=u.fH)}this.outputs[e]=this.normalizeOutput(t,this.outputs[e],n)}addOutputAddress(e,t,r=c.IB){return this.addOutput({script:a.n1.encode((0,a.kL)(r).decode(e)),amount:t})}get fee(){let e=0n;for(let t of this.inputs){let r=h(t);if(!r)throw Error("Empty input amount");e+=r.amount}for(let t of this.outputs.map(I))e-=t.amount;return e}preimageLegacy(e,t,r){let{isAny:n,isNone:i,isSingle:o}=x(r);if(e<0||!Number.isSafeInteger(e))throw Error(`Invalid input idx=${e}`);if(o&&e>=this.outputs.length||e>=this.inputs.length)return s.is.encode(1n);t=l.Xf.encode(l.Xf.decode(t).filter(e=>"CODESEPARATOR"!==e));let a=this.inputs.map(A).map((r,n)=>({...r,finalScriptSig:n===e?t:s.E_}));n?a=[a[e]]:(i||o)&&(a=a.map((t,r)=>({...t,sequence:r===e?t.sequence:0})));let u=this.outputs.map(I);i?u=[]:o&&(u=u.slice(0,e).fill(m).concat([u[e]]));let f=l.cS.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:a,outputs:u});return c.R2(f,s.WS.encode(r))}preimageWitnessV0(e,t,r,n){let{isAny:i,isNone:o,isSingle:a}=x(r),u=g,f=g,h=g,p=this.inputs.map(A),d=this.outputs.map(I);i||(u=c.R2(...p.map(P.encode))),i||a||o||(f=c.R2(...p.map(e=>s.Fy.encode(e.sequence)))),a||o?a&&e<d.length&&(h=c.R2(l.Jm.encode(d[e]))):h=c.R2(...d.map(l.Jm.encode));let y=p[e];return c.R2(s.WS.encode(this.version),u,f,s.aI(32,!0).encode(y.txid),s.Fy.encode(y.index),l.S2.encode(t),s.Tq.encode(n),s.Fy.encode(y.sequence),h,s.Fy.encode(this.lockTime),s.Fy.encode(r))}preimageWitnessV1(e,t,r,i,o=-1,u,h=192,p){if(!Array.isArray(i)||this.inputs.length!==i.length)throw Error(`Invalid amounts array=${i}`);if(!Array.isArray(t)||this.inputs.length!==t.length)throw Error(`Invalid prevOutScript array=${t}`);let d=[s.U8.encode(0),s.U8.encode(r),s.WS.encode(this.version),s.Fy.encode(this.lockTime)],y=r===n.DEFAULT?n.ALL:3&r,m=r&n.ANYONECANPAY,b=this.inputs.map(A),w=this.outputs.map(I);m!==n.ANYONECANPAY&&d.push(...[b.map(P.encode),i.map(s.Tq.encode),t.map(l.S2.encode),b.map(e=>s.Fy.encode(e.sequence))].map(e=>f.JQ((0,c.eV)(...e)))),y===n.ALL&&d.push(f.JQ((0,c.eV)(...w.map(l.Jm.encode))));let v=(p?1:0)|(u?2:0);if(d.push(new Uint8Array([v])),m===n.ANYONECANPAY){let r=b[e];d.push(P.encode(r),s.Tq.encode(i[e]),l.S2.encode(t[e]),s.Fy.encode(r.sequence))}else d.push(s.Fy.encode(e));return 1&v&&d.push(f.JQ(l.S2.encode(p||s.E_))),y===n.SINGLE&&d.push(e<w.length?f.JQ(l.Jm.encode(w[e])):g),u&&d.push((0,a.Fg)(u,h),s.U8.encode(0),s.WS.encode(o)),c.bl("TapSighash",...d)}signIdx(e,t,r,i){this.checkInputIdx(t);let o=this.inputs[t],u=d(o,this.opts.allowLegacyWitnessUtxo);if(!(0,c._t)(e)){if(!o.bip32Derivation||!o.bip32Derivation.length)throw Error("bip32Derivation: empty");let r=o.bip32Derivation.filter(t=>t[1].fingerprint==e.fingerprint).map(([t,{path:r}])=>{let n=e;for(let e of r)n=n.deriveChild(e);if(!(0,c.Wd)(n.publicKey,t))throw Error("bip32Derivation: wrong pubKey");if(!n.privateKey)throw Error("bip32Derivation: no privateKey");return n});if(!r.length)throw Error(`bip32Derivation: no items with fingerprint=${e.fingerprint}`);let n=!1;for(let e of r)this.signIdx(e.privateKey,t)&&(n=!0);return n}r?r.forEach(k):r=[u.defaultSighash];let f=u.sighash;if(!r.includes(f))throw Error(`Input with not allowed sigHash=${f}. Allowed: ${r.join(", ")}`);let{sigOutputs:p}=this.inputSighash(t);if(p===n.SINGLE&&t>=this.outputs.length)throw Error(`Input with sighash SINGLE, but there is no output with corresponding index=${t}`);let y=h(o);if("taproot"===u.txType){let r=this.inputs.map(h),u=r.map(e=>e.script),p=r.map(e=>e.amount),d=!1,y=c.fm(e),g=o.tapMerkleRoot||s.E_;if(o.tapInternalKey){let{pubKey:r,privKey:a}=T(e,y,o.tapInternalKey,g),[l,h]=c.C_(o.tapInternalKey,g);if((0,c.Wd)(l,r)){let e=this.preimageWitnessV1(t,u,f,p),r=(0,c.eV)(c.nF(e,a,i),f!==n.DEFAULT?new Uint8Array([f]):s.E_);this.updateInput(t,{tapKeySig:r},!0),d=!0}}if(o.tapLeafScript)for(let[r,h]of(o.tapScriptSig=o.tapScriptSig||[],o.tapLeafScript)){let r=h.subarray(0,-1),o=l.Xf.decode(r),g=h[h.length-1],m=(0,a.Fg)(r,g);if(-1===o.findIndex(e=>(0,c._t)(e)&&(0,c.Wd)(e,y)))continue;let b=this.preimageWitnessV1(t,u,f,p,void 0,r,g),w=(0,c.eV)(c.nF(b,e,i),f!==n.DEFAULT?new Uint8Array([f]):s.E_);this.updateInput(t,{tapScriptSig:[[{pubKey:y,leafHash:m},w]]},!0),d=!0}if(!d)throw Error("No taproot scripts signed")}else{let r;let n=c.kM(e),i=!1,o=c.M9(n);for(let e of l.Xf.decode(u.lastScript))(0,c._t)(e)&&((0,c.Wd)(e,n)||(0,c.Wd)(e,o))&&(i=!0);if(!i)throw Error(`Input script doesn't have pubKey: ${u.lastScript}`);if("legacy"===u.txType)r=this.preimageLegacy(t,u.lastScript,f);else if("segwit"===u.txType){let e=u.lastScript;"wpkh"===u.last.type&&(e=a.n1.encode({type:"pkh",hash:u.last.hash})),r=this.preimageWitnessV0(t,e,f,y.amount)}else throw Error(`Transaction/sign: unknown tx type: ${u.txType}`);let s=c.P8(r,e,this.opts.lowR);this.updateInput(t,{partialSig:[[n,(0,c.eV)(s,new Uint8Array([f]))]]},!0)}return!0}sign(e,t,r){let n=0;for(let i=0;i<this.inputs.length;i++)try{this.signIdx(e,i,t,r)&&n++}catch(e){}if(!n)throw Error("No inputs signed");return n}finalizeIdx(e){let t,r;if(this.checkInputIdx(e),this.fee<0n)throw Error("Outputs spends more than inputs amount");let n=this.inputs[e],i=d(n,this.opts.allowLegacyWitnessUtxo);if("taproot"===i.txType){if(n.tapKeySig)n.finalScriptWitness=[n.tapKeySig];else if(n.tapLeafScript&&n.tapScriptSig){for(let[e,t]of n.tapLeafScript.sort((e,t)=>u.LL.encode(e[0]).length-u.LL.encode(t[0]).length)){let r=t.slice(0,-1),i=t[t.length-1],o=a.n1.decode(r),f=(0,a.Fg)(r,i),h=n.tapScriptSig.filter(e=>(0,c.Wd)(e[0].leafHash,f)),p=[];if("tr_ms"===o.type){let e=o.m,t=o.pubkeys,r=0;for(let n of t){let t=h.findIndex(e=>(0,c.Wd)(e[0].pubKey,n));if(r===e||-1===t){p.push(s.E_);continue}p.push(h[t][1]),r++}if(r!==e)continue}else if("tr_ns"===o.type){for(let e of o.pubkeys){let t=h.findIndex(t=>(0,c.Wd)(t[0].pubKey,e));-1!==t&&p.push(h[t][1])}if(p.length!==o.pubkeys.length)continue}else if("unknown"===o.type&&this.opts.allowUnknownInputs){let e=l.Xf.decode(r);if(!(p=h.map(([{pubKey:t},r])=>{let n=e.findIndex(e=>(0,c._t)(e)&&(0,c.Wd)(e,t));if(-1===n)throw Error("finalize/taproot: cannot find position of pubkey in script");return{signature:r,pos:n}}).sort((e,t)=>e.pos-t.pos).map(e=>e.signature)).length)continue}else{let t=this.opts.customScripts;if(t)for(let i of t){if(!i.finalizeTaproot)continue;let t=l.Xf.decode(r),o=i.encode(t);if(void 0===o)continue;let a=i.finalizeTaproot(r,o,h);if(a){n.finalScriptWitness=a.concat(u.LL.encode(e)),n.finalScriptSig=s.E_,O(n);return}}throw Error("Finalize: Unknown tapLeafScript")}n.finalScriptWitness=p.reverse().concat([r,u.LL.encode(e)]);break}if(!n.finalScriptWitness)throw Error("finalize/taproot: empty witness")}else throw Error("finalize/taproot: unknown input");n.finalScriptSig=s.E_,O(n);return}if(!n.partialSig||!n.partialSig.length)throw Error("Not enough partial sign");let o=s.E_,h=[];if("ms"===i.last.type){let e=i.last.m,t=i.last.pubkeys,r=[];for(let e of t){let t=n.partialSig.find(t=>(0,c.Wd)(e,t[0]));t&&r.push(t[1])}if((r=r.slice(0,e)).length!==e)throw Error(`Multisig: wrong signatures count, m=${e} n=${t.length} signatures=${r.length}`);o=l.Xf.encode([0,...r])}else if("pk"===i.last.type)o=l.Xf.encode([n.partialSig[0][1]]);else if("pkh"===i.last.type)o=l.Xf.encode([n.partialSig[0][1],n.partialSig[0][0]]);else if("wpkh"===i.last.type)o=s.E_,h=[n.partialSig[0][1],n.partialSig[0][0]];else if("unknown"===i.last.type&&!this.opts.allowUnknownInputs)throw Error("Unknown inputs not allowed");if(i.type.includes("wsh-")&&(o.length&&i.lastScript.length&&(h=l.Xf.decode(o).map(e=>{if(0===e)return s.E_;if((0,c._t)(e))return e;throw Error(`Wrong witness op=${e}`)})),h=h.concat(i.lastScript)),"segwit"===i.txType&&(r=h),i.type.startsWith("sh-wsh-")?t=l.Xf.encode([l.Xf.encode([0,f.JQ(i.lastScript)])]):i.type.startsWith("sh-")?t=l.Xf.encode([...l.Xf.decode(o),i.lastScript]):i.type.startsWith("wsh-")||"segwit"!==i.txType&&(t=o),!t&&!r)throw Error("Unknown error finalizing input");t&&(n.finalScriptSig=t),r&&(n.finalScriptWitness=r),O(n)}finalize(){for(let e=0;e<this.inputs.length;e++)this.finalizeIdx(e)}extract(){if(!this.isFinal)throw Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw Error("Transaction has no outputs");if(this.fee<0n)throw Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(e){for(let t of["PSBTVersion","version","lockTime"])if(this.opts[t]!==e.opts[t])throw Error(`Transaction/combine: different ${t} this=${this.opts[t]} other=${e.opts[t]}`);for(let t of["inputs","outputs"])if(this[t].length!==e[t].length)throw Error(`Transaction/combine: different ${t} length this=${this[t].length} other=${e[t].length}`);let t=this.global.unsignedTx?l.IV.encode(this.global.unsignedTx):s.E_,r=e.global.unsignedTx?l.IV.encode(e.global.unsignedTx):s.E_;if(!(0,c.Wd)(t,r))throw Error("Transaction/combine: different unsigned tx");this.global=u.Jy(u.xv,this.global,e.global);for(let t=0;t<this.inputs.length;t++)this.updateInput(t,e.inputs[t],!0);for(let t=0;t<this.outputs.length;t++)this.updateOutput(t,e.outputs[t],!0);return this}clone(){return R.fromPSBT(this.toPSBT(this.opts.PSBTVersion),this.opts)}}let B=2147483648;function U(e){let t=[];if(!/^[mM]'?/.test(e))throw Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return t;for(let r of e.replace(/^[mM]'?\//,"").split("/")){let e=/^(\d+)('?)$/.exec(r);if(!e||3!==e.length)throw Error(`Invalid child index: ${r}`);let n=+e[1];if(!Number.isSafeInteger(n)||n>=B)throw Error("Invalid index");"'"===e[2]&&(n+=B),t.push(n)}return t}},79541:function(e,t,r){"use strict";r.d(t,{IB:function(){return j},MI:function(){return n},PK:function(){return F},Pq:function(){return V},uz:function(){return K},eV:function(){return A},Wd:function(){return O},M9:function(){return P},_t:function(){return I},kM:function(){return C},fm:function(){return x},R2:function(){return k},P8:function(){return B},nF:function(){return U},bl:function(){return N},Xn:function(){return H},C_:function(){return M},dG:function(){return D}});var n,i=r(89326),o=r(81158),s=r(86641);let a=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),u=new Uint8Array(Array(16).fill(0).map((e,t)=>t)),l=u.map(e=>(9*e+5)%16),c=[u],f=[l];for(let e=0;e<4;e++)for(let t of[c,f])t.push(t[e].map(e=>a[e]));let h=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),p=c.map((e,t)=>e.map(e=>h[t][e])),d=f.map((e,t)=>e.map(e=>h[t][e])),y=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),g=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function m(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}let b=new Uint32Array(16);class w extends o.VR{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)b[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,i=0|this.h1,o=i,a=0|this.h2,u=a,l=0|this.h3,h=l,w=0|this.h4,v=w;for(let e=0;e<5;e++){let t=4-e,_=y[e],E=g[e],S=c[e],T=f[e],I=p[e],A=d[e];for(let t=0;t<16;t++){let n=(0,s.XG)(r+m(e,i,a,l)+b[S[t]]+_,I[t])+w|0;r=w,w=l,l=0|(0,s.XG)(a,10),a=i,i=n}for(let e=0;e<16;e++){let r=(0,s.XG)(n+m(t,o,u,h)+b[T[e]]+E,A[e])+v|0;n=v,v=h,h=0|(0,s.XG)(u,10),u=o,o=r}}this.set(this.h1+a+h|0,this.h2+l+v|0,this.h3+w+n|0,this.h4+r+o|0,this.h0+i+u|0)}roundClean(){b.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}let v=(0,s.hE)(()=>new w);var _=r(57635),E=r(32398);let S=i.kA.ProjectivePoint,T=i.kA.CURVE.n,I=E.P6.isBytes,A=E.P6.concatBytes,O=E.P6.equalBytes,P=e=>v((0,_.JQ)(e)),k=(...e)=>(0,_.JQ)((0,_.JQ)(A(...e)));i.xW.utils.randomPrivateKey;let x=i.xW.getPublicKey,C=i.kA.getPublicKey,R=e=>e.r<T/2n;function B(e,t,r=!1){let n=i.kA.sign(e,t);if(r&&!R(n)){let r=new Uint8Array(32),o=0;for(;!R(n);)if(r.set(E.Fy.encode(o++)),n=i.kA.sign(e,t,{extraEntropy:r}),o>4294967295)throw Error("lowR counter overflow: report the error")}return n.toDERRawBytes()}let U=i.xW.sign,N=i.xW.utils.taggedHash;function D(e,t){let r=e.length;if(t===n.ecdsa){if(32===r)throw Error("Expected non-Schnorr key");return S.fromHex(e),e}if(t===n.schnorr){if(32!==r)throw Error("Expected 32-byte Schnorr key");return i.xW.utils.lift_x(i.xW.utils.bytesToNumberBE(e)),e}throw Error("Unknown key type")}function L(e,t){let r=i.xW.utils,n=r.taggedHash("TapTweak",e,t),o=r.bytesToNumberBE(n);if(o>=T)throw Error("tweak higher than curve order");return o}function H(e,t=new Uint8Array){let r=i.xW.utils,n=r.bytesToNumberBE(e),o=S.fromPrivateKey(n),s=o.hasEvenY()?n:r.mod(-n,T),a=L(r.pointToBytes(o),t);return r.numberToBytesBE(r.mod(s+a,T),32)}function M(e,t){let r=i.xW.utils,n=L(e,t),o=r.lift_x(r.bytesToNumberBE(e)).add(S.fromPrivateKey(n)),s=o.hasEvenY()?0:1;return[r.pointToBytes(o),s]}!function(e){e[e.ecdsa=0]="ecdsa",e[e.schnorr=1]="schnorr"}(n||(n={}));let F=(0,_.JQ)(S.BASE.toRawBytes(!1)),j={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128},V={bech32:"tb",pubKeyHash:111,scriptHash:196,wif:239};function K(e,t){if(!I(e)||!I(t))throw Error(`cmp: wrong type a=${typeof e} b=${typeof t}`);let r=Math.min(e.length,t.length);for(let n=0;n<r;n++)if(e[n]!=t[n])return Math.sign(e[n]-t[n]);return Math.sign(e.length-t.length)}},44319:function(e,t,r){"use strict";function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i(e,...t){if(!n(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function s(e,t){i(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{$h:function(){return o},eB:function(){return s},gk:function(){return i}})},81158:function(e,t,r){"use strict";r.d(t,{VR:function(){return u},bc:function(){return s},l3:function(){return a}});var n=r(44319),i=r(86641);function o(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,l=n?0:4;e.setUint32(t+u,s,n),e.setUint32(t+l,a,n)}function s(e,t,r){return e&t^~e&r}function a(e,t,r){return e&t^e&r^t&r}class u extends i.kb{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.GL)(this.buffer)}update(e){(0,n.$h)(this);let{view:t,buffer:r,blockLen:o}=this,s=(e=(0,i.O0)(e)).length;for(let n=0;n<s;){let a=Math.min(o-this.pos,s-n);if(a===o){let t=(0,i.GL)(e);for(;o<=s-n;n+=o)this.process(t,n);continue}r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.$h)(this),(0,n.eB)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:a}=this,{pos:u}=this;t[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>s-u&&(this.process(r,0),u=0);for(let e=u;e<s;e++)t[e]=0;o(r,s-8,BigInt(8*this.length),a),this.process(r,0);let l=(0,i.GL)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,h=this.get();if(f>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<f;e++)l.setUint32(4*e,h[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}},57635:function(e,t,r){"use strict";r.d(t,{JQ:function(){return l}});var n=r(81158),i=r(86641);let o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class u extends n.VR{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)a[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=a[e-15],r=a[e-2],n=(0,i.np)(t,7)^(0,i.np)(t,18)^t>>>3,o=(0,i.np)(r,17)^(0,i.np)(r,19)^r>>>10;a[e]=o+a[e-7]+n+a[e-16]|0}let{A:r,B:s,C:u,D:l,E:c,F:f,G:h,H:p}=this;for(let e=0;e<64;e++){let t=p+((0,i.np)(c,6)^(0,i.np)(c,11)^(0,i.np)(c,25))+(0,n.bc)(c,f,h)+o[e]+a[e]|0,d=((0,i.np)(r,2)^(0,i.np)(r,13)^(0,i.np)(r,22))+(0,n.l3)(r,s,u)|0;p=h,h=f,f=c,c=l+t|0,l=u,u=s,s=r,r=t+d|0}r=r+this.A|0,s=s+this.B|0,u=u+this.C|0,l=l+this.D|0,c=c+this.E|0,f=f+this.F|0,h=h+this.G|0,p=p+this.H|0,this.set(r,s,u,l,c,f,h,p)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let l=(0,i.hE)(()=>new u)},86641:function(e,t,r){"use strict";r.d(t,{GL:function(){return i},O0:function(){return u},XG:function(){return s},hE:function(){return c},kb:function(){return l},np:function(){return o}});var n=r(44319);function i(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function o(e,t){return e<<32-t|e>>>t}function s(e,t){return e<<t|e>>>32-t>>>0}function a(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function u(e){return"string"==typeof e&&(e=a(e)),(0,n.gk)(e),e}class l{clone(){return this._cloneInto()}}function c(e){let t=t=>e().update(u(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}},50750:function(e,t,r){"use strict";let n;function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function o(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function s(e){if("function"!=typeof e)throw Error("function expected");return!0}function a(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function u(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function l(e){if(!Array.isArray(e))throw Error("array expected")}function c(e,t){if(!o(!0,t))throw Error(`${e}: array of strings expected`)}function f(e,t){if(!o(!1,t))throw Error(`${e}: array of numbers expected`)}function h(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function p(e){let t="string"==typeof e?e.split(""):e,r=t.length;c("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(l(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(l(t),t.map(t=>{a("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function d(e=""){return a("join",e),{encode:t=>(c("join.decode",t),t.join(e)),decode:t=>(a("join.decode",t),t.split(e))}}function y(e){return s(e),{encode:e=>e,decode:t=>e(t)}}function g(e,t,r){if(t<2)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(l(e),!e.length)return[];let n=0,i=[],o=Array.from(e,e=>{if(u(e),e<0||e>=t)throw Error(`invalid integer: ${e}`);return e}),s=o.length;for(;;){let e=0,a=!0;for(let i=n;i<s;i++){let s=o[i],u=t*e,l=u+s;if(!Number.isSafeInteger(l)||u/t!==e||l-s!==u)throw Error("convertRadix: carry overflow");let c=l/r;e=l%r;let f=Math.floor(c);if(o[i]=f,!Number.isSafeInteger(f)||f*r+e!==l)throw Error("convertRadix: carry overflow");a&&(f?a=!1:n=i)}if(i.push(e),a)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}r.d(t,{$v:function(){return B},Xd:function(){return I},gW:function(){return C},iE:function(){return R}});let m=(e,t)=>0===t?e:m(t,e%t),b=(e,t)=>e+(t-m(e,t)),w=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function v(e,t,r,n){if(l(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(b(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${b(t,r)}`);let i=0,o=0,s=w[t],a=w[r]-1,c=[];for(let n of e){if(u(n),n>=s)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,o+t>32)throw Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)c.push((i>>o-r&a)>>>0);let e=w[o];if(void 0===e)throw Error("invalid carry");i&=e-1}if(i=i<<r-o&a,!n&&o>=t)throw Error("Excess padding");if(!n&&i>0)throw Error(`Non-zero padding: ${i}`);return n&&o>0&&c.push(i>>>0),c}function _(e,t=!1){if(u(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(b(8,e)>32||b(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!i(r))throw Error("radix2.encode input should be Uint8Array");return v(Array.from(r),8,e,!t)},decode:r=>(f("radix2.decode",r),Uint8Array.from(v(r,e,8,t)))}}function E(e){return s(e),function(...t){try{return e.apply(null,t)}catch(e){}}}function S(e,t){return u(e),s(t),{encode(r){if(!i(r))throw Error("checksum.encode: input should be Uint8Array");let n=t(r).slice(0,e),o=new Uint8Array(r.length+e);return o.set(r),o.set(n,r.length),o},decode(r){if(!i(r))throw Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-e),o=r.slice(-e),s=t(n).slice(0,e);for(let t=0;t<e;t++)if(s[t]!==o[t])throw Error("Invalid checksum");return n}}}let T=(n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",h(function e(e){u(e);let t=256;return{encode:r=>{if(!i(r))throw Error("radix.encode input should be Uint8Array");return g(Array.from(r),t,e)},decode:r=>(f("radix.decode",r),Uint8Array.from(g(r,e,t)))}}(58),p(n),d(""))),I=e=>h(S(4,t=>e(e(t))),T),A=h(p("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),d("")),O=[996825010,642813549,513874426,1027748829,705979059];function P(e){let t=e>>25,r=(33554431&e)<<5;for(let e=0;e<O.length;e++)(t>>e&1)==1&&(r^=O[e]);return r}function k(e,t,r=1){let n=e.length,i=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);i=P(i)^r>>5}i=P(i);for(let t=0;t<n;t++)i=P(i)^31&e.charCodeAt(t);for(let e of t)i=P(i)^e;for(let e=0;e<6;e++)i=P(i);return i^=r,A.encode(v([i%w[30]],30,5,!1))}function x(e){let t="bech32"===e?1:734539939,r=_(5),n=r.decode,o=r.encode,s=E(n);function u(e,r,n=90){a("bech32.encode prefix",e),i(r)&&(r=Array.from(r)),f("bech32.encode",r);let o=e.length;if(0===o)throw TypeError(`Invalid prefix length ${o}`);let s=o+7+r.length;if(!1!==n&&s>n)throw TypeError(`Length ${s} exceeds limit ${n}`);let u=e.toLowerCase(),l=k(u,r,t);return`${u}1${A.encode(r)}${l}`}function l(e,r=90){a("bech32.decode input",e);let n=e.length;if(n<8||!1!==r&&n>r)throw TypeError(`invalid string length: ${n} (${e}). Expected (8..${r})`);let i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let o=i.lastIndexOf("1");if(0===o||-1===o)throw Error('Letter "1" must be present between prefix and data only');let s=i.slice(0,o),u=i.slice(o+1);if(u.length<6)throw Error("Data must be at least 6 characters long");let l=A.decode(u).slice(0,-6),c=k(s,l,t);if(!u.endsWith(c))throw Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:s,words:l}}let c=E(l);function h(e){let{prefix:t,words:r}=l(e,!1);return{prefix:t,words:r,bytes:n(r)}}function p(e,t){return u(e,o(t))}return{encode:u,decode:l,encodeFromBytes:p,decodeToBytes:h,decodeUnsafe:c,fromWords:n,fromWordsUnsafe:s,toWords:o}}let C=x("bech32"),R=x("bech32m"),B=h(_(4),p("0123456789abcdef"),d(""),y(e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}))},76481:function(e,t,r){"use strict";let n,i,o;r.r(t),r.d(t,{CURVE:function(){return tW},Fp251:function(){return rn},MAX_VALUE:function(){return tx},ProjectivePoint:function(){return tq},Signature:function(){return tG},_poseidonMDS:function(){return ro},_starkCurve:function(){return tN},computeHashOnElements:function(){return t9},ethSigToPrivate:function(){return tQ},getAccountPath:function(){return t1},getPublicKey:function(){return tH},getSharedSecret:function(){return tM},getStarkKey:function(){return tJ},grindKey:function(){return tX},keccak:function(){return rt},normalizePrivateKey:function(){return tL},pedersen:function(){return t7},poseidonBasic:function(){return rs},poseidonCreate:function(){return ra},poseidonHash:function(){return rl},poseidonHashFunc:function(){return rc},poseidonHashMany:function(){return rh},poseidonHashSingle:function(){return rf},poseidonSmall:function(){return ru},sign:function(){return tV},utils:function(){return t$},verify:function(){return tK}});var s={};function a(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function u(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function l(e,...t){if(!u(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function c(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function f(e,t){l(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}r.r(s),r.d(s,{Fy:function(){return eS},uw:function(){return es},gk:function(){return eo},Dd:function(){return eT},dQ:function(){return eI},ci:function(){return eu},bytesToNumberBE:function(){return ed},ty:function(){return ey},eV:function(){return ev},n$:function(){return eP},ql:function(){return ew},hexToBytes:function(){return ep},ly:function(){return ec},Z2:function(){return eE},_t:function(){return ei},H9:function(){return eC},tL:function(){return eg},S5:function(){return em},uz:function(){return el},Yt:function(){return eb},FF:function(){return ex}});let h=BigInt(4294967296-1),p=BigInt(32);function d(e,t=!1){return t?{h:Number(e&h),l:Number(e>>p&h)}:{h:0|Number(e>>p&h),l:0|Number(e&h)}}function y(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=d(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}let g=(e,t,r)=>e<<r|t>>>32-r,m=(e,t,r)=>t<<r|e>>>32-r,b=(e,t,r)=>t<<r-32|e>>>64-r,w=(e,t,r)=>e<<r-32|t>>>64-r,v=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),_=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),E=(e,t)=>e<<32-t|e>>>t,S=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],T=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function I(e){for(let t=0;t<e.length;t++)e[t]=T(e[t])}function A(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function O(e){return"string"==typeof e&&(e=A(e)),l(e),e}class P{clone(){return this._cloneInto()}}function k(e){let t=t=>e().update(O(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}let x=[],C=[],R=[],B=BigInt(0),U=BigInt(1),N=BigInt(2),D=BigInt(7),L=BigInt(256),H=BigInt(113);for(let e=0,t=U,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],x.push(2*(5*n+r)),C.push((e+1)*(e+2)/2%64);let i=B;for(let e=0;e<7;e++)(t=(t<<U^(t>>D)*H)%L)&N&&(i^=U<<(U<<BigInt(e))-U);R.push(i)}let[M,F]=y(R,!0),j=(e,t,r)=>r>32?b(e,t,r):g(e,t,r),V=(e,t,r)=>r>32?w(e,t,r):m(e,t,r);function K(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,o=r[i],s=r[i+1],a=j(o,s,1)^r[n],u=V(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=u}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=C[r],o=j(t,i,n),s=V(t,i,n),a=x[r];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=M[n],e[1]^=F[n]}r.fill(0)}class W extends P{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,a(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=v(this.state)}keccak(){S||I(this.state32),K(this.state32,this.rounds),S||I(this.state32),this.posOut=0,this.pos=0}update(e){c(this);let{blockLen:t,state:r}=this,n=(e=O(e)).length;for(let i=0;i<n;){let o=Math.min(t-this.pos,n-i);for(let t=0;t<o;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){c(this,!1),l(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return a(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(f(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new W(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}let q=(n=1,i=136,o=32,k(()=>new W(i,n,o)));function G(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,l=n?0:4;e.setUint32(t+u,s,n),e.setUint32(t+l,a,n)}let $=(e,t,r)=>e&t^~e&r,z=(e,t,r)=>e&t^e&r^t&r;class Y extends P{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=_(this.buffer)}update(e){c(this);let{view:t,buffer:r,blockLen:n}=this,i=(e=O(e)).length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){let t=_(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){c(this),f(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;G(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=_(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=a/4,l=this.get();if(u>l.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)s.setUint32(4*e,l[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}let X=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Q=new Uint32Array(64);class Z extends Y{constructor(){super(64,32,8,!1),this.A=0|J[0],this.B=0|J[1],this.C=0|J[2],this.D=0|J[3],this.E=0|J[4],this.F=0|J[5],this.G=0|J[6],this.H=0|J[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)Q[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=Q[e-15],r=Q[e-2],n=E(t,7)^E(t,18)^t>>>3,i=E(r,17)^E(r,19)^r>>>10;Q[e]=i+Q[e-7]+n+Q[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:u,H:l}=this;for(let e=0;e<64;e++){let t=l+(E(s,6)^E(s,11)^E(s,25))+$(s,a,u)+X[e]+Q[e]|0,c=(E(r,2)^E(r,13)^E(r,22))+z(r,n,i)|0;l=u,u=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+c|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,n,i,o,s,a,u,l)}roundClean(){Q.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let ee=k(()=>new Z),et=BigInt(0),er=BigInt(1),en=BigInt(2);function ei(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function eo(e){if(!ei(e))throw Error("Uint8Array expected")}function es(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let ea=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function eu(e){eo(e);let t="";for(let r=0;r<e.length;r++)t+=ea[e[r]];return t}function el(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function ec(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?et:BigInt("0x"+e)}let ef={_0:48,_9:57,A:65,F:70,a:97,f:102};function eh(e){return e>=ef._0&&e<=ef._9?e-ef._0:e>=ef.A&&e<=ef.F?e-(ef.A-10):e>=ef.a&&e<=ef.f?e-(ef.a-10):void 0}function ep(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=eh(e.charCodeAt(i)),o=eh(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}function ed(e){return ec(eu(e))}function ey(e){return eo(e),ec(eu(Uint8Array.from(e).reverse()))}function eg(e,t){return ep(e.toString(16).padStart(2*t,"0"))}function em(e,t){return eg(e,t).reverse()}function eb(e){return ep(el(e))}function ew(e,t,r){let n;if("string"==typeof t)try{n=ep(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(ei(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n}function ev(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];eo(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}let e_=e=>"bigint"==typeof e&&et<=e;function eE(e,t,r){return e_(e)&&e_(t)&&e_(r)&&t<=e&&e<r}function eS(e,t,r,n){if(!eE(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function eT(e){let t;for(t=0;e>et;e>>=er,t+=1);return t}let eI=e=>(en<<BigInt(e-1))-er,eA=e=>new Uint8Array(e),eO=e=>Uint8Array.from(e);function eP(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=eA(e),i=eA(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),u=(e=eA())=>{i=a(eO([0]),e),n=a(),0!==e.length&&(i=a(eO([1]),e),n=a())},l=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=a()).slice();r.push(t),e+=n.length}return ev(...r)};return(e,t)=>{let r;for(s(),u(e);!(r=t(l()));)u();return s(),r}}let ek={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||ei(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function ex(e,t,r={}){let n=(t,r,n)=>{let i=ek[r];if("function"!=typeof i)throw Error("invalid validator function");let o=e[t];if((!n||void 0!==o)&&!i(o,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+o)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}function eC(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let o=e(r,...n);return t.set(r,o),o}}let eR=BigInt(0),eB=BigInt(1),eU=BigInt(2),eN=BigInt(3),eD=BigInt(4),eL=BigInt(5),eH=BigInt(8);function eM(e,t){let r=e%t;return r>=eR?r:t+r}function eF(e,t,r){if(t<eR)throw Error("invalid exponent, negatives unsupported");if(r<=eR)throw Error("invalid modulus");if(r===eB)return eR;let n=eB;for(;t>eR;)t&eB&&(n=n*e%r),e=e*e%r,t>>=eB;return n}function ej(e,t){if(e===eR)throw Error("invert: expected non-zero number");if(t<=eR)throw Error("invert: expected positive modulus, got "+t);let r=eM(e,t),n=t,i=eR,o=eB,s=eB,a=eR;for(;r!==eR;){let e=n/r,t=n%r,u=i-s*e,l=o-a*e;n=r,r=t,i=s,o=a,s=u,a=l}if(n!==eB)throw Error("invert: does not exist");return eM(i,t)}function eV(e){let t,r,n;let i=(e-eB)/eU;for(t=e-eB,r=0;t%eU===eR;t/=eU,r++);for(n=eU;n<e&&eF(n,i,e)!==e-eB;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+eB)/eD;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let o=(t+eB)/eU;return function(e,s){if(e.pow(s,i)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,u=e.pow(e.mul(e.ONE,n),t),l=e.pow(s,o),c=e.pow(s,t);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(c);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(u,eB<<BigInt(a-t-1));u=e.sqr(r),l=e.mul(l,r),c=e.mul(c,u),a=t}return l}}function eK(e){if(e%eD===eN){let t=(e+eB)/eD;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%eH===eL){let t=(e-eL)/eH;return function(e,r){let n=e.mul(r,eU),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,eU),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return eV(e)}let eW=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function eq(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"};return ex(e,eW.reduce((e,t)=>(e[t]="function",e),t))}function eG(e,t,r){if(r<eR)throw Error("invalid exponent, negatives unsupported");if(r===eR)return e.ONE;if(r===eB)return t;let n=e.ONE,i=t;for(;r>eR;)r&eB&&(n=e.mul(n,i)),i=e.sqr(i),r>>=eB;return n}function e$(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r}function ez(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function eY(e,t,r=!1,n={}){let i;if(e<=eR)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:o,nByteLength:s}=ez(e,t);if(s>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let a=Object.freeze({ORDER:e,BITS:o,BYTES:s,MASK:eI(o),ZERO:eR,ONE:eB,create:t=>eM(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return eR<=t&&t<e},is0:e=>e===eR,isOdd:e=>(e&eB)===eB,neg:t=>eM(-t,e),eql:(e,t)=>e===t,sqr:t=>eM(t*t,e),add:(t,r)=>eM(t+r,e),sub:(t,r)=>eM(t-r,e),mul:(t,r)=>eM(t*r,e),pow:(e,t)=>eG(a,e,t),div:(t,r)=>eM(t*ej(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ej(t,e),sqrt:n.sqrt||(t=>(i||(i=eK(e)),i(a,t))),invertBatch:e=>e$(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?em(e,s):eg(e,s),fromBytes:e=>{if(e.length!==s)throw Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?ey(e):ed(e)}});return Object.freeze(a)}function eX(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function eJ(e){let t=eX(e);return t+Math.ceil(t/2)}function eQ(e,t,r=!1){let n=e.length,i=eX(t),o=eJ(t);if(n<16||n<o||n>1024)throw Error("expected "+o+"-1024 bytes of input, got "+n);let s=eM(r?ed(e):ey(e),t-eB)+eB;return r?em(s,i):eg(s,i)}function eZ(e){let{Fp:t,mds:r,reversePartialPowIdx:n,roundConstants:i}=e,{roundsFull:o,roundsPartial:s,sboxPower:a,t:u}=e;for(let r of(eq(t),["t","roundsFull","roundsPartial"]))if("number"!=typeof e[r]||!Number.isSafeInteger(e[r]))throw Error("invalid number "+r);if(!Array.isArray(r)||r.length!==u)throw Error("Poseidon: invalid MDS matrix");let l=r.map(e=>{if(!Array.isArray(e)||e.length!==u)throw Error("invalid MDS matrix row: "+e);return e.map(e=>{if("bigint"!=typeof e)throw Error("invalid MDS matrix bigint: "+e);return t.create(e)})});if(void 0!==n&&"boolean"!=typeof n)throw Error("invalid param reversePartialPowIdx="+n);if(1&o)throw Error("roundsFull is not even"+o);let c=o+s;if(!Array.isArray(i)||i.length!==c)throw Error("Poseidon: invalid round constants");let f=i.map(e=>{if(!Array.isArray(e)||e.length!==u)throw Error("invalid round constants");return e.map(e=>{if("bigint"!=typeof e||!t.isValid(e))throw Error("invalid round constant");return t.create(e)})});if(!a||![3,5,7].includes(a))throw Error("invalid sboxPower");let h=BigInt(a),p=e=>eG(t,e,h);return 3===a?p=e=>t.mul(t.sqrN(e),e):5===a&&(p=e=>t.mul(t.sqrN(t.sqrN(e)),e)),Object.freeze({...e,rounds:c,sboxFn:p,roundConstants:f,mds:l})}function e0(e){let t=eZ(e),{Fp:r,mds:n,roundConstants:i,rounds:o,roundsPartial:s,sboxFn:a,t:u}=t,l=t.roundsFull/2,c=t.reversePartialPowIdx?u-1:0,f=(e,t,o)=>(e=e.map((e,t)=>r.add(e,i[o][t])),t?e=e.map(e=>a(e)):e[c]=a(e[c]),e=n.map(t=>t.reduce((t,n,i)=>r.add(t,r.mulN(n,e[i])),r.ZERO))),h=function(e){if(!Array.isArray(e)||e.length!==u)throw Error("invalid values, expected array of bigints with length "+u);e=e.map(e=>{if("bigint"!=typeof e)throw Error("invalid bigint="+e);return r.create(e)});let t=0;for(let r=0;r<l;r++)e=f(e,!0,t++);for(let r=0;r<s;r++)e=f(e,!1,t++);for(let r=0;r<l;r++)e=f(e,!0,t++);if(t!==o)throw Error("invalid number of rounds");return e};return h.roundConstants=i,h}let e1=BigInt(0),e2=BigInt(1);function e3(e,t){let r=t.negate();return e?r:t}function e4(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function e5(e,t){return e4(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function e8(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}function e6(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}let e7=new WeakMap,e9=new WeakMap;function te(e){return e9.get(e)||1}function tt(e,t){return{constTimeNegate:e3,hasPrecomputes:e=>1!==te(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>e1;)r&e2&&(n=n.add(i)),i=i.double(),r>>=e2;return n},precomputeWindow(e,r){let{windows:n,windowSize:i}=e5(r,t),o=[],s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(r,n,i){let{windows:o,windowSize:s}=e5(r,t),a=e.ZERO,u=e.BASE,l=BigInt(2**r-1),c=2**r,f=BigInt(r);for(let e=0;e<o;e++){let t=e*s,r=Number(i&l);i>>=f,r>s&&(r-=c,i+=e2);let o=t,h=t+Math.abs(r)-1,p=e%2!=0,d=r<0;0===r?u=u.add(e3(p,n[o])):a=a.add(e3(d,n[h]))}return{p:a,f:u}},wNAFUnsafe(r,n,i,o=e.ZERO){let{windows:s,windowSize:a}=e5(r,t),u=BigInt(2**r-1),l=2**r,c=BigInt(r);for(let e=0;e<s;e++){let t=e*a;if(i===e1)break;let r=Number(i&u);if(i>>=c,r>a&&(r-=l,i+=e2),0===r)continue;let s=n[t+Math.abs(r)-1];r<0&&(s=s.negate()),o=o.add(s)}return o},getPrecomputes(e,t,r){let n=e7.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&e7.set(t,r(n))),n},wNAFCached(e,t,r){let n=te(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let i=te(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){e4(r,t),e9.set(e,r),e7.delete(e)}}}function tr(e,t,r,n){if(e8(r,e),e6(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let i=e.ZERO,o=eT(BigInt(r.length)),s=o>12?o-3:o>4?o-2:o?2:1,a=(1<<s)-1,u=Array(a+1).fill(i),l=Math.floor((t.BITS-1)/s)*s,c=i;for(let e=l;e>=0;e-=s){u.fill(i);for(let t=0;t<n.length;t++){let i=Number(n[t]>>BigInt(e)&BigInt(a));u[i]=u[i].add(r[t])}let t=i;for(let e=u.length-1,r=i;e>0;e--)r=r.add(u[e]),t=t.add(r);if(c=c.add(t),0!==e)for(let e=0;e<s;e++)c=c.double()}return c}function tn(e){return eq(e.Fp),ex(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ez(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function ti(e){void 0!==e.lowS&&es("lowS",e.lowS),void 0!==e.prehash&&es("prehash",e.prehash)}function to(e){let t=tn(e);ex(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}let{bytesToNumberBE:ts,hexToBytes:ta}=s,tu={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{let{Err:r}=tu;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,i=el(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");let o=n>127?el(i.length/2|128):"";return el(e)+o+i+t},decode(e,t){let{Err:r}=tu,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let i=t[n++],o=0;if(128&i){let e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of s)o=o<<8|e;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=i;let s=t.subarray(n,n+o);if(s.length!==o)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+o)}}},_int:{encode(e){let{Err:t}=tu;if(e<tl)throw new t("integer: negative integers are not allowed");let r=el(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=tu;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return ts(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=tu,i="string"==typeof e?ta(e):e;eo(i);let{v:o,l:s}=n.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:u}=n.decode(2,o),{v:l,l:c}=n.decode(2,u);if(c.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(e){let{_tlv:t,_int:r}=tu,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},tl=BigInt(0),tc=BigInt(1),tf=(BigInt(2),BigInt(3));function th(e){let t=to(e),{Fp:r}=t,n=eY(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{let i=t.toAffine();return ev(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),o=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){let{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw Error("bad generator point: equation left != right");function a(e){return eE(e,tc,t.n)}function u(e){let r;let{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:o,n:s}=t;if(n&&"bigint"!=typeof e){if(ei(e)&&(e=eu(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*i,"0")}try{r="bigint"==typeof e?e:ed(ew("private key",e,i))}catch(t){throw Error("invalid private key, expected hex or "+i+" bytes, got "+typeof e)}return o&&(r=eM(r,s)),eS("private key",r,tc,s),r}function l(e){if(!(e instanceof h))throw Error("ProjectivePoint expected")}let c=eC((e,t)=>{let{px:n,py:i,pz:o}=e;if(r.eql(o,r.ONE))return{x:n,y:i};let s=e.is0();null==t&&(t=s?r.ONE:r.inv(o));let a=r.mul(n,t),u=r.mul(i,t),l=r.mul(o,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:a,y:u}}),f=eC(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw Error("bad point: x or y not FE");let o=r.sqr(i),a=s(n);if(!r.eql(o,a))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class h{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof h)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?h.ZERO:new h(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(h.fromAffine)}static fromHex(e){let t=h.fromAffine(o(ew("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(u(e))}static msm(e,t){return tr(h,n,e,t)}_setWindowSize(e){d.setWindowSize(this,e)}assertValidity(){f(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){l(e);let{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,u=r.eql(r.mul(t,a),r.mul(o,i)),c=r.eql(r.mul(n,a),r.mul(s,i));return u&&c}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,tf),{px:o,py:s,pz:a}=this,u=r.ZERO,l=r.ZERO,c=r.ZERO,f=r.mul(o,o),p=r.mul(s,s),d=r.mul(a,a),y=r.mul(o,s);return y=r.add(y,y),c=r.mul(o,a),c=r.add(c,c),u=r.mul(e,c),l=r.mul(i,d),l=r.add(u,l),u=r.sub(p,l),l=r.add(p,l),l=r.mul(u,l),u=r.mul(y,u),c=r.mul(i,c),d=r.mul(e,d),y=r.sub(f,d),y=r.mul(e,y),y=r.add(y,c),c=r.add(f,f),f=r.add(c,f),f=r.add(f,d),f=r.mul(f,y),l=r.add(l,f),d=r.mul(s,a),d=r.add(d,d),f=r.mul(d,y),u=r.sub(u,f),c=r.mul(d,p),c=r.add(c,c),new h(u,l,c=r.add(c,c))}add(e){l(e);let{px:n,py:i,pz:o}=this,{px:s,py:a,pz:u}=e,c=r.ZERO,f=r.ZERO,p=r.ZERO,d=t.a,y=r.mul(t.b,tf),g=r.mul(n,s),m=r.mul(i,a),b=r.mul(o,u),w=r.add(n,i),v=r.add(s,a);w=r.mul(w,v),v=r.add(g,m),w=r.sub(w,v),v=r.add(n,o);let _=r.add(s,u);return v=r.mul(v,_),_=r.add(g,b),v=r.sub(v,_),_=r.add(i,o),c=r.add(a,u),_=r.mul(_,c),c=r.add(m,b),_=r.sub(_,c),p=r.mul(d,v),c=r.mul(y,b),p=r.add(c,p),c=r.sub(m,p),p=r.add(m,p),f=r.mul(c,p),m=r.add(g,g),m=r.add(m,g),b=r.mul(d,b),v=r.mul(y,v),m=r.add(m,b),b=r.sub(g,b),b=r.mul(d,b),v=r.add(v,b),g=r.mul(m,v),f=r.add(f,g),g=r.mul(_,v),c=r.mul(w,c),c=r.sub(c,g),g=r.mul(w,m),p=r.mul(_,p),new h(c,f,p=r.add(p,g))}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return d.wNAFCached(this,e,h.normalizeZ)}multiplyUnsafe(e){let{endo:n,n:i}=t;eS("scalar",e,tl,i);let o=h.ZERO;if(e===tl)return o;if(this.is0()||e===tc)return this;if(!n||d.hasPrecomputes(this))return d.wNAFCachedUnsafe(this,e,h.normalizeZ);let{k1neg:s,k1:a,k2neg:u,k2:l}=n.splitScalar(e),c=o,f=o,p=this;for(;a>tl||l>tl;)a&tc&&(c=c.add(p)),l&tc&&(f=f.add(p)),p=p.double(),a>>=tc,l>>=tc;return s&&(c=c.negate()),u&&(f=f.negate()),f=new h(r.mul(f.px,n.beta),f.py,f.pz),c.add(f)}multiply(e){let n,i;let{endo:o,n:s}=t;if(eS("scalar",e,tc,s),o){let{k1neg:t,k1:s,k2neg:a,k2:u}=o.splitScalar(e),{p:l,f:c}=this.wNAF(s),{p:f,f:p}=this.wNAF(u);l=d.constTimeNegate(t,l),f=d.constTimeNegate(a,f),f=new h(r.mul(f.px,o.beta),f.py,f.pz),n=l.add(f),i=c.add(p)}else{let{p:t,f:r}=this.wNAF(e);n=t,i=r}return h.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=h.BASE,i=(e,t)=>t!==tl&&t!==tc&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){return c(this,e)}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===tc)return!0;if(r)return r(h,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===tc?this:r?r(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return es("isCompressed",e),this.assertValidity(),i(h,this,e)}toHex(e=!0){return es("isCompressed",e),eu(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);let p=t.nBitLength,d=tt(h,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:a}}function tp(e){let t=tn(e);return ex(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function td(e){let t=tp(e),{Fp:r,n:n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(e){return eM(e,n)}function a(e){return ej(e,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:f}=th({...t,toBytes(e,t,n){let i=t.toAffine(),o=r.toBytes(i.x),s=ev;return(es("isCompressed",n),n)?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){let t=e.length,n=e[0],s=e.subarray(1);if(t===i&&(2===n||3===n)){let e;let t=ed(s);if(!eE(t,tc,r.ORDER))throw Error("Point is not on curve");let i=c(t);try{e=r.sqrt(i)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&n)==1!=((e&tc)===tc)&&(e=r.neg(e)),{x:t,y:e}}if(t===o&&4===n)return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+i+", or uncompressed "+o+", got "+t)}}),h=e=>eu(eg(e,t.nByteLength));function p(e){return e>n>>tc}function d(e){return p(e)?s(-e):e}let y=(e,t,r)=>ed(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new g(y(e=ew("compactSignature",e,2*r),0,r),y(e,r,2*r))}static fromDER(e){let{r:t,s:r}=tu.toSig(ew("DER",e));return new g(t,r)}assertValidity(){eS("r",this.r,tc,n),eS("s",this.s,tc,n)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s:i,recovery:o}=this,l=E(ew("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw Error("recovery id invalid");let c=2===o||3===o?n+t.n:n;if(c>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let f=(1&o)==0?"02":"03",p=u.fromHex(f+h(c)),d=a(c),y=s(-l*d),g=s(i*d),m=u.BASE.multiplyAndAddUnsafe(p,y,g);if(!m)throw Error("point at infinify");return m.assertValidity(),m}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return ep(this.toDERHex())}toDERHex(){return tu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ep(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}let m={isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=eJ(t.n);return eQ(t.randomBytes(e),t.n)},precompute:(e=8,t=u.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function b(e,t=!0){return u.fromPrivateKey(e).toRawBytes(t)}function w(e){let t=ei(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof u}function v(e,t,r=!0){if(w(e))throw Error("first arg must be private key");if(!w(t))throw Error("second arg must be public key");return u.fromHex(t).multiply(l(e)).toRawBytes(r)}let _=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=ed(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},E=t.bits2int_modN||function(e){return s(_(e))},S=eI(t.nBitLength);function T(e){return eS("num < 2^"+t.nBitLength,e,tl,S),eg(e,t.nByteLength)}function I(e,n,i=A){if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{hash:o,randomBytes:c}=t,{lowS:h,prehash:y,extraEntropy:m}=i;null==h&&(h=!0),e=ew("msgHash",e),ti(i),y&&(e=ew("prehashed msgHash",o(e)));let b=E(e),w=l(n),v=[T(w),T(b)];if(null!=m&&!1!==m){let e=!0===m?c(r.BYTES):m;v.push(ew("extraEntropy",e))}let S=ev(...v),I=b;return{seed:S,k2sig:function(e){let t=_(e);if(!f(t))return;let r=a(t),n=u.BASE.multiply(t).toAffine(),i=s(n.x);if(i===tl)return;let o=s(r*s(I+i*w));if(o===tl)return;let l=(n.x===i?0:2)|Number(n.y&tc),c=o;return h&&p(o)&&(c=d(o),l^=1),new g(i,c,l)}}}let A={lowS:t.lowS,prehash:!1},O={lowS:t.lowS,prehash:!1};function P(e,r,n=A){let{seed:i,k2sig:o}=I(e,r,n),s=t;return eP(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)}function k(e,r,n,i=O){let o,l;let c=e;r=ew("msgHash",r),n=ew("publicKey",n);let{lowS:f,prehash:h,format:p}=i;if(ti(i),"strict"in i)throw Error("options.strict was renamed to lowS");if(void 0!==p&&"compact"!==p&&"der"!==p)throw Error("format must be compact or der");let d="string"==typeof c||ei(c),y=!d&&!p&&"object"==typeof c&&null!==c&&"bigint"==typeof c.r&&"bigint"==typeof c.s;if(!d&&!y)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(y&&(l=new g(c.r,c.s)),d){try{"compact"!==p&&(l=g.fromDER(c))}catch(e){if(!(e instanceof tu.Err))throw e}l||"der"===p||(l=g.fromCompact(c))}o=u.fromHex(n)}catch(e){return!1}if(!l||f&&l.hasHighS())return!1;h&&(r=t.hash(r));let{r:m,s:b}=l,w=E(r),v=a(b),_=s(w*v),S=s(m*v),T=u.BASE.multiplyAndAddUnsafe(o,_,S)?.toAffine();return!!T&&s(T.x)===m}return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:b,getSharedSecret:v,sign:P,verify:k,ProjectivePoint:u,Signature:g,utils:m}}function ty(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function tg(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function tm(e,...t){if(!tg(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function tb(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");ty(e.outputLen),ty(e.blockLen)}function tw(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}BigInt(4);let tv="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function t_(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function tE(e){return"string"==typeof e&&(e=t_(e)),tm(e),e}function tS(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];tm(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}class tT{clone(){return this._cloneInto()}}function tI(e=32){if(tv&&"function"==typeof tv.getRandomValues)return tv.getRandomValues(new Uint8Array(e));if(tv&&"function"==typeof tv.randomBytes)return tv.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}class tA extends tT{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,tb(e);let r=tE(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return tw(this),this.iHash.update(e),this}digestInto(e){tw(this),tm(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let tO=(e,t,r)=>new tA(e,t).update(r).digest();function tP(e){return{hash:e,hmac:(t,...r)=>tO(e,t,tS(...r)),randomBytes:tI}}tO.create=(e,t)=>new tA(e,t);let tk=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),tx=BigInt("0x800000000000000000000000000000000000000000000000000000000000000"),tC=252;function tR(e){for(;0===e[0];)e=e.subarray(1);let t=8*e.length-tC,r=ed(e);return t>0?r>>BigInt(t):r}function tB(e){return"string"==typeof e&&1&(e=tY(e)).length&&(e="0"+e),ep(e)}let tU=td({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:eY(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:tk,nBitLength:tC,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...tP(ee),bits2int:tR,bits2int_modN:e=>{let t=ed(e).toString(16);return 63===t.length&&(e=tB(t+"0")),eM(tR(e),tk)}}),tN=tU;function tD(e){return ew("","string"==typeof e?tB(e):e)}function tL(e){return eu(tD(e)).padStart(64,"0")}function tH(e,t=!1){return tU.getPublicKey(tL(e),t)}function tM(e,t){return tU.getSharedSecret(tL(e),t)}function tF(e){let{r:t,s:r}=e;if(t<0n||t>=tx)throw Error(`Signature.r should be [1, ${tx})`);let n=ej(r,tk);if(n<0n||n>=tx)throw Error(`inv(Signature.s) should be [1, ${tx})`)}function tj(e){let t=tD(e);if(ed(t)>=tx)throw Error(`msgHash should be [0, ${tx})`);return t}function tV(e,t,r){let n=tU.sign(tj(e),tL(t),r);return tF(n),n}function tK(e,t,r){if(!(e instanceof tG)){let t=tD(e);try{e=tG.fromDER(t)}catch(r){if(!(r instanceof tu.Err))throw r;e=tG.fromCompact(t)}}return tF(e),tU.verify(e,tj(t),tD(r))}let{CURVE:tW,ProjectivePoint:tq,Signature:tG,utils:t$}=tU;function tz(e){let t=eu(e.subarray(1)).replace(/^0+/gm,"");return`0x${t}`}function tY(e){return e.replace(/^0x/i,"")}function tX(e){let t=tD(e),r=2n**256n,n=r-eM(r,tk);for(let e=0;;e++){let r=rr(ev(t,eb(BigInt(e))));if(r<n)return eM(r,tk).toString(16);if(1e5===e)throw Error("grindKey is broken: tried 100k vals")}}function tJ(e){return tz(tH(e,!0))}function tQ(e){if(130!==(e=tY(e)).length)throw Error("Wrong ethereum signature");return tX(e.substring(0,64))}let tZ=2n**31n-1n,t0=e=>Number(e&tZ);function t1(e,t,r,n){let i=t0(rr(e)),o=t0(rr(t)),s=ec(tY(r));return`m/2645'/${i}'/${o}'/${t0(s)}'/${t0(s>>31n)}'/${n}`}let t2=[new tq(0x49ee3eba8c1600700ee1b87eb599f16716b0b1022947733551fde4050ca6804n,0x3ca0cfe4b3bc6ddf346d49d06ea0ed34e621062c0e056c1d0405d266e10268an,1n),new tq(0x234287dcbaffe7f969c748655fca9e58fa8120b6d56eb0c1080d17957ebe47bn,0x3b056f100f96fb21e889527d41f4e39940135dd7a6c94cc6ed0268ee89e5615n,1n),new tq(0x4fa56f376c83db33f9dab2656558f3399099ec1de5e3018b7a6932dba8aa378n,0x3fa0984c931c9e38113e0c0e47e4401562761f92a7a23b45168f4e80ff5b54dn,1n),new tq(0x4ba4cc166be8dec764910f75b45f74b40c690c74709e90f3aa372f0bd2d6997n,0x40301cf5c1751f4b971e46c4ede85fcac5c59a5ce5ae7c48151f27b24b219cn,1n),new tq(0x54302dcb0e6cc1c6e44cca8f61a63bb2ca65048d53fb325d36ff12c49a58202n,0x1b77b3e37d13504b348046268d8ae25ce98ad783c25561a879dcc77e99c2426n,1n)];function t3(e,t){let r=[],n=e;for(let e=0;e<248;e++)r.push(n),n=n.double();n=t;for(let e=0;e<4;e++)r.push(n),n=n.double();return r}let t4=t3(t2[1],t2[2]),t5=t3(t2[3],t2[4]);function t8(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e){if(!Number.isSafeInteger(e))throw Error(`Invalid pedersenArg: ${e}`);t=BigInt(e)}else t=ed(tD(e));if(!(0n<=t&&t<tU.CURVE.Fp.ORDER))throw Error(`PedersenArg should be 0 <= value < CURVE.P: ${t}`);return t}function t6(e,t,r){let n=t8(t);for(let t=0;t<252;t++){let i=r[t];if(!i)throw Error("invalid constant index");if(i.equals(e))throw Error("Same point");(1n&n)!==0n&&(e=e.add(i)),n>>=1n}return e}function t7(e,t){let r=t2[0];return r=t6(r,e,t4),tz((r=t6(r,t,t5)).toRawBytes(!0))}let t9=(e,t=t7)=>[0,...e,e.length].reduce((e,r)=>t(e,r)),re=eI(250),rt=e=>ed(q(e))&re,rr=e=>ed(ee(e)),rn=eY(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function ri(e,t,r){let n=e.fromBytes(ee(A(`${t}${r}`)));return e.create(n)}function ro(e,t,r,n=0){let i=[],o=[];for(let s=0;s<r;s++)i.push(ri(e,`${t}x`,n*r+s)),o.push(ri(e,`${t}y`,n*r+s));if(new Set([...i,...o]).size!==2*r)throw Error("X and Y values are not distinct");return i.map(t=>o.map(r=>e.inv(e.sub(t,r))))}function rs(e,t){if(eq(e.Fp),!Number.isSafeInteger(e.rate)||!Number.isSafeInteger(e.capacity))throw Error(`Wrong poseidon opts: ${e}`);let r=e.rate+e.capacity,n=e.roundsFull+e.roundsPartial,i=[];for(let t=0;t<n;t++){let n=[];for(let i=0;i<r;i++)n.push(ri(e.Fp,"Hades",r*t+i));i.push(n)}let o=e0({...e,t:r,sboxPower:3,reversePartialPowIdx:!0,mds:t,roundConstants:i});return o.m=r,o.rate=e.rate,o.capacity=e.capacity,o}function ra(e,t=0){let r=e.rate+e.capacity;if(!Number.isSafeInteger(t))throw Error(`Wrong mdsAttempt=${t}`);return rs(e,ro(e.Fp,"HadesMDS",r,t))}let ru=rs({Fp:rn,rate:2,capacity:1,roundsFull:8,roundsPartial:83},[[3,1,1],[1,-1,1],[1,1,-2]].map(e=>e.map(BigInt)));function rl(e,t,r=ru){return r([e,t,2n])[0]}function rc(e,t,r=ru){return eb(rl(ed(e),ed(t),r))}function rf(e,t=ru){return t([e,0n,1n])[0]}function rh(e,t=ru){let{m:r,rate:n}=t;if(!Array.isArray(e))throw Error("bigint array expected in values");let i=Array.from(e);for(i.push(1n);i.length%n!=0;)i.push(0n);let o=Array(r).fill(0n);for(let e=0;e<i.length;e+=n){for(let t=0;t<n;t++){let r=i[e+t];if(void 0===r)throw Error("invalid index");if(void 0===o[t])throw Error("state[j] is undefined");o[t]=o[t]+r}o=t(o)}return o[0]}},32398:function(e,t,r){"use strict";function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function o(e){if("function"!=typeof e)throw Error("function expected");return!0}function s(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function a(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function u(e){if(!Array.isArray(e))throw Error("array expected")}function l(e,t){if(!i(!0,t))throw Error(`${e}: array of strings expected`)}function c(e,t){if(!i(!1,t))throw Error(`${e}: array of numbers expected`)}function f(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function h(e){let t="string"==typeof e?e.split(""):e,r=t.length;l("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(u(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(u(t),t.map(t=>{s("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function p(e=""){return s("join",e),{encode:t=>(l("join.decode",t),t.join(e)),decode:t=>(s("join.decode",t),t.split(e))}}function d(e){return o(e),{encode:e=>e,decode:t=>e(t)}}r.d(t,{E_:function(){return S},WS:function(){return ee},Ko:function(){return Y},QV:function(){return T},Ps:function(){return et},is:function(){return $},lt:function(){return Z},Fy:function(){return Q},Tq:function(){return z},U8:function(){return er},nn:function(){return ea},IX:function(){return ed},aI:function(){return en},AQ:function(){return q},Cc:function(){return eu},K:function(){return el},$v:function(){return es},mg:function(){return ec},O4:function(){return ei},Z_:function(){return eo},n_:function(){return eh},bc:function(){return ep},P6:function(){return C},Gu:function(){return F},re:function(){return j}});let y=(e,t)=>0===t?e:y(t,e%t),g=(e,t)=>e+(t-y(e,t)),m=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function b(e,t,r,n){if(u(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(g(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${g(t,r)}`);let i=0,o=0,s=m[t],l=m[r]-1,c=[];for(let n of e){if(a(n),n>=s)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,o+t>32)throw Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)c.push((i>>o-r&l)>>>0);let e=m[o];if(void 0===e)throw Error("invalid carry");i&=e-1}if(i=i<<r-o&l,!n&&o>=t)throw Error("Excess padding");if(!n&&i>0)throw Error(`Non-zero padding: ${i}`);return n&&o>0&&c.push(i>>>0),c}function w(e,t=!1){if(a(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(g(8,e)>32||g(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw Error("radix2.encode input should be Uint8Array");return b(Array.from(r),8,e,!t)},decode:r=>(c("radix2.decode",r),Uint8Array.from(b(r,e,8,t)))}}let v=[996825010,642813549,513874426,1027748829,705979059],_={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},E=f(w(4),h("0123456789abcdef"),p(""),d(e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),S=new Uint8Array,T=new Uint8Array([0]);function I(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function A(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function O(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];if(!A(n))throw Error("Uint8Array expected");t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}let P=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function k(e){return"[object Object]"===Object.prototype.toString.call(e)}function x(e){return Number.isSafeInteger(e)}let C={equalBytes:I,isBytes:A,isCoder:K,checkBounds:H,concatBytes:O,createView:P,isPlainObject:k},R=e=>{if(null!==e&&"string"!=typeof e&&!K(e)&&!A(e)&&!x(e))throw Error(`lengthCoder: expected null | number | Uint8Array | CoderType, got ${e} (${typeof e})`);return{encodeStream(t,r){let n;if(null!==e){if(K(e))return e.encodeStream(t,r);if("number"==typeof e?n=e:"string"==typeof e&&(n=U.resolve(t.stack,e)),"bigint"==typeof n&&(n=Number(n)),void 0===n||n!==r)throw t.err(`Wrong length: ${n} len=${e} exp=${r} (${typeof r})`)}},decodeStream(t){let r;if(K(e)?r=Number(e.decodeStream(t)):"number"==typeof e?r=e:"string"==typeof e&&(r=U.resolve(t.stack,e)),"bigint"==typeof r&&(r=Number(r)),"number"!=typeof r)throw t.err(`Wrong length: ${r}`);return r}}},B={BITS:32,FULL_MASK:4294967295,len:e=>Math.ceil(e/32),create:e=>new Uint32Array(B.len(e)),clean:e=>e.fill(0),debug:e=>Array.from(e).map(e=>(e>>>0).toString(2).padStart(32,"0")),checkLen:(e,t)=>{if(B.len(t)!==e.length)throw Error(`wrong length=${e.length}. Expected: ${B.len(t)}`)},chunkLen:(e,t,r)=>{if(t<0)throw Error(`wrong pos=${t}`);if(t+r>e)throw Error(`wrong range=${t}/${r} of ${e}`)},set:(e,t,r,n=!0)=>(!!n||(e[t]&r)==0)&&(e[t]|=r,!0),pos:(e,t)=>({chunk:Math.floor((e+t)/32),mask:1<<32-(e+t)%32-1}),indices:(e,t,r=!1)=>{B.checkLen(e,t);let{FULL_MASK:n,BITS:i}=B,o=i-t%i,s=o?n>>>o<<o:n,a=[];for(let t=0;t<e.length;t++){let n=e[t];if(r&&(n=~n),t===e.length-1&&(n&=s),0!==n)for(let e=0;e<i;e++)n&1<<i-e-1&&a.push(t*i+e)}return a},range:e=>{let t;let r=[];for(let n of e)void 0===t||n!==t.pos+t.length?r.push(t={pos:n,length:1}):t.length+=1;return r},rangeDebug:(e,t,r=!1)=>`[${B.range(B.indices(e,t,r)).map(e=>`(${e.pos}/${e.length})`).join(", ")}]`,setRange:(e,t,r,n,i=!0)=>{B.chunkLen(t,r,n);let{FULL_MASK:o,BITS:s}=B,a=r%s?Math.floor(r/s):void 0,u=r+n,l=u%s?Math.floor(u/s):void 0;if(void 0!==a&&a===l)return B.set(e,a,o>>>s-n<<s-n-r,i);if(void 0!==a&&!B.set(e,a,o>>>r%s,i))return!1;let c=void 0!==a?a+1:r/s,f=void 0!==l?l:u/s;for(let t=c;t<f;t++)if(!B.set(e,t,o,i))return!1;return!!(void 0===l||a===l||B.set(e,l,o<<s-u%s,i))}},U={pushObj:(e,t,r)=>{let n={obj:t};e.push(n),r((e,t)=>{n.field=e,t(),n.field=void 0}),e.pop()},path:e=>{let t=[];for(let r of e)void 0!==r.field&&t.push(r.field);return t.join("/")},err:(e,t,r)=>{let n=Error(`${e}(${U.path(t)}): ${"string"==typeof r?r:r.message}`);return r instanceof Error&&r.stack&&(n.stack=r.stack),n},resolve:(e,t)=>{let r=t.split("/"),n=e.map(e=>e.obj),i=0;for(;i<r.length&&".."===r[i];i++)n.pop();let o=n.pop();for(;i<r.length;i++){if(!o||void 0===o[r[i]])return;o=o[r[i]]}return o}};class N{constructor(e,t={},r=[],n,i=0){this.data=e,this.opts=t,this.stack=r,this.parent=n,this.parentOffset=i,this.pos=0,this.bitBuf=0,this.bitPos=0,this.view=P(e)}_enablePointers(){if(this.parent)return this.parent._enablePointers();this.bs||(this.bs=B.create(this.data.length),B.setRange(this.bs,this.data.length,0,this.pos,this.opts.allowMultipleReads))}markBytesBS(e,t){return this.parent?this.parent.markBytesBS(this.parentOffset+e,t):!t||!this.bs||B.setRange(this.bs,this.data.length,e,t,!1)}markBytes(e){let t=this.pos;this.pos+=e;let r=this.markBytesBS(t,e);if(!this.opts.allowMultipleReads&&!r)throw this.err(`multiple read pos=${this.pos} len=${e}`);return r}pushObj(e,t){return U.pushObj(this.stack,e,t)}readView(e,t){if(!Number.isFinite(e))throw this.err(`readView: wrong length=${e}`);if(this.pos+e>this.data.length)throw this.err("readView: Unexpected end of buffer");let r=t(this.view,this.pos);return this.markBytes(e),r}absBytes(e){if(e>this.data.length)throw Error("Unexpected end of buffer");return this.data.subarray(e)}finish(){if(!this.opts.allowUnreadBytes){if(this.bitPos)throw this.err(`${this.bitPos} bits left after unpack: ${E.encode(this.data.slice(this.pos))}`);if(this.bs&&!this.parent){let e=B.indices(this.bs,this.data.length,!0);if(!e.length)return;{let t=B.range(e).map(({pos:e,length:t})=>`(${e}/${t})[${E.encode(this.data.subarray(e,e+t))}]`).join(", ");throw this.err(`unread byte ranges: ${t} (total=${this.data.length})`)}}if(!this.isEnd())throw this.err(`${this.leftBytes} bytes ${this.bitPos} bits left after unpack: ${E.encode(this.data.slice(this.pos))}`)}}err(e){return U.err("Reader",this.stack,e)}offsetReader(e){if(e>this.data.length)throw this.err("offsetReader: Unexpected end of buffer");return new N(this.absBytes(e),this.opts,this.stack,this,e)}bytes(e,t=!1){if(this.bitPos)throw this.err("readBytes: bitPos not empty");if(!Number.isFinite(e))throw this.err(`readBytes: wrong length=${e}`);if(this.pos+e>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let r=this.data.subarray(this.pos,this.pos+e);return t||this.markBytes(e),r}byte(e=!1){if(this.bitPos)throw this.err("readByte: bitPos not empty");if(this.pos+1>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let t=this.data[this.pos];return e||this.markBytes(1),t}get leftBytes(){return this.data.length-this.pos}get totalBytes(){return this.data.length}isEnd(){return this.pos>=this.data.length&&!this.bitPos}bits(e){if(e>32)throw this.err("BitReader: cannot read more than 32 bits in single call");let t=0;for(;e;){this.bitPos||(this.bitBuf=this.byte(),this.bitPos=8);let r=Math.min(e,this.bitPos);this.bitPos-=r,t=t<<r|this.bitBuf>>this.bitPos&2**r-1,this.bitBuf&=2**this.bitPos-1,e-=r}return t>>>0}find(e,t=this.pos){if(!A(e))throw this.err(`find: needle is not bytes! ${e}`);if(this.bitPos)throw this.err("findByte: bitPos not empty");if(!e.length)throw this.err("find: needle is empty");for(let r=t;-1!==(r=this.data.indexOf(e[0],r))&&-1!==r&&!(this.data.length-r<e.length);r++)if(I(e,this.data.subarray(r,r+e.length)))return r}}class D{constructor(e=[]){this.stack=e,this.pos=0,this.buffers=[],this.ptrs=[],this.bitBuf=0,this.bitPos=0,this.viewBuf=new Uint8Array(8),this.finished=!1,this.view=P(this.viewBuf)}pushObj(e,t){return U.pushObj(this.stack,e,t)}writeView(e,t){if(this.finished)throw this.err("buffer: finished");if(!x(e)||e>8)throw Error(`wrong writeView length=${e}`);t(this.view),this.bytes(this.viewBuf.slice(0,e)),this.viewBuf.fill(0)}err(e){if(this.finished)throw this.err("buffer: finished");return U.err("Reader",this.stack,e)}bytes(e){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("writeBytes: ends with non-empty bit buffer");this.buffers.push(e),this.pos+=e.length}byte(e){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("writeByte: ends with non-empty bit buffer");this.buffers.push(new Uint8Array([e])),this.pos++}finish(e=!0){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("buffer: ends with non-empty bit buffer");let t=this.buffers.concat(this.ptrs.map(e=>e.buffer)),r=new Uint8Array(t.map(e=>e.length).reduce((e,t)=>e+t,0));for(let e=0,n=0;e<t.length;e++){let i=t[e];r.set(i,n),n+=i.length}for(let e=this.pos,t=0;t<this.ptrs.length;t++){let n=this.ptrs[t];r.set(n.ptr.encode(e),n.pos),e+=n.buffer.length}if(e){for(let e of(this.buffers=[],this.ptrs))e.buffer.fill(0);this.ptrs=[],this.finished=!0,this.bitBuf=0}return r}bits(e,t){if(t>32)throw this.err("writeBits: cannot write more than 32 bits in single call");if(e>=2**t)throw this.err(`writeBits: value (${e}) >= 2**bits (${t})`);for(;t;){let r=Math.min(t,8-this.bitPos);this.bitBuf=this.bitBuf<<r|e>>t-r,this.bitPos+=r,t-=r,e&=2**t-1,8===this.bitPos&&(this.bitPos=0,this.buffers.push(new Uint8Array([this.bitBuf])),this.pos++)}}}let L=e=>Uint8Array.from(e).reverse();function H(e,t,r){if(r){let r=2n**(t-1n);if(e<-r||e>=r)throw Error(`value out of signed bounds. Expected ${-r} <= ${e} < ${r}`)}else if(0n>e||e>=2n**t)throw Error(`value out of unsigned bounds. Expected 0 <= ${e} < ${2n**t}`)}function M(e){return{encodeStream:e.encodeStream,decodeStream:e.decodeStream,size:e.size,encode:t=>{let r=new D;return e.encodeStream(r,t),r.finish()},decode:(t,r={})=>{let n=new N(t,r),i=e.decodeStream(n);return n.finish(),i}}}function F(e,t){if(!K(e))throw Error(`validate: invalid inner value ${e}`);if("function"!=typeof t)throw Error("validate: fn should be function");return M({size:e.size,encodeStream:(r,n)=>{let i;try{i=t(n)}catch(e){throw r.err(e)}e.encodeStream(r,i)},decodeStream:r=>{let n=e.decodeStream(r);try{return t(n)}catch(e){throw r.err(e)}}})}let j=e=>{let t=M(e);return e.validate?F(t,e.validate):t},V=e=>k(e)&&"function"==typeof e.decode&&"function"==typeof e.encode;function K(e){return k(e)&&V(e)&&"function"==typeof e.encodeStream&&"function"==typeof e.decodeStream&&(void 0===e.size||x(e.size))}let W=e=>{if(!V(e))throw Error("BaseCoder expected");return{encode:e.decode,decode:e.encode}},q={dict:function(){return{encode:e=>{if(!Array.isArray(e))throw Error("array expected");let t={};for(let r of e){if(!Array.isArray(r)||2!==r.length)throw Error("array of two elements expected");let e=r[0],n=r[1];if(void 0!==t[e])throw Error(`key(${e}) appears twice in struct`);t[e]=n}return t},decode:e=>{if(!k(e))throw Error(`expected plain object, got ${e}`);return Object.entries(e)}}},numberBigint:{encode:e=>{if("bigint"!=typeof e)throw Error(`expected bigint, got ${typeof e}`);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw Error(`element bigger than MAX_SAFE_INTEGER=${e}`);return Number(e)},decode:e=>{if(!x(e))throw Error("element is not a safe integer");return BigInt(e)}},tsEnum:function(e){if(!k(e))throw Error("plain object expected");return{encode:t=>{if(!x(t)||!(t in e))throw Error(`wrong value ${t}`);return e[t]},decode:t=>{if("string"!=typeof t)throw Error(`wrong value ${typeof t}`);return e[t]}}},decimal:function(e,t=!1){if(!x(e))throw Error(`decimal/precision: wrong value ${e}`);if("boolean"!=typeof t)throw Error(`decimal/round: expected boolean, got ${typeof t}`);let r=10n**BigInt(e);return{encode:t=>{if("bigint"!=typeof t)throw Error(`expected bigint, got ${typeof t}`);let r=(t<0n?-t:t).toString(10),n=r.length-e;n<0&&(r=r.padStart(r.length-n,"0"),n=0);let i=r.length-1;for(;i>=n&&"0"===r[i];i--);let o=r.slice(0,n),s=r.slice(n,i+1);return(o||(o="0"),t<0n&&(o="-"+o),s)?`${o}.${s}`:o},decode:n=>{if("string"!=typeof n)throw Error(`expected string, got ${typeof n}`);if("-0"===n)throw Error("negative zero is not allowed");let i=!1;if(n.startsWith("-")&&(i=!0,n=n.slice(1)),!/^(0|[1-9]\d*)(\.\d+)?$/.test(n))throw Error(`wrong string value=${n}`);let o=n.indexOf(".");o=-1===o?n.length:o;let s=n.slice(0,o),a=n.slice(o+1).replace(/0+$/,""),u=BigInt(s)*r;if(!t&&a.length>e)throw Error(`fractional part cannot be represented with this precision (num=${n}, prec=${e})`);let l=Math.min(a.length,e),c=u+BigInt(a.slice(0,l))*10n**BigInt(e-l);return i?-c:c}}},match:function(e){if(!Array.isArray(e))throw Error(`expected array, got ${typeof e}`);for(let t of e)if(!V(t))throw Error(`wrong base coder ${t}`);return{encode:t=>{for(let r of e){let e=r.encode(t);if(void 0!==e)return e}throw Error(`match/encode: cannot find match in ${t}`)},decode:t=>{for(let r of e){let e=r.decode(t);if(void 0!==e)return e}throw Error(`match/decode: cannot find match in ${t}`)}}},reverse:W},G=(e,t=!1,r=!1,n=!0)=>{if(!x(e))throw Error(`bigint/size: wrong value ${e}`);if("boolean"!=typeof t)throw Error(`bigint/le: expected boolean, got ${typeof t}`);if("boolean"!=typeof r)throw Error(`bigint/signed: expected boolean, got ${typeof r}`);if("boolean"!=typeof n)throw Error(`bigint/sized: expected boolean, got ${typeof n}`);let i=BigInt(e),o=2n**(8n*i-1n);return j({size:n?e:void 0,encodeStream:(i,s)=>{r&&s<0&&(s|=o);let a=[];for(let t=0;t<e;t++)a.push(Number(255n&s)),s>>=8n;let u=new Uint8Array(a).reverse();if(!n){let e=0;for(e=0;e<u.length&&0===u[e];e++);u=u.subarray(e)}i.bytes(t?u.reverse():u)},decodeStream:i=>{let s=i.bytes(n?e:Math.min(e,i.leftBytes)),a=t?s:L(s),u=0n;for(let e=0;e<a.length;e++)u|=BigInt(a[e])<<8n*BigInt(e);return r&&u&o&&(u=(u^o)-o),u},validate:e=>{if("bigint"!=typeof e)throw Error(`bigint: invalid value: ${e}`);return H(e,8n*i,!!r),e}})},$=G(32,!1),z=G(8,!0),Y=G(8,!0,!0),X=(e,t)=>j({size:e,encodeStream:(r,n)=>r.writeView(e,e=>t.write(e,n)),decodeStream:r=>r.readView(e,t.read),validate:e=>{if("number"!=typeof e)throw Error(`viewCoder: expected number, got ${typeof e}`);return t.validate&&t.validate(e),e}}),J=(e,t,r)=>{let n=8*e,i=2**(n-1),o=e=>{if(!x(e))throw Error(`sintView: value is not safe integer: ${e}`);if(e<-i||e>=i)throw Error(`sintView: value out of bounds. Expected ${-i} <= ${e} < ${i}`)},s=2**n,a=e=>{if(!x(e))throw Error(`uintView: value is not safe integer: ${e}`);if(0>e||e>=s)throw Error(`uintView: value out of bounds. Expected 0 <= ${e} < ${s}`)};return X(e,{write:r.write,read:r.read,validate:t?o:a})},Q=J(4,!1,{read:(e,t)=>e.getUint32(t,!0),write:(e,t)=>e.setUint32(0,t,!0)}),Z=J(4,!1,{read:(e,t)=>e.getUint32(t,!1),write:(e,t)=>e.setUint32(0,t,!1)}),ee=J(4,!0,{read:(e,t)=>e.getInt32(t,!0),write:(e,t)=>e.setInt32(0,t,!0)}),et=J(2,!1,{read:(e,t)=>e.getUint16(t,!0),write:(e,t)=>e.setUint16(0,t,!0)}),er=J(1,!1,{read:(e,t)=>e.getUint8(t),write:(e,t)=>e.setUint8(0,t)}),en=(e,t=!1)=>{if("boolean"!=typeof t)throw Error(`bytes/le: expected boolean, got ${typeof t}`);let r=R(e),n=A(e);return j({size:"number"==typeof e?e:void 0,encodeStream:(i,o)=>{n||r.encodeStream(i,o.length),i.bytes(t?L(o):o),n&&i.bytes(e)},decodeStream:i=>{let o;if(n){let t=i.find(e);if(!t)throw i.err("bytes: cannot find terminator");o=i.bytes(t-i.pos),i.bytes(e.length)}else o=i.bytes(null===e?i.leftBytes:r.decodeStream(i));return t?L(o):o},validate:e=>{if(!A(e))throw Error(`bytes: invalid value ${e}`);return e}})};function ei(e,t){if(!K(t))throw Error(`prefix: invalid inner value ${t}`);return ea(en(e),W(t))}let eo=(e,t=!1)=>F(ea(en(e,t),_),e=>{if("string"!=typeof e)throw Error(`expected string, got ${typeof e}`);return e}),es=(e,t={isLE:!1,with0x:!1})=>{let r=ea(en(e,t.isLE),E),n=t.with0x;if("boolean"!=typeof n)throw Error(`hex/with0x: expected boolean, got ${typeof n}`);return n&&(r=ea(r,{encode:e=>`0x${e}`,decode:e=>{if(!e.startsWith("0x"))throw Error("hex(with0x=true).encode input should start with 0x");return e.slice(2)}})),r};function ea(e,t){if(!K(e))throw Error(`apply: invalid inner value ${e}`);if(!V(t))throw Error(`apply: invalid base value ${e}`);return j({size:e.size,encodeStream:(r,n)=>{let i;try{i=t.decode(n)}catch(e){throw r.err(""+e)}return e.encodeStream(r,i)},decodeStream:r=>{let n=e.decodeStream(r);try{return t.encode(n)}catch(e){throw r.err(""+e)}}})}let eu=(e,t=!1)=>{if(!A(e))throw Error(`flag/flagValue: expected Uint8Array, got ${typeof e}`);if("boolean"!=typeof t)throw Error(`flag/xor: expected boolean, got ${typeof t}`);return j({size:e.length,encodeStream:(r,n)=>{!!n!==t&&r.bytes(e)},decodeStream:r=>{let n=r.leftBytes>=e.length;return n&&(n=I(r.bytes(e.length,!0),e))&&r.bytes(e.length),n!==t},validate:e=>{if(void 0!==e&&"boolean"!=typeof e)throw Error(`flag: expected boolean value or undefined, got ${typeof e}`);return e}})};function el(e,t,r){if(!K(t))throw Error(`flagged: invalid inner value ${t}`);if("string"!=typeof e&&!K(t))throw Error(`flagged: wrong path=${e}`);return j({encodeStream:(n,i)=>{"string"==typeof e?U.resolve(n.stack,e)?t.encodeStream(n,i):r&&t.encodeStream(n,r):(e.encodeStream(n,!!i),i?t.encodeStream(n,i):r&&t.encodeStream(n,r))},decodeStream:n=>{let i=!1;if(i="string"==typeof e?!!U.resolve(n.stack,e):e.decodeStream(n))return t.decodeStream(n);r&&t.decodeStream(n)}})}function ec(e,t,r=!0){if(!K(e))throw Error(`magic: invalid inner value ${e}`);if("boolean"!=typeof r)throw Error(`magic: expected boolean, got ${typeof r}`);return j({size:e.size,encodeStream:(r,n)=>e.encodeStream(r,t),decodeStream:n=>{let i=e.decodeStream(n);if(r&&"object"!=typeof i&&i!==t||A(t)&&!I(t,i))throw n.err(`magic: invalid value: ${i} !== ${t}`)},validate:e=>{if(void 0!==e)throw Error(`magic: wrong value=${typeof e}`);return e}})}function ef(e){let t=0;for(let r of e){if(void 0===r.size)return;if(!x(r.size))throw Error(`sizeof: wrong element size=${t}`);t+=r.size}return t}function eh(e){if(!k(e))throw Error(`struct: expected plain object, got ${e}`);for(let t in e)if(!K(e[t]))throw Error(`struct: field ${t} is not CoderType`);return j({size:ef(Object.values(e)),encodeStream:(t,r)=>{t.pushObj(r,n=>{for(let i in e)n(i,()=>e[i].encodeStream(t,r[i]))})},decodeStream:t=>{let r={};return t.pushObj(r,n=>{for(let i in e)n(i,()=>r[i]=e[i].decodeStream(t))}),r},validate:e=>{if("object"!=typeof e||null===e)throw Error(`struct: invalid value ${e}`);return e}})}function ep(e){if(!Array.isArray(e))throw Error(`Packed.Tuple: got ${typeof e} instead of array`);for(let t=0;t<e.length;t++)if(!K(e[t]))throw Error(`tuple: field ${t} is not CoderType`);return j({size:ef(e),encodeStream:(t,r)=>{if(!Array.isArray(r))throw t.err(`tuple: invalid value ${r}`);t.pushObj(r,n=>{for(let i=0;i<e.length;i++)n(`${i}`,()=>e[i].encodeStream(t,r[i]))})},decodeStream:t=>{let r=[];return t.pushObj(r,n=>{for(let i=0;i<e.length;i++)n(`${i}`,()=>r.push(e[i].decodeStream(t)))}),r},validate:t=>{if(!Array.isArray(t))throw Error(`tuple: invalid value ${t}`);if(t.length!==e.length)throw Error(`tuple: wrong length=${t.length}, expected ${e.length}`);return t}})}function ed(e,t){if(!K(t))throw Error(`array: invalid inner value ${t}`);let r=R("string"==typeof e?`../${e}`:e);return j({size:"number"==typeof e&&t.size?e*t.size:void 0,encodeStream:(n,i)=>{let o=n;o.pushObj(i,s=>{A(e)||r.encodeStream(n,i.length);for(let r=0;r<i.length;r++)s(`${r}`,()=>{let s=i[r],a=n.pos;if(t.encodeStream(n,s),A(e)){if(e.length>o.pos-a)return;let t=o.finish(!1).subarray(a,o.pos);if(I(t.subarray(0,e.length),e))throw o.err(`array: inner element encoding same as separator. elm=${s} data=${t}`)}})}),A(e)&&n.bytes(e)},decodeStream:n=>{let i=[];return n.pushObj(i,o=>{if(null===e)for(let e=0;!n.isEnd()&&(o(`${e}`,()=>i.push(t.decodeStream(n))),!t.size||!(n.leftBytes<t.size));e++);else if(A(e))for(let r=0;;r++){if(I(n.bytes(e.length,!0),e)){n.bytes(e.length);break}o(`${r}`,()=>i.push(t.decodeStream(n)))}else{let e;o("arrayLen",()=>e=r.decodeStream(n));for(let r=0;r<e;r++)o(`${r}`,()=>i.push(t.decodeStream(n)))}}),i},validate:e=>{if(!Array.isArray(e))throw Error(`array: invalid value ${e}`);return e}})}},38455:function(e,t,r){"use strict";r.d(t,{A_:function(){return n},Bm:function(){return R},Cr:function(){return p},E:function(){return A},Fe:function(){return w},HV:function(){return y},J_:function(){return s},NL:function(){return g},Rd:function(){return E},S9:function(){return o},SG:function(){return _},SH:function(){return f},Su:function(){return U},WI:function(){return v},_V:function(){return x},_f:function(){return S},an:function(){return I},cQ:function(){return d},fn:function(){return L},fy:function(){return h},gZ:function(){return P},g_:function(){return u},hv:function(){return B},iO:function(){return i},k0:function(){return b},n:function(){return c},sF:function(){return N},uS:function(){return l},us:function(){return m},v9:function(){return D},w_:function(){return a},xz:function(){return O},y5:function(){return C},yt:function(){return T},zO:function(){return k}});let n="ACCEPTED_ON_L2",i="ACCEPTED_ON_L1",o="SUCCEEDED",s="REVERTED",a="PENDING",u="REJECTED",l="RECEIVED",c="DECLARE",f="DEPLOY",h="DEPLOY_ACCOUNT",p="INVOKE",d="L1_HANDLER",y="struct",g="event",m="function",b="constructor",w="l1_handler",v="enum",_="view",E="external",S="WEI",T="FRI",I={BLOB:"BLOB",CALLDATA:"CALLDATA"},A={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},O={DECLARE:c,DEPLOY:f,DEPLOY_ACCOUNT:h,INVOKE:p,L1_HANDLER:d},P={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},k={RECEIVED:l,REJECTED:u,ACCEPTED_ON_L2:n,ACCEPTED_ON_L1:i},x={ACCEPTED_ON_L2:n,ACCEPTED_ON_L1:i},C={SUCCEEDED:o,REVERTED:s},R={LATEST:"latest",PENDING:"pending"},B={L1:"L1",L2:"L2"},U={L1:0,L2:1},N={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},D={V0:N.V0,V1:N.V1,V2:N.V2,F0:N.F0,F1:N.F1,F2:N.F2},L={V3:N.V3,F3:N.F3}},78015:function(e,t,r){"use strict";r.r(t),r.d(t,{ABI_TYPE_CONSTRUCTOR:function(){return a.k0},ABI_TYPE_ENUM:function(){return a.WI},ABI_TYPE_FUNCTION:function(){return a.us},ABI_TYPE_L1_HANDLER:function(){return a.Fe},API:function(){return i},CALL_TYPE:function(){return a.E},CONTRACT:function(){return n},EBlockTag:function(){return a.Bm},EDAMode:function(){return a.Su},EDataAvailabilityMode:function(){return a.hv},ESimulationFlag:function(){return a.gZ},ETransactionExecutionStatus:function(){return a.y5},ETransactionFinalityStatus:function(){return a._V},ETransactionStatus:function(){return a.zO},ETransactionType:function(){return a.xz},ETransactionVersion:function(){return a.sF},ETransactionVersion2:function(){return a.v9},ETransactionVersion3:function(){return a.fn},EVENT_ABI_TYPE:function(){return a.NL},L1_DA_MODE:function(){return a.an},PAYMASTER_API:function(){return s},PRICE_UNIT_FRI:function(){return a.yt},PRICE_UNIT_WEI:function(){return a._f},Permission:function(){return u},STATE_MUTABILITY_EXTERNAL:function(){return a.Rd},STATE_MUTABILITY_VIEW:function(){return a.SG},STATUS_ACCEPTED_ON_L1:function(){return a.iO},STATUS_ACCEPTED_ON_L2:function(){return a.A_},STATUS_PENDING:function(){return a.w_},STATUS_RECEIVED:function(){return a.uS},STATUS_REJECTED:function(){return a.g_},STATUS_REVERTED:function(){return a.J_},STATUS_SUCCEEDED:function(){return a.S9},STRUCT_ABI_TYPE:function(){return a.HV},TXN_TYPE_DECLARE:function(){return a.n},TXN_TYPE_DEPLOY:function(){return a.SH},TXN_TYPE_DEPLOY_ACCOUNT:function(){return a.fy},TXN_TYPE_INVOKE:function(){return a.Cr},TXN_TYPE_L1_HANDLER:function(){return a.cQ},TypedDataRevision:function(){return l},WALLET_API:function(){return o}});var n={};r.r(n);var i={};r.r(i),r.d(i,{ABI_TYPE_CONSTRUCTOR:function(){return a.k0},ABI_TYPE_ENUM:function(){return a.WI},ABI_TYPE_FUNCTION:function(){return a.us},ABI_TYPE_L1_HANDLER:function(){return a.Fe},CALL_TYPE:function(){return a.E},CONTRACT:function(){return n},EBlockTag:function(){return a.Bm},EDAMode:function(){return a.Su},EDataAvailabilityMode:function(){return a.hv},ESimulationFlag:function(){return a.gZ},ETransactionExecutionStatus:function(){return a.y5},ETransactionFinalityStatus:function(){return a._V},ETransactionStatus:function(){return a.zO},ETransactionType:function(){return a.xz},ETransactionVersion:function(){return a.sF},ETransactionVersion2:function(){return a.v9},ETransactionVersion3:function(){return a.fn},EVENT_ABI_TYPE:function(){return a.NL},L1_DA_MODE:function(){return a.an},PRICE_UNIT_FRI:function(){return a.yt},PRICE_UNIT_WEI:function(){return a._f},STATE_MUTABILITY_EXTERNAL:function(){return a.Rd},STATE_MUTABILITY_VIEW:function(){return a.SG},STATUS_ACCEPTED_ON_L1:function(){return a.iO},STATUS_ACCEPTED_ON_L2:function(){return a.A_},STATUS_PENDING:function(){return a.w_},STATUS_RECEIVED:function(){return a.uS},STATUS_REJECTED:function(){return a.g_},STATUS_REVERTED:function(){return a.J_},STATUS_SUCCEEDED:function(){return a.S9},STRUCT_ABI_TYPE:function(){return a.HV},TXN_TYPE_DECLARE:function(){return a.n},TXN_TYPE_DEPLOY:function(){return a.SH},TXN_TYPE_DEPLOY_ACCOUNT:function(){return a.fy},TXN_TYPE_INVOKE:function(){return a.Cr},TXN_TYPE_L1_HANDLER:function(){return a.cQ}});var o={};r.r(o),r.d(o,{Permission:function(){return u},TypedDataRevision:function(){return l}});var s={};r.r(s);var a=r(38455);let u={ACCOUNTS:"accounts"},l={ACTIVE:"1",LEGACY:"0"}},88628:function(e,t,r){"use strict";r.d(t,{OP:function(){return b},PS:function(){return T},Q:function(){return w},U_:function(){return d},Us:function(){return I},gN:function(){return E},kK:function(){return _},oA:function(){return p},wQ:function(){return f}});var n=r(44189);let i=BigInt(0),o=BigInt(1),s=BigInt(2),a=BigInt(3),u=BigInt(4),l=BigInt(5),c=BigInt(8);function f(e,t){let r=e%t;return r>=i?r:t+r}function h(e,t,r){if(t<i)throw Error("invalid exponent, negatives unsupported");if(r<=i)throw Error("invalid modulus");if(r===o)return i;let n=o;for(;t>i;)t&o&&(n=n*e%r),e=e*e%r,t>>=o;return n}function p(e,t,r){let n=e;for(;t-- >i;)n*=n,n%=r;return n}function d(e,t){if(e===i)throw Error("invert: expected non-zero number");if(t<=i)throw Error("invert: expected positive modulus, got "+t);let r=f(e,t),n=t,s=i,a=o,u=o,l=i;for(;r!==i;){let e=n/r,t=n%r,i=s-u*e,o=a-l*e;n=r,r=t,s=u,a=l,u=i,l=o}if(n!==o)throw Error("invert: does not exist");return f(s,t)}function y(e){let t,r,n;let a=(e-o)/s;for(t=e-o,r=0;t%s===i;t/=s,r++);for(n=s;n<e&&h(n,a,e)!==e-o;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+o)/u;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let l=(t+o)/s;return function(e,i){if(e.pow(i,a)===e.neg(e.ONE))throw Error("Cannot find square root");let s=r,u=e.pow(e.mul(e.ONE,n),t),c=e.pow(i,l),f=e.pow(i,t);for(;!e.eql(f,e.ONE);){if(e.eql(f,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(f);t<s&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(u,o<<BigInt(s-t-1));u=e.sqr(r),c=e.mul(c,r),f=e.mul(f,u),s=t}return c}}function g(e){if(e%u===a){let t=(e+o)/u;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%c===l){let t=(e-l)/c;return function(e,r){let n=e.mul(r,s),i=e.pow(n,t),o=e.mul(r,i),a=e.mul(e.mul(o,s),i),u=e.mul(o,e.sub(a,e.ONE));if(!e.eql(e.sqr(u),r))throw Error("Cannot find square root");return u}}return y(e)}let m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function b(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=m.reduce((e,t)=>(e[t]="function",e),t);return(0,n.FF)(e,r)}function w(e,t,r){if(r<i)throw Error("invalid exponent, negatives unsupported");if(r===i)return e.ONE;if(r===o)return t;let n=e.ONE,s=t;for(;r>i;)r&o&&(n=e.mul(n,s)),s=e.sqr(s),r>>=o;return n}function v(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r}function _(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function E(e,t,r=!1,s={}){let a;if(e<=i)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:u,nByteLength:l}=_(e,t);if(l>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let c=Object.freeze({ORDER:e,BITS:u,BYTES:l,MASK:(0,n.dQ)(u),ZERO:i,ONE:o,create:t=>f(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return i<=t&&t<e},is0:e=>e===i,isOdd:e=>(e&o)===o,neg:t=>f(-t,e),eql:(e,t)=>e===t,sqr:t=>f(t*t,e),add:(t,r)=>f(t+r,e),sub:(t,r)=>f(t-r,e),mul:(t,r)=>f(t*r,e),pow:(e,t)=>w(c,e,t),div:(t,r)=>f(t*d(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>d(t,e),sqrt:s.sqrt||(t=>(a||(a=g(e)),a(c,t))),invertBatch:e=>v(c,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,n.S5)(e,l):(0,n.tL)(e,l),fromBytes:e=>{if(e.length!==l)throw Error("Field.fromBytes: expected "+l+" bytes, got "+e.length);return r?(0,n.ty)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(c)}function S(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function T(e){let t=S(e);return t+Math.ceil(t/2)}function I(e,t,r=!1){let i=e.length,s=S(t),a=T(t);if(i<16||i<a||i>1024)throw Error("expected "+a+"-1024 bytes of input, got "+i);let u=f(r?(0,n.bytesToNumberBE)(e):(0,n.ty)(e),t-o)+o;return r?(0,n.S5)(u,s):(0,n.tL)(u,s)}},1035:function(e,t,r){"use strict";r.r(t),r.d(t,{poseidon:function(){return s},splitConstants:function(){return o},validateOpts:function(){return i}});var n=r(88628);function i(e){let{Fp:t,mds:r,reversePartialPowIdx:i,roundConstants:o}=e,{roundsFull:s,roundsPartial:a,sboxPower:u,t:l}=e;for(let r of((0,n.OP)(t),["t","roundsFull","roundsPartial"]))if("number"!=typeof e[r]||!Number.isSafeInteger(e[r]))throw Error("invalid number "+r);if(!Array.isArray(r)||r.length!==l)throw Error("Poseidon: invalid MDS matrix");let c=r.map(e=>{if(!Array.isArray(e)||e.length!==l)throw Error("invalid MDS matrix row: "+e);return e.map(e=>{if("bigint"!=typeof e)throw Error("invalid MDS matrix bigint: "+e);return t.create(e)})});if(void 0!==i&&"boolean"!=typeof i)throw Error("invalid param reversePartialPowIdx="+i);if(1&s)throw Error("roundsFull is not even"+s);let f=s+a;if(!Array.isArray(o)||o.length!==f)throw Error("Poseidon: invalid round constants");let h=o.map(e=>{if(!Array.isArray(e)||e.length!==l)throw Error("invalid round constants");return e.map(e=>{if("bigint"!=typeof e||!t.isValid(e))throw Error("invalid round constant");return t.create(e)})});if(!u||![3,5,7].includes(u))throw Error("invalid sboxPower");let p=BigInt(u),d=e=>(0,n.Q)(t,e,p);return 3===u?d=e=>t.mul(t.sqrN(e),e):5===u&&(d=e=>t.mul(t.sqrN(t.sqrN(e)),e)),Object.freeze({...e,rounds:f,sboxFn:d,roundConstants:h,mds:c})}function o(e,t){if("number"!=typeof t)throw Error("poseidonSplitConstants: invalid t");if(!Array.isArray(e)||e.length%t)throw Error("poseidonSplitConstants: invalid rc");let r=[],n=[];for(let i=0;i<e.length;i++)n.push(e[i]),n.length===t&&(r.push(n),n=[]);return r}function s(e){let t=i(e),{Fp:r,mds:n,roundConstants:o,rounds:s,roundsPartial:a,sboxFn:u,t:l}=t,c=t.roundsFull/2,f=t.reversePartialPowIdx?l-1:0,h=(e,t,i)=>(e=e.map((e,t)=>r.add(e,o[i][t])),t?e=e.map(e=>u(e)):e[f]=u(e[f]),e=n.map(t=>t.reduce((t,n,i)=>r.add(t,r.mulN(n,e[i])),r.ZERO))),p=function(e){if(!Array.isArray(e)||e.length!==l)throw Error("invalid values, expected array of bigints with length "+l);e=e.map(e=>{if("bigint"!=typeof e)throw Error("invalid bigint="+e);return r.create(e)});let t=0;for(let r=0;r<c;r++)e=h(e,!0,t++);for(let r=0;r<a;r++)e=h(e,!1,t++);for(let r=0;r<c;r++)e=h(e,!0,t++);if(t!==s)throw Error("invalid number of rounds");return e};return p.roundConstants=o,p}},44189:function(e,t,r){"use strict";r.d(t,{Dd:function(){return I},FF:function(){return C},Fy:function(){return T},H9:function(){return R},S5:function(){return w},Z2:function(){return S},_t:function(){return s},bytesToNumberBE:function(){return g},ci:function(){return c},dQ:function(){return A},eV:function(){return _},gk:function(){return a},hexToBytes:function(){return y},n$:function(){return k},ql:function(){return v},tL:function(){return b},ty:function(){return m},uw:function(){return u},uz:function(){return f}});let n=BigInt(0),i=BigInt(1),o=BigInt(2);function s(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function a(e){if(!s(e))throw Error("Uint8Array expected")}function u(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let l=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function c(e){a(e);let t="";for(let r=0;r<e.length;r++)t+=l[e[r]];return t}function f(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function h(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?n:BigInt("0x"+e)}let p={_0:48,_9:57,A:65,F:70,a:97,f:102};function d(e){return e>=p._0&&e<=p._9?e-p._0:e>=p.A&&e<=p.F?e-(p.A-10):e>=p.a&&e<=p.f?e-(p.a-10):void 0}function y(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=d(e.charCodeAt(i)),o=d(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}function g(e){return h(c(e))}function m(e){return a(e),h(c(Uint8Array.from(e).reverse()))}function b(e,t){return y(e.toString(16).padStart(2*t,"0"))}function w(e,t){return b(e,t).reverse()}function v(e,t,r){let n;if("string"==typeof t)try{n=y(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(s(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n}function _(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];a(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}let E=e=>"bigint"==typeof e&&n<=e;function S(e,t,r){return E(e)&&E(t)&&E(r)&&t<=e&&e<r}function T(e,t,r,n){if(!S(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function I(e){let t;for(t=0;e>n;e>>=i,t+=1);return t}let A=e=>(o<<BigInt(e-1))-i,O=e=>new Uint8Array(e),P=e=>Uint8Array.from(e);function k(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=O(e),i=O(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),u=(e=O())=>{i=a(P([0]),e),n=a(),0!==e.length&&(i=a(P([1]),e),n=a())},l=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=a()).slice();r.push(t),e+=n.length}return _(...r)};return(e,t)=>{let r;for(s(),u(e);!(r=t(l()));)u();return s(),r}}let x={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||s(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function C(e,t,r={}){let n=(t,r,n)=>{let i=x[r];if("function"!=typeof i)throw Error("invalid validator function");let o=e[t];if((!n||void 0!==o)&&!i(o,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+o)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}function R(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let o=e(r,...n);return t.set(r,o),o}}},32174:function(e,t,r){"use strict";r.r(t),r.d(t,{DER:function(){return E},SWUFpSqrtRatio:function(){return C},mapToCurveSimpleSWU:function(){return R},weierstrass:function(){return x},weierstrassPoints:function(){return P}});var n=r(88628),i=r(44189);let o=BigInt(0),s=BigInt(1);function a(e,t){let r=t.negate();return e?r:t}function u(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function l(e,t){return u(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function c(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}function f(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}let h=new WeakMap,p=new WeakMap;function d(e){return p.get(e)||1}function y(e,t){return{constTimeNegate:a,hasPrecomputes:e=>1!==d(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>o;)r&s&&(n=n.add(i)),i=i.double(),r>>=s;return n},precomputeWindow(e,r){let{windows:n,windowSize:i}=l(r,t),o=[],s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(r,n,i){let{windows:o,windowSize:u}=l(r,t),c=e.ZERO,f=e.BASE,h=BigInt(2**r-1),p=2**r,d=BigInt(r);for(let e=0;e<o;e++){let t=e*u,r=Number(i&h);i>>=d,r>u&&(r-=p,i+=s);let o=t,l=t+Math.abs(r)-1,y=e%2!=0,g=r<0;0===r?f=f.add(a(y,n[o])):c=c.add(a(g,n[l]))}return{p:c,f}},wNAFUnsafe(r,n,i,a=e.ZERO){let{windows:u,windowSize:c}=l(r,t),f=BigInt(2**r-1),h=2**r,p=BigInt(r);for(let e=0;e<u;e++){let t=e*c;if(i===o)break;let r=Number(i&f);if(i>>=p,r>c&&(r-=h,i+=s),0===r)continue;let u=n[t+Math.abs(r)-1];r<0&&(u=u.negate()),a=a.add(u)}return a},getPrecomputes(e,t,r){let n=h.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&h.set(t,r(n))),n},wNAFCached(e,t,r){let n=d(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let i=d(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){u(r,t),p.set(e,r),h.delete(e)}}}function g(e,t,r,n){if(c(r,e),f(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let o=e.ZERO,s=(0,i.Dd)(BigInt(r.length)),a=s>12?s-3:s>4?s-2:s?2:1,u=(1<<a)-1,l=Array(u+1).fill(o),h=Math.floor((t.BITS-1)/a)*a,p=o;for(let e=h;e>=0;e-=a){l.fill(o);for(let t=0;t<n.length;t++){let i=Number(n[t]>>BigInt(e)&BigInt(u));l[i]=l[i].add(r[t])}let t=o;for(let e=l.length-1,r=o;e>0;e--)r=r.add(l[e]),t=t.add(r);if(p=p.add(t),0!==e)for(let e=0;e<a;e++)p=p.double()}return p}function m(e){return(0,n.OP)(e.Fp),(0,i.FF)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.kK)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function b(e){void 0!==e.lowS&&(0,i.uw)("lowS",e.lowS),void 0!==e.prehash&&(0,i.uw)("prehash",e.prehash)}function w(e){let t=m(e);i.FF(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:o}=t;if(r){if(!n.eql(o,n.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}let{bytesToNumberBE:v,hexToBytes:_}=i,E={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{let{Err:r}=E;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,o=i.uz(n);if(o.length/2&128)throw new r("tlv.encode: long form length too big");let s=n>127?i.uz(o.length/2|128):"";return i.uz(e)+s+o+t},decode(e,t){let{Err:r}=E,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let i=t[n++],o=0;if(128&i){let e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of s)o=o<<8|e;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=i;let s=t.subarray(n,n+o);if(s.length!==o)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+o)}}},_int:{encode(e){let{Err:t}=E;if(e<S)throw new t("integer: negative integers are not allowed");let r=i.uz(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=E;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return v(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=E,o="string"==typeof e?_(e):e;i.gk(o);let{v:s,l:a}=n.decode(48,o);if(a.length)throw new t("invalid signature: left bytes after parsing");let{v:u,l:l}=n.decode(2,s),{v:c,l:f}=n.decode(2,l);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(u),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=E,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},S=BigInt(0),T=BigInt(1),I=BigInt(2),A=BigInt(3),O=BigInt(4);function P(e){let t=w(e),{Fp:r}=t,o=n.gN(t.n,t.nBitLength),s=t.toBytes||((e,t,n)=>{let o=t.toAffine();return i.eV(Uint8Array.from([4]),r.toBytes(o.x),r.toBytes(o.y))}),a=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function u(e){let{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),u(t.Gx)))throw Error("bad generator point: equation left != right");function l(e){return i.Z2(e,T,t.n)}function c(e){let r;let{allowedPrivateKeyLengths:o,nByteLength:s,wrapPrivateKey:a,n:u}=t;if(o&&"bigint"!=typeof e){if(i._t(e)&&(e=i.ci(e)),"string"!=typeof e||!o.includes(e.length))throw Error("invalid private key");e=e.padStart(2*s,"0")}try{r="bigint"==typeof e?e:i.bytesToNumberBE((0,i.ql)("private key",e,s))}catch(t){throw Error("invalid private key, expected hex or "+s+" bytes, got "+typeof e)}return a&&(r=n.wQ(r,u)),i.Fy("private key",r,T,u),r}function f(e){if(!(e instanceof d))throw Error("ProjectivePoint expected")}let h=(0,i.H9)((e,t)=>{let{px:n,py:i,pz:o}=e;if(r.eql(o,r.ONE))return{x:n,y:i};let s=e.is0();null==t&&(t=s?r.ONE:r.inv(o));let a=r.mul(n,t),u=r.mul(i,t),l=r.mul(o,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:a,y:u}}),p=(0,i.H9)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw Error("bad point: x or y not FE");let o=r.sqr(i),s=u(n);if(!r.eql(o,s))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class d{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof d)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?d.ZERO:new d(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)}static fromHex(e){let t=d.fromAffine(a((0,i.ql)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(c(e))}static msm(e,t){return g(d,o,e,t)}_setWindowSize(e){b.setWindowSize(this,e)}assertValidity(){p(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){f(e);let{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,u=r.eql(r.mul(t,a),r.mul(o,i)),l=r.eql(r.mul(n,a),r.mul(s,i));return u&&l}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,A),{px:o,py:s,pz:a}=this,u=r.ZERO,l=r.ZERO,c=r.ZERO,f=r.mul(o,o),h=r.mul(s,s),p=r.mul(a,a),y=r.mul(o,s);return y=r.add(y,y),c=r.mul(o,a),c=r.add(c,c),u=r.mul(e,c),l=r.mul(i,p),l=r.add(u,l),u=r.sub(h,l),l=r.add(h,l),l=r.mul(u,l),u=r.mul(y,u),c=r.mul(i,c),p=r.mul(e,p),y=r.sub(f,p),y=r.mul(e,y),y=r.add(y,c),c=r.add(f,f),f=r.add(c,f),f=r.add(f,p),f=r.mul(f,y),l=r.add(l,f),p=r.mul(s,a),p=r.add(p,p),f=r.mul(p,y),u=r.sub(u,f),c=r.mul(p,h),c=r.add(c,c),new d(u,l,c=r.add(c,c))}add(e){f(e);let{px:n,py:i,pz:o}=this,{px:s,py:a,pz:u}=e,l=r.ZERO,c=r.ZERO,h=r.ZERO,p=t.a,y=r.mul(t.b,A),g=r.mul(n,s),m=r.mul(i,a),b=r.mul(o,u),w=r.add(n,i),v=r.add(s,a);w=r.mul(w,v),v=r.add(g,m),w=r.sub(w,v),v=r.add(n,o);let _=r.add(s,u);return v=r.mul(v,_),_=r.add(g,b),v=r.sub(v,_),_=r.add(i,o),l=r.add(a,u),_=r.mul(_,l),l=r.add(m,b),_=r.sub(_,l),h=r.mul(p,v),l=r.mul(y,b),h=r.add(l,h),l=r.sub(m,h),h=r.add(m,h),c=r.mul(l,h),m=r.add(g,g),m=r.add(m,g),b=r.mul(p,b),v=r.mul(y,v),m=r.add(m,b),b=r.sub(g,b),b=r.mul(p,b),v=r.add(v,b),g=r.mul(m,v),c=r.add(c,g),g=r.mul(_,v),l=r.mul(w,l),l=r.sub(l,g),g=r.mul(w,m),h=r.mul(_,h),new d(l,c,h=r.add(h,g))}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return b.wNAFCached(this,e,d.normalizeZ)}multiplyUnsafe(e){let{endo:n,n:o}=t;i.Fy("scalar",e,S,o);let s=d.ZERO;if(e===S)return s;if(this.is0()||e===T)return this;if(!n||b.hasPrecomputes(this))return b.wNAFCachedUnsafe(this,e,d.normalizeZ);let{k1neg:a,k1:u,k2neg:l,k2:c}=n.splitScalar(e),f=s,h=s,p=this;for(;u>S||c>S;)u&T&&(f=f.add(p)),c&T&&(h=h.add(p)),p=p.double(),u>>=T,c>>=T;return a&&(f=f.negate()),l&&(h=h.negate()),h=new d(r.mul(h.px,n.beta),h.py,h.pz),f.add(h)}multiply(e){let n,o;let{endo:s,n:a}=t;if(i.Fy("scalar",e,T,a),s){let{k1neg:t,k1:i,k2neg:a,k2:u}=s.splitScalar(e),{p:l,f:c}=this.wNAF(i),{p:f,f:h}=this.wNAF(u);l=b.constTimeNegate(t,l),f=b.constTimeNegate(a,f),f=new d(r.mul(f.px,s.beta),f.py,f.pz),n=l.add(f),o=c.add(h)}else{let{p:t,f:r}=this.wNAF(e);n=t,o=r}return d.normalizeZ([n,o])[0]}multiplyAndAddUnsafe(e,t,r){let n=d.BASE,i=(e,t)=>t!==S&&t!==T&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){return h(this,e)}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===T)return!0;if(r)return r(d,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===T?this:r?r(d,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return(0,i.uw)("isCompressed",e),this.assertValidity(),s(d,this,e)}toHex(e=!0){return(0,i.uw)("isCompressed",e),i.ci(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);let m=t.nBitLength,b=y(d,t.endo?Math.ceil(m/2):m);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:l}}function k(e){let t=m(e);return i.FF(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function x(e){let t=k(e),{Fp:r,n:o}=t,s=r.BYTES+1,a=2*r.BYTES+1;function u(e){return n.wQ(e,o)}function l(e){return n.U_(e,o)}let{ProjectivePoint:c,normPrivateKeyToScalar:f,weierstrassEquation:h,isWithinCurveOrder:p}=P({...t,toBytes(e,t,n){let o=t.toAffine(),s=r.toBytes(o.x),a=i.eV;return((0,i.uw)("isCompressed",n),n)?a(Uint8Array.from([t.hasEvenY()?2:3]),s):a(Uint8Array.from([4]),s,r.toBytes(o.y))},fromBytes(e){let t=e.length,n=e[0],o=e.subarray(1);if(t===s&&(2===n||3===n)){let e;let t=i.bytesToNumberBE(o);if(!i.Z2(t,T,r.ORDER))throw Error("Point is not on curve");let s=h(t);try{e=r.sqrt(s)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&n)==1!=((e&T)===T)&&(e=r.neg(e)),{x:t,y:e}}if(t===a&&4===n)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+s+", or uncompressed "+a+", got "+t)}}),d=e=>i.ci(i.tL(e,t.nByteLength));function y(e){return e>o>>T}function g(e){return y(e)?u(-e):e}let m=(e,t,r)=>i.bytesToNumberBE(e.slice(t,r));class w{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new w(m(e=(0,i.ql)("compactSignature",e,2*r),0,r),m(e,r,2*r))}static fromDER(e){let{r:t,s:r}=E.toSig((0,i.ql)("DER",e));return new w(t,r)}assertValidity(){i.Fy("r",this.r,T,o),i.Fy("s",this.s,T,o)}addRecoveryBit(e){return new w(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s:o,recovery:s}=this,a=x((0,i.ql)("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw Error("recovery id invalid");let f=2===s||3===s?n+t.n:n;if(f>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let h=(1&s)==0?"02":"03",p=c.fromHex(h+d(f)),y=l(f),g=u(-a*y),m=u(o*y),b=c.BASE.multiplyAndAddUnsafe(p,g,m);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return E.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}let v={isValidPrivateKey(e){try{return f(e),!0}catch(e){return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let e=n.PS(t.n);return n.Us(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function _(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)}function I(e){let t=i._t(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===s||n===a:r?n===2*s||n===2*a:e instanceof c}function A(e,t,r=!0){if(I(e))throw Error("first arg must be private key");if(!I(t))throw Error("second arg must be public key");return c.fromHex(t).multiply(f(e)).toRawBytes(r)}let O=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=i.bytesToNumberBE(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},x=t.bits2int_modN||function(e){return u(O(e))},C=i.dQ(t.nBitLength);function R(e){return i.Fy("num < 2^"+t.nBitLength,e,S,C),i.tL(e,t.nByteLength)}function B(e,n,o=U){if(["recovered","canonical"].some(e=>e in o))throw Error("sign() legacy options not supported");let{hash:s,randomBytes:a}=t,{lowS:h,prehash:d,extraEntropy:m}=o;null==h&&(h=!0),e=(0,i.ql)("msgHash",e),b(o),d&&(e=(0,i.ql)("prehashed msgHash",s(e)));let v=x(e),_=f(n),E=[R(_),R(v)];if(null!=m&&!1!==m){let e=!0===m?a(r.BYTES):m;E.push((0,i.ql)("extraEntropy",e))}let I=i.eV(...E),A=v;return{seed:I,k2sig:function(e){let t=O(e);if(!p(t))return;let r=l(t),n=c.BASE.multiply(t).toAffine(),i=u(n.x);if(i===S)return;let o=u(r*u(A+i*_));if(o===S)return;let s=(n.x===i?0:2)|Number(n.y&T),a=o;return h&&y(o)&&(a=g(o),s^=1),new w(i,a,s)}}}let U={lowS:t.lowS,prehash:!1},N={lowS:t.lowS,prehash:!1};function D(e,r,n=U){let{seed:o,k2sig:s}=B(e,r,n),a=t;return i.n$(a.hash.outputLen,a.nByteLength,a.hmac)(o,s)}function L(e,r,n,o=N){let s,a;let f=e;r=(0,i.ql)("msgHash",r),n=(0,i.ql)("publicKey",n);let{lowS:h,prehash:p,format:d}=o;if(b(o),"strict"in o)throw Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw Error("format must be compact or der");let y="string"==typeof f||i._t(f),g=!y&&!d&&"object"==typeof f&&null!==f&&"bigint"==typeof f.r&&"bigint"==typeof f.s;if(!y&&!g)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(g&&(a=new w(f.r,f.s)),y){try{"compact"!==d&&(a=w.fromDER(f))}catch(e){if(!(e instanceof E.Err))throw e}a||"der"===d||(a=w.fromCompact(f))}s=c.fromHex(n)}catch(e){return!1}if(!a||h&&a.hasHighS())return!1;p&&(r=t.hash(r));let{r:m,s:v}=a,_=x(r),S=l(v),T=u(_*S),I=u(m*S),A=c.BASE.multiplyAndAddUnsafe(s,T,I)?.toAffine();return!!A&&u(A.x)===m}return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:_,getSharedSecret:A,sign:D,verify:L,ProjectivePoint:c,Signature:w,utils:v}}function C(e,t){let r=e.ORDER,n=S;for(let e=r-T;e%I===S;e/=I)n+=T;let i=n,o=I<<i-T-T,s=o*I,a=(r-T)/s,u=(a-T)/I,l=s-T,c=o,f=e.pow(t,a),h=e.pow(t,(a+T)/I),p=(t,r)=>{let n=f,o=e.pow(r,l),s=e.sqr(o);s=e.mul(s,r);let a=e.mul(t,s);a=e.pow(a,u),a=e.mul(a,o),o=e.mul(a,r),s=e.mul(a,t);let p=e.mul(s,o);a=e.pow(p,c);let d=e.eql(a,e.ONE);o=e.mul(s,h),a=e.mul(p,n),s=e.cmov(o,s,d),p=e.cmov(a,p,d);for(let t=i;t>T;t--){let r=t-I;r=I<<r-T;let i=e.pow(p,r),a=e.eql(i,e.ONE);o=e.mul(s,n),n=e.mul(n,n),i=e.mul(p,n),s=e.cmov(o,s,a),p=e.cmov(i,p,a)}return{isValid:d,value:s}};if(e.ORDER%O===A){let r=(e.ORDER-A)/O,n=e.sqrt(e.neg(t));p=(t,i)=>{let o=e.sqr(i),s=e.mul(t,i);o=e.mul(o,s);let a=e.pow(o,r);a=e.mul(a,s);let u=e.mul(a,n),l=e.mul(e.sqr(a),i),c=e.eql(l,t),f=e.cmov(u,a,c);return{isValid:c,value:f}}}return p}function R(e,t){if(n.OP(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=C(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let i,o,s,a,u,l,c,f;i=e.sqr(n),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),s=e.add(o,e.ONE),s=e.mul(s,t.B),a=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),a=e.mul(a,t.A),o=e.sqr(s),l=e.sqr(a),u=e.mul(l,t.A),o=e.add(o,u),o=e.mul(o,s),l=e.mul(l,a),u=e.mul(l,t.B),o=e.add(o,u),c=e.mul(i,s);let{isValid:h,value:p}=r(o,l);f=e.mul(i,n),f=e.mul(f,p),c=e.cmov(c,s,h),f=e.cmov(f,p,h);let d=e.isOdd(n)===e.isOdd(f);return f=e.cmov(e.neg(f),f,d),{x:c=e.div(c,a),y:f}}}},29643:function(e,t,r){"use strict";r.d(t,{kA:function(){return w}});var n=r(27581),i=r(67234),o=r(54139);class s extends o.kb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,i.z3)(e);let r=(0,o.O0)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,s=new Uint8Array(n);s.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,i.$h)(this),this.iHash.update(e),this}digestInto(e){(0,i.$h)(this),(0,i.gk)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let a=(e,t,r)=>new s(e,t).update(r).digest();a.create=(e,t)=>new s(e,t);var u=r(32174);function l(e){return{hash:e,hmac:(t,...r)=>a(e,t,(0,o.eV)(...r)),randomBytes:o.O6}}function c(e,t){let r=t=>(0,u.weierstrass)({...e,...l(t)});return Object.freeze({...r(t),create:r})}var f=r(88628);let h=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),p=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),d=BigInt(1),y=BigInt(2),g=(e,t)=>(e+t/y)/t;function m(e){let t=h,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),u=BigInt(88),l=e*e*e%t,c=l*l*e%t,p=(0,f.oA)(c,r,t)*c%t,d=(0,f.oA)(p,r,t)*c%t,g=(0,f.oA)(d,y,t)*l%t,m=(0,f.oA)(g,i,t)*g%t,w=(0,f.oA)(m,o,t)*m%t,v=(0,f.oA)(w,a,t)*w%t,_=(0,f.oA)(v,u,t)*v%t,E=(0,f.oA)(_,a,t)*w%t,S=(0,f.oA)(E,r,t)*c%t,T=(0,f.oA)(S,s,t)*m%t,I=(0,f.oA)(T,n,t)*l%t,A=(0,f.oA)(I,y,t);if(!b.eql(b.sqr(A),e))throw Error("Cannot find square root");return A}let b=(0,f.gN)(h,void 0,void 0,{sqrt:m}),w=c({a:BigInt(0),b:BigInt(7),Fp:b,n:p,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=p,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-d*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=g(o*e,t),u=g(-n*e,t),l=(0,f.wQ)(e-a*r-u*i,t),c=(0,f.wQ)(-a*n-u*o,t),h=l>s,y=c>s;if(h&&(l=t-l),y&&(c=t-c),l>s||c>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:y,k2:c}}}},n.JQ),v=BigInt(0),_={};function E(e,...t){let r=_[e];if(void 0===r){let t=sha256(Uint8Array.from(e,e=>e.charCodeAt(0)));r=concatBytes(t,t),_[e]=r}return sha256(concatBytes(r,...t))}let S=e=>mod(e,h),T=e=>mod(e,p),I=w.ProjectivePoint,A=null},67234:function(e,t,r){"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function o(e,...t){if(!i(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function u(e,t){o(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{$h:function(){return a},eB:function(){return u},gk:function(){return o},k8:function(){return n},z3:function(){return s}})},27581:function(e,t,r){"use strict";r.d(t,{JQ:function(){return p}});var n=r(67234),i=r(54139);function o(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,l=n?0:4;e.setUint32(t+u,s,n),e.setUint32(t+l,a,n)}let s=(e,t,r)=>e&t^~e&r,a=(e,t,r)=>e&t^e&r^t&r;class u extends i.kb{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.GL)(this.buffer)}update(e){(0,n.$h)(this);let{view:t,buffer:r,blockLen:o}=this,s=(e=(0,i.O0)(e)).length;for(let n=0;n<s;){let a=Math.min(o-this.pos,s-n);if(a===o){let t=(0,i.GL)(e);for(;o<=s-n;n+=o)this.process(t,n);continue}r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.$h)(this),(0,n.eB)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:a}=this,{pos:u}=this;t[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>s-u&&(this.process(r,0),u=0);for(let e=u;e<s;e++)t[e]=0;o(r,s-8,BigInt(8*this.length),a),this.process(r,0);let l=(0,i.GL)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,h=this.get();if(f>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<f;e++)l.setUint32(4*e,h[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}let l=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),c=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),f=new Uint32Array(64);class h extends u{constructor(){super(64,32,8,!1),this.A=0|c[0],this.B=0|c[1],this.C=0|c[2],this.D=0|c[3],this.E=0|c[4],this.F=0|c[5],this.G=0|c[6],this.H=0|c[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)f[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=f[e-15],r=f[e-2],n=(0,i.np)(t,7)^(0,i.np)(t,18)^t>>>3,o=(0,i.np)(r,17)^(0,i.np)(r,19)^r>>>10;f[e]=o+f[e-7]+n+f[e-16]|0}let{A:r,B:n,C:o,D:u,E:c,F:h,G:p,H:d}=this;for(let e=0;e<64;e++){let t=d+((0,i.np)(c,6)^(0,i.np)(c,11)^(0,i.np)(c,25))+s(c,h,p)+l[e]+f[e]|0,y=((0,i.np)(r,2)^(0,i.np)(r,13)^(0,i.np)(r,22))+a(r,n,o)|0;d=p,p=h,h=c,c=u+t|0,u=o,o=n,n=r,r=t+y|0}r=r+this.A|0,n=n+this.B|0,o=o+this.C|0,u=u+this.D|0,c=c+this.E|0,h=h+this.F|0,p=p+this.G|0,d=d+this.H|0,this.set(r,n,o,u,c,h,p,d)}roundClean(){f.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let p=(0,i.hE)(()=>new h)},80964:function(e,t,r){"use strict";let n,i,o;r.d(t,{fr:function(){return C}});var s=r(67234);let a=BigInt(4294967296-1),u=BigInt(32);function l(e,t=!1){return t?{h:Number(e&a),l:Number(e>>u&a)}:{h:0|Number(e>>u&a),l:0|Number(e&a)}}function c(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=l(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}let f=(e,t,r)=>e<<r|t>>>32-r,h=(e,t,r)=>t<<r|e>>>32-r,p=(e,t,r)=>t<<r-32|e>>>64-r,d=(e,t,r)=>e<<r-32|t>>>64-r;var y=r(54139);let g=[],m=[],b=[],w=BigInt(0),v=BigInt(1),_=BigInt(2),E=BigInt(7),S=BigInt(256),T=BigInt(113);for(let e=0,t=v,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],g.push(2*(5*n+r)),m.push((e+1)*(e+2)/2%64);let i=w;for(let e=0;e<7;e++)(t=(t<<v^(t>>E)*T)%S)&_&&(i^=v<<(v<<BigInt(e))-v);b.push(i)}let[I,A]=c(b,!0),O=(e,t,r)=>r>32?p(e,t,r):f(e,t,r),P=(e,t,r)=>r>32?d(e,t,r):h(e,t,r);function k(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,o=r[i],s=r[i+1],a=O(o,s,1)^r[n],u=P(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=u}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=m[r],o=O(t,i,n),s=P(t,i,n),a=g[r];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=I[n],e[1]^=A[n]}r.fill(0)}class x extends y.kb{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,s.k8)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,y.Jq)(this.state)}keccak(){y.iA||(0,y.l1)(this.state32),k(this.state32,this.rounds),y.iA||(0,y.l1)(this.state32),this.posOut=0,this.pos=0}update(e){(0,s.$h)(this);let{blockLen:t,state:r}=this,n=(e=(0,y.O0)(e)).length;for(let i=0;i<n;){let o=Math.min(t-this.pos,n-i);for(let t=0;t<o;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,s.$h)(this,!1),(0,s.gk)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,s.k8)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,s.eB)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new x(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}let C=(n=1,i=136,o=32,(0,y.hE)(()=>new x(i,n,o)))},54139:function(e,t,r){"use strict";r.d(t,{kb:function(){return d},l1:function(){return c},eV:function(){return p},GL:function(){return s},iA:function(){return u},O6:function(){return g},np:function(){return a},O0:function(){return h},Jq:function(){return o},hE:function(){return y}});let n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=r(67234);let o=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),s=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),a=(e,t)=>e<<32-t|e>>>t,u=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],l=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function c(e){for(let t=0;t<e.length;t++)e[t]=l(e[t])}function f(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function h(e){return"string"==typeof e&&(e=f(e)),(0,i.gk)(e),e}function p(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];(0,i.gk)(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}class d{clone(){return this._cloneInto()}}function y(e){let t=t=>e().update(h(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function g(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"==typeof n.randomBytes)return n.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}},69610:function(e){"use strict";e.exports=JSON.parse('{"COMPRESSED_TYPE_INVALID":"compressed should be a boolean","EC_PRIVATE_KEY_TYPE_INVALID":"private key should be a Buffer","EC_PRIVATE_KEY_LENGTH_INVALID":"private key length is invalid","EC_PRIVATE_KEY_RANGE_INVALID":"private key range is invalid","EC_PRIVATE_KEY_TWEAK_ADD_FAIL":"tweak out of range or resulting private key is invalid","EC_PRIVATE_KEY_TWEAK_MUL_FAIL":"tweak out of range","EC_PRIVATE_KEY_EXPORT_DER_FAIL":"couldn\'t export to DER format","EC_PRIVATE_KEY_IMPORT_DER_FAIL":"couldn\'t import from DER format","EC_PUBLIC_KEYS_TYPE_INVALID":"public keys should be an Array","EC_PUBLIC_KEYS_LENGTH_INVALID":"public keys Array should have at least 1 element","EC_PUBLIC_KEY_TYPE_INVALID":"public key should be a Buffer","EC_PUBLIC_KEY_LENGTH_INVALID":"public key length is invalid","EC_PUBLIC_KEY_PARSE_FAIL":"the public key could not be parsed or is invalid","EC_PUBLIC_KEY_CREATE_FAIL":"private was invalid, try again","EC_PUBLIC_KEY_TWEAK_ADD_FAIL":"tweak out of range or resulting public key is invalid","EC_PUBLIC_KEY_TWEAK_MUL_FAIL":"tweak out of range","EC_PUBLIC_KEY_COMBINE_FAIL":"the sum of the public keys is not valid","ECDH_FAIL":"scalar was invalid (zero or overflow)","ECDSA_SIGNATURE_TYPE_INVALID":"signature should be a Buffer","ECDSA_SIGNATURE_LENGTH_INVALID":"signature length is invalid","ECDSA_SIGNATURE_PARSE_FAIL":"couldn\'t parse signature","ECDSA_SIGNATURE_PARSE_DER_FAIL":"couldn\'t parse DER signature","ECDSA_SIGNATURE_SERIALIZE_DER_FAIL":"couldn\'t serialize signature to DER format","ECDSA_SIGN_FAIL":"nonce generation function failed or private key is invalid","ECDSA_RECOVER_FAIL":"couldn\'t recover public key from signature","MSG32_TYPE_INVALID":"message should be a Buffer","MSG32_LENGTH_INVALID":"message length is invalid","OPTIONS_TYPE_INVALID":"options should be an Object","OPTIONS_DATA_TYPE_INVALID":"options.data should be a Buffer","OPTIONS_DATA_LENGTH_INVALID":"options.data length is invalid","OPTIONS_NONCEFN_TYPE_INVALID":"options.noncefn should be a Function","RECOVERY_ID_TYPE_INVALID":"recovery should be a Number","RECOVERY_ID_VALUE_INVALID":"recovery should have value between -1 and 4","TWEAK_TYPE_INVALID":"tweak should be a Buffer","TWEAK_LENGTH_INVALID":"tweak length is invalid"}')}}]);