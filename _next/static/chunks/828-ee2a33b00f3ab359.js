"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[828],{828:function(e,t,n){n.d(t,{Z:function(){return ed}});var i=n(85893),r=n(30083),a=n(41686),s=n(91570),o=n(4505),l=n(98272),d=n(31690),c=n(89596),u=n(57333),p=n(70794);let v=e=>(0,d.WPw)(new p.O(e)).toString(),x=(e,t)=>new p.O(e).div(new p.O(10).pow(new p.O((null==t?void 0:t.decimals)||6))).toString(),f=e=>{var t;return null==e?void 0:null===(t=e.split("::")[1])||void 0===t?void 0:t.toUpperCase()};function g(e){let{transaction:t,balanceHidden:n}=e;return n?(0,i.jsx)(c.V,{hidden:!0}):(0,i.jsx)(u.h3,{value:v(t.data.stx_sent),displayType:"text",thousandSeparator:!0,prefix:"-",renderText:e=>(0,i.jsx)(c.V,{title:e,unit:"STX"})})}function h(e){var t,n,r;let{viewerAddress:a,event:s,balanceHidden:o,sip10Tokens:l}=e,d=(null===(t=s.data)||void 0===t?void 0:t.type)!=="burn"&&a===s.data.recipient;if(o)return(0,i.jsx)(c.V,{hidden:!0});if("ft"===s.type){let e=null===(r=s.data)||void 0===r?void 0:null===(n=r.asset_identifier)||void 0===n?void 0:n.split("::")[0],t=l.find(t=>t.principal===e),a=f(s.data.asset_identifier)||"";return(0,i.jsx)(u.h3,{allowNegative:!1,thousandSeparator:!0,value:x(s.data.amount,t),displayType:"text",prefix:d?"":"-",renderText:e=>(0,i.jsx)(c.V,{title:e,unit:a})})}return"stx"===s.type?(0,i.jsx)(u.h3,{allowNegative:!1,thousandSeparator:!0,value:v(s.data.amount),displayType:"text",prefix:d?"":"-",renderText:e=>(0,i.jsx)(c.V,{title:e,unit:"STX"})}):"nft"===s.type?(0,i.jsx)(c.V,{title:d?"1":"-1",unit:"NFT"}):null}function m(e){let{count:t,assetUnit:n}=e,r=t>0?String(t):"-".concat(-t);return(0,i.jsx)(c.V,{title:r,unit:n})}function T(e){let{transaction:{aggregated:t},balanceHidden:n,sip10Tokens:r}=e;return(0,i.jsx)(h,{event:t.assetEvents[0],viewerAddress:t.viewerAddress,sip10Tokens:r,balanceHidden:n})}function j(e){let{transaction:{aggregated:t},sip10Tokens:n,balanceHidden:r}=e;return(0,i.jsx)(h,{event:t.assetEvents[1],viewerAddress:t.viewerAddress,sip10Tokens:n,balanceHidden:r})}function _(e){let{transaction:{aggregated:t},sip10Tokens:n,targetAssetId:r,balanceHidden:a}=e,s=r&&t.assetEvents.find(e=>{var t;return"ft"!==e.type&&(null===(t=e.data)||void 0===t?void 0:t.asset_identifier)===r});if(s){var o;let e=n.find(e=>e.principal===s.data.asset_identifier),t=(null==e?void 0:e.name)||f(s.data.asset_identifier),r=null===(o=s.data)||void 0===o?void 0:o.amount;return(0,i.jsx)(u.h3,{value:x(r,e),displayType:"text",thousandSeparator:!0,prefix:Number(r)>0?"":"-",renderText:e=>(0,i.jsx)(c.V,{title:e,unit:t||""})})}return t.receiveEvents.length>0?1===t.receiveEvents.length?(0,i.jsx)(h,{viewerAddress:t.viewerAddress,sip10Tokens:n,event:t.receiveEvents[0],balanceHidden:a}):(0,i.jsx)(m,{count:t.receiveEvents.length,assetUnit:"Assets"}):t.sendEvents.length>0?1===t.sendEvents.length?(0,i.jsx)(h,{viewerAddress:t.viewerAddress,sip10Tokens:n,event:t.sendEvents[0],balanceHidden:a}):(0,i.jsx)(m,{count:-t.sendEvents.length,assetUnit:"Assets"}):null}function y(e){let{transaction:{aggregated:t},sip10Tokens:n,targetAssetId:r,balanceHidden:a}=e;return r?null:t.receiveEvents.length>0&&t.sendEvents.length>0?1===t.sendEvents.length?(0,i.jsx)(h,{viewerAddress:t.viewerAddress,sip10Tokens:n,event:t.sendEvents[0],balanceHidden:a}):a?(0,i.jsx)(c.V,{hidden:!0}):(0,i.jsx)(m,{count:-t.sendEvents.length,assetUnit:"Assets"}):null}function w(e){var t,n,r;let{transaction:{aggregated:a},balanceHidden:s,sip10Tokens:o}=e,l=a.assetEvents[0],d=(null===(t=l.data)||void 0===t?void 0:t.type)!=="burn"&&a.viewerAddress===l.data.recipient;if("ft"===l.type){let e=null===(r=l.data.asset_identifier)||void 0===r?void 0:null===(n=r.split("::"))||void 0===n?void 0:n[0],t=o.find(t=>t.principal===e),a=(null==t?void 0:t.name)||f(l.data.asset_identifier);return s?(0,i.jsx)(c.V,{hidden:!0}):(0,i.jsx)(u.h3,{value:x(l.data.amount,t),displayType:"text",thousandSeparator:!0,prefix:d?"":"-",renderText:e=>(0,i.jsx)(c.V,{title:e,unit:a||""})})}return"nft"===l.type?(0,i.jsx)(c.V,{title:d?"1":"-1",unit:"NFT"}):null}function k(e){var t;let{transaction:{aggregated:n,data:r}}=e,a=n.assetEvents[0];return(null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.type)==="mint"?(0,i.jsx)(u.h3,{value:v(r.tx.fee_rate),displayType:"text",prefix:"-",thousandSeparator:!0,renderText:e=>(0,i.jsx)(c.V,{title:e,unit:"STX",customColor:"white60"})}):null}function A(e){let{transaction:t,balanceHidden:n}=e,{amount:r,incoming:a}=function(e){let{aggregated:t,events:n,data:i}=e,r=n[0],a=(null==r?void 0:r.data.amount)||i.stx_sent||i.stx_received,s=t.viewerAddress===(null==r?void 0:r.data.recipient);return{amount:a,feeRate:i.tx.fee_rate,incoming:s}}(t);return n?(0,i.jsx)(c.V,{hidden:!0}):(0,i.jsx)(u.h3,{value:v(r),displayType:"text",thousandSeparator:!0,prefix:a?"":"-",renderText:e=>(0,i.jsx)(c.V,{title:e,unit:"STX"})})}function I(e){let{transaction:t,balanceHidden:n,sip10Tokens:r,targetAssetId:a}=e,s=t.data.tx.tx_type;return"token_transfer"===s?(0,i.jsx)(A,{transaction:t,balanceHidden:n}):"smart_contract"===s?(0,i.jsx)(g,{transaction:t,balanceHidden:n}):"contract_call"===s?1===t.aggregated.assetEvents.length?(0,i.jsx)(w,{transaction:t,sip10Tokens:r,balanceHidden:n}):2===t.aggregated.assetEvents.length?(0,i.jsx)(T,{transaction:t,sip10Tokens:r,balanceHidden:n}):(0,i.jsx)(_,{transaction:t,sip10Tokens:r,targetAssetId:a,balanceHidden:n}):null}function E(e){let{transaction:t,balanceHidden:n,sip10Tokens:r,targetAssetId:a}=e;return"contract_call"===t.data.tx.tx_type?1===t.aggregated.assetEvents.length?(0,i.jsx)(k,{transaction:t}):2===t.aggregated.assetEvents.length?(0,i.jsx)(j,{transaction:t,sip10Tokens:r,balanceHidden:n}):(0,i.jsx)(y,{transaction:t,targetAssetId:a,sip10Tokens:r,balanceHidden:n}):null}var b=n(67294),S=n(17315),C=n(63541),N=n(96321),O=n(99465),R=n(34611),P=n(82493),H=n(17633);let D={size:16,color:l.default.colors.elevation100,weight:"bold"},V=a.ZP.div.withConfig({componentId:"sc-f7b47797-0"})(e=>{let{$backgroundColor:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",width:28,height:28,position:"relative",backgroundColor:t,borderRadius:"50%"}}),F=a.ZP.div.withConfig({componentId:"sc-f7b47797-1"})(e=>{let{theme:t}=e;return{position:"absolute",width:16,height:16,right:-8,bottom:0,borderRadius:"50%",backgroundColor:t.colors.elevation100,padding:1.5}}),Z=a.ZP.img.withConfig({componentId:"sc-f7b47797-2"})({width:"100%",height:"100%",borderRadius:"inherit"});function L(e){let{iconType:t,miniIconSrc:n,color:r}=e,s=(0,a.Fg)(),o=r?s.colors[r]:s.colors.white40;return(0,i.jsxs)(V,{$backgroundColor:o,children:["send"===t&&(0,i.jsx)(S.a,{...D}),"receive"===t&&(0,i.jsx)(C.K,{...D}),"mint"===t&&(0,i.jsx)(N.v,{...D}),"burn"===t&&(0,i.jsx)(O.O,{...D}),"contract"===t&&(0,i.jsx)(R.X,{...D}),"pending"===t&&(0,i.jsx)(P.S,{...D}),"failed"===t&&(0,i.jsx)(H.X,{...D}),n&&(0,i.jsx)(F,{children:(0,i.jsx)(Z,{src:n,alt:"protocol"})})]})}function G(e){let{transaction:t,sip10Tokens:n,isGlobalHistory:r}=e,a=r?"/wallet/stacks.svg":null,s=t.data.tx,o=t.aggregated.directionType,l=(0,b.useMemo)(()=>{let e=n.find(e=>{var t;return e.principal===(null===(t=s.contract_call)||void 0===t?void 0:t.contract_id)});if(e)return e;for(let e=0;e<t.aggregated.assetEvents.length;e+=1){let i=t.aggregated.assetEvents[e],r=n.find(e=>{var t;return e.principal===(null===(t=i.data.asset_identifier)||void 0===t?void 0:t.split("::")[0])});if(r)return r}},[s,n,t.aggregated.assetEvents]);if("pending"===t.data.tx.tx_status)return(0,i.jsx)(L,{color:"caution",iconType:"pending",miniIconSrc:(null==l?void 0:l.image)||a});if("success"===t.data.tx.tx_status){if(1===t.aggregated.assetEvents.length){var d,c;let e=t.aggregated.assetEvents[0],n=(null===(d=e.data)||void 0===d?void 0:d.type)==="mint",r=(null===(c=e.data)||void 0===c?void 0:c.type)==="burn";if(n)return(0,i.jsx)(L,{iconType:"mint",miniIconSrc:(null==l?void 0:l.image)||a});if(r)return(0,i.jsx)(L,{iconType:"burn",miniIconSrc:(null==l?void 0:l.image)||a});if("send"===o)return(0,i.jsx)(L,{iconType:"send",miniIconSrc:(null==l?void 0:l.image)||a});if("receive"===o)return(0,i.jsx)(L,{iconType:"receive",miniIconSrc:(null==l?void 0:l.image)||a})}return(0,i.jsx)(L,{iconType:"contract",miniIconSrc:(null==l?void 0:l.image)||a})}return(0,i.jsx)(L,{iconType:"failed",miniIconSrc:(null==l?void 0:l.image)||a})}let U="/wallet/stacks.svg";function X(e){let{transaction:{aggregated:t,data:n}}=e,r=t.assetEvents[0],a=(null==r?void 0:r.data.recipient)===t.viewerAddress;return"pending"===n.tx.tx_status?(0,i.jsx)(L,{iconType:"pending",miniIconSrc:U,color:"caution"}):"success"===n.tx.tx_status?(0,i.jsx)(L,{iconType:a?"receive":"send",miniIconSrc:U}):(0,i.jsx)(L,{iconType:"failed",miniIconSrc:U})}function K(e){let{transaction:t,sip10Tokens:n,isGlobalHistory:r}=e,{tx:a}=t.data,s=r?"/wallet/stacks.svg":null;if("token_transfer"===a.tx_type)return(0,i.jsx)(X,{transaction:t});if("contract_call"===a.tx_type)return(0,i.jsx)(G,{transaction:t,sip10Tokens:n,isGlobalHistory:r});let o="pending"===a.tx_status?"caution":"white40",l="pending"===a.tx_status?"pending":null;return"coinbase"===a.tx_type?(0,i.jsx)(L,{color:o,iconType:l||"receive",miniIconSrc:s}):(0,i.jsx)(L,{color:o,iconType:l||"contract",miniIconSrc:s})}let Y=a.ZP.p.withConfig({componentId:"sc-bd2002dd-0"})(e=>{var t;let{theme:n,$color:i}=e;return{...n.typography.body_medium_m,color:null!==(t=n.colors[i])&&void 0!==t?t:n.colors.white60,textAlign:"left"}}),$=a.ZP.span.withConfig({componentId:"sc-bd2002dd-1"})(e=>{let{theme:t}=e;return{color:t.colors.white100}}),M=a.ZP.span.withConfig({componentId:"sc-bd2002dd-2"})(e=>{let{theme:t}=e;return{color:t.colors.white60}});function B(e){var t,n;let{transaction:a,walletAddressesDictionary:s}=e,o=null===(n=a.data.tx.contract_call.contract_id)||void 0===n?void 0:null===(t=n.split("."))||void 0===t?void 0:t[1],l=1===a.aggregated.assetEvents.length,d=a.aggregated.assetEvents[0];if(l&&(null==d?void 0:d.data.type)==="transfer"){let e="receive"===a.aggregated.directionType?(null==d?void 0:d.data.sender)||"":(null==d?void 0:d.data.recipient)||"",t=s.get(e);if("multi"!==a.aggregated.directionType)return(0,i.jsxs)(Y,{children:[t&&(0,i.jsxs)($,{children:[t," "]}),(0,i.jsx)(M,{children:(0,r.Yh)(e,6)})]})}return(0,i.jsx)(M,{children:(0,r.Kj)(o,21)})}function q(e){var t,n;let{transaction:r}=e,a=(null===(n=r.data.tx.smart_contract)||void 0===n?void 0:null===(t=n.contract_id)||void 0===t?void 0:t.split("."))||[];return(0,i.jsx)(Y,{children:(0,i.jsx)(M,{children:a[1]})})}function W(e){let{transaction:{aggregated:t},walletAddressesDictionary:n}=e,a=t.assetEvents[0],s="receive"===t.directionType?(null==a?void 0:a.data.sender)||"":(null==a?void 0:a.data.recipient)||"",o=n.get(s);return(0,i.jsxs)(Y,{children:[o&&(0,i.jsxs)($,{children:[o," "]}),(0,i.jsx)(M,{children:(0,r.Yh)(s,6)})]})}function z(e){let{transaction:t,walletAddressesDictionary:n}=e,r=t.data.tx.tx_type;return"token_transfer"===r||"coinbase"===r?(0,i.jsx)(W,{transaction:t,walletAddressesDictionary:n}):"contract_call"===r?(0,i.jsx)(B,{transaction:t,walletAddressesDictionary:n}):"smart_contract"===r?(0,i.jsx)(q,{transaction:t}):null}var J=n(49573),Q=n(32837);let ee=a.ZP.p.withConfig({componentId:"sc-cb299839-0"})(e=>{var t;let{theme:n,$color:i}=e;return{...n.typography.body_medium_m,color:null!==(t=n.colors[i])&&void 0!==t?t:n.colors.white100,textAlign:"left"}});function et(e){let{transaction:{aggregated:t,data:n}}=e,a="pending"===n.tx.tx_status?"caution":"white100",s=n.tx,o=1===t.assetEvents.length,l=t.assetEvents[0],d=o&&(null==l?void 0:l.data.type)==="transfer",{t:c}=(0,J.$G)("translation",{keyPrefix:"PORTFOLIO.TRANSACTION_HISTORY"}),u=(0,b.useMemo)(()=>{var e,t;if(d)return"";if(s.contract_call.contract_id===Q.Ir)return c("TRANSACTION_CONTRACT_TOKEN_TRANSFER");switch(null===(e=s.contract_call)||void 0===e?void 0:e.function_name){case"delegate-stx":return c("TRANSACTION_STACKING_DELEGATION");case"revoke-delegate-stx":return c("TRANSACTION_STACKING_REVOKE_DELEGATION");case"allow-contract-caller":return c("TRANSACTION_STACKING_CONTRACT_AUTHORIZE");default:return(null===(t=s.contract_call)||void 0===t?void 0:t.function_name)||""}},[d,s,c]);if(d){if("send"===t.directionType)return(0,i.jsx)(ee,{$color:a,children:c("SEND")});if("receive"===t.directionType)return(0,i.jsx)(ee,{$color:a,children:c("RECEIVE")})}return(0,i.jsx)(ee,{$color:a,children:(0,r.Kj)(u)})}function en(e){let{transaction:{aggregated:t,data:n}}=e,r=t.assetEvents[0],a=(null==r?void 0:r.data.recipient)===t.viewerAddress,s="pending"===n.tx.tx_status,{t:o}=(0,J.$G)("translation",{keyPrefix:"PORTFOLIO.TRANSACTION_HISTORY"});return(0,i.jsxs)(ee,{$color:s?"caution":"white100",children:[o(a?"RECEIVE":"SEND"),s?"...":""]})}function ei(e){let{transaction:t}=e,{t:n}=(0,J.$G)("translation",{keyPrefix:"PORTFOLIO.TRANSACTION_HISTORY"}),r=t.data.tx.tx_type;return"token_transfer"===r||"coinbase"===r?(0,i.jsx)(en,{transaction:t}):"contract_call"===r?(0,i.jsx)(et,{transaction:t}):"smart_contract"===r?(0,i.jsx)(ee,{children:n("TRANSACTION_CONTRACT_DEPLOY")}):"poison_microblock"===r?(0,i.jsx)(ee,{children:n("TRANSACTION_POISON_MICRO_BLOCK")}):null}let er=a.ZP.button.withConfig({componentId:"sc-990356de-0"})(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",flexDirection:"row",width:"100%",padding:t.space.s,paddingLeft:t.space.m,paddingRight:t.space.m,background:"none","&:hover":{background:t.colors.white10},"&:focus":{background:t.colors.white15}}}),ea=a.ZP.div.withConfig({componentId:"sc-990356de-1"})(e=>{let{theme:t}=e;return{display:"flex",flex:1,flexDirection:"row",marginLeft:t.space.s}}),es=a.ZP.div.withConfig({componentId:"sc-990356de-2"})({display:"flex",flex:1,flexDirection:"column",alignItems:"flex-start"}),eo=a.ZP.div.withConfig({componentId:"sc-990356de-3"})(["display:none;@media ","{display:flex;flex:1;flex-direction:column;}"],l.H.min.md),el=a.ZP.div.withConfig({componentId:"sc-990356de-4"})({display:"flex",flex:1,flexDirection:"column",alignItems:"flex-end"});function ed(e){var t,n;let{transaction:a,walletAddressesDictionary:l,stxAddress:c,source:u,isGlobalHistory:p,targetAssetId:v,date:x}=e,{data:f=[]}=(0,o.Y)(),g=(0,d.tXe)(a,c),h=(null===(n=a.data)||void 0===n?void 0:null===(t=n.tx)||void 0===t?void 0:t.tx_status)==="pending";return(0,i.jsxs)(er,{"data-testid":"transaction-container",onClick:()=>{window.mixpanel.track("Click_Activity_Item",{source:u,chain:"STX"}),window.open((0,r.qg)(a.data.tx.tx_id,r.DEFAULT_MAINNET),"_blank","noopener,noreferrer")},children:[(0,i.jsx)(K,{isGlobalHistory:p,transaction:g,sip10Tokens:f}),(0,i.jsxs)(ea,{children:[(0,i.jsxs)(es,{children:[(0,i.jsx)(ei,{transaction:g}),(0,i.jsx)(z,{transaction:g,walletAddressesDictionary:l})]}),x&&(0,i.jsx)(eo,{children:(0,i.jsx)(s._B,{typography:"body_medium_m",color:"white60",children:x})}),(0,i.jsx)(el,{children:h?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I,{transaction:g,balanceHidden:!1,sip10Tokens:f}),(0,i.jsx)(E,{transaction:g,sip10Tokens:f,balanceHidden:!1,targetAssetId:v})]})})]})]})}},4505:function(e,t,n){n.d(t,{Y:function(){return p},i:function(){return u}});var i=n(41588),r=n(14212),a=n(30083),s=n(73096),o=n(65625),l=n(31690),d=n(78551),c=n(24139);let u=e=>{let t=(0,r.X)(e=>e.stacksAddress),n=(0,r.X)(e=>e.sip10ManageTokens),u=(0,s.Bl)(null!=t?t:"","USD",l._Yo,i.G8);return(0,d.a)({queryKey:["sip10-fungible-tokens",a.DEFAULT_MAINNET.type,t,"USD"],queryFn:u,enabled:!!(a.DEFAULT_MAINNET&&t),placeholderData:c.Wk,select:(0,o.to)({manageTokens:n,spamTokens:[],showSpamTokens:!1,select:e})})},p=()=>u(e=>e.filter(e=>e.isEnabled))},73096:function(e,t,n){n.d(t,{Bl:function(){return r},Xv:function(){return o},yp:function(){return s}});var i=n(31690);let r=(e,t,n,r)=>async()=>{let a=await (0,i.wtd)(e,n),s=await r.getSip10TokensInfo(a.map(e=>e.principal),t)||[];return a.map(e=>{let t=s.find(t=>t.contract===e.principal);return t?{...e,...t,name:t.name||e.principal.split(".")[1]}:e})},a=e=>{var t,n;return{name:e.name,principal:null!==(t=e.ticker)&&void 0!==t?t:e.name,balance:"0",total_sent:"",total_received:"",assetName:null!==(n=e.name)&&void 0!==n?n:e.ticker,ticker:e.ticker,protocol:"brc-20",supported:e.supported}},s=(e,t,n,r)=>async()=>{var s;let o=(await (0,i.oxA)(n.type,e)).map(e=>{var t;return{...e,ticker:null===(t=e.ticker)||void 0===t?void 0:t.toUpperCase()}}),l=null!==(s=o.filter(e=>e.ticker).map(e=>e.ticker))&&void 0!==s?s:[],d=await r.getBrc20Tokens(l,t)||[];return o.map(e=>{let t=d.find(t=>t.ticker===e.ticker);return t?{...e,priceChangePercentage24h:t.priceChangePercentage24h,currentPrice:t.currentPrice,tokenFiatRate:Number(t.tokenFiatRate),name:t.name}:e}).concat(d.filter(e=>!o.some(t=>t.ticker===e.ticker)).map(e=>a(e)))},o=(e,t,n)=>async()=>{let i=await e.getRuneFungibleTokens(t,!0);if(!Array.isArray(i)||0===i.length)return[];let r=i.map(e=>e.principal);try{let t=await e.getRuneFiatRatesByRuneIds(r,n);return i.map(e=>{var i;return{...e,tokenFiatRate:null===(i=t[e.principal])||void 0===i?void 0:i[n]}})}catch(e){return i}}}}]);